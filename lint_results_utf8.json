
> Anchor@0.0.0 lint
> eslint . --format json

[{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\cedra_service\\cedra-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\cedra_service\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\AdSquare.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\BoostDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\CreateDAO.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":158,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5586,5589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5586,5589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":158,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5611,5614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5611,5614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  ArrowLeft, Upload, Sparkles, Shield, Settings,\n  CheckCircle2, AlertTriangle, Globe, Twitter,\n  ExternalLink, ChevronRight, MessageSquare, Send\n} from 'lucide-react';\nimport { useWallet } from '../contexts/CedraWalletProvider';\nimport { useCreateDAO, useCheckSubnameAvailability } from '../useServices/useDAOCore';\nimport { useAlert } from './alert/AlertContext';\nimport { uploadToPinata } from '../services/pinataService';\n\ninterface CreateDAOProps {\n  onBack: () => void;\n}\n\nconst CreateDAO: React.FC<CreateDAOProps> = ({ onBack }) => {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [formData, setFormData] = useState({\n    name: '',\n    subname: '',\n    description: '',\n    chain: 'cedra',\n    minimumStake: '6',\n    logo: null as File | null,\n    background: null as File | null,\n    logoUrl: '',\n    backgroundUrl: '',\n    useUrls: false,\n    xLink: '',\n    discordLink: '',\n    telegramLink: '',\n    website: '',\n    category: 'DeFi'\n  });\n\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [transactionHash, setTransactionHash] = useState('');\n  const { showAlert } = useAlert();\n  const [showSuccessModal, setShowSuccessModal] = useState<null | { title: string; message: string }>(null);\n\n  const { account } = useWallet();\n  const { createDAO, createDAOWithUrls, isPending: isDAOPending } = useCreateDAO();\n  const { checkSubname } = useCheckSubnameAvailability();\n\n\n  const steps = [\n    { id: 1, title: 'Identity', icon: Sparkles },\n    { id: 2, title: 'Governance', icon: Settings },\n    { id: 3, title: 'Finalize', icon: Shield },\n  ];\n\n  const fileToBytes = (file: File): Promise<number[]> => {\n    return new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        const arrayBuffer = reader.result as ArrayBuffer;\n        const bytes = Array.from(new Uint8Array(arrayBuffer));\n        resolve(bytes);\n      };\n      reader.readAsArrayBuffer(file);\n    });\n  };\n\n  const handleFileUpload = async (file: File, type: 'logo' | 'background') => {\n    if (file.size > 10 * 1024 * 1024) {\n      setErrors({ ...errors, [type]: 'Max 10MB allowed' });\n      return;\n    }\n    try {\n      showAlert(`Uploading ${type} to IPFS...`, 'info');\n      const result = await uploadToPinata(file);\n      if (!result.success) throw new Error(result.error || 'Upload failed');\n\n      const urlField = type === 'logo' ? 'logoUrl' : 'backgroundUrl';\n      setFormData({\n        ...formData,\n        [type]: file,\n        [urlField]: result.ipfsUrl\n      });\n      setErrors({ ...errors, [type]: '' });\n      showAlert(`${type} ready!`, 'success');\n    } catch (error) {\n      console.error('File upload error:', error);\n      showAlert(`Upload failed`, 'error');\n    }\n  };\n\n  const validateSubname = async (subname: string): Promise<string | null> => {\n    if (!subname.trim()) return 'Subname required';\n    if (!/^[a-zA-Z0-9-]+$/.test(subname)) return 'Letters, numbers, hyphens only';\n    try {\n      const result = await checkSubname(subname);\n      return result.isAvailable ? null : 'Subname taken';\n    } catch { return 'Verify Error'; }\n  };\n\n  const validateStep = (step: number): boolean => {\n    const newErrors: { [key: string]: string } = {};\n    if (step === 1) {\n      if (!formData.name.trim()) newErrors.name = 'Name required';\n      if (!formData.subname.trim()) newErrors.subname = 'Subname required';\n      if (!formData.description.trim()) newErrors.description = 'Description required';\n      if (!formData.useUrls) {\n        if (!formData.logoUrl) newErrors.logo = 'Logo required';\n        if (!formData.backgroundUrl) newErrors.background = 'Banner required';\n      } else {\n        if (!formData.logoUrl) newErrors.logoUrl = 'Logo URL required';\n        if (!formData.backgroundUrl) newErrors.backgroundUrl = 'Banner URL required';\n      }\n    } else if (step === 2) {\n      const stake = parseFloat(formData.minimumStake);\n      if (isNaN(stake) || stake < 6) newErrors.minimumStake = 'Min 6 CEDRA';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!validateStep(3)) return;\n    if (!account) { showAlert('Connect Wallet', 'error'); return; }\n\n    const subNameErr = await validateSubname(formData.subname);\n    if (subNameErr) { setErrors({ ...errors, subname: subNameErr }); return; }\n\n    setIsSubmitting(true);\n    try {\n      const commonParams = {\n        name: formData.name.trim(),\n        subname: formData.subname.trim(),\n        description: formData.description.trim(),\n        minStakeToJoin: Math.round(parseFloat(formData.minimumStake) * 1000000),\n        xLink: formData.xLink,\n        discordLink: formData.discordLink,\n        telegramLink: formData.telegramLink,\n        website: formData.website,\n        category: formData.category\n      };\n\n      let result;\n      if (formData.useUrls || formData.logoUrl) {\n        result = await createDAOWithUrls({\n          ...commonParams,\n          logoUrl: formData.logoUrl,\n          backgroundUrl: formData.backgroundUrl\n        });\n      } else {\n        const logoBytes = await fileToBytes(formData.logo!);\n        const bgBytes = await fileToBytes(formData.background!);\n        result = await createDAO({\n          ...commonParams,\n          logo: new Uint8Array(logoBytes),\n          background: new Uint8Array(bgBytes)\n        });\n      }\n\n      const txHash = (result as any)?.hash || (result as any)?.args?.hash || '';\n      if (txHash) setTransactionHash(txHash);\n\n      setShowSuccessModal({\n        title: 'Deployment success',\n        message: 'Your organization has been initialized on the Cedra Network.'\n      });\n    } catch (err) {\n      console.error('Submit error:', err);\n      showAlert('Deployment failed', 'error');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6 animate-fade-in\">\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-semibold text-slate-500\">Organization name</label>\n                <input\n                  type=\"text\"\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  className={`nb-input ${errors.name ? 'border-red-500' : ''}`}\n                  placeholder=\"e.g. CEDRA FOUNDATION\"\n                />\n                {errors.name && <p className=\"text-red-500 text-[10px] font-semibold\">{errors.name}</p>}\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-semibold text-slate-500\">Unique subname</label>\n                <input\n                  type=\"text\"\n                  value={formData.subname}\n                  onChange={(e) => setFormData({ ...formData, subname: e.target.value })}\n                  className={`nb-input ${errors.subname ? 'border-red-500' : ''}`}\n                  placeholder=\"e.g. cedra-hq\"\n                />\n                {errors.subname && <p className=\"text-red-500 text-[10px] font-semibold\">{errors.subname}</p>}\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-semibold text-slate-500\">Description</label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  rows={3}\n                  className=\"nb-input\"\n                  placeholder=\"What is the primary goal of this organization?\"\n                />\n                {errors.description && <p className=\"text-red-500 text-[10px] font-semibold\">{errors.description}</p>}\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-semibold text-slate-500\">Ecosystem category</label>\n                <input\n                  type=\"text\"\n                  value={formData.category}\n                  onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n                  className=\"nb-input\"\n                  placeholder=\"e.g. DeFi, Gaming, Social\"\n                />\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <label className=\"text-[10px] font-semibold text-slate-500\">Visual identity</label>\n                  <div className=\"flex bg-white/5 rounded-lg p-0.5\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setFormData({ ...formData, useUrls: false })}\n                      className={`px-3 py-1 text-[9px] font-bold rounded-md transition-all ${!formData.useUrls ? 'bg-[#e1fd6a] text-black shadow-lg' : 'text-slate-500'}`}\n                    >\n                      Upload files\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setFormData({ ...formData, useUrls: true })}\n                      className={`px-3 py-1 text-[9px] font-bold rounded-md transition-all ${formData.useUrls ? 'bg-[#e1fd6a] text-black shadow-lg' : 'text-slate-500'}`}\n                    >\n                      Use links\n                    </button>\n                  </div>\n                </div>\n\n                {formData.useUrls ? (\n                  <div className=\"space-y-3\">\n                    <input\n                      type=\"url\"\n                      value={formData.logoUrl}\n                      onChange={(e) => setFormData({ ...formData, logoUrl: e.target.value })}\n                      className={`nb-input text-xs ${errors.logoUrl ? 'border-red-500' : ''}`}\n                      placeholder=\"Logo URL (IPFS or HTTPS)\"\n                    />\n                    <input\n                      type=\"url\"\n                      value={formData.backgroundUrl}\n                      onChange={(e) => setFormData({ ...formData, backgroundUrl: e.target.value })}\n                      className={`nb-input text-xs ${errors.backgroundUrl ? 'border-red-500' : ''}`}\n                      placeholder=\"Banner URL\"\n                    />\n                  </div>\n                ) : (\n                  <div className=\"flex gap-4\">\n                    <div\n                      onClick={() => document.getElementById('logo')?.click()}\n                      className={`flex-1 border border-dashed aspect-video flex flex-col items-center justify-center cursor-pointer rounded-2xl transition-all ${formData.logo ? 'bg-[#e1fd6a]/10 border-[#e1fd6a]' : 'bg-white/5 border-white/5 hover:border-white/10'}`}\n                    >\n                      {formData.logo ? <CheckCircle2 className=\"text-[#e1fd6a]\" /> : <Upload size={18} className=\"text-slate-500\" />}\n                      <span className=\"text-[9px] font-bold mt-2 text-slate-400\">{formData.logo ? 'Logo added' : 'Add logo'}</span>\n                      <input id=\"logo\" type=\"file\" className=\"hidden\" onChange={(e) => e.target.files?.[0] && handleFileUpload(e.target.files[0], 'logo')} />\n                    </div>\n                    <div\n                      onClick={() => document.getElementById('bg')?.click()}\n                      className={`flex-1 border border-dashed aspect-video flex flex-col items-center justify-center cursor-pointer rounded-2xl transition-all ${formData.background ? 'bg-[#e1fd6a]/10 border-[#e1fd6a]' : 'bg-white/5 border-white/5 hover:border-white/10'}`}\n                    >\n                      {formData.background ? <CheckCircle2 className=\"text-[#e1fd6a]\" /> : <Upload size={18} className=\"text-slate-500\" />}\n                      <span className=\"text-[9px] font-bold mt-2 text-slate-400\">{formData.background ? 'Banner added' : 'Add banner'}</span>\n                      <input id=\"bg\" type=\"file\" className=\"hidden\" onChange={(e) => e.target.files?.[0] && handleFileUpload(e.target.files[0], 'background')} />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-4 pt-2\">\n                <label className=\"text-[10px] font-semibold text-slate-500\">Social connections</label>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3 nb-input bg-white/[0.05] focus-within:border-[#e1fd6a]/30\">\n                    <Globe size={14} className=\"text-slate-500\" />\n                    <input type=\"url\" placeholder=\"Website URL\" value={formData.website} onChange={(e) => setFormData({ ...formData, website: e.target.value })} className=\"bg-transparent border-none focus:outline-none text-xs flex-1\" />\n                  </div>\n                  <div className=\"flex items-center gap-3 nb-input bg-white/[0.05] focus-within:border-[#e1fd6a]/30\">\n                    <Twitter size={14} className=\"text-slate-500\" />\n                    <input type=\"url\" placeholder=\"X (Twitter) Profile\" value={formData.xLink} onChange={(e) => setFormData({ ...formData, xLink: e.target.value })} className=\"bg-transparent border-none focus:outline-none text-xs flex-1\" />\n                  </div>\n                  <div className=\"flex items-center gap-3 nb-input bg-white/[0.05] focus-within:border-[#e1fd6a]/30\">\n                    <MessageSquare size={14} className=\"text-slate-500\" />\n                    <input type=\"url\" placeholder=\"Discord Server Link\" value={formData.discordLink} onChange={(e) => setFormData({ ...formData, discordLink: e.target.value })} className=\"bg-transparent border-none focus:outline-none text-xs flex-1\" />\n                  </div>\n                  <div className=\"flex items-center gap-3 nb-input bg-white/[0.05] focus-within:border-[#e1fd6a]/30\">\n                    <Send size={14} className=\"text-slate-500\" />\n                    <input type=\"url\" placeholder=\"Telegram Group/Channel\" value={formData.telegramLink} onChange={(e) => setFormData({ ...formData, telegramLink: e.target.value })} className=\"bg-transparent border-none focus:outline-none text-xs flex-1\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      case 2:\n        return (\n          <div className=\"space-y-8 animate-fade-in\">\n            <div className=\"p-4 bg-[#e1fd6a]/10 border border-[#e1fd6a]/20 rounded-2xl flex gap-4\">\n              <AlertTriangle className=\"text-[#e1fd6a] shrink-0\" size={20} />\n              <div>\n                <h4 className=\"text-sm font-bold text-white mb-1 tracking-tight\">Governance setup</h4>\n                <p className=\"text-xs text-slate-400 font-medium\">Define the minimum tokens a user must stake to become a voting member. This ensures long-term commitment and platform stability.</p>\n              </div>\n            </div>\n            <div className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-semibold text-slate-500\">Minimum staking requirement</label>\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"flex-1 relative\">\n                    <input\n                      type=\"number\"\n                      min=\"6\"\n                      value={formData.minimumStake}\n                      onChange={(e) => setFormData({ ...formData, minimumStake: e.target.value })}\n                      className=\"nb-input text-3xl font-bold h-16 pl-6 focus:border-[#e1fd6a]\"\n                    />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-xl font-black italic text-white\">CEDRA</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      case 3:\n        return (\n          <div className=\"space-y-8 animate-fade-in\">\n            <div className=\"border-b border-white/5 pb-2\">\n              <h3 className=\"text-xl font-bold text-white tracking-tight\">Final summary</h3>\n            </div>\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center gap-5 p-4 bg-white/5 rounded-2xl\">\n                <div className=\"w-16 h-16 rounded-xl bg-[#e1fd6a] flex items-center justify-center overflow-hidden shrink-0\">\n                  {formData.logoUrl ? (\n                    <img src={formData.logoUrl} className=\"w-full h-full object-cover\" alt=\"logo\" />\n                  ) : (\n                    <span className=\"text-black font-black text-2xl\">{formData.name.charAt(0)}</span>\n                  )}\n                </div>\n                <div className=\"min-w-0\">\n                  <h4 className=\"text-xl font-bold text-white truncate\">{formData.name}</h4>\n                  <p className=\"text-[#e1fd6a] text-[10px] font-bold\">{formData.category}</p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-3\">\n                <div className=\"bg-white/5 border border-white/5 p-4 flex justify-between items-center rounded-2xl\">\n                  <span className=\"text-[10px] font-semibold text-slate-500\">Stake to join</span>\n                  <span className=\"font-bold text-white\">{formData.minimumStake} CEDRA</span>\n                </div>\n                <div className=\"bg-white/5 border border-white/5 p-4 flex justify-between items-center rounded-2xl\">\n                  <span className=\"text-[10px] font-semibold text-slate-500\">Subname handle</span>\n                  <span className=\"font-bold text-[#e1fd6a]\">@{formData.subname}</span>\n                </div>\n                <div className=\"bg-white/5 border border-white/5 p-4 flex justify-between items-center rounded-2xl\">\n                  <span className=\"text-[10px] font-semibold text-slate-500\">Social channels</span>\n                  <div className=\"flex gap-3\">\n                    {formData.website && <Globe size={14} className=\"text-[#e1fd6a]\" />}\n                    {formData.xLink && <Twitter size={14} className=\"text-[#e1fd6a]\" />}\n                    {formData.discordLink && <MessageSquare size={14} className=\"text-[#e1fd6a]\" />}\n                    {formData.telegramLink && <Send size={14} className=\"text-[#e1fd6a]\" />}\n                  </div>\n                </div>\n                <div className=\"bg-[#e1fd6a]/5 border border-[#e1fd6a]/10 p-4 flex justify-between items-center rounded-2xl\">\n                  <span className=\"text-[10px] font-semibold text-slate-500\">Deployment fee</span>\n                  <span className=\"font-bold text-[#e1fd6a]\">100 CEDRA</span>\n                </div>\n              </div>\n\n              <div className=\"p-4 bg-white/5 border border-white/5 rounded-2xl text-[11px] text-slate-400 italic\">\n                \"{formData.description}\"\n              </div>\n            </div>\n\n            {transactionHash && (\n              <div className=\"p-4 bg-[#10b981]/10 border border-[#10b981]/20 rounded-2xl space-y-2\">\n                <div className=\"flex items-center gap-2 text-[#10b981] font-bold text-xs\">\n                  <CheckCircle2 size={16} /> Transaction broadcasted\n                </div>\n                <a\n                  href={`https://explorer.cedra.network/txn/${transactionHash}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"text-[11px] font-bold text-white flex items-center gap-2 hover:text-[#e1fd6a] transition-colors\"\n                >\n                  View on explorer <ExternalLink size={12} />\n                </a>\n              </div>\n            )}\n          </div>\n        );\n      default: return null;\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto py-20 px-8\">\n      <button\n        onClick={onBack}\n        className=\"flex items-center gap-2 text-xs font-medium text-white/40 hover:text-white transition-colors mb-8 group\"\n      >\n        <ArrowLeft size={14} className=\"group-hover:-translate-x-1 transition-transform\" />\n        Discard and Go Back\n      </button>\n\n      <div className=\"mb-10 text-center\">\n        <h1 className=\"text-3xl font-semibold text-white tracking-tight mb-2\">Create Organization</h1>\n      </div>\n\n      <div className=\"flex justify-between items-center mb-10 relative px-4\">\n        <div className=\"absolute top-1/2 left-0 w-full h-[1px] bg-white/10 -translate-y-1/2 z-0\" />\n        {steps.map((s) => {\n          const Icon = s.icon;\n          const isActive = currentStep === s.id;\n          const isDone = currentStep > s.id;\n          return (\n            <div key={s.id} className=\"relative z-10 flex flex-col items-center\">\n              <div className={`w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 border ${isActive\n                ? 'bg-[#e1fd6a] border-[#e1fd6a] text-black shadow-[0_0_20px_rgba(225,253,106,0.3)]'\n                : isDone\n                  ? 'bg-[#151618] border-[#e1fd6a]/50 text-[#e1fd6a]'\n                  : 'bg-[#1c1d21] border-white/10 text-white/20'\n                }`}>\n                {isDone ? <CheckCircle2 size={18} /> : <Icon size={18} />}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      <div className=\"nb-card !bg-[#1c1d21] border-white/5 p-8 flex flex-col\">\n        <form onSubmit={handleSubmit} className=\"flex-1 flex flex-col\">\n          <div className=\"flex-1\">\n            {renderStepContent()}\n          </div>\n\n          <div className=\"mt-10 flex items-center justify-between gap-4 pt-8 border-t border-white/5\">\n            {currentStep > 1 && (\n              <button\n                type=\"button\"\n                onClick={() => setCurrentStep(currentStep - 1)}\n                className=\"px-6 py-2.5 rounded-xl border border-white/5 text-white/40 text-xs font-medium hover:bg-white/5\"\n              >\n                Back\n              </button>\n            )}\n            <div className=\"flex-1\" />\n            <div className=\"flex items-center gap-4\">\n              {currentStep < 3 ? (\n                <button\n                  type=\"button\"\n                  onClick={() => validateStep(currentStep) && setCurrentStep(currentStep + 1)}\n                  className=\"px-10 py-2.5 rounded-xl bg-[#e1fd6a] text-black text-xs font-semibold hover:brightness-105 transition-all flex items-center gap-2\"\n                >\n                  Next Step\n                  <ChevronRight size={14} />\n                </button>\n              ) : (\n                <button\n                  type=\"submit\"\n                  disabled={isSubmitting || isDAOPending}\n                  className=\"px-12 py-3 rounded-xl bg-[#e1fd6a] text-black text-sm font-semibold hover:brightness-105 transition-all disabled:opacity-50\"\n                >\n                  {isSubmitting ? 'Initializing...' : 'Confirm Deployment'}\n                </button>\n              )}\n            </div>\n          </div>\n        </form>\n      </div>\n\n      {showSuccessModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#151618]/90 backdrop-blur-md\">\n          <div className=\"nb-card !bg-[#1c1d21] border-white/10 max-w-sm w-full text-center p-10 shadow-2xl\">\n            <div className=\"w-20 h-20 bg-[#e1fd6a] rounded-3xl mx-auto mb-8 flex items-center justify-center text-black\">\n              <CheckCircle2 size={40} />\n            </div>\n            <h3 className=\"text-2xl font-semibold text-white tracking-tight mb-2\">{showSuccessModal.title}</h3>\n            <p className=\"text-sm font-medium text-white/40 mb-10\">{showSuccessModal.message}</p>\n            <button\n              onClick={() => { setShowSuccessModal(null); onBack(); }}\n              className=\"w-full py-4 bg-[#e1fd6a] text-black font-semibold rounded-2xl hover:brightness-105\"\n            >\n              Finish Setup\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CreateDAO;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\DAOCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\DAODetail.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_daoId' is defined but never used.","line":20,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"_daoId"},"fix":{"range":[852,867],"text":""},"desc":"Remove unused variable '_daoId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_tabId' is defined but never used.","line":20,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"_tabId"},"fix":{"range":[866,882],"text":""},"desc":"Remove unused variable '_tabId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Home, FileText, Wallet, Users, Coins, Shield, ChevronRight } from 'lucide-react';\nimport { FaXTwitter, FaGlobe } from 'react-icons/fa6';\nimport { DAO } from '../types/dao';\nimport DAOHome from './dao/DAOHome';\nimport DAOProposals from './dao/DAOProposals';\nimport DAOTreasury from './dao/DAOTreasury';\nimport DAOMembers from './dao/DAOMembers';\nimport DAOStaking from './dao/DAOStaking';\nimport DAOAdmin from './dao/DAOAdmin';\nimport { updateMetaTags, generateDAOMetaTags, resetToDefaultMetaTags } from '../utils/metaTags';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\nimport { cedraClient } from '../cedra_service/cedra-client';\n\ninterface DAODetailProps {\n  dao: DAO;\n  onBack: () => void;\n  sidebarCollapsed?: boolean;\n  onSidebarOpen?: () => void;\n  onActiveTabChange?: (_daoId: string, _tabId: string) => void;\n  activeTab?: string;\n}\n\nconst DAODetail: React.FC<DAODetailProps> = ({ dao, onBack, onActiveTabChange, activeTab: externalActiveTab }) => {\n  const [activeTab, setActiveTab] = useState('home');\n\n  // Sync with external active tab (from sidebar on mobile)\n  useEffect(() => {\n    if (externalActiveTab) {\n      setActiveTab(externalActiveTab);\n    }\n  }, [externalActiveTab]);\n\n  const [avatarError, setAvatarError] = useState(false);\n\n  // Membership for quick stake summary in test panel\n  // Social links and category\n  const [socialLinks, setSocialLinks] = useState<{ x?: string; discord?: string; telegram?: string; website?: string }>({});\n\n  useEffect(() => {\n    const fetchLinks = async () => {\n      try {\n        const res = await cedraClient.view({\n          payload: { function: `${MODULE_ADDRESS}::dao_core_file::get_dao_all_links`, functionArguments: [dao.id] }\n        });\n        if (Array.isArray(res) && res.length >= 4) {\n          const [x, discord, telegram, website] = res as string[];\n          setSocialLinks({\n            x: (x || '').trim() || undefined,\n            discord: (discord || '').trim() || undefined,\n            telegram: (telegram || '').trim() || undefined,\n            website: (website || '').trim() || undefined,\n          });\n        }\n      } catch (e) {\n        console.error('Error fetching social links:', e);\n      }\n    };\n    fetchLinks();\n  }, [dao.id]);\n\n  useEffect(() => {\n    if (dao.image) {\n      setAvatarError(false);\n      const img = new Image();\n      img.onerror = () => setAvatarError(true);\n      img.src = dao.image;\n    } else {\n      setAvatarError(true);\n    }\n  }, [dao.image]);\n\n\n\n\n  // Update meta tags when DAO changes\n  useEffect(() => {\n    const metaConfig = generateDAOMetaTags(dao);\n    updateMetaTags(metaConfig);\n\n    // Cleanup: reset to default meta tags when component unmounts\n    return () => {\n      resetToDefaultMetaTags();\n    };\n  }, [dao]);\n\n  // Fetch MOVE price for treasury display\n  // useEffect(() => {\n  //   const fetchMovePrice = async () => {\n  //     try {\n  //       const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=movement&vs_currencies=usd');\n  //       const data = await response.json();\n  //       if (data.movement && data.movement.usd) {\n  //         setMovePrice(data.movement.usd);\n  //       }\n  //     } catch (error) {\n  //       console.warn('Failed to fetch MOVE price from CoinGecko:', error);\n  //       // Remove $1 fallback; keep price unset so UI shows $0.00\n  //       setMovePrice(null);\n  //     }\n  //   };\n\n  //   fetchMovePrice();\n  //   // Refresh price every 5 minutes\n  //   const interval = setInterval(fetchMovePrice, 5 * 60 * 1000);\n  //   return () => clearInterval(interval);\n  // }, []);\n\n\n\n\n  const tabs = [\n    { id: 'home', label: 'Overview', icon: Home, color: 'text-blue-400' },\n    { id: 'proposals', label: 'Proposals', icon: FileText, color: 'text-green-400' },\n    { id: 'staking', label: 'Staking', icon: Coins, color: 'text-orange-400' },\n    { id: 'treasury', label: 'Treasury', icon: Wallet, color: 'text-yellow-400' },\n    { id: 'members', label: 'Members', icon: Users, color: 'text-pink-400' },\n    { id: 'admin', label: 'Admin', icon: Shield, color: 'text-purple-400' },\n  ];\n\n  // Handle tab change and notify parent\n  const handleTabChange = (tabId: string) => {\n    setActiveTab(tabId);\n    onActiveTabChange?.(dao.id, tabId);\n    try {\n      localStorage.setItem('app_selected_dao', JSON.stringify(dao));\n      localStorage.setItem('app_dao_active_tab', tabId);\n      localStorage.setItem('app_current_view', 'dao-detail');\n    } catch (e) {\n      console.error('Error updating local storage:', e);\n    }\n  };\n\n  const renderContent = () => {\n    switch (activeTab) {\n      case 'home':\n        return <DAOHome dao={dao} />;\n      case 'proposals':\n        return <DAOProposals dao={dao} />;\n      case 'staking':\n        return <DAOStaking dao={dao} />;\n      case 'treasury':\n        return <DAOTreasury dao={dao} />;\n      case 'members':\n        return <DAOMembers dao={dao} />;\n      case 'admin':\n        return <DAOAdmin dao={dao} />;\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"w-full pb-20\">\n      {/* Banner Background Area - Edge to Edge */}\n      <div className=\"relative w-full h-52 sm:h-80 overflow-hidden mb-[-120px] sm:mb-[-165px]\">\n        {dao.background ? (\n          <img\n            src={dao.background}\n            alt=\"Banner\"\n            className=\"w-full h-full object-cover shadow-2xl\"\n          />\n        ) : (\n          <div className=\"w-full h-full bg-[#1c1d21]\" />\n        )}\n        {/* Intense overlay for legibility as section moves higher */}\n        <div className=\"absolute inset-0 bg-gradient-to-t from-[#151618] via-transparent to-black/20\" />\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-6 relative z-10 space-y-8\">\n        {/* Breadcrumb Navigation */}\n        <div className=\"pt-4 flex items-center gap-2 text-[10px] font-bold\">\n          <button\n            onClick={onBack}\n            className=\"text-white/40 hover:text-[#e1fd6a] transition-colors flex items-center gap-2 group\"\n          >\n            <Home size={12} className=\"group-hover:scale-110 transition-transform\" />\n            <span>DAOs</span>\n          </button>\n          <ChevronRight size={10} className=\"text-white/20\" />\n          <span className=\"text-[#e1fd6a] truncate max-w-[150px] sm:max-w-none\">\n            {dao.name}\n          </span>\n        </div>\n\n        {/* DAO Header - Overlapping Circular Layout */}\n        <div className=\"flex flex-col md:flex-row items-center md:items-end gap-6 px-1 text-center md:text-left\">\n          {/* Circular Avatar with Ring */}\n          <div className=\"relative shrink-0 w-32 h-32 sm:w-40 sm:h-40 rounded-full border-[6px] border-[#151618] bg-[#151618] shadow-2xl overflow-hidden ring-1 ring-white/10 group\">\n            {dao.image && !avatarError ? (\n              <img\n                src={dao.image}\n                alt={dao.name}\n                className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n                onError={() => setAvatarError(true)}\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-5xl font-semibold bg-gradient-to-br from-white/10 to-white/5 text-white\">\n                {dao.name.charAt(0)}\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex-1 pb-2 space-y-3 w-full\">\n            <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n              <div className=\"flex flex-col md:flex-row items-center gap-3\">\n                <h1 className=\"text-3xl sm:text-5xl font-bold text-white tracking-tight\">{dao.name}</h1>\n                <div className=\"flex gap-1\">\n                  {socialLinks.website && (\n                    <a href={socialLinks.website} target=\"_blank\" rel=\"noreferrer\" className=\"p-2 text-white/60 hover:text-white transition-colors\">\n                      <FaGlobe size={18} />\n                    </a>\n                  )}\n                  {socialLinks.x && (\n                    <a href={socialLinks.x} target=\"_blank\" rel=\"noreferrer\" className=\"p-2 text-white/60 hover:text-white transition-colors\">\n                      <FaXTwitter size={18} />\n                    </a>\n                  )}\n                </div>\n              </div>\n            </div>\n            <p className=\"text-white/60 font-medium text-xs sm:text-base max-w-2xl leading-relaxed mx-auto md:mx-0\">\n              {dao.description}\n            </p>\n          </div>\n        </div>\n\n        {/* Navigation Tabs - Minimalist Style */}\n        <div className=\"border-b border-white/5 pt-2\">\n          <div className=\"flex gap-1 sm:gap-4 overflow-x-auto no-scrollbar scroll-smooth\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              const isActive = activeTab === tab.id;\n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => handleTabChange(tab.id)}\n                  className={`flex items-center gap-2 px-4 sm:px-6 py-4 transition-all relative text-xs sm:text-sm font-bold tracking-tight whitespace-nowrap ${isActive ? 'text-white' : 'text-white/70 hover:text-white'\n                    }`}\n                >\n                  <Icon size={14} className={isActive ? 'text-[#e1fd6a]' : 'text-white/40'} />\n                  <span>{tab.label}</span>\n                  {isActive && (\n                    <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-[#e1fd6a] shadow-[0_0_12px_rgba(225,253,106,0.6)]\" />\n                  )}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Active Tab Content - Full Width */}\n        <div className=\"animate-fade-in transition-all\">\n          {renderContent()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DAODetail;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\FeaturedDAOs.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'dao' is defined but never used.","line":9,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"dao"},"fix":{"range":[341,349],"text":""},"desc":"Remove unused variable 'dao'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Search, Plus, RefreshCw, Star } from 'lucide-react';\nimport DAOCard from './DAOCard';\nimport { DAO } from '../types/dao';\nimport { useFetchCreatedDAOs } from '../useServices/useFetchDAOs';\nimport { useFilter } from '../contexts/FilterContext';\n\ninterface FeaturedDAOsProps {\n  onDAOSelect: (dao: DAO) => void;\n  onCreateDAO?: () => void;\n  sidebarCollapsed?: boolean;\n}\n\nconst FeaturedDAOs: React.FC<FeaturedDAOsProps> = ({ onDAOSelect, onCreateDAO }) => {\n  const { daos, isLoading: isLoadingAll, error, refetch } = useFetchCreatedDAOs();\n  const {\n    categories,\n    filterByCategory,\n    filteredDAOs,\n    isFiltering,\n    fetchFeaturedDAOs\n  } = useFilter();\n\n  const [selectedCategory, setSelectedCategory] = useState('All');\n\n  const handleCategoryClick = (cat: string) => {\n    setSelectedCategory(cat);\n    if (cat === 'Featured') {\n      fetchFeaturedDAOs();\n    } else {\n      filterByCategory(cat);\n    }\n  };\n\n  const displayDAOs = selectedCategory === 'All' ? daos : filteredDAOs;\n  const isLoading = isLoadingAll || isFiltering;\n\n  // Add 'Featured' to categories if not already there, usually it's better as a separate button or special cat\n  const allCategories = categories.includes('Featured') ? categories : ['All', 'Featured', ...categories.filter(c => c !== 'All')];\n\n  return (\n    <div className=\"mb-12 w-full\">\n      <div className=\"flex flex-col gap-5 mb-10 pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"space-y-1\">\n            <h2 className=\"text-2xl font-semibold tracking-tighter text-white flex items-center gap-3\">\n              Explore Ecosystem\n              {selectedCategory === 'Featured' && <Star size={20} className=\"text-[#e1fd6a] fill-[#e1fd6a]\" />}\n            </h2>\n            <p className=\"text-xs font-medium text-white/30\">Curated Organizations</p>\n          </div>\n          <button\n            onClick={() => {\n              refetch();\n              if (selectedCategory !== 'All') handleCategoryClick(selectedCategory);\n            }}\n            disabled={isLoading}\n            className=\"text-white/20 hover:text-white transition-colors p-2 bg-white/[0.02] border border-white/5 rounded-xl\"\n            title=\"Refresh DAO list\"\n          >\n            <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\n          </button>\n        </div>\n\n        <div className=\"flex items-center gap-8 overflow-x-auto no-scrollbar\">\n          {allCategories.map((cat) => (\n            <button\n              key={cat}\n              onClick={() => handleCategoryClick(cat)}\n              className={`text-[11px] font-semibold transition-all whitespace-nowrap pb-2 border-b-2 ${selectedCategory === cat\n                ? 'text-[#e1fd6a] border-[#e1fd6a]'\n                : 'text-white/30 border-transparent hover:text-white'\n                }`}\n            >\n              {cat}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {isLoading && displayDAOs.length === 0 ? (\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"w-8 h-8 border-2 border-[#e1fd6a]/20 border-t-[#e1fd6a] rounded-full animate-spin\" />\n        </div>\n      ) : error ? (\n        <div className=\"mb-8 p-6 bg-red-400/10 border border-red-400/20 rounded-2xl\">\n          <div className=\"text-red-400 text-xs font-medium flex items-center gap-2\">\n            {error}\n          </div>\n        </div>\n      ) : displayDAOs.length === 0 ? (\n        <div className=\"text-center py-20 rounded-2xl\">\n          <div className=\"w-16 h-16 mx-auto mb-6 flex items-center justify-center\">\n            <Search className=\"w-8 h-8 text-white/20\" />\n          </div>\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Void Detected</h3>\n          <p className=\"text-white/40 text-xs font-medium mb-8 text-center\">No organizations found in {selectedCategory === 'All' ? 'the ecosystem' : `the ${selectedCategory} sector`}.</p>\n          {onCreateDAO && (\n            <button onClick={onCreateDAO} className=\"nb-button\">\n              <Plus className=\"w-4 h-4\" />\n              <span>Create First DAO</span>\n            </button>\n          )}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n          {displayDAOs.map((dao) => (\n            <DAOCard\n              key={dao.id}\n              dao={dao}\n              onClick={() => onDAOSelect(dao)}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FeaturedDAOs;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\Filter.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'dao' is defined but never used.","line":9,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"dao"},"fix":{"range":[341,349],"text":""},"desc":"Remove unused variable 'dao'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'handleSelectDAO'. Either include it or remove the dependency array.","line":64,"column":8,"nodeType":"ArrayExpression","endLine":64,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [results, selectedIndex, handleSelectDAO, onClose]","fix":{"range":[2432,2465],"text":"[results, selectedIndex, handleSelectDAO, onClose]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { X, Search, CornerDownLeft, Command, Hash, Loader2 } from 'lucide-react';\r\nimport { useFilter } from '../contexts/FilterContext';\r\nimport { DAO } from '../types/dao';\r\n\r\ninterface FilterProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSelect?: (dao: DAO) => void;\r\n}\r\n\r\nconst Filter: React.FC<FilterProps> = ({ isOpen, onClose, onSelect }) => {\r\n    const { searchDAOs, isFiltering, categories } = useFilter();\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [results, setResults] = useState<DAO[]>([]);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const [activeCategory, setActiveCategory] = useState('All');\r\n\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n    const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Fetch results as user types\r\n    useEffect(() => {\r\n        const timer = setTimeout(async () => {\r\n            if (isOpen) {\r\n                const searchResults = await searchDAOs(searchQuery);\r\n                // Filter by category if one is selected\r\n                const filtered = activeCategory === 'All'\r\n                    ? searchResults\r\n                    : searchResults.filter(dao => dao.category === activeCategory);\r\n                setResults(filtered || []);\r\n                setSelectedIndex(0);\r\n            }\r\n        }, 300);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [searchQuery, activeCategory, isOpen, searchDAOs]);\r\n\r\n    // Focus input on open\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setTimeout(() => inputRef.current?.focus(), 100);\r\n            setSearchQuery('');\r\n            setSelectedIndex(0);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Keyboard navigation\r\n    const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\r\n        if (e.key === 'ArrowDown') {\r\n            e.preventDefault();\r\n            setSelectedIndex(prev => (prev < results.length - 1 ? prev + 1 : prev));\r\n        } else if (e.key === 'ArrowUp') {\r\n            e.preventDefault();\r\n            setSelectedIndex(prev => (prev > 0 ? prev - 1 : prev));\r\n        } else if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            if (results[selectedIndex]) {\r\n                handleSelectDAO(results[selectedIndex]);\r\n            }\r\n        } else if (e.key === 'Escape') {\r\n            onClose();\r\n        }\r\n    }, [results, selectedIndex, onClose]);\r\n\r\n    const handleSelectDAO = (dao: DAO) => {\r\n        if (onSelect) {\r\n            onSelect(dao);\r\n        }\r\n        onClose();\r\n        // Fire external navigate event if needed\r\n        window.dispatchEvent(new CustomEvent('dao-selected', { detail: dao }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (modalRef.current && !modalRef.current.contains(event.target as Node)) {\r\n                onClose();\r\n            }\r\n        };\r\n\r\n        if (isOpen) {\r\n            document.addEventListener('mousedown', handleClickOutside);\r\n            document.body.style.overflow = 'hidden';\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n            document.body.style.overflow = 'unset';\r\n        };\r\n    }, [isOpen, onClose]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-start justify-center pt-[15vh] px-4\">\r\n            {/* Backdrop */}\r\n            <div\r\n                className=\"absolute inset-0 bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-300\"\r\n                onClick={onClose}\r\n            />\r\n\r\n            {/* Modal - Command Palette Style */}\r\n            <div\r\n                ref={modalRef}\r\n                onKeyDown={handleKeyDown}\r\n                className=\"relative w-full max-w-xl bg-[#1c1d21]/95 border border-white/10 rounded-2xl shadow-[0_32px_64px_-16px_rgba(0,0,0,0.6)] overflow-hidden animate-in zoom-in-95 slide-in-from-top-4 duration-200 backdrop-blur-xl\"\r\n            >\r\n                {/* Search Bar */}\r\n                <div className=\"flex items-center px-6 py-5 border-b border-white/5\">\r\n                    <Search className=\"w-5 h-5 text-white/40 mr-4\" />\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        placeholder=\"Search DAOs...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        className=\"flex-1 bg-transparent border-none outline-none text-white text-lg placeholder:text-white/20 font-medium\"\r\n                    />\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-1.5 hover:bg-white/5 rounded-md text-white/40 transition-colors\"\r\n                    >\r\n                        <X size={18} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Filter Shortcuts (Categories) */}\r\n                <div className=\"px-6 py-3 bg-white/[0.02] border-b border-white/5 flex items-center gap-2 overflow-x-auto no-scrollbar\">\r\n                    <div className=\"text-[10px] font-medium text-white/30 mr-2 flex items-center gap-1\">\r\n                        <Hash size={10} /> Filters\r\n                    </div>\r\n                    {['All', ...categories].map((cat) => (\r\n                        <button\r\n                            key={cat}\r\n                            onClick={() => setActiveCategory(cat)}\r\n                            className={`px-3 py-1 rounded-lg text-[11px] font-medium transition-all border whitespace-nowrap ${activeCategory === cat\r\n                                ? 'bg-[#e1fd6a]/10 border-[#e1fd6a]/20 text-[#e1fd6a]'\r\n                                : 'bg-white/5 border-white/5 text-white/40 hover:text-white'\r\n                                }`}\r\n                        >\r\n                            {cat}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Results List */}\r\n                <div className=\"max-h-[400px] overflow-y-auto py-2 no-scrollbar\">\r\n                    {isFiltering ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-20 gap-3\">\r\n                            <Loader2 className=\"w-8 h-8 text-[#e1fd6a] animate-spin\" />\r\n                            <span className=\"text-xs font-medium text-white/30\">Searching registry...</span>\r\n                        </div>\r\n                    ) : results.length > 0 ? (\r\n                        <div className=\"px-2 space-y-1\">\r\n                            {results.map((dao, index) => (\r\n                                <button\r\n                                    key={dao.id}\r\n                                    onClick={() => handleSelectDAO(dao)}\r\n                                    onMouseEnter={() => setSelectedIndex(index)}\r\n                                    className={`w-full flex items-center gap-4 p-4 rounded-xl transition-all text-left ${selectedIndex === index\r\n                                        ? 'bg-white/[0.08] ring-1 ring-white/10 translate-x-1'\r\n                                        : 'hover:bg-white/[0.03]'\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"w-12 h-12 rounded-xl border border-white/10 overflow-hidden bg-white/5 flex-shrink-0 relative group\">\r\n                                        <img\r\n                                            src={dao.image}\r\n                                            alt={dao.name}\r\n                                            className=\"w-full h-full object-cover transition-transform group-hover:scale-110\"\r\n                                            onError={(e) => {\r\n                                                (e.target as HTMLImageElement).src = `https://api.dicebear.com/7.x/identicon/svg?seed=${dao.id}`;\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"flex items-center gap-2 mb-1\">\r\n                                            <span className=\"text-sm font-medium text-white truncate\">{dao.name}</span>\r\n                                            <span className=\"px-1.5 py-0.5 bg-white/5 rounded text-[9px] font-medium text-white/40\">\r\n                                                {dao.category}\r\n                                            </span>\r\n                                        </div>\r\n                                        <p className=\"text-xs text-white/30 truncate font-normal\">\r\n                                            {dao.description || 'Decentralized organization on Anchor'}\r\n                                        </p>\r\n                                    </div>\r\n                                    {selectedIndex === index && (\r\n                                        <div className=\"p-2 text-white/60 bg-white/5 rounded-lg flex items-center gap-1\">\r\n                                            <span className=\"text-[10px] font-medium\">Select</span>\r\n                                            <CornerDownLeft size={12} />\r\n                                        </div>\r\n                                    )}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"py-20 text-center\">\r\n                            <span className=\"text-sm font-medium text-white/30\">\r\n                                {searchQuery ? 'No results found' : 'Type to discover DAOs'}\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"px-6 py-4 bg-black/40 border-t border-white/5 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-6\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span className=\"px-1.5 py-0.5 bg-white/10 rounded text-[9px] text-white/60 font-medium\">Esc</span>\r\n                            <span className=\"text-[10px] text-white/40 font-medium\">to close</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span className=\"px-1.5 py-0.5 bg-white/10 rounded text-[9px] text-white/60 font-medium\">Γå╡</span>\r\n                            <span className=\"text-[10px] text-white/40 font-medium\">to select</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 opacity-30 overflow-hidden\">\r\n                        <Command className=\"w-3 h-3 text-white/40\" />\r\n                        <span className=\"text-[9px] text-white/40 font-medium\">Powered by Anchor Registry</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Filter;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\GlobalActivityFeed.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[36,45],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'paginationType' is assigned a value but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"paginationType"},"fix":{"range":[553,584],"text":""},"desc":"Remove unused variable 'paginationType'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'paginationType' is assigned a value but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'enablePagination' is assigned a value but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"enablePagination"},"fix":{"range":[584,611],"text":""},"desc":"Remove unused variable 'enablePagination'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'enablePagination' is assigned a value but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'pagination' is assigned a value but never used.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"pagination"},"fix":{"range":[673,690],"text":""},"desc":"Remove unused variable 'pagination'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pagination' is assigned a value but never used.","line":25,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Activity, Globe, RefreshCw } from 'lucide-react';\nimport { useGlobalActivities } from '../useServices/useOptimizedActivityTracker';\nimport OptimizedActivityTable from './OptimizedActivityTable';\n\ninterface GlobalActivityFeedProps {\n  maxRows?: number;\n  showHeader?: boolean;\n  className?: string;\n  paginationType?: 'pagination' | 'loadMore' | 'infinite' | 'none';\n  enablePagination?: boolean;\n}\n\nconst GlobalActivityFeed: React.FC<GlobalActivityFeedProps> = ({\n  maxRows = 20,\n  showHeader = true,\n  className = '',\n  paginationType = 'loadMore',\n  enablePagination = true\n}) => {\n  const { \n    activities, \n    isLoading, \n    error, \n    pagination,\n    refetch\n  } = useGlobalActivities({\n    limit: maxRows,\n    page: 1\n  });\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {showHeader && (\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            <Globe className=\"w-5 h-5 text-blue-400\" />\n            <h2 className=\"text-xl font-bold text-white\">Global Activity Feed</h2>\n          </div>\n          <button\n            onClick={refetch}\n            disabled={isLoading}\n            className=\"p-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50\"\n            title=\"Refresh Global Activities\"\n          >\n            <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\n          </button>\n        </div>\n      )}\n\n      <OptimizedActivityTable\n        activities={activities}\n        isLoading={isLoading}\n        error={error}\n        onRefresh={refetch}\n        showUserColumn={true}\n        showDAOColumn={true}\n        showAmountColumn={true}\n        maxRows={maxRows}\n        title=\"Global Activity Feed\"\n      />\n    </div>\n  );\n};\n\nexport default GlobalActivityFeed;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\Header.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_view' is defined but never used.","line":10,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"_view"},"fix":{"range":[379,392],"text":""},"desc":"Remove unused variable '_view'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_daoId' is defined but never used.","line":15,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"_daoId"},"fix":{"range":[528,543],"text":""},"desc":"Remove unused variable '_daoId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_tabId' is defined but never used.","line":15,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"_tabId"},"fix":{"range":[542,558],"text":""},"desc":"Remove unused variable '_tabId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { LayoutGrid, BarChart2, Settings, Search, HelpCircle, Plus, Zap, Menu, X } from 'lucide-react';\nimport WalletConnectButton from './WalletConnect';\nimport Filter from './Filter';\nimport { useFilter } from '../contexts/FilterContext';\nimport mainLogo from '../assets/Logonew.png';\n\ninterface HeaderProps {\n  currentView: string;\n  onViewChange: (_view: string) => void;\n  onProfileClick?: () => void;\n  disableTheme?: boolean;\n  currentDAO?: string;\n  activeTab?: string;\n  onActiveTabChange?: (_daoId: string, _tabId: string) => void;\n}\n\nconst Header: React.FC<HeaderProps> = ({\n  currentView,\n  onViewChange,\n  onProfileClick,\n  currentDAO\n}) => {\n  const [isFilterOpen, setIsFilterOpen] = React.useState(false);\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n  useFilter();\n\n  // Keyboard shortcut listener\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setIsFilterOpen(true);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n\n  const menuItems = [\n    { id: 'home', label: 'Explore DAOs', icon: LayoutGrid },\n    { id: 'trending', label: 'Network Pulse', icon: BarChart2 },\n    { id: 'boost', label: 'Boost', icon: Zap },\n    { id: 'profile', label: 'My Profile', icon: Settings },\n  ];\n\n\n\n  return (\n    <header className=\"bg-[#0a0a0b]/95 backdrop-blur-2xl border-b border-white/5 sticky top-0 z-50\">\n      <div className=\"max-w-[1600px] mx-auto flex items-center justify-between px-4 sm:px-8 h-16 sm:h-20 lg:h-16\">\n        <div className=\"flex items-center gap-4 sm:gap-12\">\n          {/* Logo Section */}\n          <div\n            className=\"flex items-center gap-3 cursor-pointer group shrink-0\"\n            onClick={() => onViewChange('home')}\n          >\n            <div className=\"p-1.5 sm:p-2 bg-white rounded-lg sm:rounded-xl transition-all group-hover:scale-110 shadow-lg shadow-white/5\">\n              <img src={mainLogo} alt=\"Anchor\" className=\"w-5 h-5 sm:w-6 sm:h-6 object-contain brightness-0\" />\n            </div>\n            <span className=\"hidden xs:inline text-lg sm:text-xl font-semibold tracking-tighter text-white\">Anchor</span>\n            {currentView === 'dao-detail' && currentDAO && (\n              <div className=\"flex items-center gap-2 text-white/20 ml-2\">\n                <span className=\"text-lg\">/</span>\n                <span className=\"text-sm font-medium text-[#e1fd6a] truncate max-w-[150px]\">{currentDAO}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Desktop Nav - Keep original */}\n          <nav className=\"hidden lg:flex items-center gap-8\">\n            {menuItems.map((item) => {\n              const Icon = item.icon;\n              const isActive = currentView === item.id;\n              return (\n                <button\n                  key={item.id}\n                  onClick={() => onViewChange(item.id)}\n                  className={`flex items-center gap-2 text-xs font-semibold transition-all relative py-6 ${isActive ? 'text-[#e1fd6a]' : 'text-white/40 hover:text-white'\n                    }`}\n                >\n                  <Icon size={12} className={isActive ? 'text-[#e1fd6a]' : 'text-white/20'} />\n                  {item.label}\n                  {isActive && <div className=\"absolute bottom-0 left-0 right-0 h-[2px] bg-[#e1fd6a]\" />}\n                </button>\n              );\n            })}\n          </nav>\n\n        </div>\n\n        {/* Mobile Dropdown Menu */}\n        {isMenuOpen && (\n          <div className=\"lg:hidden absolute top-full left-0 right-0 bg-[#0d0d0e]/95 backdrop-blur-2xl border-b border-white/10 shadow-2xl animate-in slide-in-from-top duration-300 z-40 overflow-hidden\">\n            <div className=\"p-4 space-y-4 max-h-[80vh] overflow-y-auto\">\n              {/* Search Bar in Dropdown */}\n              <div\n                onClick={() => {\n                  setIsFilterOpen(true);\n                  setIsMenuOpen(false);\n                }}\n                className=\"flex items-center bg-white/[0.03] border border-white/5 rounded-2xl px-4 py-3 group cursor-pointer hover:border-white/20 transition-all shadow-inner\"\n              >\n                <Search size={16} className=\"text-[#e1fd6a] group-hover:text-white transition-colors\" />\n                <span className=\"text-sm font-medium text-white/40 ml-3 flex-1\">Search Organizations...</span>\n              </div>\n\n              {/* Navigation Items */}\n              <div className=\"grid grid-cols-1 gap-1\">\n                {menuItems.map((item) => {\n                  const Icon = item.icon;\n                  const isActive = currentView === item.id;\n                  return (\n                    <button\n                      key={item.id}\n                      onClick={() => {\n                        onViewChange(item.id);\n                        setIsMenuOpen(false);\n                      }}\n                      className={`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${isActive ? 'bg-[#e1fd6a]/10 text-[#e1fd6a]' : 'text-white/60 hover:text-white hover:bg-white/5'\n                        }`}\n                    >\n                      <Icon size={18} className={isActive ? 'text-[#e1fd6a]' : 'text-white/30'} />\n                      <span className=\"text-sm font-bold\">{item.label}</span>\n                    </button>\n                  );\n                })}\n              </div>\n\n              {/* Bottom Action */}\n              <button\n                onClick={() => {\n                  onViewChange('create');\n                  setIsMenuOpen(false);\n                }}\n                className=\"w-full flex items-center justify-center gap-2 py-4 bg-[#e1fd6a] text-black rounded-2xl text-xs font-black hover:brightness-110 active:scale-95 transition-all shadow-lg shadow-[#e1fd6a]/10\"\n              >\n                <Plus size={16} />\n                Initialize DAO\n              </button>\n            </div>\n          </div>\n        )}\n\n\n        <div className=\"flex items-center gap-2 sm:gap-4\">\n          {/* Desktop Search - Keep original */}\n          <div\n            onClick={() => setIsFilterOpen(true)}\n            className=\"hidden md:flex items-center bg-white/[0.03] border border-white/5 rounded-full px-4 py-2 w-48 xl:w-60 group cursor-pointer hover:border-white/20 transition-all shadow-inner\"\n          >\n            <Search size={14} className=\"text-white/40 group-hover:text-white transition-colors\" />\n            <span className=\"text-[11px] font-medium text-white/40 ml-3 flex-1\">Search...</span>\n            <div className=\"hidden xl:flex items-center gap-1 px-1.5 py-0.5 bg-white/5 rounded border border-white/5\">\n              <span className=\"text-[9px] font-medium text-white/30\">CMD</span>\n              <span className=\"text-[9px] font-medium text-white/30\">K</span>\n            </div>\n          </div>\n\n          {/* Desktop Initialize - Keep original */}\n          <button\n            onClick={() => onViewChange('create')}\n            className=\"hidden sm:flex items-center gap-2 px-5 py-2 bg-white text-black hover:bg-white/90 rounded-full text-xs font-semibold transition-all shadow-xl active:scale-95\"\n          >\n            <Plus size={12} />\n            Initialize\n          </button>\n\n          <div className=\"flex items-center gap-1 sm:gap-2\">\n            <button className=\"hidden sm:block p-2 text-white/40 hover:text-white transition-colors\">\n              <HelpCircle size={20} />\n            </button>\n            <WalletConnectButton onProfileClick={onProfileClick} />\n\n            {/* Mobile Menu Button - Visible on mobile/tablet */}\n            <button\n              onClick={() => setIsMenuOpen(!isMenuOpen)}\n              className=\"lg:hidden p-2 ml-1 text-white/80 hover:text-white transition-colors bg-white/5 rounded-full\"\n            >\n              {isMenuOpen ? <X size={20} /> : <Menu size={20} />}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <Filter\n        isOpen={isFilterOpen}\n        onClose={() => setIsFilterOpen(false)}\n        onSelect={() => {\n          onViewChange('dao-detail');\n        }}\n      />\n    </header>\n  );\n};\n\nexport default Header;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\LockedFeatureOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\MainDashboard.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'dao' is defined but never used.","line":7,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"dao"},"fix":{"range":[199,207],"text":""},"desc":"Remove unused variable 'dao'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport StatsOverview from './StatsOverview';\nimport FeaturedDAOs from './FeaturedDAOs';\nimport { DAO } from '../types/dao';\n\ninterface MainDashboardProps {\n  onDAOSelect: (dao: DAO) => void;\n  onCreateDAO?: () => void;\n  sidebarCollapsed?: boolean;\n}\n\nconst MainDashboard: React.FC<MainDashboardProps> = ({ onDAOSelect, onCreateDAO }) => {\n  return (\n    <div className=\"container mx-auto px-8 md:px-12 py-10 space-y-16\">\n      {/* Main Section: Explorer */}\n      <section>\n        <FeaturedDAOs onDAOSelect={onDAOSelect} onCreateDAO={onCreateDAO} />\n      </section>\n\n      {/* Pulse Section: Stats moved to bottom and refined */}\n      <section className=\"pt-12 border-t border-white/5\">\n        <div className=\"mb-8 flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-xl font-semibold tracking-tight text-white\">Network Pulse</h2>\n            <div className=\"flex items-center gap-1.5 px-2 py-0.5 bg-[#e1fd6a]/10 rounded text-[10px] font-medium text-[#e1fd6a]\">\n              <div className=\"w-1 h-1 bg-[#e1fd6a] rounded-full animate-pulse\" />\n              Live\n            </div>\n          </div>\n        </div>\n        <StatsOverview />\n      </section>\n    </div>\n  );\n};\n\nexport default MainDashboard;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\MemberProfileCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\OptimizedActivityTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\Pagination.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'page' is defined but never used.","line":11,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"page"},"fix":{"range":[283,295],"text":""},"desc":"Remove unused variable 'page'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'limit' is defined but never used.","line":12,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"limit"},"fix":{"range":[325,338],"text":""},"desc":"Remove unused variable 'limit'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from 'lucide-react';\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  totalItems: number;\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n  limit: number;\n  onPageChange: (page: number) => void;\n  onLimitChange?: (limit: number) => void;\n  className?: string;\n  showLimitSelector?: boolean;\n  showItemsInfo?: boolean;\n}\n\nconst Pagination: React.FC<PaginationProps> = ({\n  currentPage,\n  totalPages,\n  totalItems,\n  hasNextPage,\n  hasPreviousPage,\n  limit,\n  onPageChange,\n  onLimitChange,\n  className = '',\n  showLimitSelector = true,\n  showItemsInfo = true\n}) => {\n  const getVisiblePages = () => {\n    const delta = 2;\n    const range = [];\n    const rangeWithDots = [];\n\n    for (let i = Math.max(2, currentPage - delta); i <= Math.min(totalPages - 1, currentPage + delta); i++) {\n      range.push(i);\n    }\n\n    if (currentPage - delta > 2) {\n      rangeWithDots.push(1, '...');\n    } else {\n      rangeWithDots.push(1);\n    }\n\n    rangeWithDots.push(...range);\n\n    if (currentPage + delta < totalPages - 1) {\n      rangeWithDots.push('...', totalPages);\n    } else if (totalPages > 1) {\n      rangeWithDots.push(totalPages);\n    }\n\n    // Remove duplicates\n    return rangeWithDots.filter((item, index, arr) => arr.indexOf(item) === index);\n  };\n\n  const visiblePages = getVisiblePages();\n  const startItem = (currentPage - 1) * limit + 1;\n  const endItem = Math.min(currentPage * limit, totalItems);\n\n  if (totalPages <= 1) {\n    return null;\n  }\n\n  return (\n    <div className={`flex flex-col sm:flex-row items-center justify-between space-y-3 sm:space-y-0 ${className}`}>\n      {/* Items info */}\n      {showItemsInfo && (\n        <div className=\"text-sm text-gray-400\">\n          Showing {startItem} to {endItem} of {totalItems} activities\n        </div>\n      )}\n\n      {/* Pagination controls */}\n      <div className=\"flex items-center space-x-2\">\n        {/* Previous button */}\n        <button\n          onClick={() => onPageChange(currentPage - 1)}\n          disabled={!hasPreviousPage}\n          className=\"flex items-center px-3 py-2 text-sm font-medium text-gray-300 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          <ChevronLeft className=\"w-4 h-4 mr-1\" />\n          Previous\n        </button>\n\n        {/* Page numbers */}\n        <div className=\"flex items-center space-x-1\">\n          {visiblePages.map((page, index) => (\n            <React.Fragment key={index}>\n              {page === '...' ? (\n                <span className=\"px-3 py-2 text-gray-400\">\n                  <MoreHorizontal className=\"w-4 h-4\" />\n                </span>\n              ) : (\n                <button\n                  onClick={() => onPageChange(Number(page))}\n                  className={`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${\n                    currentPage === page\n                      ? 'bg-blue-600 text-white'\n                      : 'text-gray-300 bg-white/5 border border-white/10 hover:bg-white/10'\n                  }`}\n                >\n                  {page}\n                </button>\n              )}\n            </React.Fragment>\n          ))}\n        </div>\n\n        {/* Next button */}\n        <button\n          onClick={() => onPageChange(currentPage + 1)}\n          disabled={!hasNextPage}\n          className=\"flex items-center px-3 py-2 text-sm font-medium text-gray-300 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          Next\n          <ChevronRight className=\"w-4 h-4 ml-1\" />\n        </button>\n      </div>\n\n      {/* Items per page selector */}\n      {showLimitSelector && onLimitChange && (\n        <div className=\"flex items-center space-x-2 text-sm\">\n          <span className=\"text-gray-400\">Show:</span>\n          <select\n            value={limit}\n            onChange={(e) => onLimitChange(Number(e.target.value))}\n            className=\"professional-input px-2 py-1 rounded\"\n          >\n            <option value={10}>10</option>\n            <option value={25}>25</option>\n            <option value={50}>50</option>\n            <option value={100}>100</option>\n          </select>\n          <span className=\"text-gray-400\">per page</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Pagination;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\PlatformGrowthCharts.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'LineChart' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"LineChart"},"fix":{"range":[36,46],"text":""},"desc":"Remove unused variable 'LineChart'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LineChart' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'Line' is defined but never used.","line":2,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"Line"},"fix":{"range":[45,51],"text":""},"desc":"Remove unused variable 'Line'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Line' is defined but never used.","line":2,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'BarChart' is defined but never used.","line":2,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"BarChart"},"fix":{"range":[68,78],"text":""},"desc":"Remove unused variable 'BarChart'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarChart' is defined but never used.","line":2,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":52},{"ruleId":"no-unused-vars","severity":1,"message":"'Bar' is defined but never used.","line":2,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"Bar"},"fix":{"range":[78,83],"text":""},"desc":"Remove unused variable 'Bar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bar' is defined but never used.","line":2,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":57},{"ruleId":"no-unused-vars","severity":1,"message":"'XAxis' is defined but never used.","line":2,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"XAxis"},"fix":{"range":[83,90],"text":""},"desc":"Remove unused variable 'XAxis'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XAxis' is defined but never used.","line":2,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":64},{"ruleId":"no-unused-vars","severity":1,"message":"'YAxis' is defined but never used.","line":2,"column":66,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"YAxis"},"fix":{"range":[90,97],"text":""},"desc":"Remove unused variable 'YAxis'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'YAxis' is defined but never used.","line":2,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":71},{"ruleId":"no-unused-vars","severity":1,"message":"'lastUpdated' is assigned a value but never used.","line":7,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastUpdated"},"fix":{"range":[380,393],"text":""},"desc":"Remove unused variable 'lastUpdated'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lastUpdated' is assigned a value but never used.","line":7,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":47},{"ruleId":"no-unused-vars","severity":1,"message":"'refresh' is assigned a value but never used.","line":7,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"refresh"},"fix":{"range":[393,402],"text":""},"desc":"Remove unused variable 'refresh'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'refresh' is assigned a value but never used.","line":7,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { LineChart, Line, AreaChart, Area, BarChart, Bar, XAxis, YAxis, ResponsiveContainer } from 'recharts';\nimport { TrendingUp, Users, Building2, Vote, RefreshCw, AlertTriangle } from 'lucide-react';\nimport { usePlatformStats } from '../useServices/usePlatformStats';\n\nconst PlatformGrowthCharts: React.FC = () => {\n  const { stats, isLoading, error, lastUpdated, refresh } = usePlatformStats();\n  // Debug platform stats\n  React.useEffect(() => {\n    console.log(' Current platform stats:', stats);\n  }, [stats]);\n\n  // Create time-series data for charts showing daily activity\n  // Since we don't have historical data, we'll show daily trend based on current values\n  const generateDailyTrendData = (currentValue: number) => {\n    // Create daily activity data for the last 7 days\n    const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n    return days.map((day, index) => ({\n      name: day,\n      value: Math.max(0, Math.floor((currentValue * (index + 1)) / days.length))\n    }));\n  };\n\n  const daoGrowthData = generateDailyTrendData(stats.totalDAOs);\n  const userGrowthData = generateDailyTrendData(stats.totalMembers);\n  const votingActivityData = generateDailyTrendData(stats.totalVotes);\n  const proposalActivityData = generateDailyTrendData(stats.activeProposals);\n\n  const chartCards = [\n    {\n      title: 'DAO Growth',\n      subtitle: `${stats.totalDAOs} total DAOs`,\n      icon: Building2,\n      color: 'from-[#e1fd6a] to-[#e1fd6a]',\n      bgColor: 'bg-[#e1fd6a]/10',\n      data: daoGrowthData,\n      chart: (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={daoGrowthData}>\n            <defs>\n              <linearGradient id=\"daoGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#e1fd6a\" stopOpacity={0.3} />\n                <stop offset=\"95%\" stopColor=\"#e1fd6a\" stopOpacity={0.08} />\n              </linearGradient>\n            </defs>\n            <Area\n              type=\"monotone\"\n              dataKey=\"value\"\n              stroke=\"#e1fd6a\"\n              fill=\"url(#daoGradient)\"\n              strokeWidth={2}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      )\n    },\n    {\n      title: 'Community Growth',\n      subtitle: `${stats.totalMembers} total members`,\n      icon: Users,\n      color: 'from-[#e1fd6a] to-[#e1fd6a]',\n      bgColor: 'bg-[#e1fd6a]/10',\n      data: userGrowthData,\n      chart: (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={userGrowthData}>\n            <defs>\n              <linearGradient id=\"userGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#e1fd6a\" stopOpacity={0.3} />\n                <stop offset=\"95%\" stopColor=\"#e1fd6a\" stopOpacity={0.08} />\n              </linearGradient>\n            </defs>\n            <Area\n              type=\"monotone\"\n              dataKey=\"value\"\n              stroke=\"#e1fd6a\"\n              fill=\"url(#userGradient)\"\n              strokeWidth={2}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      )\n    },\n    {\n      title: 'Voting Activity',\n      subtitle: `${stats.totalVotes} total votes`,\n      icon: Vote,\n      color: 'from-[#e1fd6a] to-[#e1fd6a]',\n      bgColor: 'bg-[#e1fd6a]/10',\n      data: votingActivityData,\n      chart: (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={votingActivityData}>\n            <defs>\n              <linearGradient id=\"voteGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#e1fd6a\" stopOpacity={0.3} />\n                <stop offset=\"95%\" stopColor=\"#e1fd6a\" stopOpacity={0.08} />\n              </linearGradient>\n            </defs>\n            <Area\n              type=\"monotone\"\n              dataKey=\"value\"\n              stroke=\"#e1fd6a\"\n              fill=\"url(#voteGradient)\"\n              strokeWidth={2}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      )\n    },\n    {\n      title: 'Proposal Activity',\n      subtitle: `${stats.activeProposals} active proposals`,\n      icon: TrendingUp,\n      color: 'from-[#e1fd6a] to-[#e1fd6a]',\n      bgColor: 'bg-[#e1fd6a]/10',\n      data: proposalActivityData,\n      chart: (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={proposalActivityData}>\n            <defs>\n              <linearGradient id=\"proposalGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#e1fd6a\" stopOpacity={0.3} />\n                <stop offset=\"95%\" stopColor=\"#e1fd6a\" stopOpacity={0.08} />\n              </linearGradient>\n            </defs>\n            <Area\n              type=\"monotone\"\n              dataKey=\"value\"\n              stroke=\"#e1fd6a\"\n              fill=\"url(#proposalGradient)\"\n              strokeWidth={2}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      )\n    },\n\n  ];\n\n  return (\n    <div className=\"max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\n      {/* Header */}\n      <div className=\"mb-6 sm:mb-8\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2\">\n          <div className=\"flex items-center gap-3\">\n            <h1 className=\"text-2xl sm:text-3xl font-bold text-white\">Platform Growth Analytics</h1>\n            {error ? (\n              <span className=\"flex items-center gap-1 text-xs text-red-400 bg-red-500/10 px-2 py-0.5 rounded-full\">\n                <AlertTriangle className=\"w-2 h-2\" />\n                Error\n              </span>\n            ) : isLoading ? (\n              <span className=\"flex items-center gap-1 text-xs text-yellow-400 bg-yellow-500/10 px-2 py-0.5 rounded-full\">\n                <RefreshCw className=\"w-2 h-2 animate-spin\" />\n                Loading\n              </span>\n            ) : (\n              <span className=\"flex items-center gap-1 text-xs text-green-400 bg-green-500/10 px-2 py-0.5 rounded-full\">\n                <span className=\"w-2 h-2 rounded-full animate-pulse\" style={{ backgroundColor: '#22c55e !important' }}></span>\n                Live\n              </span>\n            )}\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mt-2 p-3 bg-red-500/10 border border-red-500/20 rounded-lg\">\n            <p className=\"text-red-400 text-sm\">{error}</p>\n          </div>\n        )}\n      </div>\n\n      {/* Chart Cards Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\n        {chartCards.map((card, index) => {\n          const Icon = card.icon;\n          return (\n            <div\n              key={index}\n              className=\"rounded-lg p-4 sm:p-6\"\n              style={{ animationDelay: `${index * 0.1}s` }}\n            >\n              {/* Header */}\n              <div className=\"mb-4\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <div className={`p-2 rounded-md ${card.bgColor} flex items-center justify-center`}>\n                    <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" />\n                  </div>\n                  <h3 className=\"text-sm sm:text-base font-semibold text-white\">{card.title}</h3>\n                </div>\n                <p className=\"text-sm text-green-400 font-medium\">{card.subtitle}</p>\n              </div>\n\n              {/* Chart */}\n              <div className=\"h-32 sm:h-40 mb-2 w-full max-w-full overflow-hidden\">\n                {card.chart}\n              </div>\n\n\n            </div>\n          );\n        })}\n      </div>\n\n    </div>\n  );\n};\n\nexport default PlatformGrowthCharts;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\Sidebar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'view' is defined but never used.","line":7,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"view"},"fix":{"range":[246,258],"text":""},"desc":"Remove unused variable 'view'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isCollapsed' is defined but never used.","line":10,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"isCollapsed"},"fix":{"range":[335,355],"text":""},"desc":"Remove unused variable 'isCollapsed'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[451,454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[451,454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'tabId' is defined but never used.","line":18,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"tabId"},"fix":{"range":[521,534],"text":""},"desc":"Remove unused variable 'tabId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_daoTabs' is defined but never used.","line":28,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"_daoTabs"},"fix":{"range":[693,714],"text":""},"desc":"Remove unused variable '_daoTabs'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_daoTabs' is defined but never used.","line":28,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'_activeTab' is defined but never used.","line":29,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"_activeTab"},"fix":{"range":[714,739],"text":""},"desc":"Remove unused variable '_activeTab'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_activeTab' is defined but never used.","line":29,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'_onTabChange' is defined but never used.","line":30,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"_onTabChange"},"fix":{"range":[739,768],"text":""},"desc":"Remove unused variable '_onTabChange'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_onTabChange' is defined but never used.","line":30,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { Home, Plus, TrendingUp, ChevronLeft, ChevronRight } from 'lucide-react';\nimport mainLogo from '../assets/Logonew.png';\n\ninterface SidebarProps {\n  currentView: string;\n  onViewChange: (view: string) => void;\n  isOpen?: boolean;\n  onClose?: () => void;\n  onCollapseChange?: (isCollapsed: boolean) => void;\n  daoTabs?: Array<{\n    id: string;\n    label: string;\n    icon: React.ComponentType<any>;\n    color: string;\n  }>;\n  activeTab?: string;\n  onTabChange?: (tabId: string) => void;\n  mobileOnly?: boolean;\n}\n\nconst Sidebar: React.FC<SidebarProps> = ({\n  currentView,\n  onViewChange,\n  isOpen = false,\n  onClose,\n  onCollapseChange,\n  daoTabs: _daoTabs,\n  activeTab: _activeTab,\n  onTabChange: _onTabChange,\n  mobileOnly = false\n}) => {\n  const [isCollapsed, setIsCollapsed] = useState<boolean>(() => {\n    try {\n      const saved = localStorage.getItem('sidebar_collapsed');\n      if (saved !== null) return saved === 'true';\n    } catch (err) {\n      console.warn('Sidebar state load error:', err);\n    }\n    return true; // Default collapsed on first load\n  });\n\n  const handleToggle = () => {\n    const newState = !isCollapsed;\n    setIsCollapsed(newState);\n    onCollapseChange?.(newState);\n    try { localStorage.setItem('sidebar_collapsed', String(newState)); } catch (err) { console.warn('Sidebar state save error:', err); }\n  };\n\n  // Notify parent on mount and when state changes to keep layout in sync\n  useEffect(() => {\n    onCollapseChange?.(isCollapsed);\n  }, [isCollapsed, onCollapseChange]);\n\n  const menuItems = [\n    {\n      id: 'home',\n      icon: Home,\n      label: 'Dashboard',\n      subtext: 'Overview of all DAOs and activities',\n      color: 'text-white'\n    },\n    {\n      id: 'create-new',\n      icon: Plus,\n      label: 'Create DAO',\n      subtext: 'Launch your own decentralized organization',\n      color: 'text-white'\n    },\n  ];\n\n  // Desktop Sidebar (responsive)\n  const desktopSidebar = (\n    <div className={`fixed top-12 left-0 backdrop-blur-md flex flex-col py-6 space-y-4 hidden md:flex h-[calc(100vh-3rem)] transition-all duration-300 z-40 ${isCollapsed ? 'w-16' : 'w-48'\n      }`}\n      style={{\n        background: '#0a0a0b',\n        borderRight: '1px solid rgba(255,255,255,0.05)'\n      }}>\n      {/* Toggle Button */}\n      <div className=\"flex justify-end px-4 mb-2\">\n        <button\n          onClick={handleToggle}\n          className=\"p-1 rounded-lg transition-colors\"\n          style={{\n            color: 'var(--text)'\n          }}\n          onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.1)'}\n          onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n          title={isCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\n        >\n          {isCollapsed ? (\n            <ChevronRight className=\"w-4 h-4\" style={{ color: 'var(--text)' }} />\n          ) : (\n            <ChevronLeft className=\"w-4 h-4\" style={{ color: 'var(--text)' }} />\n          )}\n        </button>\n      </div>\n\n      {/* Menu Items */}\n      <div className=\"flex flex-col space-y-2 px-2\">\n        {menuItems.map((item) => {\n          const Icon = item.icon;\n          const isActive = currentView === item.id;\n          return (\n            <button\n              key={item.id}\n              onClick={() => onViewChange(item.id)}\n              className=\"group relative transition-all duration-300 flex items-center space-x-3 px-3 py-3 rounded-xl\"\n              style={{\n                background: isActive ? 'rgba(255,255,255,0.05)' : 'transparent',\n                color: '#FFFFFF'\n              }}\n              onMouseEnter={(e) => {\n                if (!isActive) {\n                  e.currentTarget.style.background = 'rgba(255,255,255,0.02)';\n                }\n              }}\n              onMouseLeave={(e) => {\n                if (!isActive) {\n                  e.currentTarget.style.background = 'transparent';\n                }\n              }}\n              title={isCollapsed ? item.label : ''}\n            >\n              <Icon className={`w-5 h-5 flex-shrink-0 transition-transform group-hover:scale-110 ${isActive ? 'text-[#e1fd6a]' : 'text-white/20'}`} />\n              {!isCollapsed && (\n                <div className=\"flex flex-col items-start text-left\">\n                  <span className={`text-xs font-semibold transition-colors ${isActive ? 'text-white' : 'text-white/40 group-hover:text-white'}`}>{item.label}</span>\n                </div>\n              )}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Spacer */}\n      <div className=\"flex-1\"></div>\n\n      {/* Trending Icon at Bottom */}\n      <div className=\"px-2\">\n        <button\n          onClick={() => onViewChange('trending')}\n          className=\"group relative transition-all duration-300 flex items-center space-x-3 px-3 py-3 rounded-xl w-full\"\n          style={{\n            background: currentView === 'trending' ? 'rgba(255,255,255,0.05)' : 'transparent',\n            color: '#FFFFFF'\n          }}\n          onMouseEnter={(e) => {\n            if (currentView !== 'trending') {\n              e.currentTarget.style.background = 'rgba(255,255,255,0.02)';\n            }\n          }}\n          onMouseLeave={(e) => {\n            if (currentView !== 'trending') {\n              e.currentTarget.style.background = 'transparent';\n            }\n          }}\n          title={isCollapsed ? 'Trending' : ''}\n        >\n          <TrendingUp className={`w-5 h-5 flex-shrink-0 transition-transform group-hover:scale-110 ${currentView === 'trending' ? 'text-[#e1fd6a]' : 'text-white/20'}`} />\n          {!isCollapsed && (\n            <div className=\"flex flex-col items-start text-left\">\n              <span className={`text-xs font-semibold transition-colors ${currentView === 'trending' ? 'text-white' : 'text-white/40 group-hover:text-white'}`}>Trending</span>\n            </div>\n          )}\n        </button>\n      </div>\n    </div>\n  );\n\n  // Mobile Sidebar Modal\n  const mobileSidebar = isOpen ? (\n    <>\n      {/* Backdrop */}\n      <div className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm sm:hidden\" onClick={onClose} />\n      {/* Sidebar Modal */}\n      <div\n        className=\"fixed inset-y-0 left-0 z-[60] w-4/5 max-w-xs flex flex-col animate-slide-in sm:hidden\"\n        style={{\n          background: '#101010',\n          borderRight: '1px solid var(--border)'\n        }}\n      >\n        {/* Header with Logo and Close Button */}\n        <div className=\"flex items-center justify-between px-4 py-3 border-b\" style={{ borderColor: 'var(--border)' }}>\n          <img src={mainLogo} alt=\"Anchor\" className=\"w-8 h-8 object-contain\" />\n          <button\n            className=\"rounded-full p-1.5 transition-colors\"\n            style={{ color: 'var(--text)' }}\n            onClick={onClose}\n            aria-label=\"Close Sidebar\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-5 h-5\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Menu Items Container */}\n        <div className=\"flex flex-col gap-2 mt-4 px-3 py-2\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = currentView === item.id;\n            return (\n              <button\n                key={item.id}\n                onClick={() => {\n                  onViewChange(item.id);\n                  onClose?.();\n                }}\n                className={`flex items-start gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 ${isActive ? 'bg-white/5' : ''}`}\n                style={{ color: 'var(--text)' }}\n              >\n                <Icon className={`w-5 h-5 flex-shrink-0 mt-0.5 ${isActive ? 'text-[#e1fd6a]' : ''}`}\n                  style={{ color: isActive ? 'undefined' : 'var(--text)' }} />\n                <div className=\"flex flex-col items-start text-left\">\n                  <span className={`text-sm font-semibold ${isActive ? 'text-[#e1fd6a]' : ''}`} style={{ color: isActive ? 'undefined' : 'var(--text)' }}>{item.label}</span>\n                  <span className=\"text-xs\" style={{ color: 'var(--text-dim)' }}>{item.subtext}</span>\n                </div>\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Spacer */}\n        <div className=\"flex-1\"></div>\n\n        {/* Trending Button at Bottom */}\n        <div className=\"px-3 py-2\">\n          <button\n            onClick={() => {\n              onViewChange('trending');\n              onClose?.();\n            }}\n            className={`flex items-start gap-3 w-full px-3 py-2.5 rounded-lg transition-all duration-200`}\n            style={{ color: 'var(--text)', background: 'transparent' }}\n          >\n            <TrendingUp className=\"w-5 h-5 flex-shrink-0 mt-0.5\" style={{ color: 'var(--text)' }} />\n            <div className=\"flex flex-col items-start text-left\">\n              <span className=\"text-sm font-semibold\" style={{ color: 'var(--text)' }}>Trending</span>\n              <span className=\"text-xs\" style={{ color: 'var(--text-dim)' }}>Explore popular DAOs</span>\n            </div>\n          </button>\n        </div>\n      </div>\n    </>\n  ) : null;\n\n  return (\n    <>\n      {!mobileOnly && desktopSidebar}\n      {mobileSidebar}\n    </>\n  );\n};\n\nexport default Sidebar;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\StatsOverview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\VaultManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[804,807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[804,807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1498,1501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1498,1501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2063,2066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2063,2066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2636,2639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2636,2639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":95,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2772,2775],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2772,2775],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":101,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2909,2912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2909,2912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3066,3069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3066,3069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3103,3106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3103,3106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3127,3130],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3127,3130],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Vault, Plus, ArrowUpRight, ArrowDownRight, AlertCircle, RotateCcw } from 'lucide-react';\nimport { useVault } from '../hooks/useVault';\n\ninterface VaultManagerProps {\n  daoId: string;\n  treasuryObject?: string;\n}\n\nconst VaultManager: React.FC<VaultManagerProps> = ({ daoId, treasuryObject }) => {\n  const {\n    vaults,\n    error,\n    isAdmin,\n    createVault,\n    depositToVault,\n    withdrawFromVault,\n    refreshData,\n    KNOWN_TOKENS\n  } = useVault(daoId, treasuryObject);\n\n  const isDark = true;\n\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showDepositModal, setShowDepositModal] = useState(false);\n  const [showWithdrawModal, setShowWithdrawModal] = useState(false);\n  const [selectedVault, setSelectedVault] = useState<any>(null);\n  const [createTokenAddress, setCreateTokenAddress] = useState('');\n  const [depositAmount, setDepositAmount] = useState('');\n  const [withdrawAmount, setWithdrawAmount] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [modalError, setModalError] = useState<string | null>(null);\n\n  const handleCreateVault = async () => {\n    if (!createTokenAddress.trim()) {\n      setModalError('Please enter a token metadata address');\n      return;\n    }\n\n    try {\n      setIsProcessing(true);\n      setModalError(null);\n      await createVault(createTokenAddress.trim());\n      setShowCreateModal(false);\n      setCreateTokenAddress('');\n    } catch (error: any) {\n      setModalError(error.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleDeposit = async () => {\n    if (!selectedVault || !depositAmount) {\n      setModalError('Please enter a valid amount');\n      return;\n    }\n\n    try {\n      setIsProcessing(true);\n      setModalError(null);\n      const amount = parseFloat(depositAmount);\n      await depositToVault(selectedVault.address, amount, selectedVault.decimals);\n      setShowDepositModal(false);\n      setDepositAmount('');\n      setSelectedVault(null);\n    } catch (error: any) {\n      setModalError(error.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleWithdraw = async () => {\n    if (!selectedVault || !withdrawAmount) {\n      setModalError('Please enter a valid amount');\n      return;\n    }\n\n    try {\n      setIsProcessing(true);\n      setModalError(null);\n      const amount = parseFloat(withdrawAmount);\n      await withdrawFromVault(selectedVault.address, amount, selectedVault.decimals);\n      setShowWithdrawModal(false);\n      setWithdrawAmount('');\n      setSelectedVault(null);\n    } catch (error: any) {\n      setModalError(error.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const openDepositModal = (vault: any) => {\n    setSelectedVault(vault);\n    setShowDepositModal(true);\n    setModalError(null);\n  };\n\n  const openWithdrawModal = (vault: any) => {\n    setSelectedVault(vault);\n    setShowWithdrawModal(true);\n    setModalError(null);\n  };\n\n  const getKnownTokenInfo = (metadataAddress: string): any => {\n    return (KNOWN_TOKENS as any)[metadataAddress as any];\n  };\n\n\n  // Remove loading animation completely\n\n  return (\n    <div className=\"bg-transparent\">\n      <div className=\"border border-white/10 rounded-xl py-4 px-4 space-y-4\" style={{ background: 'transparent' }}>\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n          <div className=\"flex items-center space-x-3\">\n            <Vault className=\"w-5 h-5\" style={{ color: '#e1fd6a' }} />\n            <h3 className=\"text-lg font-semibold text-white\">DAO Vaults</h3>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            <button\n              onClick={() => refreshData()}\n              className=\"flex items-center justify-center p-2 bg-gray-700/50 hover:bg-gray-600/70 text-white rounded-lg transition-all duration-200 border border-gray-600/30\"\n              title=\"Refresh vault data\"\n            >\n              <RotateCcw className=\"w-4 h-4\" />\n            </button>\n            {isAdmin && (\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 text-slate-900 hover:opacity-90\"\n                style={{ background: '#e1fd6a' }}\n              >\n                <Plus className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium\">Create Vault</span>\n              </button>\n            )}\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-500/10 border border-red-500/20 rounded-lg p-3\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-2\">\n              <div className=\"flex items-center space-x-2 text-red-400\">\n                <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\n                <span className=\"text-sm\">{error}</span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {vaults.length === 0 ? (\n          <div className=\"text-center py-12 px-4\">\n            <Vault className=\"w-12 h-12 mx-auto mb-3\" style={{ color: '#e1fd6a' }} />\n            <h4 className=\"text-base font-medium text-white mb-2\">No Vaults Created</h4>\n            <p className=\"text-gray-400 text-sm mb-4 max-w-md mx-auto\">\n              {isAdmin\n                ? \"Create your first vault to manage FA tokens like USDC and USDT.\"\n                : \"No vaults have been created by the DAO admins yet.\"\n              }\n            </p>\n          </div>\n        ) : (\n        <div className=\"overflow-x-auto -mx-4 sm:mx-0\">\n          <div className=\"min-w-full inline-block align-middle\">\n            <table className=\"w-full border-collapse\">\n              <thead>\n                <tr className=\"border-b border-gray-700/50\">\n                  <th className=\"text-left py-3 px-3 sm:px-4 text-gray-400 font-medium text-xs uppercase tracking-wider w-1/2 sm:w-auto\">Token</th>\n                  <th className=\"text-left py-3 px-2 sm:px-4 text-gray-400 font-medium text-xs uppercase tracking-wider hidden lg:table-cell\">Vault</th>\n                  <th className=\"text-left py-3 px-2 sm:px-4 text-gray-400 font-medium text-xs uppercase tracking-wider hidden xl:table-cell\">FA Address</th>\n                  <th className=\"text-right py-3 px-3 sm:px-4 text-gray-400 font-medium text-xs uppercase tracking-wider w-16 sm:w-auto\">Total</th>\n                  <th className=\"text-right py-3 px-2 sm:px-4 text-gray-400 font-medium text-xs uppercase tracking-wider hidden md:table-cell\">Available</th>\n                  <th className=\"text-right py-3 px-3 sm:px-4 text-gray-400 font-medium text-xs uppercase tracking-wider w-12 sm:w-auto\">Actions</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-700/30\">\n                {vaults.map((vault) => {\n                  const knownToken = getKnownTokenInfo(vault.metadata);\n                  const tokenSymbol = vault.tokenSymbol || knownToken?.symbol || 'UNKNOWN';\n                  const tokenName = vault.tokenName || knownToken?.name || 'Unknown Token';\n\n                  return (\n                    <tr key={vault.address} className=\"hover:bg-gray-800/30 transition-colors\">\n                      <td className=\"py-3 px-3 sm:px-4 align-top\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"w-8 h-8 rounded-full overflow-hidden flex items-center justify-center text-xs font-bold\" style={{ backgroundColor: '#e1fd6a', color: '#0f172a' }}>\n                            {vault.iconUrl ? (\n                              <img\n                                src={vault.iconUrl}\n                                alt={`${tokenSymbol} icon`}\n                                className=\"w-full h-full object-cover\"\n                                onError={(e) => { (e.currentTarget as HTMLImageElement).style.display = 'none'; }}\n                              />\n                            ) : null}\n                            {!vault.iconUrl && tokenSymbol.slice(0, 2)}\n                          </div>\n                          <div className=\"min-w-0 flex-1\">\n                            <div className=\"text-white font-medium text-sm truncate\">{tokenSymbol}</div>\n                            <div className=\"text-gray-400 text-xs truncate\">{tokenName}</div>\n                            {/* Strategy UI removed ΓÇô not in treasury ABI */}\n                          </div>\n                        </div>\n                        {/* Mobile info */}\n                        <div className=\"mt-2 lg:hidden space-y-1\">\n                          <div className=\"text-gray-500 text-xs font-mono\">\n                            <div>Vault: {vault.address.slice(0, 8)}...{vault.address.slice(-6)}</div>\n                            <div className=\"xl:hidden\">FA: {vault.metadata.slice(0, 8)}...{vault.metadata.slice(-6)}</div>\n                          </div>\n                          <div className=\"flex flex-wrap gap-2 text-xs\">\n                            <span className=\"text-green-400 md:hidden\">Available: {vault.idleAssets.toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"py-3 px-3 sm:px-4 hidden lg:table-cell\">\n                        <div className=\"text-gray-300 font-mono text-xs\">\n                          {vault.address.slice(0, 8)}...{vault.address.slice(-6)}\n                        </div>\n                        <button\n                          onClick={() => navigator.clipboard.writeText(vault.address)}\n                          className=\"text-blue-400 text-xs hover:text-blue-300 transition-colors\"\n                          title=\"Copy vault address\"\n                        >\n                          Copy\n                        </button>\n                      </td>\n                      <td className=\"py-3 px-3 sm:px-4 hidden xl:table-cell\">\n                        <div className=\"text-gray-300 font-mono text-xs\">\n                          {vault.metadata.slice(0, 8)}...{vault.metadata.slice(-6)}\n                        </div>\n                        <button\n                          onClick={() => navigator.clipboard.writeText(vault.metadata)}\n                          className=\"text-blue-400 text-xs hover:text-blue-300 transition-colors\"\n                          title=\"Copy FA address\"\n                        >\n                          Copy\n                        </button>\n                      </td>\n                      <td className=\"py-3 px-3 sm:px-4 text-right w-20 sm:w-auto\">\n                        <div className=\"text-white font-medium text-sm\">\n                          {vault.totalAssets.toLocaleString(undefined, {\n                            maximumFractionDigits: 2\n                          })}\n                        </div>\n                        {tokenSymbol !== 'UNKNOWN' && (\n                          <div className=\"text-gray-400 text-xs\">{tokenSymbol}</div>\n                        )}\n                      </td>\n                      <td className=\"py-3 px-3 sm:px-4 text-right hidden md:table-cell\">\n                        <div className=\"text-green-400 font-medium text-sm\">\n                          {vault.idleAssets.toLocaleString(undefined, {\n                            maximumFractionDigits: 2\n                          })}\n                        </div>\n                        {tokenSymbol !== 'UNKNOWN' && (\n                          <div className=\"text-gray-400 text-xs\">{tokenSymbol}</div>\n                        )}\n                      </td>\n                      {/* Actions */}\n                      <td className=\"py-3 px-3 sm:px-4 w-12 sm:w-auto\">\n                        <div className=\"flex justify-end space-x-1\">\n                          <button\n                            onClick={() => openDepositModal(vault)}\n                            className=\"p-1.5 hover:bg-gray-700/50 rounded-lg transition-colors\"\n                            title=\"Deposit\"\n                          >\n                            <ArrowDownRight className=\"w-4 h-4 text-green-400\" />\n                          </button>\n                          {isAdmin && (\n                            <button\n                              onClick={() => openWithdrawModal(vault)}\n                              className=\"p-1.5 hover:bg-gray-700/50 rounded-lg transition-colors\"\n                              title=\"Withdraw\"\n                            >\n                              <ArrowUpRight className=\"w-4 h-4 text-red-400\" />\n                            </button>\n                          )}\n                        </div>\n                      </td>\n                  </tr>\n                );\n              })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n        )}\n      </div>\n\n      {/* Create Vault Modal - Dark theme to match deposit modal */}\n      {showCreateModal && (\n        <div className=\"fixed inset-0 z-[1000] flex items-center justify-center p-4\" style={{ backgroundColor: 'transparent' }} onClick={() => setShowCreateModal(false)}>\n          <div\n            className={`${isDark ? 'border-white/10' : 'bg-white border-black/10'} rounded-xl p-5 w-full max-w-md border shadow-2xl`}\n            style={isDark ? { backgroundColor: '#101010' } : undefined}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <h3 className={`text-xl font-bold mb-4 ${isDark ? 'text-white' : 'text-gray-900'}`}>Add Fungible Address (Create Vault)</h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className={`block text-sm mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>FA (Fungible Token) Metadata Address</label>\n                <input\n                  type=\"text\"\n                  value={createTokenAddress}\n                  onChange={(e) => setCreateTokenAddress(e.target.value)}\n                  placeholder=\"0x...\"\n                  className={`w-full px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${isDark ? 'bg-white/5 border border-white/10 text-white placeholder-gray-500' : 'bg-gray-50 border border-gray-200 text-gray-900 placeholder-gray-400'}`}\n                />\n                <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-gray-600'}`}>\n                  Enter the FA metadata address (e.g., USDC, USDT)\n                </p>\n              </div>\n\n              <div className={`rounded-lg p-3 ${isDark ? 'bg-white/5 border border-white/10' : 'bg-gray-50 border border-gray-200'}`}>\n                <p className={`text-sm ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>\n                  <strong>Note:</strong> You can find metadata addresses in your network's token registry or from deployments.\n                </p>\n              </div>\n\n              {modalError && (\n                <div className={`rounded-lg p-3 ${isDark ? 'bg-red-500/10 border border-red-500/30' : 'bg-red-50 border border-red-200'}`}>\n                  <p className={`text-sm ${isDark ? 'text-red-200' : 'text-red-800'}`}>{modalError}</p>\n                </div>\n              )}\n\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={() => {\n                    setShowCreateModal(false);\n                    setCreateTokenAddress('');\n                    setModalError(null);\n                  }}\n                  className={`flex-1 h-11 px-6 rounded-xl font-semibold transition-colors ${isDark ? 'bg-white/10 text-gray-300 border border-white/10 hover:bg-white/15' : 'bg-gray-100 text-gray-800 border border-gray-200 hover:bg-gray-200'}`}\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleCreateVault}\n                  disabled={isProcessing}\n                  className=\"flex-1 h-11 px-6 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed text-slate-900 hover:opacity-90\"\n                  style={{ background: '#e1fd6a' }}\n                >\n                  {isProcessing ? 'Creating...' : 'Create Vault'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Deposit Modal - Dark theme background */}\n      {showDepositModal && selectedVault && (\n        <div className=\"fixed inset-0 z-[1000] flex items-center justify-center p-4\" style={{ backgroundColor: 'transparent' }} onClick={() => setShowDepositModal(false)}>\n          <div\n            className={`${isDark ? 'border-white/10' : 'bg-white border-black/10'} rounded-xl p-5 w-full max-w-md border shadow-2xl`}\n            style={isDark ? { backgroundColor: '#101010' } : undefined}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <h3 className={`text-xl font-bold mb-4 ${isDark ? 'text-white' : 'text-gray-900'}`}>Deposit to {selectedVault.tokenSymbol} Vault</h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className={`block text-sm mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>Amount</label>\n                <input\n                  type=\"text\"\n                  value={depositAmount}\n                  onChange={(e) => setDepositAmount(e.target.value)}\n                  placeholder=\"0.00\"\n                  className={`w-full px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${isDark ? 'bg-white/5 border border-white/10 text-white placeholder-gray-500' : 'bg-gray-50 border border-gray-200 text-gray-900 placeholder-gray-400'}`}\n                />\n                <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-gray-600'}`}>\n                  Amount in {selectedVault.tokenSymbol}\n                </p>\n              </div>\n\n              {/* Balance summary removed as requested */}\n\n              {modalError && (\n                <div className={`rounded-lg p-3 ${isDark ? 'bg-red-500/10 border border-red-500/30' : 'bg-red-50 border border-red-200'}`}>\n                  <p className={`text-sm ${isDark ? 'text-red-200' : 'text-red-800'}`}>{modalError}</p>\n                </div>\n              )}\n\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={handleDeposit}\n                  disabled={isProcessing || !depositAmount}\n                  className=\"flex-1 h-11 px-6 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed text-slate-900 hover:opacity-90\"\n                  style={{ background: '#e1fd6a' }}\n                >\n                  {isProcessing ? 'Depositing...' : 'Deposit'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Withdraw Modal - Dark theme background */}\n      {showWithdrawModal && selectedVault && (\n        <div className=\"fixed inset-0 z-[1000] flex items-center justify-center p-4\" style={{ backgroundColor: 'transparent' }} onClick={() => setShowWithdrawModal(false)}>\n          <div\n            className={`${isDark ? 'border-white/10' : 'bg-white border-black/10'} rounded-xl p-5 w-full max-w-md border shadow-2xl`}\n            style={isDark ? { backgroundColor: '#101010' } : undefined}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <h3 className={`text-xl font-bold mb-4 ${isDark ? 'text-white' : 'text-gray-900'}`}>Withdraw from {selectedVault.tokenSymbol} Vault</h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className={`block text-sm mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>Amount</label>\n                <input\n                  type=\"text\"\n                  value={withdrawAmount}\n                  onChange={(e) => setWithdrawAmount(e.target.value)}\n                  placeholder=\"0.00\"\n                  className={`w-full px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${isDark ? 'bg-white/5 border border-white/10 text-white placeholder-gray-500' : 'bg-gray-50 border border-gray-200 text-gray-900 placeholder-gray-400'}`}\n                />\n                <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-gray-600'}`}>\n                  Amount in {selectedVault.tokenSymbol} (max: {selectedVault.idleAssets.toLocaleString()})\n                </p>\n              </div>\n\n              {/* Admin note retained without balance summary */}\n\n              {modalError && (\n                <div className={`rounded-lg p-3 ${isDark ? 'bg-red-500/10 border border-red-500/30' : 'bg-red-50 border border-red-200'}`}>\n                  <p className={`text-sm ${isDark ? 'text-red-200' : 'text-red-800'}`}>{modalError}</p>\n                </div>\n              )}\n\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={handleWithdraw}\n                  disabled={isProcessing || !withdrawAmount}\n                  className=\"flex-1 h-11 px-6 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed text-slate-900 hover:opacity-90\"\n                  style={{ background: '#e1fd6a' }}\n                >\n                  {isProcessing ? 'Withdrawing...' : 'Withdraw'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VaultManager;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\WalletConnect.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'truncateAddress' is defined but never used.","line":22,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"truncateAddress"},"fix":{"range":[755,811],"text":""},"desc":"Remove unused variable 'truncateAddress'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'truncateAddress' is defined but never used.","line":22,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'wallet' is defined but never used.","line":31,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"wallet"},"fix":{"range":[1088,1107],"text":""},"desc":"Remove unused variable 'wallet'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3365,3368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3365,3368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'onProfileClick' is defined but never used.","line":579,"column":68,"nodeType":"Identifier","messageId":"unusedVar","endLine":579,"endColumn":82,"suggestions":[{"messageId":"removeVar","data":{"varName":"onProfileClick"},"fix":{"range":[19084,19102],"text":""},"desc":"Remove unused variable 'onProfileClick'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onProfileClick' is defined but never used.","line":579,"column":68,"nodeType":null,"messageId":"unusedVar","endLine":579,"endColumn":82},{"ruleId":"no-unused-vars","severity":1,"message":"'isDarkTheme' is assigned a value but never used.","line":589,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":589,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"isDarkTheme"},"fix":{"range":[19589,19614],"text":""},"desc":"Remove unused variable 'isDarkTheme'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDarkTheme' is assigned a value but never used.","line":589,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":589,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":656,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":656,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":656,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":656,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WalletConnect Component\n *\n * Provides wallet connection functionality using Cedra Wallet Standard.\n * Supports multiple AIP-62 compatible wallets (Nightly, Petra, etc.)\n *\n * Features:\n * - Wallet detection via Cedra wallet standard\n * - Connection modal with wallet selection\n * - Wallet status display in header\n * - Disconnect functionality\n * - Profile dropdown menu\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Wallet, X, ChevronDown, ArrowLeft } from 'lucide-react';\nimport ReactDOM from 'react-dom';\nimport Avatar from 'boring-avatars';\nimport { useWallet } from '../contexts/CedraWalletProvider';\nimport type { CedraWallet } from '@cedra-labs/wallet-standard';\nimport { useAlert } from './alert/AlertContext';\nimport { truncateAddress } from '../utils/addressUtils';\n\n// ============================================================================\n// TYPES & INTERFACES\n// ============================================================================\n\ninterface WalletModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onWalletSelected: (wallet: CedraWallet) => void;\n  wallets: CedraWallet[];\n}\n\ninterface WalletConnectButtonProps {\n  onProfileClick?: () => void;\n}\n\n// ============================================================================\n// WALLET MODAL COMPONENT\n// ============================================================================\n\n/**\n * Modal component for wallet selection and connection\n * Shows list of detected wallets and handles the connection flow\n */\nconst WalletModal: React.FC<WalletModalProps> = ({\n  isOpen,\n  onClose,\n  onWalletSelected,\n  wallets,\n}) => {\n  // ========== State Management ==========\n  const [selectedWallet, setSelectedWallet] = useState<CedraWallet | null>(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [timeoutRef, setTimeoutRef] = useState<NodeJS.Timeout | null>(null);\n\n  const { showAlert } = useAlert();\n  const { connected, account } = useWallet();\n  const isDarkTheme = true;\n\n  // ========== Effects ==========\n\n  /**\n   * Monitor wallet connection state and auto-close modal on success\n   */\n  useEffect(() => {\n    if (isConnecting && connected && account && selectedWallet) {\n\n      // Clear connection timeout\n      if (timeoutRef) {\n        clearTimeout(timeoutRef);\n        setTimeoutRef(null);\n      }\n\n      setIsConnecting(false);\n      showAlert('Wallet connected', 'success');\n      onClose();\n    }\n  }, [connected, account, isConnecting, selectedWallet, showAlert, onClose, timeoutRef]);\n\n  /**\n   * Cleanup timeout on unmount\n   */\n  useEffect(() => {\n    return () => {\n      if (timeoutRef) clearTimeout(timeoutRef);\n    };\n  }, [timeoutRef]);\n\n  // ========== Event Handlers ==========\n\n  /**\n   * Handle wallet selection and initiate connection\n   */\n  const handleWalletSelected = async (wallet: CedraWallet) => {\n    setSelectedWallet(wallet);\n    setIsConnecting(true);\n    setError(null);\n\n    try {\n      await onWalletSelected(wallet);\n\n      // Set connection timeout (15 seconds)\n      const timeoutId = setTimeout(() => {\n        if (isConnecting && !connected) {\n          setIsConnecting(false);\n          setError('Connection timeout - please try again');\n        }\n      }, 15000);\n\n      setTimeoutRef(timeoutId);\n\n    } catch (e: any) {\n      console.error('Wallet connection error:', e);\n\n      // Clear timeout on error\n      if (timeoutRef) {\n        clearTimeout(timeoutRef);\n        setTimeoutRef(null);\n      }\n\n      // Handle user rejection silently, show alert for other errors\n      if (e?.message?.includes('User rejected') || e?.message?.includes('rejected')) {\n        setIsConnecting(false);\n        setError(null);\n      } else {\n        showAlert('Connection failed: ' + (e?.message || 'Unknown error'), 'error');\n        setError('Connection failed');\n        setIsConnecting(false);\n      }\n    }\n  };\n\n  /**\n   * Handle wallet installation redirect\n   */\n  const handleWalletInstall = (wallet: CedraWallet) => {\n    showAlert('Wallet not installed. Please install and try again.', 'error');\n    if (wallet.url) {\n      window.open(wallet.url, '_blank');\n    } else {\n      window.open(`https://www.google.com/search?q=${wallet.name}+wallet+install`, '_blank');\n    }\n  };\n\n  /**\n   * Reset modal state and close\n   */\n  const handleClose = () => {\n    if (timeoutRef) {\n      clearTimeout(timeoutRef);\n      setTimeoutRef(null);\n    }\n    setSelectedWallet(null);\n    setIsConnecting(false);\n    setError(null);\n    onClose();\n  };\n\n  /**\n   * Handle back button click (returns to wallet list)\n   */\n  const handleBackClick = () => {\n    if (timeoutRef) {\n      clearTimeout(timeoutRef);\n      setTimeoutRef(null);\n    }\n    setSelectedWallet(null);\n    setIsConnecting(false);\n    setError(null);\n  };\n\n  // ========== Early Returns ==========\n\n  if (!isOpen) return null;\n\n  // ========== Render: Connection View ==========\n\n  if (selectedWallet) {\n    const isWalletReady = true; // All detected Cedra wallets are ready\n\n    return (\n      <div className=\"modal-overlay\" style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        background: isDarkTheme ? 'rgba(0,0,0,0.7)' : 'rgba(0,0,0,0.4)',\n        zIndex: 1000,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      }}>\n        <div className=\"modal-container\" style={{\n          background: isDarkTheme ? '#0f0f11' : '#ffffff',\n          color: isDarkTheme ? '#f5f5f5' : '#111827',\n          borderRadius: 20,\n          minWidth: 320,\n          maxWidth: 380,\n          boxShadow: '0 20px 40px rgba(0,0,0,0.4)',\n          padding: '24px 20px',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          border: isDarkTheme ? '1px solid rgba(255,255,255,0.08)' : '1px solid rgba(0,0,0,0.08)'\n        }}>\n\n          {/* Back Button */}\n          <button\n            onClick={handleBackClick}\n            style={{\n              position: 'absolute',\n              top: 16,\n              left: 16,\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              color: 'var(--text)',\n              opacity: 0.7,\n              transition: 'opacity 0.2s'\n            }}\n            onMouseEnter={(e) => e.currentTarget.style.opacity = '1'}\n            onMouseLeave={(e) => e.currentTarget.style.opacity = '0.7'}\n          >\n            <ArrowLeft size={20} />\n          </button>\n\n          {/* Close Button */}\n          <button\n            onClick={handleClose}\n            style={{\n              position: 'absolute',\n              top: 16,\n              right: 16,\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              color: 'var(--text)',\n              opacity: 0.7,\n              transition: 'opacity 0.2s'\n            }}\n            onMouseEnter={(e) => e.currentTarget.style.opacity = '1'}\n            onMouseLeave={(e) => e.currentTarget.style.opacity = '0.7'}\n          >\n            <X size={20} />\n          </button>\n\n          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 24, width: '100%' }}>\n\n            {/* Wallet Icon with Loading Animation */}\n            <div className=\"wallet-icon-container\">\n              {selectedWallet.icon ? (\n                <img\n                  src={selectedWallet.icon}\n                  alt={selectedWallet.name}\n                  width={64}\n                  height={64}\n                  className={isConnecting ? 'wallet-icon-pulse' : ''}\n                  style={{\n                    borderRadius: 16,\n                    boxShadow: '0 8px 24px rgba(0,0,0,0.3)',\n                    position: 'relative',\n                    zIndex: 2\n                  }}\n                />\n              ) : (\n                <div\n                  className={isConnecting ? 'wallet-icon-pulse' : ''}\n                  style={{\n                    width: 64,\n                    height: 64,\n                    borderRadius: 16,\n                    background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: 32,\n                    boxShadow: '0 8px 24px rgba(0,0,0,0.3)',\n                    position: 'relative',\n                    zIndex: 2\n                  }}>\n                  ≡ƒö«\n                </div>\n              )}\n\n              {/* Square Loader Animation */}\n              {isConnecting && (\n                <div className=\"square-loader\">\n                  <svg viewBox=\"0 0 100 100\">\n                    <rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" rx=\"18\" ry=\"18\" className=\"square-progress\" pathLength=\"100\" />\n                  </svg>\n                </div>\n              )}\n            </div>\n\n            {/* Wallet Name and Status */}\n            <div style={{ textAlign: 'center' }}>\n              <h3 style={{\n                fontSize: 24,\n                fontWeight: 600,\n                color: 'var(--text)',\n                margin: '0 0 8px 0',\n                letterSpacing: '-0.02em'\n              }}>\n                {selectedWallet.name}\n              </h3>\n              <p style={{\n                fontSize: 16,\n                color: 'var(--text-dim)',\n                margin: 0,\n                lineHeight: 1.4\n              }}>\n                {isConnecting ? 'Connecting to your wallet...' :\n                  isWalletReady ? 'Ready to connect' : 'Installation required'}\n              </p>\n            </div>\n\n            {/* Error Message */}\n            {error && (\n              <div style={{\n                background: 'rgba(239, 68, 68, 0.1)',\n                border: '1px solid rgba(239, 68, 68, 0.3)',\n                borderRadius: 12,\n                padding: 16,\n                color: '#f87171',\n                fontSize: 14,\n                textAlign: 'center',\n                width: '100%'\n              }}>\n                {error}\n              </div>\n            )}\n\n            {/* Action Button */}\n            {!isConnecting && (\n              <button\n                onClick={() => isWalletReady ? handleWalletSelected(selectedWallet) : handleWalletInstall(selectedWallet)}\n                style={{\n                  background: isWalletReady\n                    ? 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)'\n                    : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                  border: 'none',\n                  color: 'var(--text)',\n                  padding: '14px 32px',\n                  borderRadius: 12,\n                  fontSize: 16,\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                  width: '100%',\n                  maxWidth: 200\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.transform = 'translateY(-2px)';\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(99, 102, 241, 0.4)';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.transform = 'translateY(0)';\n                  e.currentTarget.style.boxShadow = 'none';\n                }}\n              >\n                {isWalletReady ? 'Connect Wallet' : 'Install Wallet'}\n              </button>\n            )}\n\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // ========== Render: Wallet Selection View ==========\n\n  return (\n    <div className=\"modal-overlay\" style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100vw',\n      height: '100vh',\n      background: isDarkTheme ? 'rgba(0,0,0,0.7)' : 'rgba(0,0,0,0.4)',\n      zIndex: 1000,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }}>\n      <div className=\"modal-container\" style={{\n        background: isDarkTheme ? '#0f0f11' : '#ffffff',\n        color: isDarkTheme ? '#f5f5f5' : '#111827',\n        borderRadius: 20,\n        minWidth: 320,\n        maxWidth: 380,\n        boxShadow: '0 20px 40px rgba(0,0,0,0.4)',\n        padding: '24px 20px',\n        display: 'flex',\n        flexDirection: 'column',\n        border: isDarkTheme ? '1px solid rgba(255,255,255,0.08)' : '1px solid rgba(0,0,0,0.08)'\n      }}>\n\n        {/* Modal Header */}\n        <div className=\"modal-header\" style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          width: '100%',\n          marginBottom: 24\n        }}>\n          <h3 style={{\n            fontSize: 24,\n            fontWeight: 600,\n            color: '#e1fd6a',\n            margin: 0,\n            letterSpacing: '-0.02em'\n          }}>\n            Connect Wallet\n          </h3>\n          <button\n            onClick={handleClose}\n            style={{\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              color: '#e1fd6a',\n              opacity: 0.7,\n              transition: 'opacity 0.2s'\n            }}\n            onMouseEnter={(e) => e.currentTarget.style.opacity = '1'}\n            onMouseLeave={(e) => e.currentTarget.style.opacity = '0.7'}\n          >\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Wallet List */}\n        <div className=\"modal-content\" style={{ width: '100%', display: 'flex', flexDirection: 'column', minHeight: 0 }}>\n          <div className=\"wallet-list\" style={{ flex: 1 }}>\n            <div className=\"wallet-items\" style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n              {wallets?.map((wallet) => (\n                <div\n                  key={wallet.name}\n                  className=\"wallet-item\"\n                  style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    padding: '12px 16px',\n                    borderRadius: 12,\n                    border: isDarkTheme ? '1px solid rgba(255, 255, 255, 0.08)' : '1px solid rgba(0, 0, 0, 0.08)',\n                    cursor: 'pointer',\n                    background: isDarkTheme ? '#161618' : '#f8fafc',\n                    transition: 'all 0.2s ease',\n                    boxShadow: isDarkTheme ? '0 2px 8px rgba(0,0,0,0.5)' : '0 2px 8px rgba(0,0,0,0.08)'\n                  }}\n                  onClick={() => handleWalletSelected(wallet)}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.background = isDarkTheme ? '#1e1e22' : '#eef2f7';\n                    e.currentTarget.style.borderColor = isDarkTheme ? 'rgba(255,255,255,0.12)' : 'rgba(0,0,0,0.12)';\n                    e.currentTarget.style.transform = 'translateY(-2px)';\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.background = isDarkTheme ? '#161618' : '#f8fafc';\n                    e.currentTarget.style.borderColor = isDarkTheme ? 'rgba(255, 255, 255, 0.08)' : 'rgba(0,0,0,0.08)';\n                    e.currentTarget.style.transform = 'translateY(0)';\n                  }}\n                >\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 10 }}>\n                    {/* Wallet Icon */}\n                    {wallet.icon ? (\n                      <img\n                        src={wallet.icon}\n                        alt={wallet.name}\n                        width={32}\n                        height={32}\n                        style={{ borderRadius: 8 }}\n                      />\n                    ) : (\n                      <div style={{\n                        width: 32,\n                        height: 32,\n                        borderRadius: 8,\n                        background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontSize: 16\n                      }}>\n                        ≡ƒö«\n                      </div>\n                    )}\n\n                    {/* Wallet Info */}\n                    <div>\n                      <span style={{\n                        fontWeight: 600,\n                        color: 'var(--text)',\n                        fontSize: 16,\n                        display: 'block'\n                      }}>\n                        {wallet.name}\n                      </span>\n                      <span style={{\n                        fontSize: 14,\n                        color: 'var(--text-dim)',\n                        display: 'block'\n                      }}>\n                        Ready to connect\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Connect Badge */}\n                  <div style={{\n                    padding: '6px 12px',\n                    borderRadius: 6,\n                    fontSize: 12,\n                    fontWeight: 600,\n                    background: 'transparent',\n                    color: '#e1fd6a',\n                    textTransform: 'none',\n                  }}>\n                    Connect\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* No Wallets Message */}\n            {wallets.length === 0 && (\n              <div className=\"no-wallets-message\" style={{\n                marginTop: 24,\n                color: isDarkTheme ? '#9ca3af' : '#6b7280',\n                textAlign: 'center',\n                padding: 24,\n                background: isDarkTheme ? '#161618' : '#f8fafc',\n                borderRadius: 16,\n                border: isDarkTheme ? '1px solid rgba(255,255,255,0.08)' : '1px solid rgba(0,0,0,0.08)'\n              }}>\n                <p style={{ margin: 0, fontSize: 16 }}>\n                  No wallets detected. Please install a supported wallet extension.\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div style={{\n            marginTop: 24,\n            paddingTop: 16,\n            borderTop: '1px solid rgba(255, 255, 255, 0.08)',\n            textAlign: 'center',\n            flexShrink: 0\n          }}>\n            <p style={{\n              fontSize: 12,\n              color: '#e1fd6a',\n              margin: 0,\n              lineHeight: 1.4\n            }}>\n              Powered by Cedra Network\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// ============================================================================\n// WALLET CONNECT BUTTON COMPONENT\n// ============================================================================\n\n/**\n * Main wallet connect button component\n * Shows in header and provides wallet connection/disconnect functionality\n */\nconst WalletConnectButton: React.FC<WalletConnectButtonProps> = ({ onProfileClick }) => {\n  // ========== State Management ==========\n  const { connect, disconnect, wallets, account, wallet, connected } = useWallet();\n  const [showModal, setShowModal] = useState(false);\n  const [modalKey, setModalKey] = useState(0); // Force modal reset on reopen\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [hoveredItem, setHoveredItem] = useState<string | null>(null);\n\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const { showAlert } = useAlert();\n  const isDarkTheme = true;\n\n  // ========== Styles ==========\n  const buttonStyle = {\n    display: 'flex',\n    alignItems: 'center',\n    gap: 8,\n    padding: '6px 12px',\n    border: 'none',\n    borderRadius: '10px',\n    height: 'auto',\n    minWidth: 'auto',\n    cursor: 'pointer',\n    fontWeight: 600,\n    fontSize: 12,\n    overflow: 'hidden',\n    transition: 'all 0.2s ease',\n  };\n\n  // ========== Effects ==========\n\n  /**\n   * Close dropdown when clicking outside\n   */\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowDropdown(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n\n\n  // ========== Event Handlers ==========\n\n  /**\n   * Handle wallet connection\n   */\n  const handleConnect = async (wallet: CedraWallet) => {\n    try {\n\n      // Clear stale connection if exists\n      if (connected && !account) {\n        await disconnect();\n        await new Promise(resolve => setTimeout(resolve, 500));\n      }\n\n      await connect(wallet);\n    } catch (e) {\n      console.error('Wallet connection error:', e);\n      throw e;\n    }\n  };\n\n  /**\n   * Handle wallet disconnect\n   */\n  const handleDisconnect = async (e: React.MouseEvent) => {\n    e.stopPropagation();\n    try {\n      await disconnect();\n      setModalKey((k) => k + 1);\n      showAlert('Wallet disconnected', 'info');\n    } catch (e) {\n      showAlert('Network error on disconnect', 'error');\n    }\n  };\n\n  /**\n   * Open wallet modal\n   */\n  const handleOpenModal = () => {\n    setModalKey((k) => k + 1);\n    setShowModal(true);\n  };\n\n  /**\n   * Handle button click - open modal or toggle dropdown\n   */\n  const handleButtonClick = () => {\n    if (!connected || !account) {\n      handleOpenModal();\n    } else {\n      setShowDropdown(!showDropdown);\n    }\n  };\n\n  // ========== Render ==========\n\n  return (\n    <div style={{ position: 'relative', display: 'inline-flex', alignItems: 'center', gap: 8 }}>\n      <div style={{ position: 'relative', display: 'inline-flex', alignItems: 'center', gap: 8 }}>\n\n        <button\n          className=\"header-wallet-btn\"\n          style={{\n            ...buttonStyle,\n            background: connected && account ? 'transparent' : '#e1fd6a',\n            color: connected && account ? '#ffffff' : '#000000',\n            padding: connected && account ? '4px' : '6px 12px',\n          }}\n          onClick={handleButtonClick}\n          tabIndex={0}\n        >\n          {connected && account ? (\n            <>\n              <div style={{ position: 'relative', display: 'inline-flex' }}>\n                <div style={{ borderRadius: '50%', overflow: 'hidden' }}>\n                  <Avatar\n                    name={account.address}\n                    variant=\"beam\"\n                    size={32}\n                    colors={[\"#e1fd6a\", \"#a3e635\", \"#84cc16\", \"#65a30d\", \"#4d7c0f\"]}\n                  />\n                </div>\n                {wallet && wallet.icon && (\n                  <div style={{\n                    position: 'absolute',\n                    bottom: -2,\n                    right: -2,\n                    width: 16,\n                    height: 16,\n                    backgroundColor: '#ffffff',\n                    borderRadius: '50%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    border: '2px solid #0a0a0b',\n                    overflow: 'hidden'\n                  }}>\n                    <img\n                      src={wallet.icon}\n                      alt={wallet.name}\n                      style={{\n                        width: '100%',\n                        height: '100%',\n                        objectFit: 'cover'\n                      }}\n                    />\n                  </div>\n                )}\n              </div>\n              <ChevronDown\n                size={16}\n                style={{\n                  marginLeft: 4,\n                  color: '#ffffff',\n                  transition: 'transform 0.2s',\n                  transform: showDropdown ? 'rotate(180deg)' : 'rotate(0deg)'\n                }}\n              />\n            </>\n          ) : (\n            <>\n              <Wallet className=\"w-4 h-4\" style={{ color: '#000000' }} />\n              <span style={{ color: '#000000' }}>Connect</span>\n            </>\n          )}\n        </button>\n\n        {/* Wallet Modal */}\n        {typeof window !== 'undefined' && ReactDOM.createPortal(\n          <WalletModal\n            key={modalKey}\n            isOpen={showModal}\n            onClose={() => setShowModal(false)}\n            onWalletSelected={handleConnect}\n            wallets={wallets}\n          />,\n          document.body\n        )}\n\n        {/* Dropdown Menu */}\n        {connected && account && showDropdown && (\n          <div\n            ref={dropdownRef}\n            style={{\n              position: 'absolute',\n              top: '100%',\n              right: 0,\n              marginTop: 4,\n              background: '#1a1a1e',\n              border: '1px solid rgba(255,255,255,0.08)',\n              borderRadius: '12px',\n              padding: '6px',\n              minWidth: '130px',\n              boxShadow: '0 8px 24px rgba(0,0,0,0.5)',\n              zIndex: 1001\n            }}\n          >\n            {/* Disconnect Button */}\n\n            {/* Disconnect Button */}\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleDisconnect(e);\n                setShowDropdown(false);\n              }}\n              onMouseEnter={() => setHoveredItem('disconnect')}\n              onMouseLeave={() => setHoveredItem(null)}\n              style={{\n                width: '100%',\n                padding: '6px 10px',\n                background: hoveredItem === 'disconnect' ? 'rgba(255,255,255,0.05)' : 'transparent',\n                border: 'none',\n                color: '#f5f5f5',\n                fontSize: 12,\n                cursor: 'pointer',\n                borderRadius: '8px',\n                transition: 'background 0.2s',\n                textAlign: 'left',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px'\n              }}\n            >\n              <X size={16} />\n              Disconnect\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default WalletConnectButton;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\alert\\AlertContext.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used.","line":10,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[271,287],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used.","line":10,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"type"},"fix":{"range":[286,323],"text":""},"desc":"Remove unused variable 'type'."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":14,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":14,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext } from 'react';\nimport Swal from 'sweetalert2';\n\n\n// --------------------\n// Global Alert Context\n// --------------------\n// Provides a global alert system for the app using SweetAlert2\ninterface AlertContextType {\n  showAlert: (message: string, type?: 'success' | 'error' | 'info') => void;\n}\n\nconst AlertContext = createContext<AlertContextType>({ showAlert: () => { } });\nexport const useAlert = () => useContext(AlertContext);\n\n// Configures a SweetAlert2 Toast\nconst Toast = Swal.mixin({\n  toast: true,\n  position: 'bottom-end',\n  showConfirmButton: false,\n  timer: 3000,\n  timerProgressBar: true,\n  background: '#0d0d0f',\n  color: '#ffffff',\n  didOpen: (toast) => {\n    toast.addEventListener('mouseenter', Swal.stopTimer);\n    toast.addEventListener('mouseleave', Swal.resumeTimer);\n  }\n});\n\nexport const AlertProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const showAlert = (message: string, type: 'success' | 'error' | 'info' = 'info') => {\n    console.log(`[Alert] Calling showAlert: ${message} (${type})`);\n    if (type === 'error') {\n      // Full modal for errors for better visibility\n      Swal.fire({\n        icon: 'error',\n        title: 'Action Required',\n        text: message,\n        background: '#0d0d0f',\n        color: '#ffffff',\n        confirmButtonColor: '#e1fd6a',\n        confirmButtonText: '<span style=\"color: black; font-weight: bold;\">OK</span>',\n        customClass: {\n          popup: 'rounded-2xl border border-white/10 shadow-2xl backdrop-blur-xl',\n          title: 'text-xl font-bold !text-white',\n          htmlContainer: 'text-sm text-white/70'\n        }\n      });\n    } else {\n      // Keep toasts for success/info to be less intrusive\n      Toast.fire({\n        icon: type,\n        title: message,\n        customClass: {\n          popup: 'rounded-xl border border-white/10 shadow-2xl backdrop-blur-xl',\n          title: 'text-sm font-semibold !text-white'\n        }\n      });\n    }\n  };\n\n  return (\n    <AlertContext.Provider value={{ showAlert }}>\n      {children}\n    </AlertContext.Provider>\n  );\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\common\\SectionLoader.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"RefreshCw"},"fix":{"range":[36,46],"text":""},"desc":"Remove unused variable 'RefreshCw'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'loadingText' is assigned a value but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingText"},"fix":{"range":[424,454],"text":""},"desc":"Remove unused variable 'loadingText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadingText' is assigned a value but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { RefreshCw, AlertCircle } from 'lucide-react';\n\ninterface SectionLoaderProps {\n  isLoading: boolean;\n  error?: string | null;\n  onRetry?: () => void;\n  children: React.ReactNode;\n  className?: string;\n  minHeight?: string;\n  loadingText?: string;\n}\n\nconst SectionLoader: React.FC<SectionLoaderProps> = ({\n  isLoading,\n  error,\n  onRetry,\n  children,\n  className = '',\n  minHeight = '400px',\n  loadingText = 'Loading...'\n}) => {\n  // Do not obstruct UI: render children without overlay while loading\n  if (isLoading) {\n    return <div className={className}>{children}</div>;\n  }\n\n  if (error) {\n    return (\n      <div\n        className={`relative ${className}`}\n        style={{ minHeight }}\n      >\n        <div className=\"absolute inset-0 bg-red-50/80 backdrop-blur-sm rounded-lg flex items-center justify-center z-10\">\n          <div className=\"text-center p-6\">\n            <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-3\" />\n            <h3 className=\"text-lg font-semibold text-red-800 mb-2\">Error Loading Section</h3>\n            <p className=\"text-red-600 mb-4 max-w-md\">{error}</p>\n            {onRetry && (\n              <button\n                onClick={onRetry}\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n              >\n                Try Again\n              </button>\n            )}\n          </div>\n        </div>\n        {/* Render faded content underneath */}\n        <div className=\"opacity-20 pointer-events-none\">\n          {children}\n        </div>\n      </div>\n    );\n  }\n\n  return <div className={className}>{children}</div>;\n};\n\nexport default SectionLoader;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOAdmin.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":2,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[74,81],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":2,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":2,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"Settings"},"fix":{"range":[95,105],"text":""},"desc":"Remove unused variable 'Settings'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":2,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":54},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":2,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertTriangle"},"fix":{"range":[105,120],"text":""},"desc":"Remove unused variable 'AlertTriangle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":2,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":69},{"ruleId":"no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":2,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":78,"suggestions":[{"messageId":"removeVar","data":{"varName":"XCircle"},"fix":{"range":[120,129],"text":""},"desc":"Remove unused variable 'XCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":2,"column":71,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":78},{"ruleId":"no-unused-vars","severity":1,"message":"'UserCheck' is defined but never used.","line":2,"column":80,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":89,"suggestions":[{"messageId":"removeVar","data":{"varName":"UserCheck"},"fix":{"range":[129,140],"text":""},"desc":"Remove unused variable 'UserCheck'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserCheck' is defined but never used.","line":2,"column":80,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":89},{"ruleId":"no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":2,"column":91,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":101,"suggestions":[{"messageId":"removeVar","data":{"varName":"DollarSign"},"fix":{"range":[140,152],"text":""},"desc":"Remove unused variable 'DollarSign'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":2,"column":91,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":101},{"ruleId":"no-unused-vars","severity":1,"message":"'Layers' is defined but never used.","line":2,"column":120,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":126,"suggestions":[{"messageId":"removeVar","data":{"varName":"Layers"},"fix":{"range":[169,177],"text":""},"desc":"Remove unused variable 'Layers'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Layers' is defined but never used.","line":2,"column":120,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":126},{"ruleId":"no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":2,"column":128,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":138,"suggestions":[{"messageId":"removeVar","data":{"varName":"TrendingUp"},"fix":{"range":[177,189],"text":""},"desc":"Remove unused variable 'TrendingUp'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":2,"column":128,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":138},{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":2,"column":140,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":146,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[189,197],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":2,"column":140,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":146},{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":2,"column":148,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":158,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowRight"},"fix":{"range":[197,209],"text":""},"desc":"Remove unused variable 'ArrowRight'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":2,"column":148,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":158},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":2,"column":160,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":166,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[209,217],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":2,"column":160,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":166},{"ruleId":"no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":2,"column":168,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":171,"suggestions":[{"messageId":"removeVar","data":{"varName":"Zap"},"fix":{"range":[217,222],"text":""},"desc":"Remove unused variable 'Zap'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":2,"column":168,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":171},{"ruleId":"no-unused-vars","severity":1,"message":"'Home' is defined but never used.","line":2,"column":173,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":177,"suggestions":[{"messageId":"removeVar","data":{"varName":"Home"},"fix":{"range":[222,228],"text":""},"desc":"Remove unused variable 'Home'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Home' is defined but never used.","line":2,"column":173,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":177},{"ruleId":"no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":2,"column":185,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":193,"suggestions":[{"messageId":"removeVar","data":{"varName":"Sparkles"},"fix":{"range":[234,244],"text":""},"desc":"Remove unused variable 'Sparkles'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":2,"column":185,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":193},{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":2,"column":195,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":207,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronRight"},"fix":{"range":[244,258],"text":""},"desc":"Remove unused variable 'ChevronRight'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":2,"column":195,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":207},{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronLeft' is defined but never used.","line":2,"column":209,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":220,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronLeft"},"fix":{"range":[258,271],"text":""},"desc":"Remove unused variable 'ChevronLeft'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronLeft' is defined but never used.","line":2,"column":209,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":220},{"ruleId":"no-unused-vars","severity":1,"message":"'Wallet' is defined but never used.","line":2,"column":222,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":228,"suggestions":[{"messageId":"removeVar","data":{"varName":"Wallet"},"fix":{"range":[271,279],"text":""},"desc":"Remove unused variable 'Wallet'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wallet' is defined but never used.","line":2,"column":222,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":228},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":2,"column":230,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":238,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[279,289],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":2,"column":230,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":238},{"ruleId":"no-unused-vars","severity":1,"message":"'FaCheckCircle' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"FaCheckCircle"},"fix":{"range":[375,422],"text":""},"desc":"Remove unused variable 'FaCheckCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCheckCircle' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[842,845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[842,845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'activeSection' is assigned a value but never used.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"activeSection"},"fix":{"range":[1070,1083],"text":""},"desc":"Remove unused variable 'activeSection'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeSection' is assigned a value but never used.","line":26,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'setActiveSection' is assigned a value but never used.","line":26,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"setActiveSection"},"fix":{"range":[1083,1101],"text":""},"desc":"Remove unused variable 'setActiveSection'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setActiveSection' is assigned a value but never used.","line":26,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'newStakeForm' is assigned a value but never used.","line":41,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"newStakeForm"},"fix":{"range":[1651,1663],"text":""},"desc":"Remove unused variable 'newStakeForm'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'newStakeForm' is assigned a value but never used.","line":41,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'setNewStakeForm' is assigned a value but never used.","line":41,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setNewStakeForm"},"fix":{"range":[1663,1680],"text":""},"desc":"Remove unused variable 'setNewStakeForm'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setNewStakeForm' is assigned a value but never used.","line":41,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":39},{"ruleId":"no-unused-vars","severity":1,"message":"'errors' is assigned a value but never used.","line":47,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"errors"},"fix":{"range":[1898,1904],"text":""},"desc":"Remove unused variable 'errors'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'errors' is assigned a value but never used.","line":47,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'setErrors' is assigned a value but never used.","line":47,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"setErrors"},"fix":{"range":[1904,1915],"text":""},"desc":"Remove unused variable 'setErrors'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setErrors' is assigned a value but never used.","line":47,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'profileData' is assigned a value but never used.","line":51,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"profileData"},"fix":{"range":[2060,2130],"text":""},"desc":"Remove unused variable 'profileData'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'profileData' is assigned a value but never used.","line":51,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2819,2822],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2819,2822],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2859,2862],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2859,2862],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MAX_STALE_MS' is assigned a value but never used.","line":69,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"MAX_STALE_MS"},"fix":{"range":[2941,2977],"text":""},"desc":"Remove unused variable 'MAX_STALE_MS'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAX_STALE_MS' is assigned a value but never used.","line":69,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":69,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'shortAddr' is assigned a value but never used.","line":81,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"shortAddr"},"fix":{"range":[3287,3395],"text":""},"desc":"Remove unused variable 'shortAddr'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'shortAddr' is assigned a value but never used.","line":81,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3702,3705],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3702,3705],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3718,3721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3718,3721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":155,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":155,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":155,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":155,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'SESSION_TTL_MS', 'adminSessionCache', and 'fetchAdminData'. Either include them or remove the dependency array.","line":188,"column":6,"nodeType":"ArrayExpression","endLine":188,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, account.address, adminSessionCache, SESSION_TTL_MS, fetchAdminData]","fix":{"range":[6677,6703],"text":"[dao.id, account.address, adminSessionCache, SESSION_TTL_MS, fetchAdminData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":219,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7762,7765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7762,7765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":225,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7924,7927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7924,7927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":238,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8349,8352],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8349,8352],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":243,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":243,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8481,8484],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8481,8484],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":264,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":264,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":264,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchStakeSettings'. Either include it or remove the dependency array.","line":271,"column":6,"nodeType":"ArrayExpression","endLine":271,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, fetchStakeSettings]","fix":{"range":[9514,9522],"text":"[dao.id, fetchStakeSettings]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":292,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10258,10261],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10258,10261],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":302,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10663,10666],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10663,10666],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":313,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":313,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10938,10941],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10938,10941],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":373,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":373,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13967,13970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13967,13970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":75,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Shield, Users, Clock, Plus, Trash2, Settings, AlertTriangle, XCircle, UserCheck, DollarSign, Edit, RefreshCw, Layers, TrendingUp, Filter, ArrowRight, Search, Zap, Home, Lock, Sparkles, ChevronRight, ChevronLeft, Wallet, Calendar } from 'lucide-react';\nimport { useGetProfile } from '../../useServices/useProfile';\nimport { FaCheckCircle } from 'react-icons/fa';\nimport Avatar from 'boring-avatars';\nimport { useWallet } from '../../contexts/CedraWalletProvider';\nimport { cedraClient } from '../../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../../cedra_service/constants';\nimport { safeView } from '../../utils/rpcUtils';\nimport { useAlert } from '../alert/AlertContext';\nimport { truncateAddress } from '../../utils/addressUtils';\n\ninterface AdminProps {\n  dao: any;\n}\n\ninterface Admin {\n  address: string;\n  role: 'super' | 'standard' | 'temporary';\n  addedAt: string;\n  expiresAt?: string;\n  status: 'active' | 'expired';\n}\n\nconst DAOAdmin: React.FC<AdminProps> = ({ dao }) => {\n  const [activeSection, setActiveSection] = useState('overview');\n  const [showAddAdmin, setShowAddAdmin] = useState(false);\n  const [newAdminForm, setNewAdminForm] = useState({\n    address: '',\n    role: 'standard' as 'super' | 'standard' | 'temporary',\n    startDate: new Date().toISOString().slice(0, 16),\n    endDate: new Date(Date.now() + 86400000).toISOString().slice(0, 16),\n  });\n\n  const [stakeSettings, setStakeSettings] = useState({\n    minStakeToJoin: 0,\n    minStakeToPropose: 0,\n    isLoading: false\n  });\n  const [showEditStake, setShowEditStake] = useState(false);\n  const [newStakeForm, setNewStakeForm] = useState({\n    minStakeToJoin: 0,\n    minStakeToPropose: 0\n  });\n  const [newMinStake, setNewMinStake] = useState<string>('');\n  const [newMinProposalStake, setNewMinProposalStake] = useState<string>('');\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const { account, signAndSubmitTransaction } = useWallet();\n  const { showAlert } = useAlert();\n  const { data: profileData } = useGetProfile(account?.address || null);\n\n  const MEMBERSHIP_DECIMALS = 1e6;\n\n  const toCEDRA = (u64: number): number => {\n    if (u64 === 0) return 0;\n    return u64 / MEMBERSHIP_DECIMALS;\n  };\n  const fromCEDRA = (val: number): number => Math.floor(val * MEMBERSHIP_DECIMALS);\n\n  const [admins, setAdmins] = useState<Admin[]>([]);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [currentRole, setCurrentRole] = useState<'super' | 'standard' | 'temporary' | 'none'>('none');\n  const [isRefreshingAdmins, setIsRefreshingAdmins] = useState(false);\n\n  const adminSessionCache: Map<string, { admins: Admin[]; isAdmin: boolean; currentRole: 'super' | 'standard' | 'temporary' | 'none'; timestamp: number }>\n    = (window as any).__adminSessionCache || ((window as any).__adminSessionCache = new Map());\n  const SESSION_TTL_MS = 10 * 60 * 1000;\n  const MAX_STALE_MS = 20 * 60 * 1000;\n\n  const ROLE_SUPER_ADMIN = 255;\n  const ROLE_STANDARD = 100;\n  const ROLE_TEMPORARY = 50;\n\n  const mapRole = (roleNum: number): 'super' | 'standard' | 'temporary' => {\n    if (roleNum === ROLE_SUPER_ADMIN) return 'super';\n    if (roleNum === ROLE_STANDARD) return 'standard';\n    return 'temporary';\n  };\n\n  const shortAddr = (addr: string) => (addr?.length > 14 ? `${addr.slice(0, 10)}...${addr.slice(-4)}` : addr);\n\n  const getDaoCreatorFromEvents = async (daoAddress: string): Promise<string | null> => {\n    try {\n      const events = await cedraClient.getModuleEventsByEventType({\n        eventType: `${MODULE_ADDRESS}::dao_core_file::DAOCreated`,\n        minimumLedgerVersion: 0\n      });\n      const ev = (events as any[]).find((e: any) => e?.data?.anchor_addrxess === daoAddress);\n      return ev?.data?.creator || null;\n    } catch {\n      return null;\n    }\n  };\n\n  const fetchAdminData = async (showSpinner: boolean = true) => {\n    if (!dao?.id) return;\n    try {\n      if (showSpinner) setIsRefreshingAdmins(true);\n\n      if (account?.address) {\n        const adminResult = await safeView({\n          function: `${MODULE_ADDRESS}::admin::is_admin`,\n          functionArguments: [dao.id, account.address]\n        });\n\n        let adminNow = Boolean(adminResult?.[0]);\n        let adminRole: 'super' | 'standard' | 'temporary' = 'standard';\n\n        if (adminNow) {\n          try {\n            const roleResult = await safeView({\n              function: `${MODULE_ADDRESS}::admin::get_admin_role`,\n              functionArguments: [dao.id, account.address]\n            });\n            if (roleResult?.[0] !== undefined) {\n              adminRole = mapRole(Number(roleResult[0]));\n            }\n          } catch (e) {\n            console.warn('Failed to fetch role', e);\n          }\n        } else {\n          const creator = await getDaoCreatorFromEvents(dao.id);\n          if (creator && creator.toLowerCase() === account.address.toLowerCase()) {\n            adminNow = true;\n            adminRole = 'super';\n          }\n        }\n\n        setIsAdmin(adminNow);\n        setCurrentRole(adminNow ? adminRole : 'none');\n      }\n\n      const addrRes = await safeView({\n        function: `${MODULE_ADDRESS}::admin::get_admins`,\n        functionArguments: [dao.id]\n      });\n\n      const addrs: string[] = Array.isArray(addrRes?.[0]) ? addrRes[0] : [];\n      const collected: Admin[] = [];\n\n      for (const addr of addrs) {\n        try {\n          const roleRes = await safeView({\n            function: `${MODULE_ADDRESS}::admin::get_admin_role`,\n            functionArguments: [dao.id, addr]\n          });\n          const roleNum = Number(roleRes?.[0] || ROLE_STANDARD);\n          collected.push({\n            address: addr,\n            role: mapRole(roleNum),\n            addedAt: 'Active Member',\n            status: 'active'\n          });\n        } catch (e) {\n          collected.push({\n            address: addr,\n            role: 'standard',\n            addedAt: 'Active Member',\n            status: 'active'\n          });\n        }\n      }\n\n      setAdmins(collected);\n      adminSessionCache.set(dao.id, {\n        admins: collected,\n        isAdmin: isAdmin,\n        currentRole: currentRole,\n        timestamp: Date.now()\n      });\n\n    } catch (error) {\n      console.error('Failed to fetch admin data', error);\n    } finally {\n      if (showSpinner) setIsRefreshingAdmins(false);\n    }\n  };\n\n  useEffect(() => {\n    const cached = adminSessionCache.get(dao.id);\n    if (cached && (Date.now() - cached.timestamp) < SESSION_TTL_MS) {\n      setAdmins(cached.admins);\n      setIsAdmin(cached.isAdmin);\n      setCurrentRole(cached.currentRole);\n    }\n    fetchAdminData(false);\n  }, [dao.id, account?.address]);\n\n  const handleAddAdmin = async () => {\n    if (!account || !signAndSubmitTransaction) return;\n    const addr = newAdminForm.address.trim();\n    if (!addr.startsWith('0x')) {\n      showAlert('Invalid address', 'error');\n      return;\n    }\n\n    try {\n      const roleNum = newAdminForm.role === 'super' ? ROLE_SUPER_ADMIN : (newAdminForm.role === 'standard' ? ROLE_STANDARD : ROLE_TEMPORARY);\n\n      let expiresInSecs = 0;\n      if (newAdminForm.role === 'temporary') {\n        const start = new Date(newAdminForm.startDate).getTime();\n        const end = new Date(newAdminForm.endDate).getTime();\n        expiresInSecs = Math.max(0, Math.floor((end - start) / 1000));\n\n        if (expiresInSecs === 0) {\n          showAlert('End time must be after start time', 'error');\n          return;\n        }\n      }\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::admin::add_admin`,\n        typeArguments: [],\n        functionArguments: [dao.id, addr, roleNum, expiresInSecs]\n      };\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (tx) {\n        showAlert('Admin added successfully', 'success');\n        setShowAddAdmin(false);\n        fetchAdminData();\n      }\n    } catch (e: any) {\n      showAlert(e.message || 'Failed to add admin', 'error');\n    }\n  };\n\n  const handleRemoveAdmin = async (addr: string) => {\n    if (!account || !signAndSubmitTransaction) return;\n    try {\n      const payload = {\n        function: `${MODULE_ADDRESS}::admin::remove_admin`,\n        typeArguments: [],\n        functionArguments: [dao.id, addr]\n      };\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (tx) {\n        showAlert('Admin removed successfully', 'success');\n        fetchAdminData();\n      }\n    } catch (e: any) {\n      showAlert(e.message || 'Failed to remove admin', 'error');\n    }\n  };\n\n  const fetchStakeSettings = async () => {\n    try {\n      setStakeSettings(prev => ({ ...prev, isLoading: true }));\n      const [joinRes, proposeRes] = await Promise.allSettled([\n        cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::membership::get_min_stake`, functionArguments: [dao.id] } }),\n        cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::membership::get_min_proposal_stake`, functionArguments: [dao.id] } })\n      ]);\n\n      const joinRaw = Number((joinRes.status === 'fulfilled' ? joinRes.value[0] : 0) || 0);\n      const proposeRaw = Number((proposeRes.status === 'fulfilled' ? proposeRes.value[0] : 0) || 0);\n\n      setStakeSettings({\n        minStakeToJoin: toCEDRA(joinRaw),\n        minStakeToPropose: toCEDRA(proposeRaw),\n        isLoading: false\n      });\n    } catch (e) {\n      setStakeSettings(prev => ({ ...prev, isLoading: false }));\n    }\n  };\n\n  useEffect(() => {\n    fetchStakeSettings();\n  }, [dao.id]);\n\n  const handleUpdateStakeSettings = async () => {\n    if (!account || !signAndSubmitTransaction) return;\n    try {\n      const joinVal = parseFloat(newMinStake);\n      const proposeVal = parseFloat(newMinProposalStake);\n\n      if (isNaN(joinVal) && isNaN(proposeVal)) {\n        showAlert('Please enter at least one valid number', 'error');\n        return;\n      }\n\n      let success = false;\n\n      if (!isNaN(joinVal) && joinVal !== stakeSettings.minStakeToJoin) {\n        const joinPayload = {\n          function: `${MODULE_ADDRESS}::membership::update_min_stake`,\n          typeArguments: [],\n          functionArguments: [dao.id, fromCEDRA(joinVal)]\n        };\n        await signAndSubmitTransaction({ payload: joinPayload } as any);\n        success = true;\n      }\n\n      if (!isNaN(proposeVal) && proposeVal !== stakeSettings.minStakeToPropose) {\n        const proposePayload = {\n          function: `${MODULE_ADDRESS}::membership::update_min_proposal_stake`,\n          typeArguments: [],\n          functionArguments: [dao.id, fromCEDRA(proposeVal)]\n        };\n        await signAndSubmitTransaction({ payload: proposePayload } as any);\n        success = true;\n      }\n\n      if (success) {\n        showAlert('Settings updated successfully', 'success');\n        fetchStakeSettings();\n        setShowEditStake(false);\n      } else {\n        showAlert('No changes detected', 'info');\n      }\n    } catch (e: any) {\n      showAlert(e.message || 'Update failed', 'error');\n    }\n  };\n\n  return (\n    <div className=\"space-y-8 animate-fade-in p-4 lg:p-8\">\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n        <div>\n          <h2 className=\"text-3xl font-black text-white tracking-tight flex items-center gap-3\">\n            <Shield className=\"text-[#e1fd6a]\" />\n            Organization Control\n          </h2>\n          <p className=\"text-slate-400 mt-1\">Manage administrators and governance parameters</p>\n        </div>\n        <button\n          onClick={() => fetchAdminData()}\n          className=\"p-3 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10 text-[#e1fd6a]\"\n        >\n          <RefreshCw className={isRefreshingAdmins ? 'animate-spin' : ''} size={20} />\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2 space-y-8\">\n          <div className=\"bg-white/5 border border-white/5 p-6 rounded-3xl shadow-none\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-white flex items-center gap-2\">\n                <Users size={20} />\n                Active Administrators\n              </h3>\n              {isAdmin && (\n                <button\n                  onClick={() => setShowAddAdmin(!showAddAdmin)}\n                  className=\"p-2 bg-[#e1fd6a] text-black rounded-lg hover:bg-opacity-90 transition-all\"\n                >\n                  <Plus size={18} />\n                </button>\n              )}\n            </div>\n\n            {showAddAdmin && (\n              <div className=\"mb-8 p-6 bg-white/[0.03] rounded-3xl border border-white/10 space-y-6 animate-slide-up shadow-none\">\n                <div className=\"space-y-1\">\n                  <label className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-1\">Admin Address</label>\n                  <input\n                    type=\"text\"\n                    placeholder=\"0x...\"\n                    className=\"w-full bg-white/[0.05] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e1fd6a] outline-none transition-all\"\n                    value={newAdminForm.address}\n                    onChange={(e) => setNewAdminForm({ ...newAdminForm, address: e.target.value })}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"space-y-1\">\n                    <label className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-1\">Role Type</label>\n                    <select\n                      className=\"w-full bg-white/[0.05] border border-white/10 rounded-xl px-4 py-3 text-white outline-none cursor-pointer focus:border-[#e1fd6a] transition-all\"\n                      value={newAdminForm.role}\n                      onChange={(e) => setNewAdminForm({ ...newAdminForm, role: e.target.value as any })}\n                    >\n                      <option value=\"standard\">Standard Admin</option>\n                      <option value=\"super\">Super Admin</option>\n                      <option value=\"temporary\">Temporary Admin</option>\n                    </select>\n                  </div>\n\n                  {newAdminForm.role === 'temporary' && (\n                    <div className=\"space-y-1 animate-fade-in\">\n                      <label className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-1\">End Time</label>\n                      <input\n                        type=\"datetime-local\"\n                        className=\"w-full bg-white/[0.05] border border-white/10 rounded-xl px-4 py-3 text-white outline-none focus:border-[#e1fd6a]\"\n                        value={newAdminForm.endDate}\n                        onChange={(e) => setNewAdminForm({ ...newAdminForm, endDate: e.target.value })}\n                      />\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex gap-4 pt-2\">\n                  <button\n                    onClick={() => setShowAddAdmin(false)}\n                    className=\"flex-1 py-4 bg-white/5 text-white font-bold rounded-xl hover:bg-white/10 transition-all\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleAddAdmin}\n                    className=\"flex-[2] py-4 bg-[#e1fd6a] text-black font-black rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all\"\n                  >\n                    Configure Authorization\n                  </button>\n                </div>\n              </div>\n            )}\n\n            <div className=\"space-y-3\">\n              {admins.map((adm) => (\n                <div key={adm.address} className=\"flex items-center justify-between p-4 bg-white/[0.02] border border-white/5 rounded-2xl hover:bg-white/[0.04] transition-all\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"rounded-full overflow-hidden border border-white/10 shrink-0\">\n                      <Avatar\n                        name={adm.address}\n                        variant=\"beam\"\n                        size={32}\n                        colors={[\"#e1fd6a\", \"#a3e635\", \"#84cc16\", \"#65a30d\", \"#4d7c0f\"]}\n                      />\n                    </div>\n                    <div>\n                      <p className=\"text-white font-mono text-sm\">{truncateAddress(adm.address)}</p>\n                      <span className={`text-[10px] uppercase font-bold tracking-widest px-2 py-0.5 rounded-full ${adm.role === 'super' ? 'bg-purple-500/10 text-purple-400' :\n                        adm.role === 'temporary' ? 'bg-orange-500/10 text-orange-400' :\n                          'bg-blue-500/10 text-blue-400'\n                        }`}>\n                        {adm.role} role\n                      </span>\n                    </div>\n                  </div>\n                  {isAdmin && currentRole === 'super' && adm.address.toLowerCase() !== account?.address?.toLowerCase() && (\n                    <button\n                      onClick={() => handleRemoveAdmin(adm.address)}\n                      className=\"p-2 text-red-400/40 hover:text-red-400 transition-colors\"\n                    >\n                      <Trash2 size={16} />\n                    </button>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-8\">\n          <div className=\"bg-white/5 border border-white/5 p-6 rounded-3xl shadow-none\">\n            <h3 className=\"text-xl font-bold text-white mb-6 flex items-center gap-2\">\n              <Lock size={20} />\n              Governance Gate\n            </h3>\n            <div className=\"space-y-6\">\n              <div>\n                <span className=\"text-[10px] font-bold text-slate-500 block mb-1 uppercase tracking-tighter\">Min membership stake</span>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-2xl font-black text-white\">{stakeSettings.minStakeToJoin} <span className=\"text-slate-600 text-xs\">CEDRA</span></span>\n                </div>\n              </div>\n              <div>\n                <span className=\"text-[10px] font-bold text-slate-500 block mb-1 uppercase tracking-tighter\">Min proposal stake</span>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-2xl font-black text-white\">{stakeSettings.minStakeToPropose} <span className=\"text-slate-600 text-xs\">CEDRA</span></span>\n                </div>\n              </div>\n              {isAdmin && (\n                <button\n                  onClick={() => setShowEditStake(!showEditStake)}\n                  className=\"w-full py-3 bg-white/5 border border-white/10 rounded-xl text-white text-xs font-bold hover:bg-white/10 transition-all flex items-center justify-center gap-2\"\n                >\n                  <Edit size={14} />\n                  Modify Parameters\n                </button>\n              )}\n            </div>\n\n            {showEditStake && (\n              <div className=\"mt-6 p-6 bg-white/[0.02] border border-white/5 rounded-2xl space-y-5 animate-slide-up shadow-none\">\n                <div className=\"space-y-2\">\n                  <label className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest\">Join Requirement (CEDRA)</label>\n                  <input\n                    type=\"number\"\n                    placeholder={String(stakeSettings.minStakeToJoin)}\n                    value={newMinStake}\n                    onChange={(e) => setNewMinStake(e.target.value)}\n                    className=\"w-full bg-white/[0.05] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e1fd6a] outline-none transition-all\"\n                  />\n                  <p className=\"text-[9px] text-slate-500 italic\">Leave empty or same to keep current</p>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest\">Proposal Requirement (CEDRA)</label>\n                  <input\n                    type=\"number\"\n                    placeholder={String(stakeSettings.minStakeToPropose)}\n                    value={newMinProposalStake}\n                    onChange={(e) => setNewMinProposalStake(e.target.value)}\n                    className=\"w-full bg-white/[0.05] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e1fd6a] outline-none transition-all\"\n                  />\n                  <p className=\"text-[9px] text-slate-500 italic\">Leave empty or same to keep current</p>\n                </div>\n                <button\n                  onClick={handleUpdateStakeSettings}\n                  className=\"w-full py-4 bg-[#e1fd6a] text-black font-black rounded-xl text-xs hover:scale-[1.02] active:scale-[0.98] transition-all\"\n                >\n                  Update Selected Parameters\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DAOAdmin;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOBoost.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchBadgeData'. Either include it or remove the dependency array.","line":119,"column":8,"nodeType":"ArrayExpression","endLine":119,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, fetchBadgeData]","fix":{"range":[5199,5207],"text":"[dao.id, fetchBadgeData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":145,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6215,6218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6215,6218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6253,6256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6253,6256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6441,6444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6441,6444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6680,6683],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6680,6683],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Zap, Rocket, Wallet, AlertTriangle, Crown, Star, Sparkles, Settings, Shield } from 'lucide-react';\r\nimport { DAO } from '../../types/dao';\r\nimport { useWallet } from '../../contexts/CedraWalletProvider';\r\nimport { useAlert } from '../alert/AlertContext';\r\nimport { cedraClient } from '../../cedra_service/cedra-client';\r\nimport { MODULE_ADDRESS } from '../../cedra_service/constants';\r\nimport { safeView } from '../../utils/rpcUtils';\r\nimport { BalanceService } from '../../useServices/useBalance';\r\n\r\ninterface DAOBoostProps {\r\n    dao: DAO;\r\n}\r\n\r\ninterface BadgeInfo {\r\n    purchasedAt: number;\r\n    expiresAt: number;\r\n    durationMonths: number;\r\n    isActive: boolean;\r\n}\r\n\r\nconst StepIndicator: React.FC<{ activeStep: number }> = ({ activeStep }) => {\r\n    const steps = [\r\n        { icon: Sparkles, label: 'Explore' },\r\n        { icon: Settings, label: 'Manage' },\r\n        { icon: Shield, label: 'Boost' }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center w-full max-w-md mx-auto mb-8 md:mb-12 relative px-4\">\r\n            <div className=\"absolute top-1/2 left-4 right-4 h-[1px] bg-white/10 -translate-y-1/2\" />\r\n            <div className=\"flex justify-between w-full relative z-10\">\r\n                {steps.map((step, i) => {\r\n                    const Icon = step.icon;\r\n                    const isActive = i <= activeStep;\r\n                    const isCurrent = i === activeStep;\r\n\r\n                    return (\r\n                        <div key={i} className=\"flex flex-col items-center gap-2\">\r\n                            <div\r\n                                className={`w-10 h-10 md:w-12 md:h-12 rounded-2xl flex items-center justify-center transition-all duration-500 border-2 ${isCurrent\r\n                                    ? 'bg-[#e1fd6a] text-black border-[#e1fd6a] shadow-[0_0_20px_rgba(225,253,106,0.4)]'\r\n                                    : isActive\r\n                                        ? 'bg-[#1a1a1e] text-[#e1fd6a] border-[#e1fd6a]/30'\r\n                                        : 'bg-[#0d0d10] text-slate-600 border-white/5'\r\n                                    }`}\r\n                            >\r\n                                <Icon size={18} className={isCurrent ? 'fill-current' : ''} />\r\n                            </div>\r\n                            <span className={`text-[8px] font-black ${isCurrent ? 'text-white' : 'text-slate-600'}`}>\r\n                                {step.label}\r\n                            </span>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst DAOBoost: React.FC<DAOBoostProps> = ({ dao }) => {\r\n    const { account, signAndSubmitTransaction } = useWallet();\r\n    const { showAlert } = useAlert();\r\n\r\n    const [selectedPlan, setSelectedPlan] = useState<'monthly' | 'yearly'>('monthly');\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n    const [badgeInfo, setBadgeInfo] = useState<BadgeInfo | null>(null);\r\n    const [pricing, setPricing] = useState<{ monthly: number; yearly: number }>({ monthly: 50, yearly: 600 });\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const fetchBadgeData = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            console.log('Fetching badge pricing from:', `${MODULE_ADDRESS}::featured::get_badge_pricing`);\r\n            const pricingRes = await safeView({\r\n                function: `${MODULE_ADDRESS}::featured::get_badge_pricing`,\r\n                functionArguments: []\r\n            }, 'badge_pricing');\r\n\r\n            console.log('Pricing result raw:', pricingRes);\r\n\r\n            if (pricingRes && pricingRes.length >= 2) {\r\n                const fetchedMonthly = Number(pricingRes[0]) / 1e8;\r\n                const fetchedYearly = Number(pricingRes[1]) / 1e8;\r\n\r\n                console.log('Calculated pricing:', { fetchedMonthly, fetchedYearly });\r\n\r\n                // If values are extremely small (likely due to decimal mismatch), use defaults or raw values\r\n                if (fetchedMonthly > 0) {\r\n                    setPricing({\r\n                        monthly: fetchedMonthly < 0.001 ? Number(pricingRes[0]) : fetchedMonthly,\r\n                        yearly: fetchedYearly < 0.001 ? Number(pricingRes[1]) : fetchedYearly\r\n                    });\r\n                }\r\n            }\r\n\r\n            const infoRes = await safeView({\r\n                function: `${MODULE_ADDRESS}::featured::get_badge_info`,\r\n                functionArguments: [dao.id]\r\n            }, `badge_info_${dao.id}`);\r\n\r\n            if (infoRes && infoRes.length >= 4) {\r\n                setBadgeInfo({\r\n                    purchasedAt: Number(infoRes[0]),\r\n                    expiresAt: Number(infoRes[1]),\r\n                    durationMonths: Number(infoRes[2]),\r\n                    isActive: Boolean(infoRes[3])\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.warn('Failed to fetch badge data:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchBadgeData();\r\n    }, [dao.id]);\r\n\r\n    const handleActivateBoost = async () => {\r\n        if (!account || !signAndSubmitTransaction) {\r\n            showAlert('Please connect your wallet first', 'error');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setIsProcessing(true);\r\n            const isYearly = selectedPlan === 'yearly';\r\n            const price = isYearly ? pricing.yearly : pricing.monthly;\r\n\r\n            const balanceCheck = await BalanceService.hasSufficientBalance(account.address, price, 0.05);\r\n            if (!balanceCheck.sufficient) {\r\n                showAlert(`Insufficient balance. Required: ${price} CEDRA.`, 'error');\r\n                setIsProcessing(false);\r\n                return;\r\n            }\r\n\r\n            const payload = {\r\n                function: `${MODULE_ADDRESS}::featured::purchase_featured_badge`,\r\n                typeArguments: [],\r\n                functionArguments: [dao.id, isYearly],\r\n            };\r\n\r\n            const tx = await signAndSubmitTransaction({ payload } as any);\r\n\r\n            if (tx && (tx as any).hash) {\r\n                showAlert('Purchase transaction submitted!', 'success');\r\n                await cedraClient.waitForTransaction({\r\n                    transactionHash: (tx as any).hash,\r\n                    options: { checkSuccess: true }\r\n                });\r\n                showAlert('Successfully boosted your DAO!', 'success');\r\n                await fetchBadgeData();\r\n            }\r\n        } catch (error: any) {\r\n            console.error('Boost purchase failed:', error);\r\n            showAlert(error?.message || 'Failed to purchase boost', 'error');\r\n        } finally {\r\n            setIsProcessing(false);\r\n        }\r\n    };\r\n\r\n    const formatDate = (timestamp: number) => {\r\n        if (timestamp === 0) return 'N/A';\r\n        return new Date(timestamp * 1000).toLocaleDateString();\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-5xl mx-auto space-y-8 md:space-y-12 py-4 md:py-8 animate-fade-in px-4\">\r\n            <StepIndicator activeStep={2} />\r\n\r\n            <div className=\"text-center space-y-4\">\r\n                <div className=\"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-[#e1fd6a]/10 border border-[#e1fd6a]/20 text-[#e1fd6a] text-[10px] font-black\">\r\n                    <Rocket size={12} />\r\n                    Boost visibility\r\n                </div>\r\n                <h1 className=\"text-3xl md:text-5xl font-black text-white tracking-tight leading-tight px-4 transition-all\">\r\n                    Grow Your Community\r\n                </h1>\r\n                <p className=\"text-slate-400 max-w-2xl mx-auto font-medium text-sm md:text-base px-6\">\r\n                    Get featured on the homepage to attract more members, proposals, and liquidity to your organization.\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"nb-card !bg-[#131317] border-white/5 p-6 md:p-8 max-w-3xl mx-auto\">\r\n                {!account ? (\r\n                    <div className=\"flex flex-col md:flex-row items-center gap-6 md:gap-8 text-center md:text-left\">\r\n                        <div className=\"w-16 h-16 md:w-20 md:h-20 rounded-3xl bg-white/5 flex items-center justify-center border border-white/10 shrink-0\">\r\n                            <Wallet className=\"w-8 h-8 md:w-10 md:h-10 text-slate-500\" />\r\n                        </div>\r\n                        <div className=\"flex-1 space-y-2\">\r\n                            <div className=\"flex items-center gap-2 justify-center md:justify-start\">\r\n                                <div className=\"w-2 h-2 rounded-full bg-slate-500 animate-pulse\" />\r\n                                <span className=\"text-[10px] font-black text-slate-500\">Disconnected</span>\r\n                            </div>\r\n                            <h3 className=\"text-xl md:text-2xl font-black text-white\">Connect Wallet to Begin</h3>\r\n                            <p className=\"text-slate-500 text-xs md:text-sm\">Manage and boost your organizations from here.</p>\r\n                        </div>\r\n                        <div className=\"hidden md:block\">\r\n                            <div className=\"p-4 bg-white/5 rounded-2xl border border-white/10 opacity-50 select-none\">\r\n                                <Rocket className=\"w-12 h-12 text-slate-600\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ) : badgeInfo?.isActive ? (\r\n                    <div className=\"flex flex-col md:flex-row items-center gap-6 md:gap-8 text-center md:text-left\">\r\n                        <div className=\"w-16 h-16 md:w-20 md:h-20 rounded-3xl bg-[#e1fd6a]/10 flex items-center justify-center border border-[#e1fd6a]/20 shrink-0\">\r\n                            <Crown className=\"w-8 h-8 md:w-10 md:h-10 text-[#e1fd6a]\" />\r\n                        </div>\r\n                        <div className=\"flex-1 space-y-2\">\r\n                            <div className=\"flex items-center gap-2 justify-center md:justify-start\">\r\n                                <div className=\"w-2 h-2 rounded-full bg-[#e1fd6a] animate-pulse\" />\r\n                                <span className=\"text-[10px] font-black text-[#e1fd6a]\">Featured active</span>\r\n                            </div>\r\n                            <h3 className=\"text-xl md:text-2xl font-black text-white\">Your DAO is Currently Featured</h3>\r\n                            <p className=\"text-slate-500 text-xs md:text-sm\">Enjoy increased visibility until {formatDate(badgeInfo.expiresAt)}.</p>\r\n                        </div>\r\n                        <div className=\"w-full md:w-auto px-6 py-3 bg-[#e1fd6a]/10 border border-[#e1fd6a]/20 rounded-xl\">\r\n                            <div className=\"flex flex-col items-center\">\r\n                                <span className=\"text-[10px] font-black text-[#e1fd6a]\">Expires in</span>\r\n                                <span className=\"text-lg font-black text-white transition-all\">\r\n                                    {Math.ceil((badgeInfo.expiresAt - Math.floor(Date.now() / 1000)) / 86400)} Days\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex flex-col md:flex-row items-center gap-6 md:gap-8 text-center md:text-left\">\r\n                        <div className=\"w-16 h-16 md:w-20 md:h-20 rounded-3xl bg-blue-500/10 flex items-center justify-center border border-blue-500/20 shrink-0\">\r\n                            <Zap className=\"w-8 h-8 md:w-10 md:h-10 text-blue-400\" />\r\n                        </div>\r\n                        <div className=\"flex-1 space-y-2\">\r\n                            <div className=\"flex items-center gap-2 justify-center md:justify-start\">\r\n                                <div className=\"w-2 h-2 rounded-full bg-blue-500\" />\r\n                                <span className=\"text-[10px] font-black text-blue-400\">Ready to boost</span>\r\n                            </div>\r\n                            <h3 className=\"text-xl md:text-2xl font-black text-white\">Select a Plan to Start</h3>\r\n                            <p className=\"text-slate-500 text-xs md:text-sm\">Choose the best visibility option for {dao.name}.</p>\r\n                        </div>\r\n                        <div className=\"relative hidden md:block\">\r\n                            <div className=\"p-4 bg-blue-500/10 rounded-2xl border border-blue-500/20\">\r\n                                <Rocket className=\"w-12 h-12 text-blue-400\" />\r\n                            </div>\r\n                            <div className=\"absolute -top-2 -right-2 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center border-4 border-[#131317]\">\r\n                                <Star size={10} className=\"text-white fill-current\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"text-center space-y-8 md:space-y-12\">\r\n                <h2 className=\"text-2xl md:text-3xl font-black text-white tracking-tight\">Standard plans</h2>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-4xl mx-auto px-2\">\r\n                    {/* Monthly Plan */}\r\n                    <div\r\n                        onClick={() => setSelectedPlan('monthly')}\r\n                        className={`relative group cursor-pointer transition-all duration-300 ${selectedPlan === 'monthly'\r\n                            ? 'scale-100 md:scale-105 ring-2 ring-blue-500 ring-offset-4 md:ring-offset-8 ring-offset-[#0d0d10]'\r\n                            : 'opacity-70 hover:opacity-100'\r\n                            }`}\r\n                    >\r\n                        <div className=\"nb-card !bg-[#131317] border-white/5 p-8 md:p-10 h-full flex flex-col space-y-6 md:space-y-8 rounded-[32px] md:rounded-[40px]\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-3 h-3 rounded-full bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,0.5)]\" />\r\n                                <span className=\"text-xs font-black text-slate-400 text-left\">Monthly plan</span>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-baseline gap-2\">\r\n                                <span className=\"text-6xl md:text-7xl font-black text-white tracking-tighter\">\r\n                                    {isLoading ? '...' : (pricing.monthly || 50)}\r\n                                </span>\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"text-orange-400 text-sm md:text-base font-black italic tracking-tighter\">CEDRA</span>\r\n                                    <span className=\"text-[10px] md:text-xs font-black text-slate-500\">/ mo</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-3 md:space-y-4 pt-2 flex-1 text-left\">\r\n                                {[\r\n                                    'Priority homepage listing',\r\n                                    'Standard verified badge',\r\n                                    'Flexible month-to-month',\r\n                                    'Increased discovery rate'\r\n                                ].map((feature, i) => (\r\n                                    <div key={i} className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-4 h-4 md:w-5 md:h-5 rounded-md bg-orange-500/10 flex items-center justify-center shrink-0\">\r\n                                            <Plus className=\"w-2.5 h-2.5 text-orange-500\" />\r\n                                        </div>\r\n                                        <span className=\"text-xs md:text-sm font-bold text-slate-300\">{feature}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <button className={`w-full py-4 md:py-5 rounded-2xl font-black text-xs transition-all ${selectedPlan === 'monthly' ? 'bg-blue-600 text-white shadow-xl shadow-blue-500/20' : 'bg-white/5 text-slate-400 border border-white/10'\r\n                                }`}>\r\n                                {selectedPlan === 'monthly' ? 'Selected Plan' : 'Select Plan'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Yearly Plan */}\r\n                    <div\r\n                        onClick={() => setSelectedPlan('yearly')}\r\n                        className={`relative group cursor-pointer transition-all duration-300 mt-4 md:mt-0 ${selectedPlan === 'yearly'\r\n                            ? 'scale-100 md:scale-105 ring-2 ring-[#e1fd6a] ring-offset-4 md:ring-offset-8 ring-offset-[#0d0d10]'\r\n                            : 'opacity-70 hover:opacity-100'\r\n                            }`}\r\n                    >\r\n                        <div className=\"absolute -top-3 md:-top-4 left-1/2 -translate-x-1/2 z-10 transition-transform group-hover:scale-110\">\r\n                            <div className=\"bg-[#e1fd6a] text-[#0d0d10] text-[8px] md:text-[9px] font-black px-3 md:px-4 py-1.5 rounded-full shadow-lg shadow-[#e1fd6a]/20\">\r\n                                Recommended plan\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"nb-card !bg-[#131317] border-white/5 p-8 md:p-10 h-full flex flex-col space-y-6 md:space-y-8 rounded-[32px] md:rounded-[40px]\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-3 h-3 rounded-full bg-[#e1fd6a] shadow-[0_0_10px_rgba(225,253,106,0.5)]\" />\r\n                                <span className=\"text-xs font-black text-slate-400 text-left\">Best value plan</span>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-baseline gap-2\">\r\n                                <span className=\"text-6xl md:text-7xl font-black text-white tracking-tighter\">\r\n                                    {isLoading ? '...' : (pricing.yearly || 600)}\r\n                                </span>\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"text-[#e1fd6a] text-sm md:text-base font-black italic tracking-tighter\">CEDRA</span>\r\n                                    <span className=\"text-[10px] md:text-xs font-black text-slate-500\">/ yr</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-3 md:space-y-4 pt-2 flex-1 text-left\">\r\n                                {[\r\n                                    'Permanent homepage spot',\r\n                                    'Premium gold badge',\r\n                                    'Save over 15% yearly',\r\n                                    '10x Discovery visibility',\r\n                                    'Full verification status'\r\n                                ].map((feature, i) => (\r\n                                    <div key={i} className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-4 h-4 md:w-5 md:h-5 rounded-md bg-[#e1fd6a]/10 flex items-center justify-center shrink-0\">\r\n                                            <Plus className=\"w-2.5 h-2.5 text-[#e1fd6a]\" />\r\n                                        </div>\r\n                                        <span className=\"text-xs md:text-sm font-bold text-slate-300\">{feature}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <button className={`w-full py-4 md:py-5 rounded-2xl font-black text-xs transition-all ${selectedPlan === 'yearly' ? 'bg-[#e1fd6a] text-black shadow-xl shadow-[#e1fd6a]/20' : 'bg-white/5 text-slate-400 border border-white/10'\r\n                                }`}>\r\n                                {selectedPlan === 'yearly' ? 'Selected Plan' : 'Select Plan'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col items-center gap-6 pt-8 md:pt-12 pb-12\">\r\n                <button\r\n                    onClick={handleActivateBoost}\r\n                    disabled={isProcessing || !account}\r\n                    className=\"w-full max-w-sm py-4 md:py-6 bg-white text-black text-xs md:text-sm font-black rounded-2xl shadow-2xl hover:bg-[#edf6fb] transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                    {isProcessing ? 'Processing...' : 'Activate Boost'}\r\n                </button>\r\n\r\n                {!account && (\r\n                    <div className=\"flex items-center gap-2 text-slate-500\">\r\n                        <AlertTriangle size={14} />\r\n                        <span className=\"text-[10px] font-bold\">Wallet connection required</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Plus = ({ className, size = 12 }: { className?: string, size?: number }) => (\r\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}>\r\n        <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\r\n        <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\r\n    </svg>\r\n);\r\n\r\nexport default DAOBoost;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOHome.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_ref' is defined but never used.","line":16,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":96,"suggestions":[{"messageId":"removeVar","data":{"varName":"_ref"},"fix":{"range":[832,870],"text":""},"desc":"Remove unused variable '_ref'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_shortAddress' is defined but never used.","line":16,"column":98,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":119,"suggestions":[{"messageId":"removeVar","data":{"varName":"_shortAddress"},"fix":{"range":[869,892],"text":""},"desc":"Remove unused variable '_shortAddress'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3146,3149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3146,3149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3494,3497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3494,3497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_infoError' is defined but never used.","line":109,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":109,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_infoError' is defined but never used.","line":109,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'_balError' is defined but never used.","line":117,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":117,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_balError' is defined but never used.","line":117,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":31},{"ruleId":"no-unused-vars","severity":1,"message":"'_objError' is defined but never used.","line":121,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_objError' is defined but never used.","line":121,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":121,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'_legacyError' is defined but never used.","line":137,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_legacyError' is defined but never used.","line":137,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":144,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5591,5594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5591,5594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":145,"column":7,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":145,"endColumn":20,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5640,5653],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":146,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5688,5691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5688,5691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":146,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5706,5709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5706,5709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":146,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5742,5745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5742,5745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":163,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":163,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[6286,6299],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6332,6335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6332,6335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6350,6353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6350,6353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6386,6389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6386,6389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":207,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8193,8196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8193,8196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9098,9101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9098,9101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":260,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":260,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9961,9964],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9961,9964],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchTreasuryBalance', 'sectionLoader', and 'treasuryBalance'. Either include them or remove the dependency array.","line":269,"column":6,"nodeType":"ArrayExpression","endLine":269,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, fetchTreasuryBalance, sectionLoader, treasuryBalance]","fix":{"range":[10310,10318],"text":"[dao.id, fetchTreasuryBalance, sectionLoader, treasuryBalance]"}}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":274,"column":7,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":274,"endColumn":20,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[10430,10443],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10478,10481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10478,10481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10496,10499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10496,10499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10532,10535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10532,10535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchTreasuryBalance'. Either include it or remove the dependency array.","line":292,"column":6,"nodeType":"ArrayExpression","endLine":292,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, fetchTreasuryBalance]","fix":{"range":[11155,11163],"text":"[dao.id, fetchTreasuryBalance]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":30,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport { Info } from 'lucide-react';\nimport Avatar from 'boring-avatars';\nimport { MODULE_ADDRESS } from '../../cedra_service/constants';\nimport { DAO } from '../../types/dao';\nimport { useDAOActivities } from '../../useServices/useOptimizedActivityTracker';\nimport OptimizedActivityTable from '../OptimizedActivityTable';\nimport { cedraClient } from '../../cedra_service/cedra-client';\nimport { safeView } from '../../utils/rpcUtils';\nimport { useGetProfile } from '../../useServices/useProfile';\nimport { truncateAddress } from '../../utils/addressUtils';\nimport { useSectionLoader } from '../../hooks/useSectionLoader';\nimport MemberProfileCard from '../MemberProfileCard';\n\n// Admin Display with boring avatar\nconst AdminDisplay: React.FC<{ address: string; onClick: (_ref: React.RefObject<HTMLDivElement>, _shortAddress: string) => void }>\n  = ({ address, onClick }) => {\n    const { data: profileData } = useGetProfile(address || null);\n    const avatarRef = useRef<HTMLDivElement>(null);\n    const shortAddress = `${address.slice(0, 6)}...${address.slice(-4)}`;\n\n    return (\n      <div ref={avatarRef} className=\"flex items-center space-x-3 cursor-pointer\" onClick={() => onClick(avatarRef, shortAddress)}>\n        <div style={{ borderRadius: '50%', overflow: 'hidden' }}>\n          <Avatar\n            name={address}\n            variant=\"beam\"\n            size={32}\n            colors={[\"#e1fd6a\", \"#a3e635\", \"#84cc16\", \"#65a30d\", \"#4d7c0f\"]}\n          />\n        </div>\n        <div className=\"flex flex-col gap-0.5\">\n          <span className=\"text-xs font-medium text-white tracking-tight\">\n            {profileData?.displayName || shortAddress}\n          </span>\n          <span className=\"text-[10px] text-white/40 font-mono\">\n            {truncateAddress(address)}\n          </span>\n        </div>\n      </div>\n    );\n  };\n\ninterface DAOHomeProps {\n  dao: DAO;\n}\n\nconst DAOHome: React.FC<DAOHomeProps> = ({ dao }) => {\n  const [fullAdminAddress, setFullAdminAddress] = useState<string>('');\n  const [treasuryBalance, setTreasuryBalance] = useState<string>('0.00');\n\n  // Section loader for Overview tab\n  const sectionLoader = useSectionLoader();\n\n  const [page, setPage] = useState<number>(1);\n  const PAGE_LIMIT = 10;\n\n  // Profile card popup state (reused from Members behavior)\n  const [selectedMember, setSelectedMember] = useState<{ address: string; shortAddress: string; ref: React.RefObject<HTMLDivElement> } | null>(null);\n  const [isProfileCardOpen, setIsProfileCardOpen] = useState(false);\n\n  const handleAvatarClick = (ref: React.RefObject<HTMLDivElement>, shortAddress: string) => {\n    if (!fullAdminAddress) return;\n    setSelectedMember({ address: fullAdminAddress, shortAddress, ref });\n    setIsProfileCardOpen(true);\n  };\n\n  const {\n    activities,\n    isLoading,\n    error,\n    pagination,\n    refetch\n  } = useDAOActivities(dao.id, {\n    limit: PAGE_LIMIT,\n    page\n  });\n\n  // Fetch treasury balance from contract - professional cached approach\n  const fetchTreasuryBalance = async () => {\n    try {\n      let balance = 0;\n      let treasuryObject: any = null;\n\n      // Step 1: Try to get treasury object first (modern DAOs) - with caching\n      try {\n        const objectResult = await safeView({\n          function: `${MODULE_ADDRESS}::dao_core_file::get_treasury_object`,\n          functionArguments: [dao.id]\n        }, `treasury_object_${dao.id}`);\n        treasuryObject = (objectResult as any)?.[0];\n      } catch (error) {\n        console.debug('Modern treasury query failed, falling back:', error);\n      }\n\n      // Step 2: If treasury object exists, get balance from it - with caching\n      if (treasuryObject) {\n        try {\n          // Use the raw treasury object directly (it's already in the correct Object<Treasury> format)\n          // Try comprehensive treasury info first - with caching\n          try {\n            const infoRes = await safeView({\n              function: `${MODULE_ADDRESS}::treasury::get_treasury_info`,\n              functionArguments: [treasuryObject]\n            }, `treasury_info_${dao.id}`);\n            if (Array.isArray(infoRes) && infoRes.length >= 1) {\n              balance = Number(infoRes[0] || 0) / 1e8;\n            }\n          } catch (_infoError) {\n            // Fallback to direct object balance - with caching\n            try {\n              const balanceResult = await safeView({\n                function: `${MODULE_ADDRESS}::treasury::get_balance_from_object`,\n                functionArguments: [treasuryObject]\n              }, `treasury_balance_obj_${dao.id}`);\n              balance = Number(balanceResult[0] || 0) / 1e8;\n            } catch (_balError) {\n              // Silent fallback to legacy\n            }\n          }\n        } catch (_objError) {\n          // Silent fallback to legacy\n        }\n      }\n\n      // Step 3: Fallback to legacy balance if no object approach worked - with caching\n      if (balance === 0) {\n        try {\n          const balanceResult = await safeView({\n            function: `${MODULE_ADDRESS}::treasury::get_balance`,\n            functionArguments: [dao.id]\n          }, `treasury_balance_legacy_${dao.id}`);\n\n          if (balanceResult && Array.isArray(balanceResult) && balanceResult.length > 0) {\n            balance = Number(balanceResult[0] || 0) / 1e8;\n          }\n        } catch (_legacyError) {\n          console.debug('Legacy treasury query failed');\n        }\n      }\n\n      setTreasuryBalance(balance.toFixed(2));\n      // Update session cache\n      const existing = (window as any).__overviewCache?.get?.(dao.id) || {};\n      // @ts-ignore\n      const cacheMap: Map<string, any> = (window as any).__overviewCache || ((window as any).__overviewCache = new Map());\n      cacheMap.set(dao.id, {\n        admin: existing.admin || fullAdminAddress,\n        treasuryBalance: balance.toFixed(2),\n        timestamp: Date.now(),\n      });\n    } catch (error) {\n      console.warn('Treasury balance calculation error:', error);\n      setTreasuryBalance('0.00');\n    }\n  };\n\n  // Fetch admin address based on contract behavior\n  useEffect(() => {\n    const SESSION_TTL_MS = 5 * 60 * 1000;\n    const MAX_STALE_MS = 10 * 60 * 1000;\n    // Try session cache for instant tab switches\n    // @ts-ignore\n    const cacheMap: Map<string, any> = (window as any).__overviewCache || ((window as any).__overviewCache = new Map());\n    const cached = cacheMap.get(dao.id);\n    const now = Date.now();\n    if (cached && (now - cached.timestamp) < SESSION_TTL_MS) {\n      if (cached.admin) setFullAdminAddress(cached.admin);\n      if (cached.treasuryBalance) setTreasuryBalance(cached.treasuryBalance);\n      return;\n    }\n    if (cached && (now - cached.timestamp) < MAX_STALE_MS) {\n      if (cached.admin) setFullAdminAddress(cached.admin);\n      if (cached.treasuryBalance) setTreasuryBalance(cached.treasuryBalance);\n      // Silent background refresh\n      (async () => {\n        try {\n          await fetchTreasuryBalance();\n        } catch (err) {\n          console.warn('Silent treasury refresh failed:', err);\n        }\n      })();\n      return;\n    }\n\n    const fetchOverviewData = async () => {\n      try {\n        // Primary: Get admins from AdminList (contract initializes this during DAO creation)\n        try {\n          // First check if admin system exists - with caching\n          const adminListExists = await safeView({\n            function: `${MODULE_ADDRESS}::admin::exists_admin_list`,\n            functionArguments: [dao.id]\n          }, `admin_list_exists_${dao.id}`);\n\n          if (adminListExists && adminListExists[0]) {\n            // Get admins from the AdminList - with caching\n            const adminResult = await safeView({\n              function: `${MODULE_ADDRESS}::admin::get_admins`,\n              functionArguments: [dao.id]\n            }, `admin_list_${dao.id}`);\n\n            // Parse admin list (vector<address>)\n            const admins: string[] = (() => {\n              if (Array.isArray(adminResult)) {\n                if (adminResult.length === 1 && Array.isArray(adminResult[0])) return adminResult[0] as string[];\n                if (adminResult.every((a: any) => typeof a === 'string')) return adminResult as string[];\n              }\n              return [];\n            })();\n\n            if (admins.length > 0) {\n              // Show first admin (usually the creator/super admin)\n              setFullAdminAddress(admins[0]);\n              cacheMap.set(dao.id, {\n                admin: admins[0],\n                treasuryBalance: treasuryBalance,\n                timestamp: Date.now(),\n              });\n              return;\n            }\n          }\n        } catch (adminError) {\n          console.warn('Admin system query failed:', adminError);\n        }\n\n        // Fallback: Get creator from DAOCreated event\n        try {\n          const events = await cedraClient.getModuleEventsByEventType({\n            eventType: `${MODULE_ADDRESS}::dao_core_file::DAOCreated`,\n            options: { limit: 100 },\n          });\n\n          const ev = (events as any[]).find(e => e?.data?.anchor_addrx === dao.id);\n          const creator = ev?.data?.creator as string | undefined;\n          if (creator) {\n            setFullAdminAddress(creator);\n            cacheMap.set(dao.id, {\n              admin: creator,\n              treasuryBalance: treasuryBalance,\n              timestamp: Date.now(),\n            });\n            return;\n          }\n        } catch (eventError) {\n          console.warn('Error fetching creator from events:', eventError);\n        }\n\n        // Final fallback: DAO creator is the admin (contract guarantees this)\n        setFullAdminAddress(dao.id);\n        cacheMap.set(dao.id, {\n          admin: dao.id,\n          treasuryBalance: treasuryBalance,\n          timestamp: Date.now(),\n        });\n\n        // Also fetch treasury balance\n        await fetchTreasuryBalance();\n\n      } catch (error: any) {\n        console.warn('Error fetching overview data:', error);\n        // Contract guarantees DAO creator is admin, so use DAO address as fallback\n        setFullAdminAddress(dao.id);\n        sectionLoader.setError(error?.message || 'Failed to load overview data');\n      }\n    };\n\n    sectionLoader.executeWithLoader(fetchOverviewData);\n  }, [dao.id]);\n\n  // Silent refresh on window focus if cache is stale\n  useEffect(() => {\n    const onFocus = () => {\n      // @ts-ignore\n      const cacheMap: Map<string, any> = (window as any).__overviewCache || ((window as any).__overviewCache = new Map());\n      const cached = cacheMap.get(dao.id);\n      const now = Date.now();\n      const SESSION_TTL_MS = 5 * 60 * 1000;\n      const MAX_STALE_MS = 10 * 60 * 1000;\n      if (cached && (now - cached.timestamp) >= SESSION_TTL_MS && (now - cached.timestamp) < MAX_STALE_MS) {\n        (async () => {\n          try {\n            await fetchTreasuryBalance();\n          } catch (err) {\n            console.warn('Flash refresh failed:', err);\n          }\n        })();\n      }\n    };\n    window.addEventListener('focus', onFocus);\n    return () => window.removeEventListener('focus', onFocus);\n  }, [dao.id]);\n\n  const retryOverviewData = () => {\n    sectionLoader.reset();\n    const fetchOverviewData = async () => {\n      // Re-fetch all overview data\n      await fetchTreasuryBalance();\n    };\n    sectionLoader.executeWithLoader(fetchOverviewData);\n  };\n\n  return (\n    <div className=\"w-full space-y-12 animate-fade-in\">\n      {/* Overview Section */}\n      <div className=\"space-y-6\">\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6 px-1\">\n          <div className=\"space-y-2\">\n            <h2 className=\"text-2xl font-semibold text-white tracking-tighter flex items-center gap-2\">\n              <Info size={20} className=\"text-[#e1fd6a]\" />\n              Overview\n            </h2>\n            <p className=\"text-[11px] font-medium text-white/40 leading-none\">DAO Governance & Activity</p>\n          </div>\n\n          <div className=\"flex items-center gap-4 bg-white/[0.03] p-4 rounded-2xl border border-white/5 backdrop-blur-sm group/admin hover:border-[#e1fd6a]/20 transition-all\">\n            <div className=\"flex flex-col\">\n              <span className=\"text-[10px] font-medium text-white/30 mb-2\">Administrator</span>\n              {fullAdminAddress ? (\n                <AdminDisplay address={fullAdminAddress} onClick={handleAvatarClick} />\n              ) : (\n                <span className=\"text-[10px] font-semibold text-[#e1fd6a] animate-pulse\">Fetching admin...</span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {sectionLoader.error && (\n          <div className=\"bg-red-500/10 border border-red-500/20 p-4 rounded-2xl flex items-center justify-between\">\n            <p className=\"text-xs font-medium text-red-500\">{sectionLoader.error}</p>\n            <button\n              onClick={retryOverviewData}\n              className=\"text-[10px] font-semibold bg-red-500 text-white px-4 py-2 rounded-lg\"\n            >\n              Retry\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"animate-slide-up space-y-4\" style={{ animationDelay: '0.1s' }}>\n        <OptimizedActivityTable\n          activities={activities}\n          isLoading={isLoading}\n          error={error}\n          onRefresh={refetch}\n          showUserColumn={true}\n          showAmountColumn={true}\n          showDAOColumn={false}\n          showActionColumn={false}\n          maxRows={undefined}\n          showingCountText={\n            pagination?.totalItems > 0\n              ? `Showing ${(page - 1) * PAGE_LIMIT + Math.min(PAGE_LIMIT, activities.length)} of ${pagination.totalItems} activities`\n              : undefined\n          }\n          hasNextPage={Boolean(pagination?.hasNextPage)}\n          hasPrevPage={Boolean(pagination?.hasPreviousPage)}\n          onNextPage={() => setPage(p => p + 1)}\n          onPrevPage={() => setPage(p => Math.max(1, p - 1))}\n          title=\"Recent Activity\"\n        />\n      </div>\n\n      {/* Member Profile Card Popup (admin profile) */}\n      {selectedMember && (\n        <MemberProfileCard\n          address={selectedMember.address}\n          shortAddress={selectedMember.shortAddress}\n          memberNumber={1}\n          isOpen={isProfileCardOpen}\n          onClose={() => setIsProfileCardOpen(false)}\n          anchorRef={selectedMember.ref}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default DAOHome;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOMembers.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ref' is defined but never used.","line":29,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"ref"},"fix":{"range":[938,974],"text":""},"desc":"Remove unused variable 'ref'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'shortAddress' is defined but never used.","line":30,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"shortAddress"},"fix":{"range":[1000,1014],"text":""},"desc":"Remove unused variable 'shortAddress'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'shortAddress' is defined but never used.","line":30,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'profileData' is assigned a value but never used.","line":31,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"profileData"},"fix":{"range":[1034,1095],"text":""},"desc":"Remove unused variable 'profileData'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'profileData' is assigned a value but never used.","line":31,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":28},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":53,"column":3,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":53,"endColumn":48,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1895,1940],"text":"// @ts-expect-error - module-level singleton caches"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2030,2033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2030,2033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":125,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":128,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2065,2068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2065,2068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":55,"column":3,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":55,"endColumn":16,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2101,2114],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2160,2163],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2160,2163],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2199,2202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2199,2202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":127,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":130,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2241,2244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2241,2244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4429,4432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4429,4432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4651,4654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4651,4654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4705,4708],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4705,4708],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":147,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":147,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":147,"endColumn":21},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":282,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":282,"endColumn":20,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[11793,11794],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'MAX_STALE_MS', 'SESSION_TTL_MS', 'fetchActualMembers', 'fetchMembershipData', 'membersCache', 'sectionLoader', and 'summaryCache'. Either include them or remove the dependency array.","line":295,"column":6,"nodeType":"ArrayExpression","endLine":295,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [MAX_STALE_MS, SESSION_TTL_MS, dao.id, fetchActualMembers, fetchMembershipData, membersCache, sectionLoader, summaryCache]","fix":{"range":[12218,12226],"text":"[MAX_STALE_MS, SESSION_TTL_MS, dao.id, fetchActualMembers, fetchMembershipData, membersCache, sectionLoader, summaryCache]"}}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":309,"column":19,"nodeType":"BlockStatement","messageId":"unexpected","endLine":309,"endColumn":22,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[12985,12986],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'MAX_STALE_MS', 'SESSION_TTL_MS', 'fetchActualMembers', 'fetchMembershipData', 'membersCache', and 'summaryCache'. Either include them or remove the dependency array.","line":315,"column":6,"nodeType":"ArrayExpression","endLine":315,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [MAX_STALE_MS, SESSION_TTL_MS, dao.id, fetchActualMembers, fetchMembershipData, membersCache, summaryCache]","fix":{"range":[13132,13140],"text":"[MAX_STALE_MS, SESSION_TTL_MS, dao.id, fetchActualMembers, fetchMembershipData, membersCache, summaryCache]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport { useSectionLoader } from '../../hooks/useSectionLoader';\nimport { Users, RefreshCw, ChevronLeft, ChevronRight } from 'lucide-react';\nimport Avatar from 'boring-avatars';\nimport { Member } from '../../types/dao';\nimport { DAO } from '../../types/dao';\nimport { useWallet } from '../../contexts/CedraWalletProvider';\nimport { MODULE_ADDRESS } from '../../cedra_service/constants';\nimport { safeView, safeGetModuleEventsByEventType } from '../../utils/rpcUtils';\nimport { useGetProfile } from '../../useServices/useProfile';\nimport MemberProfileCard from '../MemberProfileCard';\nimport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableHead,\n  TableRow,\n  TableCell,\n} from '../ui/table';\n\ninterface DAOMembersProps {\n  dao: DAO;\n}\n\n// Member Avatar Component with Boring Avatar - Clickable\nconst MemberAvatar: React.FC<{\n  address: string;\n  shortAddress: string;\n  onClick: (ref: React.RefObject<HTMLDivElement>) => void;\n}> = ({ address, shortAddress, onClick }) => {\n  const { data: profileData } = useGetProfile(address || null);\n  const avatarRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <div ref={avatarRef} onClick={() => onClick(avatarRef)} className=\"cursor-pointer\">\n      <div style={{ borderRadius: '50%', overflow: 'hidden' }} className=\"hover:ring-2 hover:ring-[#e1fd6a]/50 transition-all\">\n        <Avatar\n          name={address}\n          variant=\"beam\"\n          size={32}\n          colors={[\"#e1fd6a\", \"#a3e635\", \"#84cc16\", \"#65a30d\", \"#4d7c0f\"]}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst DAOMembers: React.FC<DAOMembersProps> = ({ dao }) => {\n  // In-memory caches to keep member data stable between tab switches\n  // Session TTL for instant returns and SWR background refresh\n  const SESSION_TTL_MS = 5 * 60 * 1000; // 5 minutes\n  const MAX_STALE_MS = 10 * 60 * 1000; // 10 minutes stale window\n  // @ts-ignore - module-level singleton caches\n  const membersCache: Map<string, { members: Member[]; timestamp: number }> = (window as any).__membersCache || ((window as any).__membersCache = new Map());\n  // @ts-ignore\n  const summaryCache: Map<string, { summary: any; timestamp: number }> = (window as any).__membersSummaryCache || ((window as any).__membersSummaryCache = new Map());\n  const [membershipData, setMembershipData] = useState({\n    totalMembers: 0,\n    totalStakers: 0,\n    totalStaked: 0,\n    minStakeRequired: 1.0, // Default to 1 CEDRA minimum\n    minProposalStake: 6.0, // Default to 6 CEDRA for proposals\n    userIsMember: false,\n    userStake: 0\n  });\n  const [actualMembers, setActualMembers] = useState<Member[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLoadingMembers, setIsLoadingMembers] = useState(true);\n  const sectionLoader = useSectionLoader();\n\n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1);\n  const MEMBERS_PER_PAGE = 10;\n\n  // Profile card popup state\n  const [selectedMember, setSelectedMember] = useState<{ address: string; shortAddress: string; memberNumber: number; ref: React.RefObject<HTMLDivElement> } | null>(null);\n  const [isProfileCardOpen, setIsProfileCardOpen] = useState(false);\n\n  const handleAvatarClick = (member: Member, memberNumber: number, ref: React.RefObject<HTMLDivElement>) => {\n    setSelectedMember({ address: member.address, shortAddress: member.shortAddress, memberNumber, ref });\n    setIsProfileCardOpen(true);\n  };\n\n  const { account } = useWallet();\n\n\n  const OCTAS = 1e8;\n  const toCEDRA = (u64: number): number => u64 / OCTAS;\n\n  // membershipData calculation\n\n  const fetchActualMembers = async () => {\n    try {\n      setIsLoadingMembers(true);\n      const candidateAddresses = new Set<string>();\n\n      // Query staking events to gather staker addresses for THIS DAO (they include anchor_addrx)\n      const stakeType = `${MODULE_ADDRESS}::staking::StakeEvent` as `${string}::${string}::${string}`;\n      const unstakeType = `${MODULE_ADDRESS}::staking::UnstakeEvent` as `${string}::${string}::${string}`;\n\n      // Prefer module-level events (widely available), then filter by dao id\n      const [stakeEvents, unstakeEvents] = await Promise.all([\n        safeGetModuleEventsByEventType({ eventType: stakeType, options: { limit: 100 } }).catch(() => []),\n        safeGetModuleEventsByEventType({ eventType: unstakeType, options: { limit: 100 } }).catch(() => []),\n      ]);\n\n      const pushIfForDAO = (ev: any) => {\n        const d = ev?.data || {};\n        if ((d.anchor_addrx || d.dao_address) === dao.id && typeof d.staker === 'string') {\n          candidateAddresses.add(d.staker);\n        }\n      };\n\n      (stakeEvents as any[]).forEach(pushIfForDAO);\n      (unstakeEvents as any[]).forEach(pushIfForDAO);\n\n      // Include the connected account if present, to reflect immediate membership\n      if (account?.address) candidateAddresses.add(account.address);\n\n      // Validate membership and fetch stake per candidate (optimized for maximum speed)\n      const addresses = Array.from(candidateAddresses);\n      const batchSize = 30; // Much larger batch size for faster loading\n      const collected: Member[] = [];\n\n      for (let i = 0; i < addresses.length; i += batchSize) {\n        const batch = addresses.slice(i, i + batchSize);\n        const batchPromises = batch.map(async (addr) => {\n          try {\n            const [isMemberRes, stakeRes] = await Promise.all([\n              safeView({ function: `${MODULE_ADDRESS}::membership::is_member`, functionArguments: [dao.id, addr] }).catch(() => [false]),\n              safeView({ function: `${MODULE_ADDRESS}::staking::get_dao_stake_direct`, functionArguments: [dao.id, addr] }).catch(() => [0]),\n            ]);\n            const isMember = Boolean(isMemberRes?.[0]);\n            const stakeAmount = toCEDRA(Number(stakeRes?.[0] || 0));\n            if (isMember && stakeAmount > 0) {\n              const member: Member = {\n                id: addr,\n                address: addr,\n                shortAddress: `${addr.slice(0, 6)}...${addr.slice(-4)}`,\n                votingPower: stakeAmount,\n                tokensHeld: stakeAmount,\n                joinDate: '-',\n                isActive: true,\n              };\n              collected.push(member);\n            }\n          } catch (e) {\n            // Ignore individual failures\n          }\n        });\n        await Promise.allSettled(batchPromises);\n        // No delay between batches for maximum speed\n      }\n\n      // Deduplicate by address\n      const unique = new Map<string, Member>();\n      collected.forEach((m) => unique.set(m.address, m));\n      const members = Array.from(unique.values()).sort((a, b) => a.address.localeCompare(b.address));\n\n      setActualMembers(members);\n      // Save to cache\n      membersCache.set(dao.id, { members, timestamp: Date.now() });\n    } catch (error) {\n      console.error('Failed to fetch actual members:', error);\n      setActualMembers([]);\n    } finally {\n      setIsLoadingMembers(false);\n    }\n  };\n\n  const fetchMembershipData = async () => {\n    try {\n      setIsLoading(true);\n\n      // Fetch DAO membership statistics\n      const [\n        totalMembersRes,\n        totalStakedRes,\n        minStakeRes,\n        minProposalStakeRes\n      ] = await Promise.all([\n        safeView({ function: `${MODULE_ADDRESS}::membership::total_members`, functionArguments: [dao.id] }).catch(() => [0]),\n        safeView({ function: `${MODULE_ADDRESS}::staking::get_total_staked`, functionArguments: [dao.id] }).catch(() => [0]),\n        safeView({ function: `${MODULE_ADDRESS}::membership::get_min_stake`, functionArguments: [dao.id] }).catch(() => [0]),\n        safeView({ function: `${MODULE_ADDRESS}::membership::get_min_proposal_stake`, functionArguments: [dao.id] }).catch(() => [0])\n      ]);\n\n      // Note: get_staker_count is not a view function, so we use total_members as a proxy\n      // since members need to stake to join. In most cases, members = stakers\n      const totalStakersRes = totalMembersRes;\n\n      // Check current user's membership status and stake\n      let userIsMember = false;\n      let userStake = 0;\n\n      if (account?.address) {\n        try {\n          const [isMemberRes, userStakeRes] = await Promise.all([\n            safeView({ function: `${MODULE_ADDRESS}::membership::is_member`, functionArguments: [dao.id, account.address] }),\n            safeView({ function: `${MODULE_ADDRESS}::staking::get_dao_staked_balance`, functionArguments: [dao.id, account.address] })\n          ]);\n          userIsMember = Boolean(isMemberRes[0]);\n          userStake = toCEDRA(Number(userStakeRes[0] || 0));\n        } catch (e) {\n          console.warn('Failed to fetch user membership data:', e);\n        }\n      }\n\n      // Handle min stake conversion - if it's 0 or very small, use a reasonable default\n      const rawMinStake = Number(minStakeRes[0] || 0);\n      const minStakeInCEDRA = rawMinStake > 0 ? toCEDRA(rawMinStake) : 1.0; // Default to 1 CEDRA if not set or too small\n\n      const rawMinProposalStake = Number(minProposalStakeRes[0] || 0);\n      const minProposalStakeInCEDRA = rawMinProposalStake > 0 ? toCEDRA(rawMinProposalStake) : 6.0; // Default to 6 CEDRA if not set\n\n      const summary = {\n        totalMembers: Number(totalMembersRes[0] || 0),\n        totalStakers: Number(totalStakersRes[0] || 0),\n        totalStaked: toCEDRA(Number(totalStakedRes[0] || 0)),\n        minStakeRequired: minStakeInCEDRA,\n        minProposalStake: minProposalStakeInCEDRA,\n        userIsMember,\n        userStake\n      };\n      setMembershipData(summary);\n      // Save to cache\n      summaryCache.set(dao.id, { summary, timestamp: Date.now() });\n\n    } catch (error) {\n      console.error('Failed to fetch membership data:', error);\n      // Set reasonable defaults when API calls fail (rate limiting, network issues, etc.)\n      setMembershipData(prev => ({\n        ...prev,\n        minStakeRequired: prev.minStakeRequired || 1.0, // Default to 1 CEDRA\n        minProposalStake: prev.minProposalStake || 6.0, // Default to 6 CEDRA\n        totalMembers: prev.totalMembers || 0,\n        totalStakers: prev.totalStakers || 0,\n        totalStaked: prev.totalStaked || 0,\n        userIsMember: prev.userIsMember || false,\n        userStake: prev.userStake || 0\n      }));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // members list logic\n\n  useEffect(() => {\n    const now = Date.now();\n    // Reset page when DAO changes\n    setCurrentPage(1);\n\n    const cachedMembers = membersCache.get(dao.id);\n    const cachedSummary = summaryCache.get(dao.id);\n\n    // Fresh session cache: hydrate instantly, no loader, no immediate fetch\n    if (cachedMembers && now - cachedMembers.timestamp < SESSION_TTL_MS) {\n      setActualMembers(cachedMembers.members);\n      setIsLoadingMembers(false);\n    }\n    if (cachedSummary && now - cachedSummary.timestamp < SESSION_TTL_MS) {\n      setMembershipData(cachedSummary.summary);\n      setIsLoading(false);\n    }\n\n    // Stale but acceptable: show cached and refresh silently in background\n    const isMembersStaleButAcceptable = cachedMembers && (now - cachedMembers.timestamp) >= SESSION_TTL_MS && (now - cachedMembers.timestamp) < MAX_STALE_MS;\n    const isSummaryStaleButAcceptable = cachedSummary && (now - cachedSummary.timestamp) >= SESSION_TTL_MS && (now - cachedSummary.timestamp) < MAX_STALE_MS;\n    if (isMembersStaleButAcceptable || isSummaryStaleButAcceptable) {\n      if (cachedMembers) {\n        setActualMembers(cachedMembers.members);\n        setIsLoadingMembers(false);\n      }\n      if (cachedSummary) {\n        setMembershipData(cachedSummary.summary);\n        setIsLoading(false);\n      }\n      (async () => {\n        try {\n          await Promise.all([fetchMembershipData(), fetchActualMembers()]);\n        } catch { }\n      })();\n      return;\n    }\n\n    // No cache or too old: show loader and fetch\n    if (!cachedMembers || !cachedSummary ||\n      (cachedMembers && now - cachedMembers.timestamp >= MAX_STALE_MS) ||\n      (cachedSummary && now - cachedSummary.timestamp >= MAX_STALE_MS)) {\n      sectionLoader.executeWithLoader(async () => {\n        await Promise.all([fetchMembershipData(), fetchActualMembers()]);\n      });\n    }\n  }, [dao.id]); // Fetch on DAO change only; cache keeps view instant between tabs\n\n  // Silent refresh on window focus if cache is stale\n  useEffect(() => {\n    const onFocus = () => {\n      const now = Date.now();\n      const cachedMembers = membersCache.get(dao.id);\n      const cachedSummary = summaryCache.get(dao.id);\n      const membersStale = !cachedMembers || (now - cachedMembers.timestamp) >= SESSION_TTL_MS;\n      const summaryStale = !cachedSummary || (now - cachedSummary.timestamp) >= SESSION_TTL_MS;\n      if ((membersStale || summaryStale) && (!cachedMembers || now - (cachedMembers?.timestamp || 0) < MAX_STALE_MS)) {\n        (async () => {\n          try {\n            await Promise.all([fetchMembershipData(), fetchActualMembers()]);\n          } catch { }\n        })();\n      }\n    };\n    window.addEventListener('focus', onFocus);\n    return () => window.removeEventListener('focus', onFocus);\n  }, [dao.id]);\n\n  // Use actual members fetched from the blockchain\n  const members = actualMembers;\n  const filteredMembers = members; // No filtering since search was removed\n\n  // Pagination logic\n  const totalMembers = filteredMembers.length;\n  const totalPages = Math.ceil(totalMembers / MEMBERS_PER_PAGE);\n  const startIndex = (currentPage - 1) * MEMBERS_PER_PAGE;\n  const endIndex = startIndex + MEMBERS_PER_PAGE;\n  const paginatedMembers = filteredMembers.slice(startIndex, endIndex);\n\n  // pagination components\n\n  return (\n    <div className=\"w-full px-2 sm:px-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between pl-4 sm:pl-8 xl:pl-0\">\n        <div>\n          <h2 className=\"text-2xl font-semibold text-white tracking-tight mb-2\">Member Directory</h2>\n        </div>\n        <div className=\"text-right\">\n          {sectionLoader.error && (\n            <div className=\"text-xs text-red-300\">Error loading members</div>\n          )}\n        </div>\n      </div>\n\n\n      {/* Stats removed per request */}\n\n      {/* Member Directory */}\n      <div className=\"border border-white/5 rounded-xl p-4 w-full max-w-full overflow-hidden relative min-h-[600px]\">\n\n\n        <div className=\"flex items-center justify-between mb-3 sm:mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <h3 className=\"text-sm sm:text-base md:text-lg font-semibold text-white flex items-center gap-2 tracking-tight\">\n              <Users className=\"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0\" />\n              <span>Registry</span>\n              {filteredMembers.length > 0 && (\n                <span className=\"text-xs sm:text-sm text-white/40 font-medium hidden sm:inline\">({filteredMembers.length})</span>\n              )}\n            </h3>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => {\n                fetchMembershipData();\n                fetchActualMembers();\n              }}\n              disabled={isLoading || isLoadingMembers}\n              className=\"p-2 text-[#e1fd6a] hover:text-[#e1fd6a]/80 hover:bg-white/5 rounded-lg transition-all disabled:opacity-50\"\n              title=\"Refresh member data\"\n            >\n              <RefreshCw className={`w-4 h-4 ${(isLoading || isLoadingMembers) ? 'animate-spin' : ''}`} />\n            </button>\n          </div>\n        </div>\n\n        {/* Desktop Table View */}\n        <div className=\"hidden sm:block\">\n          <Table>\n            <TableHeader className=\"bg-white/[0.02]\">\n              <TableRow className=\"hover:bg-transparent border-white/5\">\n                <TableHead className=\"py-5 px-8 text-[10px] font-bold text-white/30 uppercase tracking-[0.2em]\">Authorized identity</TableHead>\n                <TableHead className=\"py-5 text-[10px] font-bold text-white/30 uppercase tracking-[0.2em] text-right\">Protocol stake</TableHead>\n                <TableHead className=\"py-5 text-[10px] font-bold text-white/30 uppercase tracking-[0.2em] text-right\">Status</TableHead>\n                <TableHead className=\"py-5 text-[10px] font-bold text-white/30 uppercase tracking-[0.2em] text-right pr-8\">Registered</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {paginatedMembers.length === 0 ? (\n                sectionLoader.isLoading ? null : (\n                  <TableRow>\n                    <TableCell colSpan={4} className=\"h-60 text-center\">\n                      <div className=\"flex flex-col items-center justify-center\">\n                        <Users className=\"w-12 h-12 text-white/10 mb-4\" />\n                        <p className=\"text-white/40 text-xs font-medium\">No members found</p>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                )\n              ) : (\n                paginatedMembers.map((member, index) => (\n                  <TableRow key={member.id}>\n                    <TableCell>\n                      <div className=\"flex items-center gap-3\">\n                        <MemberAvatar\n                          address={member.address}\n                          shortAddress={member.shortAddress}\n                          onClick={(ref) => handleAvatarClick(member, startIndex + index + 1, ref)}\n                        />\n                        <span className=\"text-xs font-medium text-white/80\">{member.shortAddress}</span>\n                      </div>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex items-center justify-end space-x-1\">\n                        <span className=\"text-sm text-white font-medium\">{member.tokensHeld.toFixed(3)}</span>\n                        <span className=\"text-[10px] font-bold text-white/40 ml-1\">CEDRA</span>\n                      </div>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <span className={`px-2 py-1 rounded-full text-[10px] font-semibold border ${member.isActive\n                        ? 'text-green-400 border-green-500/10 bg-green-500/5'\n                        : 'text-white/20 border-white/5 bg-white/5'\n                        }`}>\n                        {member.isActive ? 'Active' : 'Deactivated'}\n                      </span>\n                    </TableCell>\n                    <TableCell className=\"text-right pr-8\">\n                      <div className=\"flex items-center justify-end space-x-1 text-white/40 text-[10px] font-medium font-mono uppercase tracking-tighter\">\n                        <span>{new Date().toLocaleDateString()}</span>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </div>\n\n        <div className=\"sm:hidden\">\n          {paginatedMembers.length === 0 ? (\n            sectionLoader.isLoading ? null : (\n              <div className=\"text-center py-8\">\n                <Users className=\"w-12 h-12 text-gray-500 mx-auto mb-3\" />\n                <p className=\"text-white text-sm\">No members found</p>\n                <p className=\"text-gray-500 text-xs mt-1\">\n                  {membershipData.totalMembers > 0\n                    ? 'Try adjusting your search'\n                    : 'No registered members yet'}\n                </p>\n              </div>\n            )\n          ) : (\n            <div className=\"grid grid-cols-1 gap-4\">\n              {paginatedMembers.map((member, index) => (\n                <div\n                  key={member.id}\n                  className=\"rounded-2xl p-5 bg-white/[0.02] border border-white/5 space-y-4\"\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <MemberAvatar\n                        address={member.address}\n                        shortAddress={member.shortAddress}\n                        onClick={(ref) => handleAvatarClick(member, startIndex + index + 1, ref)}\n                      />\n                      <div className=\"flex flex-col\">\n                        <span className=\"text-sm font-semibold text-white\">{member.shortAddress}</span>\n                        <span className=\"text-[10px] text-white/40 uppercase tracking-widest font-bold\">Identity</span>\n                      </div>\n                    </div>\n                    <span className={`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border flex-shrink-0 ${member.isActive\n                      ? 'text-green-400 border-green-500/20 bg-green-500/5'\n                      : 'text-gray-400 border-gray-500/20 bg-gray-500/5'\n                      }`}>\n                      {member.isActive ? 'Active' : 'Inactive'}\n                    </span>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4 pt-4 border-t border-white/5\">\n                    <div className=\"space-y-1\">\n                      <span className=\"text-[10px] text-white/30 font-bold uppercase tracking-widest\">Protocol Stake</span>\n                      <div className=\"flex items-center gap-1.5\">\n                        <span className=\"text-sm font-bold text-white\">{member.tokensHeld.toFixed(3)}</span>\n                        <span className=\"text-[10px] font-black text-[#e1fd6a]/40\">CEDRA</span>\n                      </div>\n                    </div>\n                    <div className=\"space-y-1 text-right\">\n                      <span className=\"text-[10px] text-white/30 font-bold uppercase tracking-widest\">Registered</span>\n                      <p className=\"text-xs font-medium text-white/60\">{new Date().toLocaleDateString()}</p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Pagination Controls */}\n        {totalMembers > MEMBERS_PER_PAGE && (\n          <div className=\"mt-4 flex items-center justify-between border-t border-white/10 pt-4\">\n            <div className=\"text-sm text-white\">\n              Showing {startIndex + 1} to {Math.min(endIndex, totalMembers)} of {totalMembers} members\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n                disabled={currentPage === 1}\n                className=\"flex items-center gap-1 px-3 py-1.5 text-sm text-white hover:text-white hover:bg-white/5 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <ChevronLeft className=\"w-4 h-4\" />\n                <span>Previous</span>\n              </button>\n              <button\n                onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n                disabled={currentPage === totalPages}\n                className=\"flex items-center gap-1 px-3 py-1.5 text-sm text-white hover:text-white hover:bg-white/5 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <span>Next</span>\n                <ChevronRight className=\"w-4 h-4\" />\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Member Profile Card Popup */}\n      {selectedMember && (\n        <MemberProfileCard\n          address={selectedMember.address}\n          shortAddress={selectedMember.shortAddress}\n          memberNumber={selectedMember.memberNumber}\n          isOpen={isProfileCardOpen}\n          onClose={() => setIsProfileCardOpen(false)}\n          anchorRef={selectedMember.ref}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default DAOMembers;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOProposalDetails.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'voteType' is defined but never used.","line":24,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"voteType"},"fix":{"range":[859,875],"text":""},"desc":"Remove unused variable 'voteType'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { FaCheckCircle } from 'react-icons/fa';\nimport Avatar from 'boring-avatars';\nimport { OptimizedActivityTracker, Activity } from '../../useServices/useOptimizedActivityTracker';\nimport { truncateAddress } from '../../utils/addressUtils';\n\ninterface ProposalDetailsProps {\n  title?: string;\n  description?: string;\n  proposer?: string; // full address\n  endsAt?: string;   // ISO date string or friendly text\n  votingStart?: string; // ISO date string for voting start\n  votingEnd?: string;   // ISO date string for voting end\n  quorumCurrentPercent?: number;\n  quorumRequiredPercent?: number;\n  category?: string;\n  votesFor?: number;\n  votesAgainst?: number;\n  votesAbstain?: number;\n  status?: string;\n  proposalId?: string;\n  createdAt?: string;\n  daoName?: string; // Actual DAO name\n  onVote?: (voteType: number) => void;\n  onStartVoting?: () => void;\n  onFinalize?: () => void;\n  canVote?: boolean;\n  hasVoted?: boolean;\n  canStartVoting?: boolean; // true if user is proposer or admin\n  canFinalize?: boolean; // true if user can finalize proposals (admin or member with proposal creation rights)\n  userAddress?: string;\n  userIsAdmin?: boolean;\n  userIsCouncil?: boolean;\n  userIsMember?: boolean;\n  daoAddress?: string;\n}\n\n\n\nconst toDateTimeString = (value?: string) => {\n  if (!value) return '';\n  const asDate = new Date(value);\n  if (Number.isNaN(asDate.getTime())) return value; // assume already friendly\n  return asDate.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true\n  });\n};\n\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'active': return 'text-blue-400 bg-blue-500/20';\n    case 'passed': return 'text-green-400 bg-green-500/20';\n    case 'rejected': return 'text-red-400 bg-red-500/20';\n    case 'executed': return 'text-purple-400 bg-purple-500/20';\n    case 'cancelled': return 'text-white/40 bg-gray-500/20';\n    default: return 'text-white/40 bg-gray-500/20';\n  }\n};\n\n\n\nconst VoteDistributionBar: React.FC<{ forVotes: number; againstVotes: number; abstainVotes: number; total: number }>\n  = ({ forVotes, againstVotes, total }) => {\n    const forPct = total > 0 ? (forVotes / total) * 100 : 0;\n    const againstPct = total > 0 ? (againstVotes / total) * 100 : 0;\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"professional-card bg-white/[0.02] border border-white/5 rounded-xl p-4 flex flex-col items-center\">\n            <span className=\"text-[10px] uppercase tracking-wider text-white/40 mb-1\">Yes Votes</span>\n            <span className=\"text-2xl font-bold text-green-400\">{forPct.toFixed(0)}%</span>\n            <span className=\"text-xs text-white/20 mt-1\">{forVotes} votes</span>\n          </div>\n          <div className=\"professional-card bg-white/[0.02] border border-white/5 rounded-xl p-4 flex flex-col items-center\">\n            <span className=\"text-[10px] uppercase tracking-wider text-white/40 mb-1\">No Votes</span>\n            <span className=\"text-2xl font-bold text-red-400\">{againstPct.toFixed(0)}%</span>\n            <span className=\"text-xs text-white/20 mt-1\">{againstVotes} votes</span>\n          </div>\n        </div>\n\n        <div className=\"w-full bg-white/10 rounded-full h-1.5 overflow-hidden flex\">\n          <div className=\"bg-green-500 h-1.5 transition-all duration-500\" style={{ width: `${forPct}%` }} />\n          <div className=\"bg-red-500 h-1.5 transition-all duration-500\" style={{ width: `${againstPct}%` }} />\n        </div>\n\n        <div className=\"flex justify-between text-[10px] font-medium uppercase tracking-widest text-white/20 px-1\">\n          <span>Results Summary</span>\n          <span>Total: {total} weight</span>\n        </div>\n      </div>\n    );\n  };\n\nconst DAOProposalDetails: React.FC<ProposalDetailsProps> = ({\n  title = 'Send funds to Development Fund SubDAO',\n  description = 'Send funds from the treasury to our Development Fund SubDAO in order to continue funding development.',\n  proposer = '0xe2bd7f4b6a2aa345c7b149ea',\n  endsAt = new Date('2025-08-01').toISOString(),\n  votingStart,\n  votingEnd,\n  quorumCurrentPercent = 20.65,\n  quorumRequiredPercent = 15,\n  votesFor = 100,\n  votesAgainst = 0,\n  votesAbstain = 0,\n  status = 'draft',\n  proposalId = '00015',\n  createdAt,\n  daoName,\n  onVote,\n  onStartVoting,\n  onFinalize,\n  hasVoted = false,\n  canStartVoting = true,\n  userAddress,\n  userIsAdmin,\n  userIsMember,\n  daoAddress\n}) => {\n  const [isVoting, setIsVoting] = useState(false);\n  const [voteActivities, setVoteActivities] = useState<Activity[]>([]);\n\n  const total = (votesFor || 0) + (votesAgainst || 0) + (votesAbstain || 0);\n\n  useEffect(() => {\n    const fetchVotes = async () => {\n      if (!proposalId) return;\n      try {\n        let activities: Activity[] = [];\n        if (daoAddress) {\n          const result = await OptimizedActivityTracker.getDAOActivities(daoAddress, { limit: 100 });\n          activities = result.activities;\n        } else {\n          const result = await OptimizedActivityTracker.getGlobalActivities({ limit: 100 });\n          activities = result.activities;\n        }\n\n        const votes = activities.filter(a =>\n          a.type === 'proposal_voted' &&\n          String(a.metadata?.proposalId) === String(proposalId)\n        );\n        setVoteActivities(votes);\n      } catch (err) {\n        console.warn('Failed to fetch individual votes:', err);\n      }\n    };\n    fetchVotes();\n  }, [proposalId, daoAddress]);\n\n  const handleVoteClick = async (voteType: number) => {\n    setIsVoting(true);\n    try {\n      await onVote?.(voteType);\n    } finally {\n      setIsVoting(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Left sidebar info */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-6 gap-6\">\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Status */}\n          <div className=\"professional-card rounded-xl p-4\">\n            <h4 className=\"text-sm text-white/40 mb-2\">Status</h4>\n            <div className=\"text-sm text-white/40 mb-4\">\n              {status === 'active'\n                ? `This proposal is currently active for voting with a turnout of ${quorumCurrentPercent.toFixed(1)}%.`\n                : status === 'executed'\n                  ? `This proposal is closed for voting with a turnout of ${quorumCurrentPercent.toFixed(1)}% and was executed.`\n                  : status === 'passed'\n                    ? `This proposal passed with a turnout of ${quorumCurrentPercent.toFixed(1)}% and is awaiting execution.`\n                    : `This proposal is ${status} with a turnout of ${quorumCurrentPercent.toFixed(1)}%.`\n              }\n            </div>\n\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-white/40\">DAO</span>\n                <span className=\"text-white\">{daoName || 'Unknown DAO'}</span>\n              </div>\n\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-white/40\">Creator</span>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"rounded-full overflow-hidden border border-white/10\">\n                    <Avatar\n                      name={proposer || 'unknown'}\n                      variant=\"beam\"\n                      size={20}\n                      colors={[\"#e1fd6a\", \"#a3e635\", \"#84cc16\", \"#65a30d\", \"#4d7c0f\"]}\n                    />\n                  </div>\n                  <span className=\"text-white\">{proposer ? `${proposer.slice(0, 6)}...${proposer.slice(-4)}` : 'Unknown'}</span>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-white/40\">Status</span>\n                <span className={`capitalize ${getStatusColor(status || '')} px-2 py-1 rounded text-xs`}>\n                  {status}\n                </span>\n              </div>\n\n              {/* User roles */}\n              {(userIsAdmin || userIsMember) && (\n                <div className=\"flex flex-wrap gap-2 pt-2\">\n                  {userIsAdmin && (\n                    <span className=\"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 border border-purple-500/30\">Admin</span>\n                  )}\n                  {userIsMember && (\n                    <span className=\"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-300 border border-green-500/30\">Member</span>\n                  )}\n                </div>\n              )}\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-white/40\">Start</span>\n                  <span className=\"text-white text-xs\">{toDateTimeString(votingStart || createdAt)}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-white/40\">End</span>\n                  <span className=\"text-white text-xs\">{toDateTimeString(votingEnd || endsAt)}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Main content */}\n        <div className=\"lg:col-span-4 space-y-6\">\n          {/* Header */}\n          <div className=\"professional-card rounded-xl p-6\">\n            <h1 className=\"text-3xl font-semibold text-white mb-4\">{title}</h1>\n            <p className=\"text-gray-300 mb-6\">{description}</p>\n\n\n          </div>\n        </div>\n      </div>\n\n      {/* Vote Results - Full Width */}\n      <div className=\"professional-card rounded-xl p-6\">\n        <h3 className=\"text-lg font-semibold text-white mb-6\">Ratio of votes</h3>\n        <VoteDistributionBar\n          forVotes={votesFor || 0}\n          againstVotes={votesAgainst || 0}\n          abstainVotes={votesAbstain || 0}\n          total={total}\n        />\n\n        <div className=\"mt-6 space-y-4\">\n\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between items-center text-xs\">\n              <span className=\"text-white/40\">{quorumCurrentPercent}% turnout</span>\n              <span className=\"text-white font-medium\">{quorumRequiredPercent}% Γ£ô</span>\n            </div>\n            <div className=\"w-full bg-white/10 rounded-full h-2\">\n              <div\n                className=\"h-2 rounded-full\"\n                style={{\n                  width: `${Math.min((quorumCurrentPercent / Math.max(quorumRequiredPercent || 0, 0.001)) * 100, 100)}%`,\n                  backgroundColor: '#facc16'\n                }}\n              />\n            </div>\n            <div className=\"flex justify-between text-sm text-white/40\">\n              <span>Quorum</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Start Voting button for draft proposals */}\n        {status === 'draft' && canStartVoting && (\n          <div className=\"mt-6 pt-6 border-t border-white/10\">\n            <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-4\">\n              <h4 className=\"text-blue-300 font-medium mb-2\">Proposal is in Draft</h4>\n              <p className=\"text-sm text-blue-200/80 mb-3\">\n                This proposal needs to be activated before voting can begin.\n                {proposer === userAddress ? ' As the proposer, you can start voting.' : ' Only the proposer or an admin can start voting.'}\n              </p>\n            </div>\n            <div className=\"flex justify-center\">\n              <button\n                onClick={() => onStartVoting?.()}\n                className=\"px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all\"\n              >\n                Start Voting\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Voting buttons for active proposals */}\n        {status === 'active' && userAddress && !hasVoted && (\n          <div className=\"mt-6 pt-6 border-t border-white/10\">\n            <h4 className=\"text-white font-medium mb-4\">Cast your vote</h4>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <button\n                onClick={() => handleVoteClick(1)}\n                disabled={isVoting}\n                className=\"bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isVoting ? 'Voting...' : 'Vote Yes'}\n              </button>\n              <button\n                onClick={() => handleVoteClick(2)}\n                disabled={isVoting}\n                className=\"bg-red-600 hover:bg-red-700 text-white py-4 rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isVoting ? 'Voting...' : 'Vote No'}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Draft status info for non-authorized users */}\n        {status === 'draft' && !canStartVoting && (\n          <div className=\"mt-6 pt-6 border-t border-white/10\">\n            <div className=\"bg-gray-500/10 border border-gray-500/30 rounded-lg p-4 text-center\">\n              <h4 className=\"text-gray-300 font-medium mb-2\">Proposal is in Draft</h4>\n              <p className=\"text-sm text-white/40\">\n                Waiting for the proposer or an admin to start voting.\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Finalization button for active proposals that have ended (Admin only) */}\n        {status === 'active' && votingEnd && new Date() >= new Date(votingEnd) && userIsAdmin && onFinalize && (\n          <div className=\"mt-6 pt-6 border-t border-white/10\">\n            <div className=\"bg-orange-500/10 border border-orange-500/30 rounded-lg p-4 mb-4\">\n              <h4 className=\"text-orange-300 font-medium mb-2\">Voting Period Has Ended</h4>\n              <p className=\"text-sm text-orange-200/80 mb-3\">\n                The voting period for this proposal has ended. The proposal needs to be finalized to determine the outcome based on votes and quorum. As an admin, you can finalize this proposal.\n              </p>\n            </div>\n            <button\n              onClick={() => onFinalize?.()}\n              className=\"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-lg font-medium transition-all\"\n            >\n              Finalize Proposal\n            </button>\n          </div>\n        )}\n\n        {/* Status message for non-admins when voting has ended */}\n        {status === 'active' && votingEnd && new Date() >= new Date(votingEnd) && !userIsAdmin && (\n          <div className=\"mt-6 pt-6 border-t border-white/10\">\n            <div className=\"bg-gray-500/10 border border-gray-500/30 rounded-lg p-4 text-center\">\n              <h4 className=\"text-gray-300 font-medium mb-2\">Voting Ended</h4>\n              <p className=\"text-sm text-white/40\">\n                Awaiting finalization by admin\n              </p>\n            </div>\n          </div>\n        )}\n\n        {hasVoted && (\n          <div className=\"mt-6 pt-6 border-t border-white/10\">\n            <div className=\"text-center py-4\">\n              <FaCheckCircle className=\"w-8 h-8 text-green-400 mx-auto mb-2\" />\n              <p className=\"text-green-400 font-medium\">You have voted on this proposal</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Votes cast section - Full Width */}\n      <div className=\"professional-card rounded-xl p-6\">\n        <h3 className=\"text-lg font-semibold text-white mb-4\">Votes cast</h3>\n        {voteActivities.length > 0 ? (\n          <div className=\"divide-y divide-white/5\">\n            {voteActivities.map((vote, idx) => (\n              <div key={idx} className=\"py-4 flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"rounded-full overflow-hidden\">\n                    <Avatar\n                      name={vote.user}\n                      variant=\"beam\"\n                      size={32}\n                      colors={[\"#e1fd6a\", \"#a3e635\", \"#84cc16\", \"#65a30d\", \"#4d7c0f\"]}\n                    />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-white\">{truncateAddress(vote.user)}</p>\n                    <p className=\"text-[10px] text-white/40\">{new Date(vote.timestamp).toLocaleString()}</p>\n                  </div>\n                </div>\n                <div className={`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${vote.metadata?.voteChoice ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>\n                  {vote.metadata?.voteChoice ? 'Yes' : 'No'}\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-8 text-white/40\">\n            <p className=\"text-sm font-medium\">No individual votes to display</p>\n            <p className=\"text-[10px] mt-1 italic\">Voter list is populated from blockchain activities</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DAOProposalDetails;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOProposals.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":5,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[75,90],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"XCircle"},"fix":{"range":[113,124],"text":""},"desc":"Remove unused variable 'XCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":10},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":63,"column":3,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":63,"endColumn":16,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2141,2154],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2250,2253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2250,2253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":133,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":136,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2287,2290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2287,2290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":169,"column":15,"nodeType":"BlockStatement","messageId":"unexpected","endLine":169,"endColumn":18,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[6379,6380],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'userStatus.isAdmin'. Either include it or remove the dependency array.","line":173,"column":6,"nodeType":"ArrayExpression","endLine":173,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, account.address, userStatus.isAdmin]","fix":{"range":[6449,6475],"text":"[dao.id, account.address, userStatus.isAdmin]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8567,8570],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8567,8570],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":239,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8659,8662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8659,8662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":244,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8846,8849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8846,8849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":318,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":318,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12351,12354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12351,12354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":374,"column":15,"nodeType":"BlockStatement","messageId":"unexpected","endLine":374,"endColumn":18,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[14336,14337],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":401,"column":68,"nodeType":"BlockStatement","messageId":"unexpected","endLine":401,"endColumn":71,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[15497,15498],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":424,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":424,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16183,16186],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16183,16186],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":428,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":428,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16335,16338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16335,16338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":447,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":447,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17051,17054],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17051,17054],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":485,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":485,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18616,18619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18616,18619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":497,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":497,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19049,19052],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19049,19052],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":565,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":565,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22546,22549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22546,22549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchProposals' and 'sectionLoader'. Either include them or remove the dependency array.","line":585,"column":6,"nodeType":"ArrayExpression","endLine":585,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, fetchProposals, sectionLoader]","fix":{"range":[23240,23248],"text":"[dao.id, fetchProposals, sectionLoader]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProposals'. Either include it or remove the dependency array.","line":592,"column":6,"nodeType":"ArrayExpression","endLine":592,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, fetchProposals]","fix":{"range":[23503,23511],"text":"[dao.id, fetchProposals]"}}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":601,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":601,"endColumn":16,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[23849,23850],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkProposalEligibility'. Either include it or remove the dependency array.","line":606,"column":6,"nodeType":"ArrayExpression","endLine":606,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, account.address, checkProposalEligibility]","fix":{"range":[23937,23963],"text":"[dao.id, account.address, checkProposalEligibility]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'autoActivateEligibleProposals'. Either include it or remove the dependency array.","line":613,"column":6,"nodeType":"ArrayExpression","endLine":613,"endColumn":42,"suggestions":[{"desc":"Update the dependencies array to be: [proposals.length, account?.address, autoActivateEligibleProposals]","fix":{"range":[24146,24182],"text":"[proposals.length, account?.address, autoActivateEligibleProposals]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProposals'. Either include it or remove the dependency array.","line":624,"column":6,"nodeType":"ArrayExpression","endLine":624,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [fetchProposals, proposals.length]","fix":{"range":[24484,24502],"text":"[fetchProposals, proposals.length]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":644,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":644,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25058,25061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25058,25061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":647,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":647,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25158,25161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25158,25161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":655,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":655,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25442,25445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25442,25445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":801,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":801,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31267,31270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31267,31270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":819,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":819,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31939,31942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31939,31942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":900,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":900,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35607,35610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35607,35610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":956,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":956,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37867,37870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37867,37870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":983,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":983,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[38977,38980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[38977,38980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1160,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1160,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[48058,48061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[48058,48061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":1199,"column":15,"nodeType":"BlockStatement","messageId":"unexpected","endLine":1199,"endColumn":18,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[49673,49674],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1202,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1202,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49759,49762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49759,49762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":1252,"column":92,"nodeType":"BlockStatement","messageId":"unexpected","endLine":1252,"endColumn":95,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[52090,52091],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":1465,"column":112,"nodeType":"BlockStatement","messageId":"unexpected","endLine":1465,"endColumn":115,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[62793,62794],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":40,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Plus,\n  Play,\n  AlertCircle,\n  ArrowLeft,\n  Search,\n  XCircle\n} from 'lucide-react';\nimport { FaCheckCircle } from 'react-icons/fa';\nimport { FaDiscord } from 'react-icons/fa6';\nimport { DAO } from '../../types/dao';\nimport { useWallet } from '../../contexts/CedraWalletProvider';\nimport { cedraClient } from '../../cedra_service/cedra-client';\nimport { safeView, batchSafeView } from '../../utils/rpcUtils';\nimport { MODULE_ADDRESS } from '../../cedra_service/constants';\nimport DAOProposalDetails from './DAOProposalDetails';\nimport { useDAOMembership } from '../../hooks/useDAOMembership';\nimport { useWalletBalance } from '../../hooks/useWalletBalance';\nimport { useAlert } from '../alert/AlertContext';\nimport { useSectionLoader } from '../../hooks/useSectionLoader';\n\ninterface DAOProposalsProps {\n  dao: DAO;\n  sidebarCollapsed?: boolean;\n}\n\ninterface ProposalData {\n  id: string;\n  title: string;\n  description: string;\n  proposer: string;\n  status: string;\n  contractStatus?: string; // Actual contract status\n  category: string;\n  votesFor: number;\n  votesAgainst: number;\n  abstainVotes: number;\n  totalVotes: number;\n  totalStaked: number;\n  quorumRequired: number;\n  quorumCurrent: number;\n  votingStart: string;\n  votingEnd: string;\n  executionWindow: number;\n  executionDeadline: string;\n  created: string;\n  userVotingPower: number;\n  userVoted: boolean;\n  userVoteType: string | null;\n  needsActivation?: boolean; // Flag indicating if proposal needs manual activation\n  needsFinalization?: boolean; // Flag indicating if proposal needs manual finalization\n}\n\n// Simple in-memory cache for proposal data (keep legacy but extend session cache TTL)\nconst proposalCache = new Map<string, { data: ProposalData[]; timestamp: number }>();\nconst PROPOSAL_CACHE_TTL = 30000; // legacy\n\nconst DAOProposals: React.FC<DAOProposalsProps> = ({ dao }) => {\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [selectedProposal, setSelectedProposal] = useState<ProposalData | null>(null);\n  // In-memory cache so tab switches are instant (session-scoped)\n  // @ts-ignore\n  const proposalsCache: Map<string, { items: ProposalData[]; timestamp: number }> = (window as any).__proposalsCache || ((window as any).__proposalsCache = new Map());\n  const PROPOSALS_TTL_MS = 5 * 60 * 1000; // 5 minutes session TTL\n  const PROPOSALS_MAX_STALE_MS = 10 * 60 * 1000; // 10 minutes stale window\n  const nowForInit = Date.now();\n  const cachedForInit = proposalsCache.get(dao.id);\n  const initialProposals = cachedForInit && (nowForInit - cachedForInit.timestamp) < PROPOSALS_TTL_MS\n    ? cachedForInit.items\n    : [];\n  const [proposals, setProposals] = useState<ProposalData[]>(initialProposals);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [, setProposalCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  // Section-level loader for unified loading state (like Overview)\n  const sectionLoader = useSectionLoader();\n  const [isCreating, setIsCreating] = useState(false);\n  const [userStatus, setUserStatus] = useState({ isAdmin: false, isMember: false, isStaker: false, isCouncil: false });\n  const [newProposal, setNewProposal] = useState({\n    title: '',\n    description: '',\n    category: 'general',\n    votingDuration: 7,\n    executionWindow: 3,\n    minQuorum: 20,\n    startTime: '',\n    endTime: ''\n  });\n\n  const { account, signAndSubmitTransaction } = useWallet();\n\n  // Use persistent membership state\n  const {\n    isStaker,\n    isMember,\n    membershipData\n  } = useDAOMembership(dao);\n\n  useWalletBalance();\n  // Membership and proposal stakes use 6 decimals (1e6), not 8 decimals (1e8) like Cedra coins\n  const MEMBERSHIP_DECIMALS = 1e6;  // 6 decimals for membership/proposal stakes\n  const toCEDRA = (u64: number): number => u64 / MEMBERSHIP_DECIMALS;\n  const [canCreateProposal, setCanCreateProposal] = useState(true);\n  const [nextProposalTime, setNextProposalTime] = useState<Date | null>(null);\n  const [stakeRequirements, setStakeRequirements] = useState({\n    minStakeToJoin: 0,\n    minStakeToPropose: 0,\n    userCurrentStake: 0,\n    isAdmin: false,\n    isMember: false,\n    canPropose: false\n  });\n  const [membershipConfigMissing, setMembershipConfigMissing] = useState(false);\n  const { showAlert } = useAlert();\n\n  // Status mappings from contract\n  const statusMap: { [key: number]: string } = {\n    0: 'draft',\n    1: 'active',\n    2: 'passed',\n    3: 'rejected',\n    4: 'executed',\n    5: 'cancelled'\n  };\n\n  // Keep user status in sync with context membership state immediately\n  useEffect(() => {\n    setUserStatus(prev => ({\n      ...prev,\n      isMember,\n      isStaker,\n    }));\n  }, [isMember, isStaker]);\n\n  // Lightweight role re-check using a single ABI view; never downgrade on transient failures\n  useEffect(() => {\n    let cancelled = false;\n    const recheck = async () => {\n      try {\n        if (!dao.id || !account?.address) return;\n        const [statusRes, canCreateRes] = await Promise.allSettled([\n          cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::proposal::get_user_status_code`, functionArguments: [dao.id, account.address] } }),\n          cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::proposal::can_user_create_proposals`, functionArguments: [dao.id, account.address] } }),\n        ]);\n        if (cancelled) return;\n\n        // Persistently set roles; if call fails, keep previous values\n        setUserStatus(prev => {\n          if (statusRes.status === 'fulfilled' && Array.isArray(statusRes.value)) {\n            const code = Number(statusRes.value?.[0] || 0);\n            return {\n              ...prev,\n              isAdmin: code === 3,\n              // Treat admin as member for UI purposes\n              isMember: code === 1 || code === 3 || prev.isMember,\n            };\n          }\n          return prev;\n        });\n\n        const adminIs = statusRes.status === 'fulfilled' && Array.isArray(statusRes.value)\n          ? Number(statusRes.value?.[0] || 0) === 3\n          : userStatus.isAdmin;\n        const canCreateNow = canCreateRes.status === 'fulfilled' && Array.isArray(canCreateRes.value)\n          ? Boolean(canCreateRes.value?.[0])\n          : null;\n        setCanCreateProposal(prev => adminIs || (canCreateNow === null ? prev : canCreateNow));\n      } catch { }\n    };\n    recheck();\n    return () => { cancelled = true; };\n  }, [dao.id, account?.address]);\n\n\n  const checkProposalEligibility = async () => {\n    if (!account?.address) {\n      setCanCreateProposal(false);\n      setStakeRequirements({\n        minStakeToJoin: 0,\n        minStakeToPropose: 0,\n        userCurrentStake: 0,\n        isAdmin: false,\n        isMember: false,\n        canPropose: false\n      });\n      setUserStatus({ isAdmin: false, isMember: false, isStaker: false, isCouncil: false });\n      return;\n    }\n\n    try {\n      // Batch fetch staking requirements and user status with timeout\n      const eligibilityPromises = [\n        safeView({\n          function: `${MODULE_ADDRESS}::membership::get_min_stake`,\n          functionArguments: [dao.id]\n        }),\n        safeView({\n          function: `${MODULE_ADDRESS}::membership::get_min_proposal_stake`,\n          functionArguments: [dao.id]\n        }),\n        safeView({\n          function: `${MODULE_ADDRESS}::staking::get_dao_staked_balance`,\n          functionArguments: [dao.id, account.address]\n        }),\n        safeView({\n          function: `${MODULE_ADDRESS}::admin::is_admin`,\n          functionArguments: [dao.id, account.address]\n        }),\n        safeView({\n          function: `${MODULE_ADDRESS}::membership::is_member`,\n          functionArguments: [dao.id, account.address]\n        }),\n        safeView({\n          function: `${MODULE_ADDRESS}::membership::can_create_proposal`,\n          functionArguments: [dao.id, account.address]\n        }),\n        cedraClient.getAccountResource({\n          accountAddress: account.address,\n          resourceType: `${MODULE_ADDRESS}::proposal::ProposerRecord`\n        }).catch(() => null)\n      ];\n\n      // Add timeout to prevent hanging on slow calls (increased timeout)\n      const [\n        minStakeToJoinRes,\n        minStakeToProposRes,\n        userStakeRes,\n        isAdminRes,\n        isMemberRes,\n        canProposeRes,\n        proposerRecord\n      ] = await Promise.race([\n        Promise.allSettled(eligibilityPromises),\n        new Promise((_, reject) => setTimeout(() => reject(new Error('Eligibility check timeout')), 15000))\n      ]) as any[];\n\n      // Helpers for safe extraction from view responses\n      const getU64 = (res: any): number => {\n        return res && res.status === 'fulfilled' && Array.isArray(res.value)\n          ? Number(res.value?.[0] ?? 0)\n          : 0;\n      };\n      const getBool = (res: any): boolean => {\n        return res && res.status === 'fulfilled' && Array.isArray(res.value)\n          ? Boolean(res.value?.[0])\n          : false;\n      };\n\n      // Check if membership config is missing and provide fallback values\n      const membershipConfigMissingCheck = minStakeToJoinRes?.status === 'rejected' &&\n        minStakeToJoinRes?.reason?.message?.includes('MISSING_DATA');\n      setMembershipConfigMissing(membershipConfigMissingCheck);\n\n      // Extract values with safe defaults - handle both raw and Octa values\n      const rawMinStakeToJoin = getU64(minStakeToJoinRes);\n      const rawMinStakeToPropose = getU64(minStakeToProposRes);\n      const rawUserCurrentStake = getU64(userStakeRes);\n\n      // IMPORTANT: The contract stores ALL stakes with 6 decimal places (1e6)\n      // Convert all stake values consistently using the same decimal conversion:\n      let minStakeToJoin = toCEDRA(rawMinStakeToJoin); // Convert from 6-decimal to CEDRA tokens\n      let minStakeToPropose = toCEDRA(rawMinStakeToPropose); // Convert from 6-decimal to CEDRA tokens  \n      const userCurrentStake = toCEDRA(rawUserCurrentStake); // Convert from 6-decimal to CEDRA\n      const isAdmin = getBool(isAdminRes);\n      const isMember = getBool(isMemberRes);\n\n      // ADMIN BYPASS: If user is DAO creator (same address), they are admin\n      const isDAOCreator = account.address === dao.id;\n\n      // Handle missing membership configuration or admin bypass\n      if (membershipConfigMissingCheck || isDAOCreator || isAdmin) {\n        // Set reasonable defaults when calls fail\n        if (minStakeToJoin === 0) minStakeToJoin = 6;\n        if (minStakeToPropose === 0) minStakeToPropose = 6;\n      }\n\n      let canPropose = getBool(canProposeRes);\n\n      // Handle missing membership configuration or RPC failures - allow proposal creation for:\n      // 1. Admins (always allowed - bypass all stake requirements)\n      // 2. Users with sufficient stake when config is missing or calls fail\n      if (membershipConfigMissingCheck || canProposeRes?.status === 'rejected') {\n        canPropose = isAdmin || isDAOCreator || userCurrentStake >= minStakeToPropose;\n      }\n\n      // CRITICAL: Admins and DAO creators should ALWAYS be able to create proposals regardless of config\n      if (isAdmin || isDAOCreator) {\n        canPropose = true;\n      }\n\n      // FALLBACK: If member and has enough stake but RPC failed, allow proposal creation\n      if (isMember && userCurrentStake >= minStakeToPropose && !canPropose) {\n        canPropose = true;\n      }\n\n\n      // Update stake requirements state using persistent data where available\n      setStakeRequirements({\n        minStakeToJoin: membershipData?.minStakeRequired || minStakeToJoin,\n        minStakeToPropose,\n        userCurrentStake: membershipData?.stakedAmount || userCurrentStake,\n        isAdmin: isAdmin || isDAOCreator, // DAO creator is always admin\n        isMember: membershipData?.isMember ?? isMember,\n        canPropose: canPropose || isDAOCreator // DAO creator can always propose\n      });\n\n      setUserStatus({\n        isAdmin,\n        isMember: membershipData?.isMember ?? isMember,\n        isStaker: membershipData?.isStaker || (userCurrentStake > 0),\n        isCouncil: false\n      });\n\n      // Check cooldown period\n      let canCreateDueToCooldown = true;\n      if (proposerRecord && proposerRecord.status === 'fulfilled' && proposerRecord.value?.data) {\n        const lastProposalTime = Number((proposerRecord.value.data as any)?.last_proposal_time || 0);\n\n        if (lastProposalTime > 0) {\n          const cooldownPeriod = 24 * 60 * 60; // 24 hours in seconds\n          const nowSeconds = Math.floor(Date.now() / 1000);\n          const nextAllowedTime = lastProposalTime + cooldownPeriod;\n\n          if (nowSeconds < nextAllowedTime) {\n            canCreateDueToCooldown = false;\n            setNextProposalTime(new Date(nextAllowedTime * 1000));\n          } else {\n            setNextProposalTime(null);\n          }\n        } else {\n          setNextProposalTime(null);\n        }\n      } else {\n        setNextProposalTime(null);\n      }\n\n      // Final eligibility: can propose (stake + membership) AND cooldown passed\n      setCanCreateProposal((isAdmin || canPropose) && canCreateDueToCooldown);\n\n    } catch (error) {\n      console.warn('Failed to check proposal eligibility:', error);\n      // Set safe defaults\n      setCanCreateProposal(false);\n      setStakeRequirements({\n        minStakeToJoin: 0,\n        minStakeToPropose: 0,\n        userCurrentStake: 0,\n        isAdmin: false,\n        isMember: false,\n        canPropose: false\n      });\n      setUserStatus({ isAdmin: false, isMember: false, isStaker: false, isCouncil: false });\n    }\n  };\n\n  const fetchProposals = async (forceRefresh = false) => {\n    try {\n      // Persist roles before any list refresh to avoid UI flicker/down-grading\n      try {\n        if (dao.id && account?.address) {\n          const status = await cedraClient.view({\n            payload: { function: `${MODULE_ADDRESS}::proposal::get_user_status_code`, functionArguments: [dao.id, account.address] }\n          }).catch(() => null);\n          if (status && Array.isArray(status)) {\n            const code = Number(status[0] || 0);\n            setUserStatus(prev => ({\n              ...prev,\n              isAdmin: code === 3 || prev.isAdmin,\n              isMember: code === 1 || code === 3 || prev.isMember,\n            }));\n          }\n        }\n      } catch { }\n\n      // For connected users, prefer fresh data for voting status.\n      // For guests, use cache.\n      const cacheKey = `proposals_${dao.id}`;\n      if (!forceRefresh && !account?.address) {\n        // Only use cache if user is not connected (no need to check voting status)\n        // legacy cache\n        const cachedLegacy = proposalCache.get(cacheKey);\n        if (cachedLegacy && Date.now() - cachedLegacy.timestamp < PROPOSAL_CACHE_TTL) {\n          setProposals(cachedLegacy.data);\n          setIsLoading(false);\n          return;\n        }\n        // session cache\n        const cached = proposalsCache.get(dao.id);\n        const now = Date.now();\n        if (cached && (now - cached.timestamp) < PROPOSALS_TTL_MS) {\n          setProposals(cached.items);\n          setIsLoading(false);\n          return;\n        }\n        // Stale session cache - show instantly and refresh in background silently\n        if (cached && (now - cached.timestamp) < PROPOSALS_MAX_STALE_MS) {\n          setProposals(cached.items);\n          setIsLoading(false);\n          // Silent background refresh\n          (async () => { try { await fetchProposals(true); } catch { } })();\n          return;\n        }\n      }\n\n      setIsLoading(true);\n\n      // First, get the total number of proposals (with circuit breaker + cache)\n      const countRes = await safeView({\n        function: `${MODULE_ADDRESS}::proposal::get_proposals_count`,\n        functionArguments: [dao.id]\n      }, `proposals_count_${dao.id}`);\n\n      const count = Number(countRes[0] || 0);\n      setProposalCount(count);\n\n      if (count === 0) {\n        setProposals([]);\n        return;\n      }\n\n      // Fetch individual proposals in optimized batches via managed request manager\n      const batchSize = 20; // Increased batch size for faster parallel fetch\n      const proposalResults: any[] = [];\n\n      for (let i = 0; i < count; i += batchSize) {\n        const batchEnd = Math.min(i + batchSize, count);\n        const payloads = [] as any[];\n        for (let j = i; j < batchEnd; j++) {\n          payloads.push({\n            function: `${MODULE_ADDRESS}::proposal::get_proposal`,\n            functionArguments: [dao.id, j]\n          });\n        }\n        const settled = await batchSafeView(payloads, { cachePrefix: `proposal_${dao.id}_${i}` });\n        for (const s of settled) {\n          if (s.status === 'fulfilled') proposalResults.push(s.value);\n          else proposalResults.push(null);\n        }\n      }\n      const validProposals: ProposalData[] = [];\n\n      for (let i = 0; i < proposalResults.length; i++) {\n        const result = proposalResults[i];\n        if (!result || !result[0]) continue;\n\n        const proposalData = result[0] as any;\n\n        // Check if user can vote (is member with sufficient stake)\n        let userCanVote = false;\n        let userVoted = false;\n        let userVoteType = null;\n\n        if (account?.address) {\n          // Use the dedicated ABI function to check if user has voted\n          try {\n            const hasVotedResult = await safeView({\n              function: `${MODULE_ADDRESS}::proposal::has_user_voted_on_proposal`,\n              functionArguments: [dao.id, i, account.address]\n            });\n            userVoted = Boolean(hasVotedResult[0]);\n\n            if (userVoted) {\n              // Get the vote details if they voted\n              try {\n                const voteDetails = await safeView({\n                  function: `${MODULE_ADDRESS}::proposal::get_user_vote_on_proposal`,\n                  functionArguments: [dao.id, i, account.address]\n                });\n                if (voteDetails && voteDetails[0]) {\n                  userVoteType = Number(voteDetails[1] || 0);\n                  userCanVote = true;\n                }\n              } catch (err) {\n                console.warn(`Could not get vote details for proposal ${i}`, err);\n              }\n            } else {\n              // Use persistent membership state\n              userCanVote = isMember && isStaker;\n            }\n          } catch (error) {\n            console.warn(`Error checking if user voted on proposal ${i}:`, error);\n            // Fallback to old method\n            const votes = proposalData.votes || [];\n            const userVote = votes.find((vote: any) => vote.voter === account.address);\n            if (userVote) {\n              userVoted = true;\n              userVoteType = userVote.vote_type.value;\n              userCanVote = true;\n            } else {\n              userCanVote = isMember && isStaker;\n            }\n          }\n        }\n\n        // Tally vote COUNTS from the on-chain votes vector (individual voters)\n        const votesVec = (proposalData.votes || []) as any[];\n        let yesCount = 0;\n        let noCount = 0;\n        let abstainCount = 0;\n        for (const v of votesVec) {\n          const vt = typeof v.vote_type?.value === 'number' ? v.vote_type.value : v.vote_type;\n          if (vt === 1) yesCount += 1;\n          else if (vt === 2) noCount += 1;\n          else if (vt === 3) abstainCount += 1;\n        }\n        const totalVoters = yesCount + noCount + abstainCount;\n\n        // Keep turnout (quorum) based on WEIGHT (staked voting power)\n        const totalVotingWeight = toCEDRA(Number(proposalData.yes_votes || 0))\n          + toCEDRA(Number(proposalData.no_votes || 0))\n          + toCEDRA(Number(proposalData.abstain_votes || 0));\n        const totalStaked = 85200; // TODO: Get from DAO stats\n        const quorumCurrent = totalStaked > 0 ? (totalVotingWeight / totalStaked) * 100 : 0;\n\n        // Calculate effective status with automatic transitions\n        const contractStatus = statusMap[proposalData.status.value] || 'unknown';\n        const now = Date.now();\n        const votingStart = new Date((Number(proposalData.voting_start || 0)) * 1000).getTime();\n        const votingEnd = new Date((Number(proposalData.voting_end || 0)) * 1000).getTime();\n\n        let effectiveStatus = contractStatus;\n\n        // Keep status constant with contract; do not auto-transition in UI\n        effectiveStatus = contractStatus;\n\n        const proposal: ProposalData = {\n          id: proposalData.id.toString(),\n          title: proposalData.title,\n          description: proposalData.description,\n          proposer: proposalData.proposer,\n          status: effectiveStatus,\n          contractStatus: contractStatus, // Keep track of actual contract status\n          category: 'general', // TODO: Add category to contract or derive from title\n          // Expose vote COUNTS for UI totals and distribution\n          votesFor: yesCount,\n          votesAgainst: noCount,\n          abstainVotes: abstainCount,\n          totalVotes: totalVoters,\n          totalStaked,\n          quorumRequired: Number(proposalData.min_quorum_percent || 0),\n          quorumCurrent,\n          votingStart: new Date((Number(proposalData.voting_start || 0)) * 1000).toISOString(),\n          votingEnd: new Date((Number(proposalData.voting_end || 0)) * 1000).toISOString(),\n          executionWindow: Number(proposalData.execution_window || 0) / (24 * 60 * 60), // Convert to days\n          executionDeadline: new Date((Number(proposalData.voting_end || 0) + Number(proposalData.execution_window || 0)) * 1000).toISOString(),\n          created: new Date((Number(proposalData.created_at || 0)) * 1000).toISOString(),\n          userVotingPower: userCanVote ? (membershipData?.votingPower || 0) : 0,\n          userVoted,\n          userVoteType: userVoteType === 1 ? 'yes' : userVoteType === 2 ? 'no' : userVoteType === 3 ? 'abstain' : null,\n          needsActivation: contractStatus === 'draft' && now >= votingStart, // Flag for UI to show activation needed\n          needsFinalization: contractStatus === 'active' && now >= votingEnd // Flag for UI to show finalization needed\n        };\n\n        validProposals.push(proposal);\n      }\n\n      const finalProposals = validProposals.reverse(); // Show newest first\n      setProposals(finalProposals);\n\n      // Cache the results\n      proposalCache.set(cacheKey, { data: finalProposals, timestamp: Date.now() });\n      proposalsCache.set(dao.id, { items: finalProposals, timestamp: Date.now() });\n\n    } catch (error: any) {\n      console.error('Failed to fetch proposals:', error);\n      const msg = String(error?.message || error);\n      if (msg.includes('Circuit breaker is OPEN') || msg.includes('429') || msg.includes('Too Many Requests')) {\n        // Silently retry without showing message to user\n        const retryDelay = 5000;\n        setTimeout(() => {\n          fetchProposals(forceRefresh);\n        }, retryDelay);\n      }\n      setProposals([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Load proposals once per DAO; avoid reloading on tab switches\n  // Eligibility still updates with account changes\n  useEffect(() => {\n    sectionLoader.executeWithLoader(fetchProposals);\n  }, [dao.id]);\n\n  // Light, realΓÇætime refresh triggers without over-modifying logic\n  useEffect(() => {\n    const onFocus = () => fetchProposals(true);\n    window.addEventListener('focus', onFocus);\n    return () => window.removeEventListener('focus', onFocus);\n  }, [dao.id]);\n\n  // Restore selected proposal on mount (persist detail view across refresh)\n  useEffect(() => {\n    try {\n      const savedId = localStorage.getItem(`dao_${dao.id}_selected_proposal_id`);\n      if (!savedId) return;\n      const found = proposals.find(p => p.id === savedId);\n      if (found) setSelectedProposal(found);\n    } catch { }\n  }, [dao.id, proposals]);\n\n  useEffect(() => {\n    checkProposalEligibility();\n  }, [dao.id, account?.address]);\n\n  // Auto-activation effect - runs when proposals change\n  useEffect(() => {\n    if (proposals.length > 0 && account?.address) {\n      autoActivateEligibleProposals();\n    }\n  }, [proposals.length, account?.address]);\n\n  // Periodic status sync effect\n  useEffect(() => {\n    if (proposals.length === 0) return;\n\n    const intervalId = setInterval(() => {\n      fetchProposals(); // Refresh proposals to sync status\n    }, 15000); // 15s cadence for snappier updates\n\n    return () => clearInterval(intervalId);\n  }, [proposals.length]);\n\n  // Proposal creation function\n  // Start voting function\n  const handleStartVoting = async (proposalId: string) => {\n    if (!account || !signAndSubmitTransaction) {\n      showAlert('Please connect your wallet to start voting', 'error');\n      return;\n    }\n\n    try {\n      const payload = {\n        function: `${MODULE_ADDRESS}::proposal::start_voting`,\n        typeArguments: [],\n        functionArguments: [\n          dao.id,\n          parseInt(proposalId)\n        ]\n      };\n\n      const response = await signAndSubmitTransaction({ payload } as any);\n\n      // If user cancels or no hash, treat as cancelled\n      if (!response || !(response as any).hash) {\n        showAlert('Transaction cancelled', 'error');\n        return;\n      }\n\n      // Refresh proposals to update status\n      await fetchProposals();\n      showAlert('Voting started successfully! The proposal is now active for voting.', 'success');\n    } catch (error: any) {\n      console.error('Failed to start voting:', error);\n\n      // Handle specific errors\n      let errorMessage = 'Failed to start voting. Please try again.';\n      if (error?.message || error?.toString()) {\n        const errorString = error.message || error.toString();\n\n        if (errorString.includes('invalid_status') || errorString.includes('0xc5')) {\n          errorMessage = 'This proposal is not in draft status and cannot be activated.';\n        } else if (errorString.includes('not_admin_or_proposer') || errorString.includes('0xc6')) {\n          errorMessage = 'Only the proposal creator or DAO admins can start voting.';\n        }\n      }\n\n      showAlert(errorMessage, 'error');\n    }\n  };\n\n  // Auto-activation function for proposals that should be active\n  const autoActivateEligibleProposals = async () => {\n    if (!account?.address) return;\n\n    const eligibleProposals = proposals.filter(proposal =>\n      proposal.needsActivation &&\n      (proposal.proposer === account.address)\n    );\n\n    for (const proposal of eligibleProposals) {\n      try {\n        await handleStartVoting(proposal.id);\n      } catch (error) {\n        console.warn(`Failed to auto-activate proposal ${proposal.id}:`, error);\n        // Continue with other proposals even if one fails\n      }\n    }\n  };\n\n  // Finalize proposal function\n  const handleFinalizeProposal = async (proposalId: string) => {\n    if (!account || !signAndSubmitTransaction) {\n      showAlert('Please connect your wallet to finalize this proposal', 'error');\n      return;\n    }\n\n    try {\n      const proposal = proposals.find(p => p.id === proposalId);\n      if (!proposal) {\n        showAlert('Proposal not found. Please refresh the page.', 'error');\n        return;\n      }\n\n      // Check if voting period has ended\n      const now = Date.now();\n      const votingEnd = new Date(proposal.votingEnd).getTime();\n\n      if (now < votingEnd) {\n        showAlert('Voting period has not ended yet. Please wait for the voting period to end before finalizing.', 'error');\n        return;\n      }\n\n      // Authorization check - only admins can finalize\n      try {\n        const isAdminRes = await cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::admin::is_admin`,\n            functionArguments: [dao.id, account.address]\n          }\n        });\n\n        const isAdmin = Array.isArray(isAdminRes) ? Boolean(isAdminRes[0]) : false;\n\n\n        if (!isAdmin) {\n          showAlert('You are not authorized to finalize proposals. Only DAO admins can finalize proposals.', 'error');\n          return;\n        }\n      } catch (authError) {\n        console.warn('Authorization check failed, proceeding with transaction:', authError);\n      }\n\n      // Double-check proposal status and voting times on-chain before finalizing\n      try {\n        const [statusCheck, proposalDetails] = await Promise.allSettled([\n          cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::proposal::get_proposal_status`,\n              functionArguments: [dao.id, parseInt(proposalId)]\n            }\n          }),\n          cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::proposal::get_proposal_details`,\n              functionArguments: [dao.id, parseInt(proposalId)]\n            }\n          })\n        ]);\n\n        const currentStatus = statusCheck.status === 'fulfilled' && Array.isArray(statusCheck.value)\n          ? Number(statusCheck.value[0])\n          : null;\n\n        if (currentStatus !== 1) { // 1 = active status\n          showAlert(`This proposal cannot be finalized. Current status: ${currentStatus === 0 ? 'draft' : currentStatus === 2 ? 'passed' : currentStatus === 3 ? 'rejected' : currentStatus === 4 ? 'executed' : 'unknown'}. Only active proposals can be finalized.`, 'error');\n          return;\n        }\n\n        // Check voting end time on-chain\n        if (proposalDetails.status === 'fulfilled' && Array.isArray(proposalDetails.value)) {\n          const details = proposalDetails.value;\n          // get_proposal_details returns: (id, title, description, proposer, status, yes_votes, no_votes, abstain_votes, created_at, voting_start, voting_end, execution_window, approved_by_admin, finalized_by_admin, vote_count, member_count)\n          const votingEndOnChain = Number(details[10] || 0); // voting_end is at index 10\n          const nowSeconds = Math.floor(Date.now() / 1000);\n\n          if (nowSeconds < votingEndOnChain) {\n            const endDate = new Date(votingEndOnChain * 1000).toLocaleString();\n            showAlert(`Voting period has not ended yet. Voting ends at: ${endDate}. Current time: ${new Date().toLocaleString()}. Time remaining: ${Math.ceil((votingEndOnChain - nowSeconds) / 60)} minutes`, 'error');\n            return;\n          }\n        }\n\n        // Check if staking module is properly initialized (needed for finalization)\n        try {\n          await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::staking::get_total_staked`,\n              functionArguments: [dao.id]\n            }\n          });\n        } catch (stakingError) {\n          console.warn('Could not check staking amount:', stakingError);\n          showAlert('Warning: Could not verify staking module state. The finalization might fail if staking is not properly initialized.', 'error');\n        }\n      } catch (statusError) {\n        console.warn('Status/time check failed, proceeding with transaction:', statusError);\n      }\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::proposal::finalize_proposal`,\n        typeArguments: [],\n        functionArguments: [\n          dao.id,\n          parseInt(proposalId)\n        ]\n      };\n\n      const response = await signAndSubmitTransaction({ payload } as any);\n\n      // Wait for transaction to be confirmed\n      if (response?.hash) {\n        try {\n          await cedraClient.waitForTransaction({ transactionHash: response.hash });\n        } catch (waitError) {\n          console.warn('Wait for transaction failed, but continuing:', waitError);\n        }\n      }\n\n      // Add a small delay to ensure indexer has processed the transaction\n      await new Promise(resolve => setTimeout(resolve, 2000));\n\n      // Refresh proposals to update status\n      await fetchProposals(true);\n\n      showAlert('Proposal finalized successfully! The outcome has been determined based on votes and quorum.', 'success');\n    } catch (error: any) {\n      console.error('Failed to finalize proposal:', error);\n      console.error('Error type:', typeof error);\n      console.error('Error keys:', Object.keys(error || {}));\n      console.error('Error stack:', error?.stack);\n\n      // Try to extract more detailed error information\n      let errorDetails = {};\n      if (error) {\n        errorDetails = {\n          message: error.message,\n          code: error.code,\n          data: error.data,\n          details: error.details,\n          reason: error.reason,\n          transaction: error.transaction,\n          transactionHash: error.transactionHash\n        };\n      }\n      console.error('Detailed error info:', errorDetails);\n\n      let errorMessage = 'Failed to finalize proposal. ';\n      if (error?.message || error?.toString()) {\n        const errorString = error.message || error.toString();\n\n        if (errorString.includes('User rejected')) {\n          errorMessage = 'Transaction was cancelled by user.';\n        } else if (errorString.includes('simulation')) {\n          errorMessage = 'Transaction simulation failed. This usually means:\\\\n\\\\n1. You are not authorized to finalize this proposal\\\\n2. The proposal is not in the correct status\\\\n3. The voting period has not ended yet\\\\n\\\\nPlease check your authorization and try again.';\n        } else if (errorString.includes('invalid_status') || errorString.includes('0xc5')) {\n          errorMessage = 'This proposal is not in active status and cannot be finalized.';\n        } else if (errorString.includes('not_authorized') || errorString.includes('0x9')) {\n          errorMessage = 'You are not authorized to finalize this proposal. Only admins or members with proposal creation rights can finalize proposals.';\n        } else if (errorString.includes('voting_ended') || errorString.includes('0xc9')) {\n          errorMessage = 'Voting period has not ended yet. Please wait for the voting period to end before finalizing.';\n        } else if (errorString.includes('EABORTED')) {\n          // Move abort error\n          errorMessage = `Contract execution failed: ${errorString}\\\\n\\\\nThis indicates a Move contract assertion failed. Check console for detailed error information.`;\n        } else {\n          errorMessage += `Error details: ${errorString}`;\n        }\n      } else {\n        errorMessage += 'No error details available. Check console logs for more information.';\n      }\n\n      showAlert(errorMessage, 'error');\n    }\n  };\n\n  // Enhanced voting function with automatic activation check\n  const handleVoteWithActivation = async (proposalId: string, voteType: number) => {\n    const proposal = proposals.find(p => p.id === proposalId);\n\n    if (!proposal) {\n      showAlert('Proposal not found. Please refresh the page.', 'error');\n      return;\n    }\n\n    try {\n      // If proposal needs activation and user can activate it, try auto-activation first\n      if (proposal.needsActivation && proposal.contractStatus === 'draft') {\n        const canActivate = proposal.proposer === account?.address;\n\n        if (canActivate) {\n          try {\n            await handleStartVoting(proposalId);\n            // Wait a moment for status to update, then proceed with voting\n            setTimeout(() => {\n              handleVote(proposalId, voteType).catch(err => {\n                console.error('Delayed vote failed:', err);\n              });\n            }, 1000);\n            return;\n          } catch (error) {\n            console.warn('Auto-activation failed, proceeding with regular vote:', error);\n          }\n        }\n      }\n\n      // Proceed with regular voting\n      await handleVote(proposalId, voteType);\n    } catch (error: any) {\n      console.error('Voting workflow failed:', error);\n      // handleVote already shows alerts for its internal errors, \n      // but if something else fails here, we show it.\n      if (error?.message && !error.message.includes('Cast your vote')) {\n        showAlert(error.message, 'error');\n      }\n    }\n  };\n\n  // Voting functions\n  const handleVote = async (proposalId: string, voteType: number) => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Please connect your wallet to vote on this proposal');\n    }\n\n    try {\n      // Pre-validate conditions by checking proposal status\n      const proposal = proposals.find(p => p.id === proposalId);\n      if (!proposal) {\n        throw new Error('Proposal not found. Please refresh the page and try again.');\n      }\n\n      // Check if voting has started by examining the voting start time\n      const now = Date.now();\n      const votingStart = new Date(proposal.votingStart).getTime();\n      const votingEnd = new Date(proposal.votingEnd).getTime();\n\n      // Enforce strict time-based voting - only allow voting when the scheduled time has been reached\n      if (now < votingStart) {\n        const startDate = new Date(votingStart).toLocaleString();\n        throw new Error(`Voting has not started yet. Voting begins on ${startDate}. Please wait for the voting period to begin before casting your vote.`);\n      }\n\n      if (now > votingEnd) {\n        const endDate = new Date(votingEnd).toLocaleString();\n        throw new Error(`Voting has ended on ${endDate}. This proposal is no longer accepting votes.`);\n      }\n\n      if (proposal.userVoted) {\n        throw new Error('You have already voted on this proposal. Each member can only vote once per proposal.');\n      }\n\n      // Let the contract validate membership and voting power on-chain\n      // Frontend checks can use stale cached data, so we skip them and let the contract decide\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::proposal::cast_vote`,\n        typeArguments: [],\n        functionArguments: [\n          dao.id,\n          parseInt(proposalId),\n          voteType // 1 = yes, 2 = no, 3 = abstain\n        ]\n      };\n\n      const response = await signAndSubmitTransaction({ payload } as any);\n\n      // Check if transaction was rejected by user - handle various rejection formats\n      if (!response ||\n        response?.status === 'Rejected' ||\n        response?.status === 'rejected' ||\n        String(response?.status || '').toLowerCase().includes('reject')) {\n        return; // Exit silently without showing success message\n      }\n\n      // Only proceed if we have a valid successful response\n      if (!response?.hash && !response?.success) {\n        return;\n      }\n\n      // Update selected proposal to reflect voting status immediately (optimistic update)\n      if (selectedProposal && selectedProposal.id === proposalId) {\n        setSelectedProposal(prev => prev ? { ...prev, userVoted: true } : null);\n      }\n\n      showAlert('Vote cast successfully!', 'success');\n\n      // Refresh proposals with force refresh to bypass cache and update from blockchain\n      await fetchProposals(true); // Force refresh to bypass cache\n\n      // Keep userVoted true - don't let refresh override it\n      setSelectedProposal(prev => prev ? { ...prev, userVoted: true } : null);\n    } catch (error: any) {\n      console.error('Failed to cast vote:', error);\n\n      // Check if user rejected/cancelled the transaction\n      const errorString = error?.message || error?.toString() || '';\n      const lowerErrorString = errorString.toLowerCase();\n\n      // Check for various wallet rejection patterns\n      if (\n        lowerErrorString.includes('user rejected') ||\n        lowerErrorString.includes('user cancelled') ||\n        lowerErrorString.includes('user denied') ||\n        lowerErrorString.includes('rejected by user') ||\n        lowerErrorString.includes('cancelled by user') ||\n        lowerErrorString.includes('user disapproved') ||\n        lowerErrorString.includes('request rejected') ||\n        lowerErrorString.includes('transaction rejected') ||\n        lowerErrorString.includes('declined') ||\n        error?.code === 4001 || // Standard wallet rejection code\n        error?.code === 'ACTION_REJECTED'\n      ) {\n        // User cancelled - don't show error, just exit silently\n        return;\n      }\n\n      // Handle user-friendly error messages for voting with enhanced membership context\n      const isAdmin = userStatus.isAdmin || stakeRequirements.isAdmin;\n      let errorMessage = `Unable to cast vote on this ${dao.name} proposal. `;\n\n      // Add specific membership context to the error (skip membership check for admins)\n      if (!isAdmin) {\n        if (!isMember) {\n          if (!isStaker) {\n            errorMessage += `You are not a member - you need to stake at least ${membershipData?.minStakeRequired || 'some'} CEDRA tokens to join and vote.`;\n          } else {\n            errorMessage += `You have ${membershipData?.stakedAmount || 0} CEDRA staked but need to join the DAO to vote.`;\n          }\n        } else if ((membershipData?.votingPower || 0) <= 0) {\n          errorMessage += `You are a member but have no voting power. Current stake: ${membershipData?.stakedAmount || 0} CEDRA.`;\n        } else {\n          errorMessage += 'Please check your membership status and try again.';\n        }\n      } else {\n        errorMessage += 'Please try again or check the contract logs for details.';\n      }\n\n      // If it's already a user-friendly error (like voting time validation), use it directly\n      if (errorString.includes('Voting has not started yet') || errorString.includes('Voting begins on')) {\n        errorMessage = errorString;\n      } else if (errorString.includes('0xc8') || errorString.includes('200')) {\n        errorMessage = 'Voting has not started yet for this proposal. Please wait for the voting period to begin before casting your vote.';\n      } else if (errorString.includes('0xc9') || errorString.includes('201')) {\n        errorMessage = 'Voting has ended for this proposal. This proposal is no longer accepting votes.';\n      } else if (errorString.includes('0xca') || errorString.includes('202')) {\n        errorMessage = 'You have already voted on this proposal. Each member can only vote once per proposal.';\n      } else if (errorString.includes('0xcb') || errorString.includes('203')) {\n        errorMessage = 'Proposal not found. The proposal may have been removed or the ID is invalid. Please refresh and try again.';\n      } else if (errorString.includes('0xd0') || errorString.includes('208')) {\n        errorMessage = 'Invalid vote selection. Please choose a valid voting option (Yes, No, or Abstain).';\n      } else if (errorString.includes('0x9') || errorString.includes('not_authorized')) {\n        errorMessage = 'You are not authorized to vote on this proposal. You may need to stake tokens to become a DAO member.';\n      } else if (errorString.includes('0x97') || errorString.includes('151')) {\n        errorMessage = 'You are not a member of this DAO. Only DAO members can participate in governance voting.';\n      } else if (errorString.includes('0x99') || errorString.includes('153')) {\n        errorMessage = 'Insufficient stake to vote. You need to stake more tokens to participate in DAO governance.';\n      }\n\n      // Show error to user via global alert\n      showAlert(errorMessage, 'error');\n    }\n  };\n\n  const handleCreateProposal = async () => {\n    if (!account || !signAndSubmitTransaction) {\n      showAlert('Please connect your wallet to create a proposal', 'error');\n      return;\n    }\n\n    if (!newProposal.title.trim() || !newProposal.description.trim()) {\n      showAlert('Please fill in both title and description', 'error');\n      return;\n    }\n\n    try {\n      setIsCreating(true);\n\n      // Enhanced stake validation with detailed feedback\n      // ADMINS BYPASS FRONTEND CHECKS - no error messages shown to admins\n      if (stakeRequirements.isAdmin) {\n        // Admins proceed without any validation errors\n      } else if (!stakeRequirements.canPropose) {\n        // Only show staking errors to non-admin users\n        let errorMessage = 'You cannot create proposals. ';\n\n        // Check if membership config is missing and user has sufficient stake\n        if (membershipConfigMissing && stakeRequirements.userCurrentStake >= 5) {\n          errorMessage = 'DAO membership configuration is missing. You have sufficient stake but membership validation failed. Contact the DAO creator to initialize membership settings.';\n        } else if (stakeRequirements.userCurrentStake === 0 && stakeRequirements.minStakeToJoin === 0) {\n          errorMessage = ` DAO CONFIGURATION ISSUE: This DAO appears to be incorrectly configured or doesn't exist. Both your stake and minimum requirements show 0.00 CEDRA. Please verify you're using the correct DAO address, or contact the DAO creator to properly initialize this DAO.`;\n        } else if (!stakeRequirements.isMember) {\n          errorMessage += `You need to be a DAO member first. Minimum stake to join: ${stakeRequirements.minStakeToJoin.toFixed(2)} CEDRA tokens. Your current stake: ${stakeRequirements.userCurrentStake.toFixed(2)} CEDRA tokens.`;\n        } else {\n          errorMessage += `You need to stake more tokens. Minimum stake for proposals: ${stakeRequirements.minStakeToPropose.toFixed(2)} CEDRA tokens. Your current stake: ${stakeRequirements.userCurrentStake.toFixed(2)} CEDRA tokens.`;\n        }\n\n        showAlert(errorMessage, 'error');\n        return;\n      }\n\n      // Compute timing parameters\n      const nowSeconds = Math.floor(Date.now() / 1000);\n      let startDelaySeconds = 0;\n      let votingDurationSeconds = newProposal.votingDuration * 24 * 60 * 60;\n\n      const hasStart = Boolean(newProposal.startTime && newProposal.startTime.trim());\n      const hasEnd = Boolean(newProposal.endTime && newProposal.endTime.trim());\n\n      if (hasStart) {\n        const startSeconds = Math.floor(new Date(newProposal.startTime).getTime() / 1000);\n        startDelaySeconds = Math.max(0, startSeconds - nowSeconds);\n      }\n\n      if (hasEnd) {\n        const endSeconds = Math.floor(new Date(newProposal.endTime).getTime() / 1000);\n        const effectiveStart = hasStart ? Math.max(nowSeconds, Math.floor(new Date(newProposal.startTime).getTime() / 1000)) : nowSeconds;\n        if (endSeconds <= effectiveStart) {\n          showAlert('End time must be after the start time', 'error');\n          return;\n        }\n        votingDurationSeconds = endSeconds - effectiveStart;\n      }\n\n      const executionWindowSeconds = newProposal.executionWindow * 24 * 60 * 60;\n      // Convert percentage to basis points for future use if needed\n\n      // Contract expects absolute timestamps for start and end\n      // Ensure start timestamp is at least 30 seconds in the future to account for transaction time\n      const minStartDelay = 30; // 30 seconds minimum delay\n      const effectiveStartDelay = Math.max(startDelaySeconds, minStartDelay);\n      const startTimestamp = Math.floor(Date.now() / 1000) + effectiveStartDelay;\n      const endTimestamp = startTimestamp + votingDurationSeconds;\n\n      // Validate all required values are present\n      if (!dao.id) {\n        showAlert('DAO ID is missing. Please refresh the page and try again.', 'error');\n        return;\n      }\n\n      if (!MODULE_ADDRESS) {\n        showAlert('Module address is not configured. Please check the application setup.', 'error');\n        return;\n      }\n\n      const functionArguments = [\n        dao.id,\n        newProposal.title,\n        newProposal.description,\n        startTimestamp.toString(),\n        endTimestamp.toString(),\n        executionWindowSeconds.toString(),\n        Math.floor(newProposal.minQuorum).toString()\n      ];\n\n      // Validate no arguments are undefined\n      const undefinedIndex = functionArguments.findIndex(arg => arg === undefined || arg === null);\n      if (undefinedIndex !== -1) {\n        console.error('Undefined argument at index:', undefinedIndex, functionArguments);\n        showAlert('Invalid proposal data. Please check all fields and try again.', 'error');\n        return;\n      }\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::proposal::create_proposal`,\n        typeArguments: [],\n        functionArguments\n      };\n\n      await signAndSubmitTransaction({ payload } as any);\n\n      // Reset form and close\n      setNewProposal({\n        title: '',\n        description: '',\n        category: 'general',\n        votingDuration: 7,\n        executionWindow: 3,\n        minQuorum: 20,\n        startTime: '',\n        endTime: ''\n      });\n      setShowCreateForm(false);\n\n      // Refresh proposals, but do not downgrade roles on transient view failures\n      await fetchProposals();\n      // Re-evaluate create permission using single consolidated view with persistence\n      try {\n        const [statusRes, canCreateRes] = await Promise.allSettled([\n          cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::proposal::get_user_status_code`, functionArguments: [dao.id, account.address] } }),\n          cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::proposal::can_user_create_proposals`, functionArguments: [dao.id, account.address] } }),\n        ]);\n        setUserStatus(prev => {\n          if (statusRes.status === 'fulfilled' && Array.isArray(statusRes.value)) {\n            const code = Number(statusRes.value?.[0] || 0);\n            return {\n              ...prev,\n              isAdmin: code === 3 || prev.isAdmin,\n              isCouncil: code === 2 || prev.isCouncil,\n              isMember: code === 1 || code === 2 || code === 3 || prev.isMember,\n            };\n          }\n          return prev;\n        });\n        if (canCreateRes.status === 'fulfilled' && Array.isArray(canCreateRes.value)) {\n          const can = Boolean(canCreateRes.value?.[0]);\n          setCanCreateProposal(prev => userStatus.isAdmin || can || prev);\n        }\n      } catch { }\n\n      showAlert('Proposal created successfully!', 'success');\n    } catch (error: any) {\n      console.error('Failed to create proposal:', error);\n      let errorMessage = 'Failed to create proposal';\n\n      // Check for specific error codes\n      if (error?.message || error?.toString()) {\n        const errorString = error.message || error.toString();\n\n        if (errorString.includes('0x262') || errorString.includes('610')) {\n          errorMessage = 'You can only create one proposal per 24 hours. Please wait before creating another proposal.';\n        } else if (errorString.includes('insufficient') || errorString.includes('Not enough coins')) {\n          errorMessage = 'Insufficient CEDRA tokens. Creating a proposal requires 0.01 CEDRA tokens as a fee (plus ~0.5 CEDRA for gas). Please ensure you have at least 0.51 CEDRA in your wallet.';\n        } else if (errorString.includes('0x4') || errorString.includes('invalid_amount')) {\n          errorMessage = 'Invalid proposal parameters. Please check your input values.';\n        } else if (errorString.includes('0x9') || errorString.includes('not_authorized')) {\n          errorMessage = 'You are not authorized to create proposals. You may need to stake more tokens or become a DAO member.';\n        } else {\n          errorMessage = `Failed to create proposal: ${errorString}`;\n        }\n      }\n\n      showAlert(errorMessage, 'error');\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  const formatProposalId = (idStr: string) => {\n    const id = parseInt(idStr, 10);\n    if (Number.isNaN(id)) return `#${idStr}`;\n    const padded = String(id).padStart(5, '0');\n    return `A-${padded}`;\n  };\n\n  const formatShortDate = (iso: string) => new Date(iso).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });\n\n  const filteredProposals = proposals.filter(p =>\n    p.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    p.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    p.id.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"w-full space-y-8 animate-fade-in\">\n      {/* Details view when a proposal is selected */}\n      {selectedProposal ? (\n        <div className=\"space-y-6 text-left\">\n          <button\n            onClick={() => {\n              setSelectedProposal(null);\n              try { localStorage.removeItem(`dao_${dao.id}_selected_proposal_id`); } catch { }\n            }}\n            className=\"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white rounded-xl text-xs font-medium transition-all border border-white/10\"\n          >\n            <ArrowLeft size={16} />\n            Back to Proposals\n          </button>\n\n\n          <DAOProposalDetails\n            title={selectedProposal.title}\n            description={selectedProposal.description}\n            proposer={selectedProposal.proposer}\n            endsAt={selectedProposal.votingEnd}\n            votingStart={selectedProposal.votingStart}\n            votingEnd={selectedProposal.votingEnd}\n            quorumCurrentPercent={selectedProposal.quorumCurrent}\n            quorumRequiredPercent={selectedProposal.quorumRequired}\n            category={selectedProposal.category}\n            votesFor={selectedProposal.votesFor}\n            votesAgainst={selectedProposal.votesAgainst}\n            votesAbstain={selectedProposal.abstainVotes}\n            status={selectedProposal.status}\n            proposalId={selectedProposal.id}\n            createdAt={selectedProposal.created}\n            daoName={dao.name}\n            onVote={(voteType: number) => handleVoteWithActivation(selectedProposal.id, voteType)}\n            onStartVoting={() => handleStartVoting(selectedProposal.id)}\n            onFinalize={() => handleFinalizeProposal(selectedProposal.id)}\n            canVote={selectedProposal.userVotingPower > 0}\n            hasVoted={selectedProposal.userVoted}\n            canStartVoting={Boolean(selectedProposal.proposer === account?.address || userStatus.isAdmin)}\n            canFinalize={Boolean(userStatus.isAdmin)}\n            userAddress={account?.address}\n            daoAddress={dao.id}\n            userIsAdmin={userStatus.isAdmin}\n            userIsCouncil={userStatus.isCouncil}\n            userIsMember={userStatus.isMember}\n          />\n        </div>\n      ) : showCreateForm ? (\n        <div className=\"w-full max-w-4xl mx-auto space-y-8 animate-fade-in\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-white mb-1\">Create a proposal</h1>\n              <p className=\"text-sm text-white/40\">Submit a new governance proposal for {dao.name}</p>\n            </div>\n            <button\n              onClick={() => setShowCreateForm(false)}\n              className=\"px-6 py-2.5 bg-white/5 hover:bg-white/10 border border-white/10 text-white rounded-xl font-medium text-sm transition-all\"\n            >\n              Cancel\n            </button>\n          </div>\n\n          {/* Form */}\n          <div className=\"space-y-6\">\n            {/* Title */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-white/60\">Title</label>\n              <input\n                type=\"text\"\n                placeholder=\"Enter proposal title...\"\n                className=\"w-full px-6 py-4 bg-white/[0.02] border border-white/10 rounded-2xl text-white placeholder-white/20 focus:border-white/20 outline-none transition-all text-base\"\n                value={newProposal.title}\n                onChange={e => setNewProposal({ ...newProposal, title: e.target.value })}\n              />\n            </div>\n\n            {/* Description */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-white/60\">Description</label>\n              <textarea\n                value={newProposal.description}\n                onChange={(e) => setNewProposal({ ...newProposal, description: e.target.value })}\n                className=\"w-full bg-white/[0.02] border border-white/10 rounded-2xl px-6 py-4 text-base text-white/90 outline-none focus:border-white/20 min-h-[200px] resize-none transition-all placeholder-white/20\"\n                placeholder=\"Provide a detailed description of your proposal...\"\n              />\n            </div>\n\n            {/* Grid for timing and quorum */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-white/60\">Quorum (%)</label>\n                <input\n                  type=\"number\"\n                  value={newProposal.minQuorum}\n                  onChange={(e) => setNewProposal({ ...newProposal, minQuorum: parseFloat(e.target.value) || 0 })}\n                  className=\"w-full bg-white/[0.02] border border-white/10 rounded-xl px-4 py-3.5 text-base text-white outline-none focus:border-white/20 transition-all\"\n                  placeholder=\"20\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-white/60\">Start Time</label>\n                <input\n                  type=\"datetime-local\"\n                  value={newProposal.startTime}\n                  onChange={(e) => setNewProposal({ ...newProposal, startTime: e.target.value })}\n                  className=\"w-full bg-white/[0.02] border border-white/10 rounded-xl px-4 py-3.5 text-sm text-white outline-none focus:border-white/20 transition-all\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-white/60\">End Time</label>\n                <input\n                  type=\"datetime-local\"\n                  value={newProposal.endTime}\n                  onChange={(e) => setNewProposal({ ...newProposal, endTime: e.target.value })}\n                  className=\"w-full bg-white/[0.02] border border-white/10 rounded-xl px-4 py-3.5 text-sm text-white outline-none focus:border-white/20 transition-all\"\n                />\n              </div>\n            </div>\n\n            {/* Submit Button */}\n            <div className=\"pt-4 flex justify-center\">\n              <button\n                onClick={handleCreateProposal}\n                disabled={isCreating}\n                className=\"px-12 py-4 bg-white text-black rounded-xl font-semibold text-base hover:opacity-90 disabled:opacity-50 transition-all active:scale-[0.98]\"\n              >\n                {isCreating ? 'Submitting...' : 'Submit Proposal'}\n              </button>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <>\n          {/* Create a proposal header */}\n          <div className=\"flex items-center justify-between px-1 mb-10\">\n            <h2 className=\"text-xl font-medium text-white tracking-tight\">Create a proposal</h2>\n            {(() => {\n              const canCreate = canCreateProposal;\n              const isAdmin = userStatus.isAdmin;\n              const isMember = userStatus.isMember;\n              let label = 'New proposal';\n              let isBecomeMember = false;\n\n              if (!canCreate) {\n                if (nextProposalTime) {\n                  label = `Cooldown: ${Math.ceil((nextProposalTime.getTime() - Date.now()) / (1000 * 60 * 60))}h`;\n                } else if (!isAdmin && !isMember) {\n                  label = 'Become member';\n                  isBecomeMember = true;\n                } else if (!isAdmin) {\n                  label = 'Low stake';\n                }\n              }\n\n              return (\n                <button\n                  onClick={() => !isBecomeMember && canCreate && setShowCreateForm(!showCreateForm)}\n                  disabled={isBecomeMember || (!canCreate && !showCreateForm)}\n                  className={`flex items-center gap-2 px-6 py-2 rounded-lg font-medium text-sm transition-all shadow-lg active:scale-95 ${showCreateForm\n                    ? 'bg-white/10 text-white border border-white/20'\n                    : 'bg-white text-black hover:bg-white/90'\n                    } disabled:opacity-50 disabled:cursor-not-allowed`}\n                >\n                  {!showCreateForm && <Plus size={16} />}\n                  <span>{showCreateForm ? 'Cancel' : label}</span>\n                </button>\n              );\n            })()}\n          </div>\n\n          {/* Proposals List Header */}\n          <div className=\"flex items-center justify-between px-1 mb-6\">\n            <h2 className=\"text-xl font-medium text-white\">Proposals</h2>\n            <div className=\"p-2 text-white/40 hover:text-white transition-colors cursor-pointer\">\n              <FaDiscord size={20} />\n            </div>\n          </div>\n\n          {/* Search Bar */}\n          <div className=\"relative mb-10\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white/40\" size={18} />\n            <input\n              type=\"text\"\n              placeholder=\"Search proposals...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full bg-black/20 border border-white/5 rounded-xl py-3.5 pl-12 pr-6 text-sm text-white placeholder:text-white/20 outline-none focus:border-white/10 transition-all\"\n            />\n          </div>\n\n          <div className=\"space-y-1\">\n            <div className=\"px-1 py-4 flex items-center gap-2 text-white/40 text-[13px] font-medium\">\n              <span className=\"cursor-pointer hover:text-white/80 transition-colors flex items-center gap-1.5\">\n                <Play size={10} className=\"rotate-90\" />\n                History ΓÇó {proposals.length} proposals\n              </span>\n            </div>\n\n            {isLoading && proposals.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center py-20 gap-4\">\n                <div className=\"w-8 h-8 border-2 border-white/10 border-t-white rounded-full animate-spin\" />\n                <p className=\"text-[10px] font-medium text-white/40\">Loading Proposals...</p>\n              </div>\n            ) : filteredProposals.length === 0 ? (\n              <div className=\"py-20 text-center\">\n                <p className=\"text-white/40 font-medium text-[10px]\">No proposals found</p>\n              </div>\n            ) : (\n              <div className=\"space-y-3 border-white/5\">\n                {filteredProposals.map((proposal) => {\n                  const statusLabel = proposal.status.charAt(0).toUpperCase() + proposal.status.slice(1);\n                  const isClosed = proposal.status === 'rejected' || proposal.status === 'cancelled' || proposal.status === 'closed';\n                  const isExecuted = proposal.status === 'executed';\n\n                  return (\n                    <div\n                      key={proposal.id}\n                      onClick={() => {\n                        setSelectedProposal(proposal);\n                        try { localStorage.setItem(`dao_${dao.id}_selected_proposal_id`, proposal.id); } catch { }\n                      }}\n                      className=\"group flex flex-col sm:flex-row sm:items-center justify-between py-5 px-6 bg-white/[0.02] border border-white/5 rounded-2xl cursor-pointer transition-all hover:border-[#e1fd6a]/20 space-y-4 sm:space-y-0\"\n                    >\n                      <div className=\"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-8\">\n                        {/* ID Section */}\n                        <div className=\"flex items-center justify-between sm:justify-start gap-4\">\n                          <span className=\"text-[11px] font-bold text-[#e1fd6a]/40 uppercase tracking-widest sm:w-16\">\n                            {formatProposalId(proposal.id)}\n                          </span>\n\n                          <div className={`sm:hidden shrink-0 w-4 h-4 rounded-full flex items-center justify-center border ${isClosed ? 'border-white/10' : 'border-[#e1fd6a]/50'\n                            }`}>\n                            {isExecuted || proposal.status === 'passed' ? (\n                              <FaCheckCircle className=\"w-2.5 h-2.5 text-[#e1fd6a]\" />\n                            ) : isClosed ? (\n                              <div className=\"w-1.5 h-1.5 rounded-full bg-slate-500\" />\n                            ) : (\n                              <div className=\"w-1.5 h-1.5 rounded-full bg-[#e1fd6a] animate-pulse\" />\n                            )}\n                          </div>\n                        </div>\n\n                        {/* Status Section (Desktop) */}\n                        <div className=\"hidden sm:flex items-center gap-2.5 w-28\">\n                          <div className={`shrink-0 w-4 h-4 rounded-full flex items-center justify-center border ${isClosed ? 'border-white/10' : 'border-[#e1fd6a]/50'\n                            }`}>\n                            {isExecuted || proposal.status === 'passed' ? (\n                              <FaCheckCircle className=\"w-2.5 h-2.5 text-[#e1fd6a]\" />\n                            ) : isClosed ? (\n                              <div className=\"w-1.5 h-1.5 rounded-full bg-slate-500\" />\n                            ) : (\n                              <div className=\"w-1.5 h-1.5 rounded-full bg-[#e1fd6a] animate-pulse\" />\n                            )}\n                          </div>\n                          <span className={`text-[11px] font-bold uppercase tracking-wider ${isClosed ? 'text-white/40' : 'text-white'\n                            }`}>\n                            {statusLabel}\n                          </span>\n                        </div>\n\n                        {/* Title Section */}\n                        <h3 className=\"text-sm font-semibold text-white tracking-tight leading-snug group-hover:text-[#e1fd6a] transition-colors\">\n                          {proposal.title}\n                        </h3>\n                      </div>\n\n                      {/* Info Row for Mobile */}\n                      <div className=\"flex items-center justify-between sm:justify-end gap-4 pt-3 sm:pt-0 border-t sm:border-t-0 border-white/5\">\n                        <div className=\"sm:hidden flex items-center gap-2\">\n                          <span className={`text-[10px] font-bold uppercase tracking-wider ${isClosed ? 'text-white/40' : 'text-white'\n                            }`}>\n                            {statusLabel}\n                          </span>\n                        </div>\n                        <span className=\"text-[10px] font-bold text-white/20 uppercase tracking-widest\">\n                          {formatShortDate(proposal.created)}\n                        </span>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        </>\n      )\n      }\n    </div >\n  );\n};\n\nexport default DAOProposals;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOStaking.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_setTotalStakers' is assigned a value but never used.","line":30,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"_setTotalStakers"},"fix":{"range":[1264,1282],"text":""},"desc":"Remove unused variable '_setTotalStakers'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_setTotalStakers' is assigned a value but never used.","line":30,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":40},{"ruleId":"no-unused-vars","severity":1,"message":"'_treasuryData' is assigned a value but never used.","line":39,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"_treasuryData"},"fix":{"range":[1792,1852],"text":""},"desc":"Remove unused variable '_treasuryData'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_treasuryData' is assigned a value but never used.","line":39,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":38},{"ruleId":"no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":56,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":56,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":56,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3796,3799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3796,3799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3826,3829],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3826,3829],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3910,3913],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3910,3913],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4117,4120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4117,4120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4824,4827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4824,4827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4854,4857],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4854,4857],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":122,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4938,4941],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4938,4941],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5149,5152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5149,5152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchMinStakeIndependently' and 'refreshOnChain'. Either include them or remove the dependency array.","line":180,"column":6,"nodeType":"ArrayExpression","endLine":180,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, account?.address, refreshOnChain, fetchMinStakeIndependently]","fix":{"range":[6873,6899],"text":"[dao.id, account?.address, refreshOnChain, fetchMinStakeIndependently]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'daoStakingData.userVotingPower'. Either include it or remove the dependency array.","line":186,"column":6,"nodeType":"ArrayExpression","endLine":186,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [userStakedDirect, membershipData, daoStakingData.userVotingPower]","fix":{"range":[7149,7183],"text":"[userStakedDirect, membershipData, daoStakingData.userVotingPower]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Clock,\n  Shield\n} from 'lucide-react';\nimport { DAO } from '../../types/dao';\nimport { useWallet } from '../../contexts/CedraWalletProvider';\nimport { cedraClient } from '../../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../../cedra_service/constants';\nimport { useDAOMembership, useDAOPortfolio } from '../../hooks/useDAOMembership';\nimport { BalanceService } from '../../useServices/useBalance';\nimport { useWalletBalance } from '../../hooks/useWalletBalance';\nimport { useTreasury } from '../../hooks/useTreasury';\nimport { useAlert } from '../alert/AlertContext';\nimport { Card, CardContent } from '../ui/card';\n\ninterface DAOStakingProps {\n  dao: DAO;\n  sidebarCollapsed?: boolean;\n}\n\nconst DAOStaking: React.FC<DAOStakingProps> = ({ dao }) => {\n  const [activeTab, setActiveTab] = useState<'stake' | 'unstake' | 'membership'>('stake');\n  const [stakeAmount, setStakeAmount] = useState('');\n  const [unstakeAmount, setUnstakeAmount] = useState('');\n  const [isStaking, setIsStaking] = useState(false);\n  const [isUnstaking, setIsUnstaking] = useState(false);\n  const { showAlert } = useAlert();\n  const [totalStakedInDAO, setTotalStakedInDAO] = useState(0);\n  const [totalStakers, _setTotalStakers] = useState(0);\n  const [independentMinStake, setIndependentMinStake] = useState<number | null>(null);\n  const [minStakeFetchAttempted, setMinStakeFetchAttempted] = useState(false);\n\n  const { account, signAndSubmitTransaction } = useWallet();\n  const { membershipData, refresh: refreshMembership } = useDAOMembership(dao);\n  const [userStakedDirect, setUserStakedDirect] = useState<number | null>(null);\n  const { walletBalance } = useDAOPortfolio();\n  const { balance: hookBalance } = useWalletBalance();\n  const { treasuryData: _treasuryData } = useTreasury(dao.id);\n\n  const toCEDRA = (u64: number): number => BalanceService.octasToCedra(u64);\n\n  const fetchMinStakeIndependently = async () => {\n    if (minStakeFetchAttempted) return;\n    setMinStakeFetchAttempted(true);\n    try {\n      const minStakeRes = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::membership::get_min_stake`,\n          functionArguments: [dao.id]\n        }\n      });\n      // Standardize to 8 decimals (1e8) for consistency across the entire protocol\n      const minStake = Number(minStakeRes[0] || 0) / 100000000;\n      setIndependentMinStake(minStake);\n    } catch (_error) {\n      setIndependentMinStake(7);\n    }\n  };\n\n  const daoStakingData = {\n    daoAddress: dao.id,\n    daoName: dao.name,\n    minStakeRequired: independentMinStake !== null ? independentMinStake : (membershipData?.minStakeRequired || 0),\n    totalStakedInDAO: totalStakedInDAO,\n    totalStakers: totalStakers,\n    userBalance: Math.max(0, (hookBalance || walletBalance || 0)),\n    userDaoStaked: userStakedDirect !== null ? userStakedDirect : (membershipData?.stakedAmount || 0),\n    userVotingPower: userStakedDirect !== null ? userStakedDirect : (membershipData?.votingPower || 0),\n    isMember: membershipData?.isMember || false,\n    isStaker: (userStakedDirect !== null ? userStakedDirect > 0 : (membershipData?.stakedAmount || 0) > 0)\n  };\n\n  const handleStake = async () => {\n    setIsStaking(true);\n    try {\n      if (!account || !signAndSubmitTransaction) throw new Error('Wallet not connected');\n      const raw = parseFloat(stakeAmount);\n      const amountOctas = BalanceService.cedraToOctas(raw);\n      const payload = {\n        function: `${MODULE_ADDRESS}::staking::stake`,\n        typeArguments: [],\n        functionArguments: [dao.id, amountOctas],\n      };\n\n      const tx = await signAndSubmitTransaction({\n        payload,\n        options: { max_gas_amount: \"200000\", gas_unit_price: \"100\" }\n      } as any);\n\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({ transactionHash: (tx as any).hash, options: { checkSuccess: true } });\n        showAlert(`Successfully staked ${raw.toFixed(2)} CEDRA!`, 'success');\n        setStakeAmount('');\n        refreshOnChain();\n      }\n    } catch (error: any) {\n      showAlert(error.message || 'Staking failed', 'error');\n    } finally {\n      setIsStaking(false);\n    }\n  };\n\n  const handleUnstake = async () => {\n    setIsUnstaking(true);\n    try {\n      if (!account || !signAndSubmitTransaction) throw new Error('Wallet not connected');\n      const raw = parseFloat(unstakeAmount);\n      const amountOctas = BalanceService.cedraToOctas(raw);\n      const payload = {\n        function: `${MODULE_ADDRESS}::staking::unstake`,\n        typeArguments: [],\n        functionArguments: [dao.id, amountOctas],\n      };\n\n      const tx = await signAndSubmitTransaction({\n        payload,\n        options: { max_gas_amount: \"200000\", gas_unit_price: \"100\" }\n      } as any);\n\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({ transactionHash: (tx as any).hash, options: { checkSuccess: true } });\n        showAlert(`Successfully unstaked ${raw.toFixed(2)} CEDRA!`, 'success');\n        setUnstakeAmount('');\n        refreshOnChain();\n      }\n    } catch (error: any) {\n      showAlert(error.message || 'Unstaking failed', 'error');\n    } finally {\n      setIsUnstaking(false);\n    }\n  };\n\n  const refreshOnChain = async () => {\n    if (!dao.id) return;\n    try {\n      console.log('Starting refreshOnChain for DAO:', dao.id, 'Account:', account?.address);\n\n      // 1. Get total staked in the DAO vault\n      const totalStakedRes = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::staking::get_total_staked`,\n          functionArguments: [dao.id]\n        }\n      });\n      const totalStaked = toCEDRA(Number(totalStakedRes?.[0] || 0));\n      setTotalStakedInDAO(totalStaked);\n      console.log('Total staked in DAO:', totalStaked, 'CEDRA');\n\n      // 2. Get user's stake directly from contract\n      if (account?.address) {\n        try {\n          const userStakedRes = await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::staking::get_staker_amount`,\n              functionArguments: [dao.id, account.address]\n            }\n          });\n\n          const userStake = toCEDRA(Number(userStakedRes?.[0] || 0));\n          setUserStakedDirect(userStake);\n          console.log('Γ£à User stake fetched successfully:', userStake, 'CEDRA');\n        } catch (err) {\n          console.error('Γ¥î Failed to fetch user stake:', err);\n          setUserStakedDirect(0);\n        }\n      }\n\n      // 3. Refresh membership data in background\n      refreshMembership();\n    } catch (e) {\n      console.error('On-chain refresh failed:', e);\n    }\n  };\n\n  useEffect(() => {\n    console.log('DAOStaking useEffect triggered - dao.id:', dao.id, 'account:', account?.address);\n    refreshOnChain();\n    fetchMinStakeIndependently();\n  }, [dao.id, account?.address]);\n\n  // Debug logging for state changes\n  useEffect(() => {\n    console.log('State update - userStakedDirect:', userStakedDirect, 'membershipData:', membershipData);\n    console.log('Computed userVotingPower:', daoStakingData.userVotingPower);\n  }, [userStakedDirect, membershipData]);\n\n  return (\n    <div className=\"w-full animate-fade-in py-12 px-4\">\n      <div className=\"max-w-[1000px] mx-auto\">\n        <Card className=\"bg-[#151618] border-white/5 rounded-[32px] overflow-hidden shadow-2xl\">\n          <div className=\"flex flex-col md:flex-row min-h-[540px]\">\n\n            {/* Left Sidebar Navigation */}\n            <div className=\"w-full md:w-64 border-b md:border-b-0 md:border-r border-white/5 p-8 space-y-8 bg-black/10 shrink-0\">\n              <div className=\"space-y-6\">\n                {(['stake', 'unstake', 'membership'] as const).map((tab) => {\n                  const active = activeTab === tab;\n                  const label = tab === 'membership' ? (daoStakingData.isMember ? 'Identity' : 'Access') : tab.charAt(0).toUpperCase() + tab.slice(1);\n                  return (\n                    <div\n                      key={tab}\n                      onClick={() => setActiveTab(tab)}\n                      className=\"cursor-pointer group flex items-center gap-3 transition-all\"\n                    >\n                      <span className={`text-[15px] font-medium transition-all ${active ? 'text-[#abb970]' : 'text-white/20 group-hover:text-white/40'\n                        }`}>\n                        {label}\n                      </span>\n                      {active && <div className=\"w-1.5 h-1.5 rounded-full bg-[#abb970]\" />}\n                    </div>\n                  );\n                })}\n              </div>\n\n              <div className=\"pt-8 border-t border-white/5 space-y-4\">\n                <div className=\"bg-[#1a1b1e] border border-white/5 rounded-2xl p-4 flex justify-between items-center group hover:border-white/10 transition-all cursor-default\">\n                  <span className=\"text-xs font-bold text-white/60\">Staking</span>\n                  <div className=\"text-right\">\n                    <p className=\"text-sm font-black text-white leading-none\">${(daoStakingData.userDaoStaked * 0.0857).toFixed(2)}</p>\n                    <p className=\"text-[10px] font-bold text-white/20 mt-1\">{daoStakingData.userDaoStaked.toFixed(0)} <span className=\"text-[#abb970]\">ΓùÅ</span></p>\n                  </div>\n                </div>\n\n                <div className=\"pt-4 border-t border-white/5\">\n                  <p className=\"text-[10px] font-bold text-white/10 uppercase tracking-widest mb-1.5\">Total staked</p>\n                  <p className=\"text-lg font-black text-white leading-none\">\n                    {totalStakedInDAO.toLocaleString()} <span className=\"text-[10px] text-white/5 font-medium ml-1\">CEDRA</span>\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Right Side Content Area */}\n            <CardContent className=\"flex-1 p-10 flex flex-col justify-center\">\n\n              {activeTab === 'stake' && (\n                <div className=\"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500\">\n                  <div className=\"text-center space-y-1\">\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <p className=\"text-[11px] text-white/30 font-medium\">Estimated voting weight</p>\n                      <button\n                        onClick={() => {\n                          console.log('Manual refresh clicked');\n                          refreshOnChain();\n                        }}\n                        className=\"px-2 py-1 text-[9px] bg-white/5 hover:bg-white/10 rounded text-white/40\"\n                      >\n                        REFRESH\n                      </button>\n                    </div>\n                    <h2 className=\"text-3xl font-bold text-white tracking-tight\">\n                      {daoStakingData.userVotingPower.toFixed(2)} CEDRA\n                    </h2>\n                    <p className=\"text-[9px] text-white/20 font-mono\">\n                      Debug: direct={userStakedDirect?.toFixed(2) || 'null'} | membership={membershipData?.votingPower?.toFixed(2) || '0'}\n                    </p>\n                  </div>\n\n                  <div className=\"bg-[#1a1b1e] border border-white/5 rounded-2xl p-6 space-y-6\">\n                    <div className=\"flex justify-between items-center text-[11px] font-medium\">\n                      <span className=\"text-white/60\">Staking</span>\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"text-white/20\">{daoStakingData.userBalance.toFixed(4)} CEDRA</span>\n                        <div className=\"flex gap-1\">\n                          <button onClick={() => setStakeAmount((daoStakingData.userBalance * 0.5).toFixed(2))} className=\"px-2 py-0.5 bg-white/5 hover:bg-white/10 rounded text-[9px] text-white/40\">HALF</button>\n                          <button onClick={() => setStakeAmount(daoStakingData.userBalance.toFixed(2))} className=\"px-2 py-0.5 bg-white/5 hover:bg-white/10 rounded text-[9px] text-white/40\">MAX</button>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-between items-center gap-4 py-2\">\n                      <input\n                        type=\"number\"\n                        value={stakeAmount}\n                        onChange={(e) => setStakeAmount(e.target.value)}\n                        placeholder=\"0.00\"\n                        className=\"flex-1 bg-transparent text-left text-3xl font-medium text-white outline-none placeholder:text-white/5 no-spinner\"\n                      />\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={handleStake}\n                    disabled={isStaking || !stakeAmount}\n                    className=\"w-full py-5 bg-[#abb970] hover:bg-[#b8c67e] text-[#111113] rounded-2xl font-bold text-base transition-all active:scale-[0.98] disabled:opacity-30\"\n                  >\n                    {isStaking ? 'Synchronizing...' : 'Initialize allocation'}\n                  </button>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2\">\n                    <div className=\"flex items-center gap-3 text-xs text-white/30\">\n                      <Shield size={14} className=\"text-[#abb970]/30\" />\n                      <span>Security verified</span>\n                    </div>\n                    <div className=\"flex items-center gap-3 text-xs text-white/30\">\n                      <Clock size={14} className=\"text-[#abb970]/30\" />\n                      <span>1h Unlock window</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'unstake' && (\n                <div className=\"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500\">\n                  <div className=\"text-center space-y-1\">\n                    <p className=\"text-[11px] text-white/30 font-medium\">Currently staked</p>\n                    <h2 className=\"text-3xl font-bold text-white tracking-tight\">\n                      {daoStakingData.userDaoStaked.toFixed(2)} CEDRA\n                    </h2>\n                  </div>\n\n                  <div className=\"bg-[#1a1b1e] border border-white/5 rounded-2xl p-6 space-y-6\">\n                    <div className=\"flex justify-between items-center text-[11px] font-medium\">\n                      <span className=\"text-white/60\">Unstaking</span>\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"text-white/20\">{daoStakingData.userDaoStaked.toFixed(4)} CEDRA</span>\n                        <button onClick={() => setUnstakeAmount(daoStakingData.userDaoStaked.toString())} className=\"px-2 py-0.5 bg-white/5 hover:bg-white/10 rounded text-[9px] text-white/40\">MAX</button>\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-between items-center gap-4 py-2\">\n                      <input\n                        type=\"number\"\n                        value={unstakeAmount}\n                        onChange={(e) => setUnstakeAmount(e.target.value)}\n                        placeholder=\"0.00\"\n                        className=\"flex-1 bg-transparent text-left text-3xl font-medium text-white outline-none placeholder:text-white/5 no-spinner\"\n                      />\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={handleUnstake}\n                    disabled={isUnstaking || !unstakeAmount}\n                    className=\"w-full py-5 bg-red-500/10 border border-red-500/20 text-red-400 hover:bg-red-500 hover:text-white rounded-2xl font-bold text-base transition-all active:scale-[0.98] disabled:opacity-30\"\n                  >\n                    Confirm unstaking\n                  </button>\n\n                  <div className=\"flex items-start gap-4 p-4 bg-white/[0.02] border border-white/5 rounded-2xl\">\n                    <Clock size={16} className=\"text-white/20 shrink-0 mt-0.5\" />\n                    <p className=\"text-[11px] text-white/40 leading-relaxed\">Safety window is active. Tokens will be released to your wallet after the verification period (approx. 1 hour).</p>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'membership' && (\n                <div className=\"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500\">\n                  <div className=\"flex flex-col gap-2\">\n                    <h3 className=\"text-xl font-bold text-white\">Membership</h3>\n                    <p className=\"text-xs text-white/40\">Protocol identity status</p>\n                  </div>\n\n                  <div className=\"bg-[#1a1b1e] border border-white/5 rounded-2xl p-8 space-y-10\">\n                    <p className=\"text-sm text-white/80 leading-relaxed font-normal\">\n                      {daoStakingData.isMember\n                        ? `You are an active member of ${dao.name}. Your cryptographically verified identity is established, providing governance power and helping secure the network.`\n                        : `Identify yourself in ${dao.name}. To establish your protocol identity and gain voting power, you must obtain and stake the required CEDRA amount.`\n                      }\n                    </p>\n\n                    <div className=\"flex justify-between items-start pt-8 border-t border-white/5\">\n                      <span className=\"text-[10px] font-bold text-white/10 uppercase tracking-widest\">Balances</span>\n                      <div className=\"flex flex-col items-end gap-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"text-lg font-black text-[#5eead4] tracking-tight leading-none\">{daoStakingData.userBalance.toFixed(2)}</span>\n                          <span className=\"text-[10px] font-bold text-white/20 uppercase\">Available</span>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"text-lg font-black text-white tracking-tight leading-none\">{daoStakingData.userDaoStaked.toFixed(2)}</span>\n                          <span className=\"text-[10px] font-bold text-white/20 uppercase\">Staked</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <button\n                      onClick={() => setActiveTab('stake')}\n                      className=\"w-full py-4 bg-white/5 hover:bg-white/10 text-white/40 hover:text-white rounded-xl font-bold text-xs transition-all border border-white/5 mt-2\"\n                    >\n                      {daoStakingData.userDaoStaked > 0 ? 'Stake more' : 'Stake CEDRA'}\n                    </button>\n                  </div>\n                </div>\n              )}\n\n            </CardContent>\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default DAOStaking;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\dao\\DAOTreasury.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1752,1755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1752,1755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1957,1960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1957,1960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1975,1978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1975,1978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2011,2014],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2011,2014],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":136,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":139,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2050,2053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2050,2053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'SESSION_TTL_MS', 'refreshData', 'sectionLoader', and 'treasurySessionCache'. Either include them or remove the dependency array.","line":87,"column":6,"nodeType":"ArrayExpression","endLine":87,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [dao.id, account.address, treasurySessionCache, SESSION_TTL_MS, sectionLoader, refreshData]","fix":{"range":[3471,3497],"text":"[dao.id, account.address, treasurySessionCache, SESSION_TTL_MS, sectionLoader, refreshData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6303,6306],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6303,6306],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":194,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6833,6836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6833,6836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":206,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7211,7214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7211,7214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { ResponsiveContainer, AreaChart, Area, XAxis, YAxis, Tooltip } from 'recharts';\nimport { ArrowUpRight, ArrowDownRight, Plus, Minus, Clock, AlertTriangle, XCircle, ChevronLeft, ChevronRight } from 'lucide-react';\nimport { useTreasury } from '../../hooks/useTreasury';\nimport { DAO } from '../../types/dao';\nimport { cedraClient } from '../../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../../cedra_service/constants';\nimport { BalanceService } from '../../useServices/useBalance';\nimport { truncateAddress } from '../../utils/addressUtils';\nimport { useWallet } from '../../contexts/CedraWalletProvider';\nimport { useAlert } from '../alert/AlertContext';\nimport VaultManager from '../VaultManager';\nimport { useSectionLoader } from '../../hooks/useSectionLoader';\nimport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableHead,\n  TableRow,\n  TableCell,\n} from '../ui/table';\n\ninterface DAOTreasuryProps {\n  dao: DAO;\n}\n\nconst DAOTreasury: React.FC<DAOTreasuryProps> = ({ dao }) => {\n  const { account } = useWallet();\n  const [showDepositForm, setShowDepositForm] = useState(false);\n  const [showWithdrawForm, setShowWithdrawForm] = useState(false);\n  const [amount, setAmount] = useState('');\n  const [isDepositing, setIsDepositing] = useState(false);\n  const [isWithdrawing, setIsWithdrawing] = useState(false);\n  const { showAlert } = useAlert();\n  const [isTogglingPublicDeposits, setIsTogglingPublicDeposits] = useState(false);\n  const [cedraPrice, setCedraPrice] = useState<number | null>(null);\n  const [totalStaked, setTotalStaked] = useState<number>(0);\n  const [transactionPage, setTransactionPage] = useState(1);\n  const [treasuryHistory, setTreasuryHistory] = useState<any[]>([]);\n  const TRANSACTIONS_PER_PAGE = 10;\n  const isWalletConnected = !!account?.address;\n\n  // Session-based caching for API responses to avoid rate limits\n  const treasurySessionCache: Map<string, any> = (window as any).__treasuryCache || ((window as any).__treasuryCache = new Map<string, any>());\n  const SESSION_TTL_MS = 5 * 60 * 1000;\n\n  const sectionLoader = useSectionLoader();\n\n  const {\n    treasuryData,\n    transactions,\n    userBalance,\n    isAdmin,\n    deposit,\n    withdraw,\n    togglePublicDeposits,\n    refreshData\n  } = useTreasury(dao.id);\n\n  useEffect(() => {\n    const cached = treasurySessionCache.get(dao.id);\n    const now = Date.now();\n    if (cached && (now - cached.timestamp) < SESSION_TTL_MS) {\n      if (typeof cached.cedraPrice === 'number') setCedraPrice(cached.cedraPrice);\n      if (typeof cached.totalStaked === 'number') setTotalStaked(cached.totalStaked);\n    }\n\n    const loadTreasuryData = async () => {\n      await refreshData();\n      try {\n        const corsProxy = 'https://api.allorigins.win/raw?url=';\n        const apiUrl = encodeURIComponent('https://api.coingecko.com/api/v3/simple/price?ids=movement&vs_currencies=usd');\n        const response = await fetch(corsProxy + apiUrl);\n        const data = await response.json();\n        const price = data?.movement?.usd;\n        if (price) {\n          setCedraPrice(price);\n          treasurySessionCache.set(dao.id, { ...(treasurySessionCache.get(dao.id) || {}), cedraPrice: price, timestamp: Date.now() });\n        }\n      } catch (e) {\n        console.warn('Coingecko price fetch error (falling back):', e);\n        setCedraPrice(0.08566);\n      }\n    };\n\n    sectionLoader.executeWithLoader(loadTreasuryData);\n  }, [dao.id, account?.address]);\n\n  useEffect(() => {\n    const fetchTotalStaked = async () => {\n      try {\n        const res = await cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::staking::get_total_staked`,\n            functionArguments: [dao.id]\n          }\n        });\n        setTotalStaked(BalanceService.octasToCedra(Number(res?.[0] || 0)));\n      } catch (e) {\n        console.error('Error fetching total staked:', e);\n      }\n    };\n    fetchTotalStaked();\n  }, [dao.id]);\n\n  useEffect(() => {\n    const currentBalance = treasuryData.balance;\n    const days = [];\n    const today = new Date();\n    today.setHours(23, 59, 59, 999);\n\n    for (let i = 6; i >= 0; i--) {\n      const d = new Date(today);\n      d.setDate(today.getDate() - i);\n      days.push({\n        date: d,\n        label: d.toLocaleDateString('en-US', { weekday: 'short' })\n      });\n    }\n\n    // Calculate historical balance by tracking cumulative changes\n    const history = days.map((dayObj, i) => {\n      const isToday = i === days.length - 1;\n\n      // Always use actual balance for today\n      if (isToday) {\n        return {\n          name: dayObj.label,\n          value: parseFloat(currentBalance.toFixed(2))\n        };\n      }\n\n      // For historical days, calculate balance at end of that day\n      if (transactions.length > 0) {\n        // Get all transactions up to and including this day\n        const txUpToDate = transactions.filter(tx => {\n          const txDate = new Date(tx.timestamp);\n          return txDate <= dayObj.date;\n        });\n\n        // Calculate balance at that point in time\n        let balanceAtDate = 0;\n        txUpToDate.forEach(tx => {\n          if (tx.type === 'deposit') {\n            balanceAtDate += tx.amount;\n          } else if (tx.type === 'withdrawal') {\n            balanceAtDate -= tx.amount;\n          }\n        });\n\n        return {\n          name: dayObj.label,\n          value: parseFloat(Math.max(0, balanceAtDate).toFixed(2))\n        };\n      } else {\n        // Fallback: smooth ramp up to current balance if no transaction history\n        const progress = i / 6;\n        const val = currentBalance > 0 ? (currentBalance * (0.3 + Math.pow(progress, 2) * 0.7)) : 0;\n        return {\n          name: dayObj.label,\n          value: parseFloat(val.toFixed(2))\n        };\n      }\n    });\n\n    setTreasuryHistory(history);\n  }, [transactions, treasuryData.balance]);\n\n  const handleDeposit = async () => {\n    if (!amount || parseFloat(amount) <= 0) return showAlert('Valid amount required', 'error');\n    try {\n      setIsDepositing(true);\n      await deposit(parseFloat(amount));\n      await refreshData(); // Refresh to update chart immediately\n      showAlert('Successfully deposited', 'success');\n      setShowDepositForm(false);\n      setAmount('');\n    } catch (e: any) {\n      showAlert(e.message || 'Deposit failed', 'error');\n    } finally {\n      setIsDepositing(false);\n    }\n  };\n\n  const handleWithdraw = async () => {\n    if (!amount || parseFloat(amount) <= 0) return showAlert('Valid amount required', 'error');\n    try {\n      setIsWithdrawing(true);\n      await withdraw(parseFloat(amount));\n      await refreshData(); // Refresh to update chart immediately\n      showAlert('Successfully withdrawn', 'success');\n      setShowWithdrawForm(false);\n      setAmount('');\n    } catch (e: any) {\n      showAlert(e.message || 'Withdraw failed', 'error');\n    } finally {\n      setIsWithdrawing(false);\n    }\n  };\n\n  const handleTogglePublicDeposits = async (allow: boolean) => {\n    try {\n      setIsTogglingPublicDeposits(true);\n      await togglePublicDeposits(allow);\n      showAlert(`Public deposits ${allow ? 'enabled' : 'disabled'}`, 'success');\n    } catch (e: any) {\n      showAlert(e.message || 'Toggle failed', 'error');\n    } finally {\n      setIsTogglingPublicDeposits(false);\n    }\n  };\n\n  const renderOverview = () => (\n    <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8 animate-fade-in items-start\">\n      {/* Main Content Area: Valuation & Chart */}\n      <div className=\"lg:col-span-3 space-y-10\">\n        {/* Valuation Section */}\n        <div className=\"flex flex-col sm:flex-row sm:items-end justify-between gap-8 px-1\">\n          <div className=\"space-y-1 text-center sm:text-left\">\n            <p className=\"text-[11px] font-bold text-white/30 tracking-tight\">Vault valuation</p>\n            <div className=\"flex flex-col sm:flex-row sm:items-baseline gap-2 sm:gap-4\">\n              <div className=\"text-5xl sm:text-6xl font-semibold text-white tracking-tighter\">\n                {`$${(treasuryData.balance * (cedraPrice || 0.08566)).toLocaleString(undefined, { maximumFractionDigits: 2 })}`}\n              </div>\n              <div className=\"text-md sm:text-lg font-medium text-[#e1fd6a]/40 tracking-tight mb-1\">\n                {treasuryData.balance.toFixed(0)} CEDRA\n              </div>\n            </div>\n          </div>\n          <div className=\"flex items-center justify-around sm:justify-end gap-6 bg-white/[0.03] px-6 py-4 rounded-3xl border border-white/5 backdrop-blur-md\">\n            <div className=\"text-center sm:text-right\">\n              <p className=\"text-[10px] text-white/20 mb-0.5 font-bold\">Liquid</p>\n              <p className=\"text-sm font-bold text-white tracking-tight\">{treasuryData.balance.toFixed(2)}</p>\n            </div>\n            <div className=\"w-px h-8 bg-white/10\" />\n            <div className=\"text-center sm:text-right\">\n              <p className=\"text-[10px] text-white/20 mb-0.5 font-bold\">Staked</p>\n              <p className=\"text-sm font-bold text-white/40 tracking-tight\">{totalStaked.toFixed(2)}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"w-full h-[320px] animate-in fade-in slide-in-from-bottom-4 duration-700\">\n          <div className=\"flex items-center justify-between mb-6 px-2\">\n            <div>\n              <h3 className=\"text-md font-semibold text-white\">Asset growth</h3>\n              <p className=\"text-[10px] text-white/30 tracking-wide font-medium\">Aggregate value of all treasury deployments</p>\n            </div>\n            <div className=\"text-right\">\n              <span className=\"text-sm font-bold text-[#e1fd6a]\">${(treasuryData.balance * (cedraPrice || 0.08566)).toFixed(2)}</span>\n              <p className=\"text-[10px] text-white/20 font-medium\">Live TVL</p>\n            </div>\n          </div>\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <AreaChart data={treasuryHistory} margin={{ top: 10, right: 10, left: 10, bottom: 0 }}>\n              <defs>\n                <linearGradient id=\"treasuryGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                  <stop offset=\"5%\" stopColor=\"#e1fd6a\" stopOpacity={0.2} />\n                  <stop offset=\"95%\" stopColor=\"#e1fd6a\" stopOpacity={0} />\n                </linearGradient>\n              </defs>\n              <XAxis dataKey=\"name\" hide={true} />\n              <YAxis hide={true} domain={['dataMin - 10', 'auto']} />\n              <Tooltip\n                contentStyle={{\n                  backgroundColor: 'rgba(12, 12, 12, 0.9)',\n                  border: '1px solid rgba(255,255,255,0.1)',\n                  borderRadius: '12px',\n                  fontSize: '11px',\n                  backdropFilter: 'blur(10px)',\n                  boxShadow: '0 10px 30px rgba(0,0,0,0.5)'\n                }}\n                itemStyle={{ color: '#e1fd6a', fontWeight: 'bold' }}\n                cursor={{ stroke: 'rgba(255,255,255,0.1)', strokeWidth: 1 }}\n              />\n              <Area\n                type=\"monotone\"\n                dataKey=\"value\"\n                stroke=\"#e1fd6a\"\n                strokeWidth={3}\n                fillOpacity={1}\n                fill=\"url(#treasuryGradient)\"\n                animationDuration={1500}\n                activeDot={{ r: 6, fill: '#e1fd6a', stroke: '#0c0c0c', strokeWidth: 2 }}\n              />\n            </AreaChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      {/* Right Column: Mini Control Card */}\n      <div className=\"lg:col-span-1 space-y-4\">\n        <div className=\"bg-white/[0.02] border border-white/5 rounded-[32px] p-8 flex flex-col gap-8 lg:sticky lg:top-8 animate-in fade-in slide-in-from-right-4 duration-500\">\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className={`w-2 h-2 rounded-full ${treasuryData.allowsPublicDeposits ? 'bg-[#e1fd6a] animate-pulse' : 'bg-red-500'}`} />\n              <h4 className=\"text-sm font-semibold text-white tracking-tight\">\n                {treasuryData.allowsPublicDeposits ? 'Public access' : 'Restricted'}\n              </h4>\n            </div>\n            <p className=\"text-[11px] text-white/40 leading-relaxed font-medium\">\n              {isAdmin\n                ? (treasuryData.allowsPublicDeposits ? 'Anyone can contribute liquidity' : 'Authenticated members only')\n                : 'Treasury permissions are managed by administrators.'\n              }\n            </p>\n          </div>\n\n          <div className=\"space-y-3\">\n            {isWalletConnected && (treasuryData.allowsPublicDeposits || isAdmin) && (\n              <button\n                onClick={() => setShowDepositForm(true)}\n                className=\"w-full py-4 bg-[#e1fd6a] hover:bg-[#d4f05a] text-black rounded-2xl font-bold text-sm transition-all active:scale-[0.97] flex items-center justify-center gap-2\"\n              >\n                <Plus size={18} />\n                <span>Initialize deposit</span>\n              </button>\n            )}\n\n            <div className=\"flex items-center gap-3\">\n              {isWalletConnected && isAdmin && (\n                <button\n                  onClick={() => setShowWithdrawForm(true)}\n                  className=\"flex-1 py-4 bg-white/5 hover:bg-red-500/10 text-red-400 border border-white/5 rounded-2xl transition-all flex items-center justify-center\"\n                  title=\"Withdraw Funds\"\n                >\n                  <Minus size={18} />\n                </button>\n              )}\n\n              {isAdmin && (\n                <div className=\"flex-1 bg-black/40 p-1 rounded-2xl border border-white/5 flex\">\n                  {[true, false].map(val => (\n                    <button\n                      key={String(val)}\n                      onClick={() => handleTogglePublicDeposits(val)}\n                      disabled={treasuryData.allowsPublicDeposits === val || isTogglingPublicDeposits}\n                      className={`flex-1 py-3 rounded-xl text-[10px] font-bold uppercase tracking-tighter transition-all ${treasuryData.allowsPublicDeposits === val\n                        ? 'bg-white/10 text-white shadow-inner'\n                        : 'text-white/20 hover:text-white/40'\n                        }`}\n                    >\n                      {val ? 'Public' : 'Priv'}\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Micro Stats in Card */}\n          <div className=\"pt-4 border-t border-white/5 space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-[10px] text-white/20 font-medium\">Asset</span>\n              <span className=\"text-[10px] text-white/40 font-mono\">Cedra Coin</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-[10px] text-white/20 font-medium\">Network</span>\n              <span className=\"text-[10px] text-white/40 font-mono\">Movement Network</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderTransactions = () => {\n    const startIndex = (transactionPage - 1) * TRANSACTIONS_PER_PAGE;\n    const paginatedTransactions = transactions.slice(startIndex, startIndex + TRANSACTIONS_PER_PAGE);\n    const totalPages = Math.ceil(transactions.length / TRANSACTIONS_PER_PAGE);\n\n    return (\n      <div className=\"bg-white/[0.01] border border-white/5 rounded-3xl p-6 sm:p-8 w-full animate-slide-up\">\n        <div className=\"flex items-center justify-between mb-8 gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2.5 bg-[#e1fd6a]/10 text-[#e1fd6a] rounded-xl border border-[#e1fd6a]/20\">\n              <Clock size={20} />\n            </div>\n            <div className=\"flex flex-col\">\n              <h3 className=\"text-xl font-semibold text-white tracking-tighter leading-none mb-1\">Recent Transactions</h3>\n              <p className=\"text-[10px] font-medium text-white/30\">Protocol level liquidity</p>\n            </div>\n          </div>\n          {transactions.length > TRANSACTIONS_PER_PAGE && (\n            <div className=\"flex items-center gap-2\">\n              <button onClick={() => setTransactionPage(p => Math.max(1, p - 1))} disabled={transactionPage === 1} className=\"p-2 rounded-lg border border-white/10 text-white disabled:opacity-30\"><ChevronLeft size={16} /></button>\n              <span className=\"text-xs text-gray-400\">Page {transactionPage} of {totalPages}</span>\n              <button onClick={() => setTransactionPage(p => p + 1)} disabled={transactionPage >= totalPages} className=\"p-2 rounded-lg border border-white/10 text-white disabled:opacity-30\"><ChevronRight size={16} /></button>\n            </div>\n          )}\n        </div>\n        <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader className=\"bg-white/[0.02]\">\n              <TableRow className=\"hover:bg-transparent border-white/5\">\n                <TableHead className=\"py-5 px-8 text-[10px] font-bold text-white/30 tracking-tight\">Type</TableHead>\n                <TableHead className=\"py-5 text-right text-[10px] font-bold text-white/30 tracking-tight\">Amount</TableHead>\n                <TableHead className=\"py-5 text-right text-[10px] font-bold text-white/30 tracking-tight\">Address</TableHead>\n                <TableHead className=\"py-5 text-right pr-8 text-[10px] font-bold text-white/30 tracking-tight\">Time</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {transactions.length === 0 ? (\n                <TableRow><TableCell colSpan={4} className=\"h-40 text-center text-white/20\">No transactions recorded</TableCell></TableRow>\n              ) : (\n                paginatedTransactions.map((tx, i) => (\n                  <TableRow key={i}>\n                    <TableCell><div className=\"flex items-center gap-3\"><div className={`p-2 rounded-full ${tx.type === 'deposit' ? 'bg-green-500/10 text-green-400' : 'bg-red-500/10 text-red-400'}`}>{tx.type === 'deposit' ? <ArrowDownRight size={14} /> : <ArrowUpRight size={14} />}</div><span className=\"capitalize text-xs font-medium text-white\">{tx.type}</span></div></TableCell>\n                    <TableCell className=\"text-right\">\n                      <span className={`text-xs font-bold ${tx.type === 'deposit' ? 'text-green-400' : 'text-red-400'}`}>\n                        {tx.type === 'deposit' ? '+' : '-'}{tx.amount.toFixed(2)}\n                      </span>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <span className=\"text-[11px] font-mono text-white/30\">{truncateAddress(tx.type === 'deposit' ? tx.from || '' : tx.to || '')}</span>\n                    </TableCell>\n                    <TableCell className=\"text-right pr-8\">\n                      <span className=\"text-[11px] text-white/20 font-mono tracking-tighter\">{new Date(tx.timestamp).toLocaleDateString()}</span>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"w-full max-w-full space-y-12 animate-fade-in px-1\">\n      {renderOverview()}\n      <VaultManager daoId={dao.id} treasuryObject={treasuryData.treasuryObject} />\n      {renderTransactions()}\n\n      {/* Reverted Deposit Modal Style */}\n      {showDepositForm && (\n        <div className=\"fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/60\" onClick={() => setShowDepositForm(false)}>\n          <div\n            className=\"w-full max-w-md bg-[#101010] border border-white/10 rounded-xl p-6 shadow-2xl animate-in fade-in zoom-in-95 duration-200\"\n            onClick={e => e.stopPropagation()}\n          >\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-white\">Deposit tokens</h3>\n              <XCircle className=\"text-white/20 cursor-pointer hover:text-white\" onClick={() => setShowDepositForm(false)} />\n            </div>\n\n            <div className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between text-[11px] font-medium\">\n                  <span className=\"text-white/30\">Amount to deposit</span>\n                  <span className=\"text-[#e1fd6a] cursor-pointer\" onClick={() => setAmount(userBalance.toString())}>Max: {userBalance.toLocaleString()}</span>\n                </div>\n                <input\n                  type=\"number\"\n                  value={amount}\n                  onChange={e => setAmount(e.target.value)}\n                  className=\"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-white text-lg font-medium outline-none focus:border-[#e1fd6a]/50\"\n                  placeholder=\"0.00\"\n                />\n              </div>\n\n              <button\n                onClick={handleDeposit}\n                disabled={!amount || parseFloat(amount) <= 0 || isDepositing}\n                className=\"w-full bg-[#e1fd6a] text-black font-bold py-4 rounded-xl disabled:opacity-30 transition-all active:scale-[0.98]\"\n              >\n                {isDepositing ? 'Processing...' : 'Confirm deposit'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Reverted Withdraw Modal Style */}\n      {showWithdrawForm && isAdmin && (\n        <div className=\"fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/60\" onClick={() => setShowWithdrawForm(false)}>\n          <div\n            className=\"w-full max-w-md bg-[#101010] border border-white/10 rounded-xl p-6 shadow-2xl animate-in fade-in zoom-in-95 duration-200\"\n            onClick={e => e.stopPropagation()}\n          >\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-white\">Withdraw assets</h3>\n              <XCircle className=\"text-white/20 cursor-pointer hover:text-white\" onClick={() => setShowWithdrawForm(false)} />\n            </div>\n\n            <div className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between text-[11px] font-medium\">\n                  <span className=\"text-white/30\">Amount to withdraw</span>\n                  <span className=\"text-red-400 cursor-pointer\" onClick={() => setAmount(treasuryData.balance.toString())}>Max: {treasuryData.balance.toLocaleString()}</span>\n                </div>\n                <input\n                  type=\"number\"\n                  value={amount}\n                  onChange={e => setAmount(e.target.value)}\n                  className=\"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-white text-lg font-medium outline-none focus:border-red-500/50\"\n                  placeholder=\"0.00\"\n                />\n              </div>\n\n              <button\n                onClick={handleWithdraw}\n                disabled={!amount || parseFloat(amount) <= 0 || isWithdrawing}\n                className=\"w-full bg-white/5 border border-white/10 text-red-400 font-bold py-4 rounded-xl disabled:opacity-30 transition-all active:scale-[0.98]\"\n              >\n                {isWithdrawing ? 'Processing...' : 'Confirm withdrawal'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {treasuryData.error && (\n        <div className=\"bg-red-500/10 border border-red-500/30 rounded-2xl p-6 flex items-start space-x-4\">\n          <AlertTriangle className=\"w-6 h-6 text-red-400 flex-shrink-0 mt-0.5\" />\n          <div className=\"flex-1\"><h3 className=\"text-red-300 font-bold text-lg mb-1\">Error</h3><p className=\"text-red-200/60 text-sm\">{treasuryData.error}</p></div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DAOTreasury;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\profile\\UserProfile.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'profileData'. Either include it or remove the dependency array.","line":68,"column":6,"nodeType":"ArrayExpression","endLine":68,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [profileData, showSettingsModal]","fix":{"range":[2326,2345],"text":"[profileData, showSettingsModal]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2911,2914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2911,2914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Edit3, Settings, X, AlertCircle, Loader2, Calendar } from 'lucide-react';\nimport { useWallet } from '../../contexts/CedraWalletProvider';\nimport {\n  useCreateProfile,\n  useUpdateProfile,\n  useGetProfile,\n  useProfileExists,\n  getDisplayNameOrAddress\n} from '../../useServices/useProfile';\nimport { useUserDAOs } from '../../useServices/useUserDAOs';\n\n// Use a placeholder avatar URL\nconst defaultAvatar = 'https://api.dicebear.com/7.x/avataaars/svg?seed=default';\n\ninterface UserProfileProps {\n  className?: string;\n}\n\nconst UserProfile: React.FC<UserProfileProps> = ({ className = '' }) => {\n  const { account } = useWallet();\n\n  // Modal state\n  const [showSettingsModal, setShowSettingsModal] = useState(false);\n\n  // DAO filter state\n  const [daoFilter, setDaoFilter] = useState<'all' | 'created' | 'joined'>('all');\n\n  // Form state for settings modal only\n  const [formData, setFormData] = useState({\n    displayName: '',\n    avatar: ''\n  });\n\n  // Profile hooks\n  const { data: profileData, isLoading: profileLoading, refetch: refetchProfile } = useGetProfile(account?.address || null);\n  const { exists: profileExists, isLoading: existsLoading } = useProfileExists(account?.address || null);\n  const { createProfile, isPending: isCreating, error: createError } = useCreateProfile();\n  const { updateProfile, isPending: isUpdating, error: updateError } = useUpdateProfile();\n\n  // DAO hooks - Use the proper hook that fetches from blockchain\n  const { userDAOs, isLoading: daosLoading, error: daosError } = useUserDAOs();\n\n  // Loading and error states\n  const isLoading = profileLoading || existsLoading;\n  const isPending = isCreating || isUpdating;\n  const error = createError || updateError;\n\n\n  // Initialize form data only when opening modal (not on every data change)\n  useEffect(() => {\n    if (showSettingsModal) {\n      if (profileData) {\n        // Initialize with existing profile data\n        setFormData({\n          displayName: profileData.displayName || '',\n          avatar: profileData.avatarUrl || ''\n        });\n      } else {\n        // Initialize with empty data for new profile\n        setFormData({\n          displayName: '',\n          avatar: ''\n        });\n      }\n    }\n    // Only run when modal opens, not when data changes\n  }, [showSettingsModal]);\n\n  // Handle form submit\n  const handleSaveProfile = async () => {\n    if (!formData.displayName.trim()) {\n      alert('Please enter a display name');\n      return;\n    }\n\n    try {\n      if (profileExists) {\n        // Update existing profile\n        await updateProfile(formData.displayName, formData.avatar);\n      } else {\n        // Create new profile\n        await createProfile(formData.displayName, formData.avatar);\n      }\n\n      // Refresh profile data and close modal\n      await refetchProfile();\n      setShowSettingsModal(false);\n    } catch (err: any) {\n      console.error('Error saving profile:', err);\n      // Error is already handled by the hooks\n    }\n  };\n\n  // Get display data with fallbacks\n  const getDisplayData = () => {\n    if (profileData) {\n      return {\n        displayName: profileData.displayName || getDisplayNameOrAddress(null, account?.address || ''),\n        avatar: profileData.avatarUrl || defaultAvatar,\n        hasProfile: true\n      };\n    }\n\n    return {\n      displayName: account?.address ? getDisplayNameOrAddress(null, account.address) : 'Connect Wallet',\n      avatar: defaultAvatar,\n      hasProfile: false\n    };\n  };\n\n  const displayData = getDisplayData();\n\n  // Simple modal render without complex state dependencies\n  const renderModal = () => (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      <div className=\"professional-card rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n        {/* Modal Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-white/10\">\n          <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\n            <Settings className=\"w-5 h-5\" />\n            Profile Settings\n          </h2>\n          <button\n            onClick={() => setShowSettingsModal(false)}\n            className=\"p-2 hover:bg-gray-700/50 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n        </div>\n\n        {/* Modal Content */}\n        <div className=\"p-6 space-y-6\">\n          {/* Error Display */}\n          {error && (\n            <div className=\"flex items-center gap-2 p-3 bg-red-900/20 border border-red-500/30 rounded-lg text-red-400 text-sm\">\n              <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\n              <span>{error}</span>\n            </div>\n          )}\n\n          {/* Display Name Section */}\n          <div>\n            <label className=\"block text-sm font-medium mb-2\" style={{ color: 'var(--text)' }}>\n              Display Name *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.displayName}\n              onChange={(e) => setFormData(prev => ({ ...prev, displayName: e.target.value }))}\n              className=\"professional-input w-full px-4 py-3 rounded-xl\"\n              placeholder=\"Enter your display name\"\n              maxLength={50}\n            />\n          </div>\n\n          {/* Profile Picture Section */}\n          <div>\n            <label className=\"block text-sm font-medium mb-2\" style={{ color: 'var(--text)' }}>\n              Profile Picture URL\n            </label>\n            <input\n              type=\"text\"\n              value={formData.avatar}\n              onChange={(e) => setFormData(prev => ({ ...prev, avatar: e.target.value }))}\n              className=\"professional-input w-full px-4 py-3 rounded-xl\"\n              placeholder=\"Enter profile image URL (optional)\"\n            />\n\n            {/* Avatar Preview */}\n            {(formData.avatar || formData.displayName) && (\n              <div className=\"mt-3 flex items-center gap-3\">\n                <span className=\"text-sm\" style={{ color: 'var(--text-dim)' }}>Preview:</span>\n                <div className=\"relative\">\n                  {formData.avatar ? (\n                    <>\n                      <img\n                        src={formData.avatar}\n                        alt=\"Preview\"\n                        className=\"w-12 h-12 rounded-lg object-cover shadow-md\"\n                        onError={(e) => {\n                          e.currentTarget.style.display = 'none';\n                          const fallback = e.currentTarget.nextElementSibling as HTMLElement;\n                          if (fallback) fallback.classList.remove('hidden');\n                        }}\n                      />\n                      <div className=\"hidden w-12 h-12 rounded-lg bg-gradient-to-br from-indigo-600 to-indigo-700 flex items-center justify-center text-white text-sm font-bold\">\n                        {formData.displayName.charAt(0).toUpperCase()}\n                      </div>\n                    </>\n                  ) : (\n                    <div className=\"w-12 h-12 rounded-lg bg-gradient-to-br from-indigo-600 to-indigo-700 flex items-center justify-center text-white text-sm font-bold\">\n                      {formData.displayName.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n        </div>\n\n        {/* Modal Footer */}\n        <div className=\"flex gap-3 p-6 border-t border-white/10\">\n          <button\n            onClick={() => setShowSettingsModal(false)}\n            style={{\n              background: 'transparent',\n              border: '1px solid var(--border)',\n              color: 'var(--text)'\n            }}\n            className=\"flex-1 px-4 py-2 rounded-xl font-medium transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSaveProfile}\n            style={{\n              background: '#252527',\n              border: '1px solid var(--border)',\n              color: '#ffffff'\n            }}\n            className=\"flex-1 px-4 py-2 rounded-xl font-medium flex items-center justify-center gap-2 transition-colors\"\n            disabled={!formData.displayName.trim()}\n          >\n            {isPending ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              'Save Changes'\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className={`container mx-auto px-8 md:px-12 py-12 ${className}`}>\n      {/* Profile Header */}\n      <div className=\"text-center mb-12\">\n        {/* Loading State */}\n        {isLoading && account?.address && (\n          <div className=\"flex items-center justify-center mb-4\">\n            <Loader2 className=\"w-6 h-6 animate-spin text-indigo-400\" />\n            <span className=\"ml-2 text-white/40\">Loading profile...</span>\n          </div>\n        )}\n\n        {/* Profile Avatar and Edit Button */}\n        <div className=\"relative inline-block mb-4\">\n          <img\n            src={displayData.avatar}\n            alt={displayData.displayName}\n            className=\"w-24 h-24 rounded-xl object-cover shadow-lg border border-white/5\"\n          />\n\n          {account?.address && (\n            <button\n              onClick={() => setShowSettingsModal(true)}\n              className={`absolute -bottom-1 -right-1 p-2 rounded-full shadow-lg transition-colors hover:bg-gray-800`}\n              style={{ backgroundColor: '#141416' }}\n              disabled={isLoading}\n            >\n              <Edit3 className={`w-4 h-4 text-white`} />\n            </button>\n          )}\n        </div>\n\n        {/* Profile Name and Status */}\n        <div className=\"mb-2\">\n          <h1 className=\"text-2xl font-semibold text-white mb-1\">{displayData.displayName}</h1>\n          {account?.address && (\n            <div className=\"flex items-center justify-center gap-2 text-sm\">\n              <span className=\"text-white/40\">{account.address.slice(0, 6)}...{account.address.slice(-4)}</span>\n              {displayData.hasProfile && (\n                <span className=\"text-green-400 text-xs bg-green-900/30 px-2 py-1 rounded-full\">Γ£ô Profile Active</span>\n              )}\n            </div>\n          )}\n\n          {!account?.address && (\n            <p className=\"text-white/40 text-sm\">Please connect your wallet to view profile</p>\n          )}\n        </div>\n      </div>\n\n      {/* Feed Section */}\n      <div className=\"mb-12\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold text-white tracking-tight\">Feed</h2>\n          <button className=\"p-2 hover:bg-white/5 rounded-lg transition-colors\">\n            <svg className=\"w-5 h-5 text-white/40\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n          </button>\n        </div>\n        <p className=\"text-white/40 text-sm font-medium uppercase tracking-widest\">\n          {account?.address\n            ? 'Open proposals in the DAOs you follow will show up here.'\n            : 'Connect your wallet to see DAO activity.'}\n        </p>\n      </div>\n\n      {/* Your DAOs Section */}\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-xl font-semibold text-white tracking-tight\">Your Organizations</h2>\n          {userDAOs.all.length > 0 && (\n            <div className=\"flex items-center gap-4 text-[10px] font-medium uppercase tracking-widest text-white/40\">\n              <span className=\"flex items-center gap-1.5\">\n                <span className=\"w-1.5 h-1.5 bg-indigo-500 rounded-full\"></span>\n                {userDAOs.created.length} Created\n              </span>\n              <span className=\"flex items-center gap-1.5\">\n                <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></span>\n                {userDAOs.joined.length} Joined\n              </span>\n            </div>\n          )}\n        </div>\n\n        <p className=\"text-white/40 text-sm font-medium uppercase tracking-widest\">\n          {account?.address\n            ? 'DAOs you have created or joined are shown below.'\n            : 'Connect your wallet to see your DAO memberships.'}\n        </p>\n\n        {/* Filter Tabs */}\n        {!daosLoading && userDAOs.all.length > 0 && (\n          <div className=\"flex gap-2 py-2 overflow-x-auto no-scrollbar\">\n            <button\n              onClick={() => setDaoFilter('all')}\n              className={`px-4 py-2 rounded-xl font-medium text-xs transition-all whitespace-nowrap border ${daoFilter === 'all' ? 'bg-white/10 border-white/20 text-white' : 'border-transparent text-white/40 hover:text-white'}`}\n            >\n              All DAOs ({userDAOs.all.length})\n            </button>\n            <button\n              onClick={() => setDaoFilter('created')}\n              className={`px-4 py-2 rounded-xl font-medium text-xs transition-all whitespace-nowrap border ${daoFilter === 'created' ? 'bg-white/10 border-white/20 text-white' : 'border-transparent text-white/40 hover:text-white'}`}\n            >\n              ≡ƒææ Created ({userDAOs.created.length})\n            </button>\n            <button\n              onClick={() => setDaoFilter('joined')}\n              className={`px-4 py-2 rounded-xl font-medium text-xs transition-all whitespace-nowrap border ${daoFilter === 'joined' ? 'bg-white/10 border-white/20 text-white' : 'border-transparent text-white/40 hover:text-white'}`}\n            >\n              Γ£ô Joined ({userDAOs.joined.length})\n            </button>\n          </div>\n        )}\n\n        {/* Loading State */}\n        {daosLoading && account?.address && (\n          <div className=\"flex items-center justify-center py-20\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-white/20\" />\n          </div>\n        )}\n\n        {/* Error State */}\n        {daosError && (\n          <div className=\"flex items-center gap-2 p-4 bg-red-900/20 border border-red-500/30 rounded-xl text-red-400 text-sm mb-6\">\n            <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\n            <span>{daosError}</span>\n          </div>\n        )}\n\n        {/* DAOs Grid */}\n        {!daosLoading && userDAOs.all.length > 0 && (() => {\n          // Filter DAOs based on selected tab\n          const filteredDAOs = daoFilter === 'all'\n            ? userDAOs.all\n            : daoFilter === 'created'\n              ? userDAOs.created\n              : userDAOs.joined;\n\n          return (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {filteredDAOs.map((dao) => {\n                const isCreator = userDAOs.created.some(d => d.address === dao.address);\n\n                // Convert logo data to image URL if needed\n                const getImageUrl = () => {\n                  if (dao.logo?.is_url) return dao.logo.url;\n                  if (dao.logo?.data?.length) {\n                    try {\n                      const bytes = new Uint8Array(dao.logo.data);\n                      const text = new TextDecoder().decode(bytes);\n                      return text.startsWith('http') ? text : null;\n                    } catch { return null; }\n                  }\n                  return null;\n                };\n\n                return (\n                  <div key={dao.address} className=\"nb-card !p-5 hover:border-white/20 transition-all group\">\n                    {/* DAO Header with Logo and Name */}\n                    <div className=\"flex items-center gap-4 mb-4\">\n                      <div className=\"relative\">\n                        {getImageUrl() ? (\n                          <>\n                            <img\n                              src={getImageUrl()!}\n                              alt={dao.name || 'DAO'}\n                              className=\"w-12 h-12 rounded-xl object-cover border border-white/10\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                                const fallback = e.currentTarget.nextElementSibling as HTMLElement;\n                                if (fallback) fallback.classList.remove('hidden');\n                              }}\n                            />\n                            <div className=\"hidden w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white text-lg font-semibold\">\n                              {(dao.name || 'D').charAt(0).toUpperCase()}\n                            </div>\n                          </>\n                        ) : (\n                          <div className=\"w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white text-lg font-semibold\">\n                            {(dao.name || 'D').charAt(0).toUpperCase()}\n                          </div>\n                        )}\n\n                        {/* Role Badge */}\n                        <div className={`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center shadow-lg border border-white/10 ${isCreator ? 'bg-indigo-500' : 'bg-green-500'\n                          }`}>\n                          <span className=\"text-[10px]\">{isCreator ? '≡ƒææ' : 'Γ£ô'}</span>\n                        </div>\n                      </div>\n\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-semibold text-white truncate group-hover:text-[#e1fd6a] transition-colors uppercase tracking-tight\">{dao.name || 'Unnamed DAO'}</h3>\n                        <p className=\"text-[10px] font-medium text-white/30 uppercase tracking-widest mt-0.5\">\n                          {isCreator ? 'Creator' : 'Member'}\n                          {dao.subname && <span className=\"ml-2 text-white/20\">@{dao.subname}</span>}\n                        </p>\n                      </div>\n                    </div>\n\n                    {/* DAO Stats */}\n                    <div className=\"flex items-center justify-between text-[10px] font-medium uppercase tracking-widest text-white/30 pt-4 border-t border-white/5\">\n                      <div className=\"flex items-center gap-1.5\">\n                        <Calendar className=\"w-3 h-3\" />\n                        <span>\n                          {dao.created_at\n                            ? new Date(dao.created_at * 1000).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })\n                            : 'N/A'\n                          }\n                        </span>\n                      </div>\n                      <span className=\"font-mono text-white/20\">\n                        {dao.address.slice(0, 6)}...{dao.address.slice(-4)}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          );\n        })()}\n\n        {/* Empty State */}\n        {!daosLoading && !daosError && userDAOs.all.length === 0 && account?.address && (\n          <div className=\"py-24 text-center nb-card border-dashed\">\n            <div className=\"w-16 h-16 bg-white/5 rounded-2xl mx-auto mb-6 flex items-center justify-center\">\n              <Loader2 className=\"w-8 h-8 text-white/10\" />\n            </div>\n            <h3 className=\"text-lg font-semibold text-white mb-2\">No Organizations Found</h3>\n            <p className=\"text-white/40 text-sm font-medium uppercase tracking-widest mb-8\">\n              You haven't created or joined any organizations yet.\n            </p>\n            <button\n              onClick={() => window.dispatchEvent(new CustomEvent('navigate', { detail: 'create' }))}\n              className=\"nb-button\"\n            >\n              Initialize Your First DAO\n            </button>\n          </div>\n        )}\n\n        {/* No Wallet Connected State */}\n        {!account?.address && (\n          <div className=\"py-24 text-center nb-card border-dashed\">\n            <h3 className=\"text-lg font-semibold text-white mb-2 uppercase tracking-tight\">Wallet Connection Required</h3>\n            <p className=\"text-white/40 text-sm font-medium uppercase tracking-widest\">\n              Please authenticate to view your decentralized profile.\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Settings Modal */}\n      {showSettingsModal && renderModal()}\n    </div>\n  );\n};\n\nexport default UserProfile;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\profile\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\constants\\activityConstants.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'DAO_CREATED' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"DAO_CREATED"},"fix":{"range":[1058,1069],"text":""},"desc":"Remove unused variable 'DAO_CREATED'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MEMBER_JOINED' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"MEMBER_JOINED"},"fix":{"range":[1073,1090],"text":""},"desc":"Remove unused variable 'MEMBER_JOINED'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MEMBER_LEFT' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"MEMBER_LEFT"},"fix":{"range":[1094,1109],"text":""},"desc":"Remove unused variable 'MEMBER_LEFT'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PROPOSAL_CREATED' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"PROPOSAL_CREATED"},"fix":{"range":[1113,1133],"text":""},"desc":"Remove unused variable 'PROPOSAL_CREATED'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PROPOSAL_VOTED' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"PROPOSAL_VOTED"},"fix":{"range":[1137,1155],"text":""},"desc":"Remove unused variable 'PROPOSAL_VOTED'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PROPOSAL_EXECUTED' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"PROPOSAL_EXECUTED"},"fix":{"range":[1159,1180],"text":""},"desc":"Remove unused variable 'PROPOSAL_EXECUTED'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'STAKE' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"STAKE"},"fix":{"range":[1184,1193],"text":""},"desc":"Remove unused variable 'STAKE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UNSTAKE' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"UNSTAKE"},"fix":{"range":[1197,1208],"text":""},"desc":"Remove unused variable 'UNSTAKE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TREASURY_DEPOSIT' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"TREASURY_DEPOSIT"},"fix":{"range":[1212,1232],"text":""},"desc":"Remove unused variable 'TREASURY_DEPOSIT'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TREASURY_WITHDRAWAL' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"TREASURY_WITHDRAWAL"},"fix":{"range":[1236,1259],"text":""},"desc":"Remove unused variable 'TREASURY_WITHDRAWAL'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'REWARD_CLAIMED' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"REWARD_CLAIMED"},"fix":{"range":[1264,1282],"text":""},"desc":"Remove unused variable 'REWARD_CLAIMED'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LAUNCHPAD_CREATED' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"LAUNCHPAD_CREATED"},"fix":{"range":[1287,1308],"text":""},"desc":"Remove unused variable 'LAUNCHPAD_CREATED'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LAUNCHPAD_INVESTMENT' is defined but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"LAUNCHPAD_INVESTMENT"},"fix":{"range":[1313,1337],"text":""},"desc":"Remove unused variable 'LAUNCHPAD_INVESTMENT'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Activity type constants from contract\nexport const ACTIVITY_TYPES = {\n  1: { type: 'dao_created', title: 'DAO Created', icon: '' },\n  2: { type: 'member_joined', title: 'Member Joined', icon: '' },\n  3: { type: 'member_left', title: 'Member Left', icon: '' },\n  4: { type: 'proposal_created', title: 'Proposal Created', icon: '' },\n  5: { type: 'proposal_voted', title: 'Proposal Voted', icon: '' },\n  6: { type: 'proposal_executed', title: 'Proposal Executed', icon: '' },\n  7: { type: 'stake', title: 'Tokens Staked', icon: '' },\n  8: { type: 'unstake', title: 'Tokens Unstaked', icon: '' },\n  9: { type: 'treasury_deposit', title: 'Treasury Deposit', icon: '' },\n  10: { type: 'treasury_withdrawal', title: 'Treasury Withdrawal', icon: '' },\n  11: { type: 'reward_claimed', title: 'Rewards Claimed', icon: '' },\n  12: { type: 'launchpad_created', title: 'Launchpad Created', icon: '' },\n  13: { type: 'launchpad_investment', title: 'Launchpad Investment', icon: '' },\n} as const;\n\n// Activity type enum for type safety\nexport enum ActivityTypeEnum {\n  DAO_CREATED = 1,\n  MEMBER_JOINED = 2,\n  MEMBER_LEFT = 3,\n  PROPOSAL_CREATED = 4,\n  PROPOSAL_VOTED = 5,\n  PROPOSAL_EXECUTED = 6,\n  STAKE = 7,\n  UNSTAKE = 8,\n  TREASURY_DEPOSIT = 9,\n  TREASURY_WITHDRAWAL = 10,\n  REWARD_CLAIMED = 11,\n  LAUNCHPAD_CREATED = 12,\n  LAUNCHPAD_INVESTMENT = 13\n}\n\n// Type-safe activity type keys\nexport type ActivityTypeKey = keyof typeof ACTIVITY_TYPES;\n\n// Activity display configuration\nexport const ACTIVITY_CONFIG = {\n  // Default pagination settings\n  DEFAULT_LIMIT: 20,\n  MAX_LIMIT: 100,\n  \n  // Refresh intervals (in milliseconds)\n  AUTO_REFRESH_INTERVAL: 30000, // 30 seconds\n  FAST_REFRESH_INTERVAL: 5000,  // 5 seconds (for active users)\n  \n  // Activity colors for different types (hex)\n  ACTIVITY_COLORS: {\n    dao_created: '#10b981',        // green\n    member_joined: '#3b82f6',      // blue\n    member_left: '#f59e0b',        // amber\n    proposal_created: '#8b5cf6',   // violet\n    proposal_voted: '#06b6d4',     // cyan\n    proposal_executed: '#10b981',  // green\n    stake: '#14b8a6',              // teal\n    unstake: '#f97316',            // orange\n    treasury_deposit: '#059669',   // emerald\n    treasury_withdrawal: '#dc2626', // red\n    reward_claimed: '#d97706',     // amber\n    launchpad_created: '#7c3aed',  // violet\n    launchpad_investment: '#be185d' // pink\n  },\n  \n  // Tailwind CSS classes for activities\n  ACTIVITY_STYLES: {\n    dao_created: 'bg-purple-500/20 text-purple-300 border-purple-500/30',\n    member_joined: 'bg-green-500/20 text-green-300 border-green-500/30',\n    member_left: 'bg-red-500/20 text-red-300 border-red-500/30',\n    proposal_created: 'bg-blue-500/20 text-blue-300 border-blue-500/30',\n    proposal_voted: 'bg-yellow-500/20 text-yellow-300 border-yellow-500/30',\n    proposal_executed: 'bg-green-500/20 text-green-300 border-green-500/30',\n    stake: 'bg-indigo-500/20 text-indigo-300 border-indigo-500/30',\n    unstake: 'bg-orange-500/20 text-orange-300 border-orange-500/30',\n    treasury_deposit: 'bg-cyan-500/20 text-cyan-300 border-cyan-500/30',\n    treasury_withdrawal: 'bg-red-500/20 text-red-300 border-red-500/30',\n    reward_claimed: 'bg-purple-500/20 text-purple-300 border-purple-500/30',\n    launchpad_created: 'bg-pink-500/20 text-pink-300 border-pink-500/30',\n    launchpad_investment: 'bg-emerald-500/20 text-emerald-300 border-emerald-500/30'\n  }\n};\n\n// Helper function to get activity info by type ID\nexport const getActivityInfo = (typeId: number) => {\n  return ACTIVITY_TYPES[typeId as ActivityTypeKey] || {\n    type: 'unknown',\n    title: 'Unknown Activity',\n    icon: ''\n  };\n};\n\n// Helper function to get activity color\nexport const getActivityColor = (activityType: string) => {\n  return ACTIVITY_CONFIG.ACTIVITY_COLORS[activityType as keyof typeof ACTIVITY_CONFIG.ACTIVITY_COLORS] || '#6b7280';\n};\n\n// Helper function to get activity styles (Tailwind classes)\nexport const getActivityStyles = (activityType: string) => {\n  return ACTIVITY_CONFIG.ACTIVITY_STYLES[activityType as keyof typeof ACTIVITY_CONFIG.ACTIVITY_STYLES] || 'bg-gray-500/20 text-gray-300 border-gray-500/30';\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\constants\\apiKeys.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\contexts\\CedraWalletAdapterProvider.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'walletName' is defined but never used.","line":6,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"walletName"},"fix":{"range":[332,350],"text":""},"desc":"Remove unused variable 'walletName'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[499,502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[499,502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[536,539],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[536,539],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'transaction' is defined but never used.","line":13,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"transaction"},"fix":{"range":[571,604],"text":""},"desc":"Remove unused variable 'transaction'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[617,620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[617,620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used.","line":14,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":78,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[643,700],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[673,676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[673,676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[713,716],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[713,716],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used.","line":15,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[735,747],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[744,747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[744,747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[760,763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[760,763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'autoConnect' is assigned a value but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"autoConnect"},"fix":{"range":[1074,1097],"text":""},"desc":"Remove unused variable 'autoConnect'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'autoConnect' is assigned a value but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4615,4618],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4615,4618],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5028,5031],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5028,5031],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":175,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":175,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, ReactNode, useMemo, useCallback } from 'react';\nimport { WalletCore, type AccountInfo, type NetworkInfo, type InputTransactionData } from '@cedra-labs/wallet-adapter-core';\nimport { Network } from '@cedra-labs/ts-sdk';\n\ninterface CedraWalletContextState {\n  connect: (walletName: string) => Promise<void>;\n  disconnect: () => Promise<void>;\n  account: AccountInfo | null;\n  network: NetworkInfo | null;\n  connected: boolean;\n  wallet: any | null;\n  wallets: ReadonlyArray<any>;\n  signAndSubmitTransaction: (transaction: InputTransactionData) => Promise<any>;\n  signTransaction: (args: { transactionOrPayload: any; asFeePayer?: boolean }) => Promise<any>;\n  signMessage: (message: any) => Promise<any>;\n}\n\nconst CedraWalletContext = createContext<CedraWalletContextState | undefined>(undefined);\n\ninterface CedraWalletAdapterProviderProps {\n  children: ReactNode;\n  autoConnect?: boolean;\n  network?: Network;\n}\n\nexport const CedraWalletAdapterProvider: React.FC<CedraWalletAdapterProviderProps> = ({\n  children,\n  autoConnect = false,\n  network = Network.TESTNET,\n}) => {\n  const walletCore = useMemo(() => {\n    console.log('≡ƒÅù∩╕Å Initializing WalletCore with network:', network);\n    const core = new WalletCore(\n      [], // optInWallets - empty array means all wallets\n      { network }, // dappConfig\n      false // disableTelemetry\n    );\n\n    // Log wallets immediately after creation\n    setTimeout(() => {\n      console.log('≡ƒÆ╝ WalletCore initialized with wallets:', {\n        totalWallets: core.wallets.length,\n        walletNames: core.wallets.map(w => w.name),\n        notDetected: core.notDetectedWallets.length\n      });\n    }, 1000); // Give time for async wallet detection\n\n    return core;\n  }, [network]);\n\n  const [account, setAccount] = useState<AccountInfo | null>(null);\n  const [networkInfo, setNetworkInfo] = useState<NetworkInfo | null>(null);\n  const [connected, setConnected] = useState(false);\n\n  // Set up event listeners\n  useEffect(() => {\n    console.log('≡ƒÄº Setting up WalletCore event listeners');\n\n    const handleConnect = (connectedAccount: AccountInfo | null) => {\n      console.log(' WalletCore connect event:', connectedAccount);\n      setAccount(connectedAccount);\n      setConnected(true);\n    };\n\n    const handleDisconnect = () => {\n      console.log(' WalletCore disconnect event');\n      setAccount(null);\n      setNetworkInfo(null);\n      setConnected(false);\n    };\n\n    const handleAccountChange = (changedAccount: AccountInfo | null) => {\n      console.log(' WalletCore account change event:', changedAccount);\n      setAccount(changedAccount);\n    };\n\n    const handleNetworkChange = (changedNetwork: NetworkInfo | null) => {\n      console.log('≡ƒîÉ WalletCore network change event:', changedNetwork);\n      setNetworkInfo(changedNetwork);\n    };\n\n    walletCore.on('connect', handleConnect);\n    walletCore.on('disconnect', handleDisconnect);\n    walletCore.on('accountChange', handleAccountChange);\n    walletCore.on('networkChange', handleNetworkChange);\n\n    // Log available wallets\n    console.log('≡ƒÆ╝ Available wallets:', walletCore.wallets.map(w => w.name));\n\n    return () => {\n      walletCore.off('connect', handleConnect);\n      walletCore.off('disconnect', handleDisconnect);\n      walletCore.off('accountChange', handleAccountChange);\n      walletCore.off('networkChange', handleNetworkChange);\n    };\n  }, [walletCore]);\n\n  const connect = useCallback(async (walletName: string) => {\n    console.log('≡ƒöî Connecting to wallet:', walletName);\n    try {\n      await walletCore.connect(walletName);\n      // Account and network will be set via event listeners\n    } catch (error) {\n      console.error(' Failed to connect wallet:', error);\n      throw error;\n    }\n  }, [walletCore]);\n\n  const disconnect = useCallback(async () => {\n    console.log('≡ƒöî Disconnecting wallet');\n    try {\n      await walletCore.disconnect();\n    } catch (error) {\n      console.error(' Failed to disconnect wallet:', error);\n      throw error;\n    }\n  }, [walletCore]);\n\n  const signAndSubmitTransaction = useCallback(async (transaction: InputTransactionData) => {\n    console.log('≡ƒô¥ Signing and submitting transaction via WalletCore');\n    try {\n      const result = await walletCore.signAndSubmitTransaction(transaction);\n      console.log(' Transaction result:', result);\n      return result;\n    } catch (error) {\n      console.error(' Failed to sign and submit transaction:', error);\n      throw error;\n    }\n  }, [walletCore]);\n\n  const signTransaction = useCallback(async (args: { transactionOrPayload: any; asFeePayer?: boolean }) => {\n    console.log('≡ƒô¥ Signing transaction via WalletCore');\n    try {\n      const result = await walletCore.signTransaction(args);\n      console.log(' Transaction signed:', result);\n      return result;\n    } catch (error) {\n      console.error(' Failed to sign transaction:', error);\n      throw error;\n    }\n  }, [walletCore]);\n\n  const signMessage = useCallback(async (message: any) => {\n    console.log('≡ƒô¥ Signing message via WalletCore');\n    try {\n      const result = await walletCore.signMessage(message);\n      console.log(' Message signed:', result);\n      return result;\n    } catch (error) {\n      console.error(' Failed to sign message:', error);\n      throw error;\n    }\n  }, [walletCore]);\n\n  const value = useMemo(() => ({\n    connect,\n    disconnect,\n    account,\n    network: networkInfo,\n    connected,\n    wallet: walletCore.wallet,\n    wallets: walletCore.wallets,\n    signAndSubmitTransaction,\n    signTransaction,\n    signMessage,\n  }), [connect, disconnect, account, networkInfo, connected, walletCore, signAndSubmitTransaction, signTransaction, signMessage]);\n\n  return (\n    <CedraWalletContext.Provider value={value}>\n      {children}\n    </CedraWalletContext.Provider>\n  );\n};\n\nexport const useWallet = (): CedraWalletContextState => {\n  const context = useContext(CedraWalletContext);\n  if (!context) {\n    throw new Error('useWallet must be used within CedraWalletAdapterProvider');\n  }\n  return context;\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\contexts\\CedraWalletProvider.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'wallet' is defined but never used.","line":23,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"wallet"},"fix":{"range":[598,617],"text":""},"desc":"Remove unused variable 'wallet'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'transaction' is defined but never used.","line":25,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"transaction"},"fix":{"range":[701,717],"text":""},"desc":"Remove unused variable 'transaction'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[714,717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[714,717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[730,733],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[730,733],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'transaction' is defined but never used.","line":26,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"transaction"},"fix":{"range":[756,772],"text":""},"desc":"Remove unused variable 'transaction'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[769,772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[769,772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[785,788],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[785,788],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used.","line":27,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[807,819],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[816,819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[816,819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[832,835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[832,835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'autoConnect' is assigned a value but never used.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"autoConnect"},"fix":{"range":[1104,1127],"text":""},"desc":"Remove unused variable 'autoConnect'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'autoConnect' is assigned a value but never used.","line":39,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5760,5763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5760,5763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":194,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6736,6739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6736,6739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":252,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":252,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8885,8888],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8885,8888],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":278,"column":15,"nodeType":"BlockStatement","messageId":"unexpected","endLine":278,"endColumn":17,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[9785,9785],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":293,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10309,10312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10309,10312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":303,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10531,10534],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10531,10534],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":347,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":347,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { getCedraWallets, UserResponseStatus } from '@cedra-labs/wallet-standard';\nimport type { CedraWallet } from '@cedra-labs/wallet-standard';\n\ninterface AccountInfo {\n  address: string;\n  publicKey: Uint8Array;\n}\n\ninterface NetworkInfo {\n  name: string;\n  chainId: number;\n  url?: string;\n}\n\ninterface CedraWalletContextState {\n  wallets: CedraWallet[];\n  wallet: CedraWallet | null;\n  account: AccountInfo | null;\n  network: NetworkInfo | null;\n  connected: boolean;\n  connecting: boolean;\n  connect: (wallet: CedraWallet) => Promise<void>;\n  disconnect: () => Promise<void>;\n  signAndSubmitTransaction: (transaction: any) => Promise<any>;\n  signTransaction: (transaction: any) => Promise<any>;\n  signMessage: (message: any) => Promise<any>;\n}\n\nconst CedraWalletContext = createContext<CedraWalletContextState | undefined>(undefined);\n\ninterface CedraWalletProviderProps {\n  children: ReactNode;\n  autoConnect?: boolean;\n}\n\nexport const CedraWalletProvider: React.FC<CedraWalletProviderProps> = ({\n  children,\n  autoConnect = false\n}) => {\n  const [wallets, setWallets] = useState<CedraWallet[]>([]);\n  const [wallet, setWallet] = useState<CedraWallet | null>(null);\n  const [account, setAccount] = useState<AccountInfo | null>(null);\n  const [network, setNetwork] = useState<NetworkInfo | null>(null);\n  const [connected, setConnected] = useState(false);\n  const [connecting, setConnecting] = useState(false);\n\n  // Initialize wallets\n  useEffect(() => {\n    const { cedraWallets, on } = getCedraWallets();\n    setWallets(cedraWallets);\n\n    // Listen for new wallets being registered\n    const unsubscribe = on('register', () => {\n      const { cedraWallets: updatedWallets } = getCedraWallets();\n      setWallets(updatedWallets);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  const connect = async (selectedWallet: CedraWallet) => {\n    setConnecting(true);\n    try {\n      console.log('≡ƒöî Starting wallet connection...', selectedWallet.name);\n      console.log('≡ƒôï Wallet features:', Object.keys(selectedWallet.features));\n\n      // For wallets that don't implement Cedra standard yet, try getting account directly\n      const accountFeature = selectedWallet.features['cedra:account'];\n      if (accountFeature) {\n        console.log(' Found cedra:account feature');\n        try {\n          const accountInfo = await accountFeature.account();\n          console.log(' Account info from cedra:account:', accountInfo);\n\n          if (accountInfo) {\n            setWallet(selectedWallet);\n            setAccount({\n              address: accountInfo.address.toString(),\n              publicKey: accountInfo.publicKey.toUint8Array()\n            });\n            setConnected(true);\n\n            // Get network info\n            const networkFeature = selectedWallet.features['cedra:network'];\n            if (networkFeature) {\n              const networkInfo = await networkFeature.network();\n              setNetwork(networkInfo);\n              console.log('≡ƒîÉ Network info:', networkInfo);\n            }\n\n            console.log(' Wallet connected successfully via cedra:account');\n            return;\n          }\n        } catch (err) {\n          console.log(' cedra:account failed, trying cedra:connect:', err);\n        }\n      }\n\n      // Try the connect feature\n      const connectFeature = selectedWallet.features['cedra:connect'];\n      if (!connectFeature) {\n        throw new Error('Wallet does not support connect feature');\n      }\n\n      console.log('≡ƒô₧ Calling cedra:connect...');\n      const result = await connectFeature.connect();\n      console.log('≡ƒôª Connect result:', result);\n      console.log('≡ƒôª Result status:', result?.status);\n      console.log('≡ƒôª Result args:', 'args' in result ? result.args : 'No args');\n\n      // Check if approved\n      if (result.status === UserResponseStatus.APPROVED && 'args' in result) {\n        setWallet(selectedWallet);\n\n        // Handle address - could be string or AccountAddress object\n        const address = typeof result.args.address === 'string'\n          ? result.args.address\n          : result.args.address.toString();\n\n        // Handle publicKey - could be Uint8Array or object with toUint8Array method\n        const publicKey = result.args.publicKey instanceof Uint8Array\n          ? result.args.publicKey\n          : result.args.publicKey.toUint8Array();\n\n        setAccount({\n          address,\n          publicKey\n        });\n        setConnected(true);\n\n        console.log(' Wallet connected successfully:', { address });\n\n        // Get network info\n        const networkFeature = selectedWallet.features['cedra:network'];\n        if (networkFeature) {\n          const networkInfo = await networkFeature.network();\n          setNetwork(networkInfo);\n          console.log('≡ƒîÉ Network info:', networkInfo);\n        }\n      } else {\n        console.log(' Connection was not approved or missing args');\n        console.log('Status check - result:', result);\n        throw new Error('Connection was rejected or failed');\n      }\n    } catch (error) {\n      console.error(' Failed to connect wallet:', error);\n      throw error;\n    } finally {\n      setConnecting(false);\n    }\n  };\n\n  const disconnect = async () => {\n    if (!wallet) return;\n\n    try {\n      const disconnectFeature = wallet.features['cedra:disconnect'];\n      if (disconnectFeature) {\n        await disconnectFeature.disconnect();\n      }\n    } catch (error) {\n      console.error('Failed to disconnect wallet:', error);\n    } finally {\n      setWallet(null);\n      setAccount(null);\n      setNetwork(null);\n      setConnected(false);\n    }\n  };\n\n  const signAndSubmitTransaction = async (transaction: any) => {\n    if (!wallet) {\n      throw new Error('No wallet connected');\n    }\n\n    console.log('≡ƒöÉ signAndSubmitTransaction called with:', {\n      hasTransaction: !!transaction,\n      transactionType: typeof transaction,\n      transactionKeys: transaction ? Object.keys(transaction) : [],\n      hasPayload: transaction && 'payload' in transaction,\n      hasData: transaction && 'data' in transaction,\n      payloadKeys: transaction?.payload ? Object.keys(transaction.payload) : [],\n      dataKeys: transaction?.data ? Object.keys(transaction.data) : [],\n    });\n\n    // Check if this is a built transaction object or a payload\n    const isBuiltTransaction = transaction && typeof transaction === 'object' &&\n                               'rawTransaction' in transaction;\n    const hasPayload = transaction && typeof transaction === 'object' &&\n                      ('payload' in transaction || 'data' in transaction);\n    const signAndSubmitFeature = (wallet.features as any)['cedra:signAndSubmitTransaction'];\n\n    if ((hasPayload || isBuiltTransaction) && signAndSubmitFeature) {\n      console.log(' Using cedra:signAndSubmitTransaction feature');\n\n      let transactionToSend = transaction;\n\n      // If it's a built transaction, wallet can use it directly\n      if (isBuiltTransaction) {\n        console.log('≡ƒôª Sending pre-built transaction to wallet');\n      } else {\n        // Normalize payload format\n        transactionToSend = 'payload' in transaction\n          ? transaction\n          : { payload: transaction.data, ...transaction, data: undefined };\n        console.log('≡ƒôª Sending payload for wallet to build');\n      }\n\n      console.log('≡ƒôñ Sending transaction to wallet:', JSON.stringify(transactionToSend, null, 2).substring(0, 500));\n\n      const result = await signAndSubmitFeature.signAndSubmitTransaction(transactionToSend);\n\n      console.log('≡ƒôÑ Wallet response:', {\n        status: result.status,\n        hasArgs: 'args' in result,\n        argsKeys: 'args' in result ? Object.keys(result.args) : [],\n      });\n\n      if (result.status !== UserResponseStatus.APPROVED) {\n        throw new Error('Transaction signing was rejected');\n      }\n\n      // Type guard: if status is APPROVED, then it's UserApproval which has args\n      if ('args' in result) {\n        return result.args; // expected to contain hash/transactionHash\n      }\n      throw new Error('Transaction submission failed: missing args');\n    }\n\n    // Fallback: sign-only path\n    const signFeature = wallet.features['cedra:signTransaction'];\n    if (!signFeature) {\n      throw new Error('Wallet does not support signing transactions');\n    }\n\n    const signResult = await signFeature.signTransaction(transaction);\n\n    if (signResult.status !== UserResponseStatus.APPROVED) {\n      throw new Error('Transaction signing was rejected');\n    }\n\n    // Type guard: if status is APPROVED, then it's UserApproval which has args\n    if ('args' in signResult) {\n      return signResult.args; // caller must submit\n    }\n    throw new Error('Transaction signing failed: missing args');\n  };\n\n  const signTransaction = async (transaction: any) => {\n    if (!wallet) {\n      throw new Error('No wallet connected');\n    }\n\n    const signFeature = wallet.features['cedra:signTransaction'];\n    if (!signFeature) {\n      throw new Error('Wallet does not support signing transactions');\n    }\n\n    try {\n      console.log('≡ƒöÉ Calling wallet signTransaction with transaction:', {\n        hasTransaction: !!transaction,\n        transactionType: typeof transaction,\n        transactionKeys: transaction ? Object.keys(transaction) : [],\n      });\n\n      const result = await signFeature.signTransaction(transaction);\n\n      console.log('≡ƒôï Wallet signTransaction result:', {\n        status: result.status,\n        hasArgs: 'args' in result,\n        resultKeys: result ? Object.keys(result) : [],\n      });\n      try {\n        console.log('≡ƒôª Wallet result.args preview:', 'args' in result ? JSON.stringify(result.args) : 'No args');\n      } catch {}\n\n      if (result.status !== UserResponseStatus.APPROVED) {\n        console.error(' Transaction rejected by wallet:', {\n          status: result.status,\n          result: result,\n        });\n        throw new Error(`Transaction signing was rejected. Status: ${result.status}`);\n      }\n\n      // Type guard: if status is APPROVED, then it's UserApproval which has args\n      if ('args' in result) {\n        return result.args;\n      }\n      throw new Error('Transaction signing failed: missing args');\n    } catch (error: any) {\n      console.error(' Error in signTransaction:', {\n        error: error,\n        message: error?.message,\n        stack: error?.stack,\n      });\n      throw error;\n    }\n  };\n\n  const signMessage = async (message: any) => {\n    if (!wallet) {\n      throw new Error('No wallet connected');\n    }\n\n    const signFeature = wallet.features['cedra:signMessage'];\n    if (!signFeature) {\n      throw new Error('Wallet does not support signing messages');\n    }\n\n    const result = await signFeature.signMessage(message);\n\n    if (result.status !== UserResponseStatus.APPROVED) {\n      throw new Error('Message signing was rejected');\n    }\n\n    // Type guard: if status is APPROVED, then it's UserApproval which has args\n    if ('args' in result) {\n      return result.args;\n    }\n    throw new Error('Message signing failed: missing args');\n  };\n\n  const value: CedraWalletContextState = {\n    wallets,\n    wallet,\n    account,\n    network,\n    connected,\n    connecting,\n    connect,\n    disconnect,\n    signAndSubmitTransaction,\n    signTransaction,\n    signMessage,\n  };\n\n  return (\n    <CedraWalletContext.Provider value={value}>\n      {children}\n    </CedraWalletContext.Provider>\n  );\n};\n\nexport const useWallet = (): CedraWalletContextState => {\n  const context = useContext(CedraWalletContext);\n  if (context === undefined) {\n    throw new Error('useWallet must be used within a CedraWalletProvider');\n  }\n  return context;\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\contexts\\DAOStateContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[610,613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[610,613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'daoId' is defined but never used.","line":44,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"daoId"},"fix":{"range":[1226,1239],"text":""},"desc":"Remove unused variable 'daoId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'daoId' is defined but never used.","line":45,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"daoId"},"fix":{"range":[1283,1297],"text":""},"desc":"Remove unused variable 'daoId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used.","line":45,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[1296,1330],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'daoId' is defined but never used.","line":46,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"daoId"},"fix":{"range":[1365,1379],"text":""},"desc":"Remove unused variable 'daoId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used.","line":46,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[1378,1399],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'daoId' is defined but never used.","line":47,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"daoId"},"fix":{"range":[1431,1444],"text":""},"desc":"Remove unused variable 'daoId'."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":63,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":63,"endColumn":25},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'toMOVE' function makes the dependencies of useCallback Hook (at line 313) change on every render. To fix this, wrap the definition of 'toMOVE' in its own useCallback() Hook.","line":77,"column":9,"nodeType":"VariableDeclarator","endLine":77,"endColumn":75,"suggestions":[{"desc":"Wrap the definition of 'toMOVE' in its own useCallback() Hook.","fix":{"range":[2584,2641],"text":"useCallback((u64: number): number => BalanceService.octasToCedra(u64))"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4477,4480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4477,4480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4492,4495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4492,4495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5287,5290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5287,5290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5318,5321],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5318,5321],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":157,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5466,5469],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5466,5469],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":190,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":190,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":190,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":190,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7235,7238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7235,7238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7288,7291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7288,7291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchWalletBalance', 'loadFromStorage', and 'saveToStorage'. Either include them or remove the dependency array.","line":552,"column":6,"nodeType":"ArrayExpression","endLine":552,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [account.address, fetchWalletBalance, loadFromStorage, saveToStorage]","fix":{"range":[19107,19125],"text":"[account.address, fetchWalletBalance, loadFromStorage, saveToStorage]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'userState'. Either include it or remove the dependency array.","line":576,"column":6,"nodeType":"ArrayExpression","endLine":576,"endColumn":76,"suggestions":[{"desc":"Update the dependencies array to be: [userState.lastBalanceUpdate, account?.address, refreshWalletBalance, userState]","fix":{"range":[19803,19873],"text":"[userState.lastBalanceUpdate, account?.address, refreshWalletBalance, userState]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { useWallet } from './CedraWalletProvider';\nimport { BalanceService } from '../useServices/useBalance';\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\n\nexport interface DAOMembershipData {\n  daoId: string;\n  daoName: string;\n  isMember: boolean;\n  isStaker: boolean;\n  stakedAmount: number;\n  votingPower: number;\n  minStakeRequired: number;\n  lastUpdated: number;\n  memberSince?: number;\n}\n\nexport interface DAOMemberList {\n  members: any[];\n  totalMembers: number;\n  totalStakers: number;\n  totalStaked: number;\n  minStakeRequired: number;\n  minProposalStake: number;\n  lastUpdated: number;\n}\n\nexport interface UserDAOState {\n  walletAddress: string;\n  totalBalance: number;\n  lastBalanceUpdate: number;\n  daoMemberships: Map<string, DAOMembershipData>;\n  daoMemberLists: Map<string, DAOMemberList>;\n  isLoading: boolean;\n  lastGlobalUpdate: number;\n}\n\ninterface DAOStateContextType {\n  userState: UserDAOState | null;\n  isInitialized: boolean;\n  refreshUserState: () => Promise<void>;\n  refreshWalletBalance: () => Promise<void>;\n  refreshDAOData: (daoId: string) => Promise<void>;\n  updateDAOMembership: (daoId: string, data: Partial<DAOMembershipData>) => void;\n  updateDAOMemberList: (daoId: string, data: DAOMemberList) => void;\n  getDAOMemberList: (daoId: string) => DAOMemberList | null;\n  clearUserState: () => void;\n}\n\nconst DAOStateContext = createContext<DAOStateContextType>({\n  userState: null,\n  isInitialized: false,\n  refreshUserState: async () => {},\n  refreshWalletBalance: async () => {},\n  refreshDAOData: async () => {},\n  updateDAOMembership: () => {},\n  updateDAOMemberList: () => {},\n  getDAOMemberList: () => null,\n  clearUserState: () => {},\n});\n\nexport const useDAOState = () => useContext(DAOStateContext);\n\n// Storage keys\nconst STORAGE_KEY = 'dao_user_state';\nconst CACHE_DURATION = 10 * 60 * 1000; // 10 minutes (increased to reduce API calls)\nconst STALE_DURATION = 5 * 60 * 1000; // 5 minutes (increased to reduce API calls)\nconst BALANCE_STALE_DURATION = 2 * 60 * 1000; // 2 minutes for wallet balance (increased to reduce API calls)\n\nexport const DAOStateProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const { account } = useWallet();\n  const [userState, setUserState] = useState<UserDAOState | null>(null);\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Helper functions (use BalanceService for consistency)\n  const toMOVE = (u64: number): number => BalanceService.octasToCedra(u64);\n\n  // Load state from localStorage\n  const loadFromStorage = useCallback((walletAddress: string): UserDAOState | null => {\n    try {\n      const stored = localStorage.getItem(`${STORAGE_KEY}_${walletAddress}`);\n      if (!stored) return null;\n\n      const parsed = JSON.parse(stored);\n\n      // Convert plain object back to Map\n      const daoMemberships = new Map<string, DAOMembershipData>();\n      if (parsed.daoMemberships) {\n        Object.entries(parsed.daoMemberships).forEach(([key, value]) => {\n          daoMemberships.set(key, value as DAOMembershipData);\n        });\n      }\n\n      const daoMemberLists = new Map<string, DAOMemberList>();\n      if (parsed.daoMemberLists) {\n        Object.entries(parsed.daoMemberLists).forEach(([key, value]) => {\n          daoMemberLists.set(key, value as DAOMemberList);\n        });\n      }\n\n      return {\n        ...parsed,\n        daoMemberships,\n        daoMemberLists,\n      };\n    } catch (error) {\n      console.warn('Failed to load DAO state from storage:', error);\n      return null;\n    }\n  }, []);\n\n  // Save state to localStorage\n  const saveToStorage = useCallback((state: UserDAOState) => {\n    try {\n      // Convert Map to plain object for JSON storage\n      const stateToStore = {\n        ...state,\n        daoMemberships: Object.fromEntries(state.daoMemberships),\n        daoMemberLists: Object.fromEntries(state.daoMemberLists),\n      };\n\n      localStorage.setItem(`${STORAGE_KEY}_${state.walletAddress}`, JSON.stringify(stateToStore));\n    } catch (error) {\n      console.warn('Failed to save DAO state to storage:', error);\n    }\n  }, []);\n\n  // Simple rate limiter to prevent overwhelming the RPC\n  const lastRequestTime = React.useRef(0);\n  const requestQueue = React.useRef(Promise.resolve());\n  \n  const throttledRequest = useCallback(async (fn: () => Promise<any>): Promise<any> => {\n    // Queue requests to prevent parallel bombardment\n    const currentRequest = requestQueue.current.then(async () => {\n      const now = Date.now();\n      const timeSinceLastRequest = now - lastRequestTime.current;\n      const minDelay = 100; // 100ms minimum between requests\n      \n      if (timeSinceLastRequest < minDelay) {\n        await new Promise(resolve => setTimeout(resolve, minDelay - timeSinceLastRequest));\n      }\n      \n      lastRequestTime.current = Date.now();\n      return fn();\n    });\n    \n    requestQueue.current = currentRequest.catch(() => {}); // Don't propagate errors to queue\n    return currentRequest;\n  }, []);\n\n  // Helper function for retrying failed requests with exponential backoff\n  const retryWithBackoff = useCallback(async (fn: () => Promise<any>, maxRetries = 3): Promise<any> => {\n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        return await throttledRequest(fn);\n      } catch (error: any) {\n        const isRateLimit = error?.message?.includes('429') || error?.message?.includes('Too Many Requests');\n        const isNetworkError = error?.message?.includes('Network Error') || error?.code === 'ERR_NETWORK';\n        const isCorsError = error?.message?.includes('CORS') || error?.message?.includes('Access-Control-Allow-Origin');\n        \n        if ((isRateLimit || isNetworkError || isCorsError) && attempt < maxRetries - 1) {\n          const delay = Math.min(1000 * Math.pow(2, attempt), 10000); // Max 10 second delay\n          console.log(`Request failed (attempt ${attempt + 1}/${maxRetries}), retrying in ${delay}ms...`, error.message);\n          await new Promise(resolve => setTimeout(resolve, delay));\n          continue;\n        }\n        throw error;\n      }\n    }\n  }, [throttledRequest]);\n\n  // Fetch user's wallet balance\n  const fetchWalletBalance = useCallback(async (walletAddress: string): Promise<number> => {\n    console.log('Fetching wallet balance for:', walletAddress);\n    \n    try {\n      // Use view function for new RPC compatibility (more reliable than getAccountResource)\n      const balRes = await retryWithBackoff(() => cedraClient.view({\n        payload: {\n          function: '0x1::coin::balance',\n          typeArguments: ['0x1::cedra_coin::CedraCoin'],\n          functionArguments: [walletAddress]\n        }\n      }));\n      const raw = Number(balRes?.[0] ?? 0);\n      const balance = toMOVE(raw);\n      console.log('Balance fetched via view function:', balance);\n      return balance;\n    } catch (error) {\n      console.log('View function method failed, trying alternatives...');\n      \n      // Fallback 1: Scan resources for any CoinStore with non-zero value (robust on Cedra)\n      try {\n        const resources: any[] = await retryWithBackoff(() => (cedraClient as any).getAccountResources?.({ accountAddress: walletAddress }));\n        if (Array.isArray(resources)) {\n          // Prefer CedraCoin specifically if present\n          const cedraCoinStore = resources.find(r => typeof r?.type === 'string'\n            && r.type === `0x1::coin::CoinStore<0x1::cedra_coin::CedraCoin>`);\n          const candidate = cedraCoinStore || resources.find(r => typeof r?.type === 'string'\n            && r.type.startsWith('0x1::coin::CoinStore<') && r.data?.coin?.value);\n          if (candidate?.data?.coin?.value) {\n            const raw = Number(candidate.data.coin.value || 0);\n            const balance = toMOVE(raw);\n            console.log('Balance fetched via resource scan:', balance);\n            return balance;\n          }\n        }\n      } catch (err) {\n        console.log('Resource scan failed:', err);\n      }\n\n      // Fallback 2: View function with retry logic\n      try {\n        const balRes = await retryWithBackoff(() => cedraClient.view({\n          payload: {\n            function: `0x1::coin::balance`,\n            typeArguments: [\"0x1::cedra_coin::CedraCoin\"],\n            functionArguments: [walletAddress],\n          },\n        }));\n        const balance = toMOVE(Number(balRes[0] || 0));\n        console.log('Balance fetched via view function:', balance);\n        return balance;\n      } catch (fallbackError) {\n        console.warn('Failed to fetch wallet balance via all methods:', fallbackError);\n        return 0;\n      }\n    }\n  }, [retryWithBackoff]);\n\n  // Fetch membership data for a specific DAO\n  const fetchDAOMembership = useCallback(async (\n    daoId: string, \n    walletAddress: string, \n    daoName?: string\n  ): Promise<DAOMembershipData> => {\n    const [minStakeRes, isMemberRes] = await Promise.all([\n      retryWithBackoff(() => cedraClient.view({ \n        payload: { \n          function: `${MODULE_ADDRESS}::membership::get_min_stake`, \n          functionArguments: [daoId] \n        } \n      })).catch(() => [0]),\n      retryWithBackoff(() => cedraClient.view({ \n        payload: { \n          function: `${MODULE_ADDRESS}::membership::is_member`, \n          functionArguments: [daoId, walletAddress] \n        } \n      })).catch(() => [false])\n    ]);\n\n    let userStakedInDAO = 0;\n    let isStaker = false;\n    let votingPower = 0;\n\n    try {\n      // Get user's stake in this DAO with retry logic\n      const daoStakeRes = await retryWithBackoff(() => cedraClient.view({ \n        payload: { \n          function: `${MODULE_ADDRESS}::staking::get_dao_stake_direct`, \n          functionArguments: [daoId, walletAddress] \n        } \n      }));\n      userStakedInDAO = toMOVE(Number(daoStakeRes[0] || 0));\n      votingPower = userStakedInDAO;\n    } catch {\n      // Fallback to other staking functions\n      try {\n        const daoStakeRes = await retryWithBackoff(() => cedraClient.view({ \n          payload: { \n            function: `${MODULE_ADDRESS}::staking::get_dao_staked_balance`, \n            functionArguments: [daoId, walletAddress] \n          } \n        }));\n        userStakedInDAO = toMOVE(Number(daoStakeRes[0] || 0));\n        votingPower = userStakedInDAO;\n      } catch {\n        const votingPowerRes = await retryWithBackoff(() => cedraClient.view({ \n          payload: { \n            function: `${MODULE_ADDRESS}::membership::get_voting_power`, \n            functionArguments: [daoId, walletAddress] \n          } \n        }));\n        votingPower = toMOVE(Number(votingPowerRes[0] || 0));\n        userStakedInDAO = votingPower;\n      }\n    }\n\n    // Check if user is a staker\n    try {\n      const isDaoStakerRes = await retryWithBackoff(() => cedraClient.view({ \n        payload: { \n          function: `${MODULE_ADDRESS}::staking::is_dao_staker`, \n          functionArguments: [daoId, walletAddress] \n        } \n      }));\n      isStaker = Boolean(isDaoStakerRes[0]);\n    } catch {\n      isStaker = userStakedInDAO > 0;\n    }\n\n    return {\n      daoId,\n      daoName: daoName || daoId.slice(0, 10) + '...',\n      isMember: Boolean(isMemberRes[0]),\n      isStaker,\n      stakedAmount: userStakedInDAO,\n      votingPower,\n      minStakeRequired: toMOVE(Number(minStakeRes[0] || 0)),\n      lastUpdated: Date.now(),\n    };\n  }, [toMOVE, retryWithBackoff]);\n\n  // Refresh data for a specific DAO\n  const refreshDAOData = useCallback(async (daoId: string, daoName?: string) => {\n    if (!account?.address) return;\n\n    try {\n      const membershipData = await fetchDAOMembership(daoId, account.address, daoName);\n      \n      setUserState(prevState => {\n        if (!prevState) return null;\n        \n        const newMemberships = new Map(prevState.daoMemberships);\n        newMemberships.set(daoId, membershipData);\n        \n        const newState = {\n          ...prevState,\n          daoMemberships: newMemberships,\n          lastGlobalUpdate: Date.now(),\n        };\n        \n        saveToStorage(newState);\n        return newState;\n      });\n    } catch (error) {\n      console.warn(`Failed to refresh DAO data for ${daoId}:`, error);\n    }\n  }, [account?.address, fetchDAOMembership, saveToStorage]);\n\n  // Refresh entire user state\n  const refreshUserState = useCallback(async () => {\n    if (!account?.address) return;\n\n    setUserState(prevState => prevState ? { ...prevState, isLoading: true } : null);\n\n    try {\n      const walletBalance = await fetchWalletBalance(account.address);\n      \n      setUserState(prevState => {\n        // If we have existing state, update wallet balance and refresh stale DAOs\n        if (prevState) {\n          const staleDaos: string[] = [];\n          const now = Date.now();\n          \n          prevState.daoMemberships.forEach((membership, daoId) => {\n            if (now - membership.lastUpdated > STALE_DURATION) {\n              staleDaos.push(daoId);\n            }\n          });\n\n          // Note: We'll handle stale DAO refresh separately to avoid state mutation\n          const updatedState = {\n            ...prevState,\n            totalBalance: walletBalance,\n            lastBalanceUpdate: Date.now(),\n            isLoading: false,\n            lastGlobalUpdate: Date.now(),\n          };\n\n          saveToStorage(updatedState);\n          \n          // Asynchronously refresh stale DAOs without blocking state update\n          if (staleDaos.length > 0) {\n            setTimeout(async () => {\n              for (const daoId of staleDaos) {\n                const existingMembership = updatedState.daoMemberships.get(daoId);\n                try {\n                  const refreshedData = await fetchDAOMembership(daoId, account.address, existingMembership?.daoName);\n                  setUserState(currentState => {\n                    if (!currentState) return null;\n                    const newMemberships = new Map(currentState.daoMemberships);\n                    newMemberships.set(daoId, refreshedData);\n                    const newState = {\n                      ...currentState,\n                      daoMemberships: newMemberships,\n                      lastGlobalUpdate: Date.now(),\n                    };\n                    saveToStorage(newState);\n                    return newState;\n                  });\n                } catch (error) {\n                  console.warn(`Failed to refresh stale DAO ${daoId}:`, error);\n                }\n              }\n            }, 100);\n          }\n\n          return updatedState;\n        } else {\n          // Create new state\n          const newState: UserDAOState = {\n            walletAddress: account.address,\n            totalBalance: walletBalance,\n            lastBalanceUpdate: Date.now(),\n            daoMemberships: new Map(),\n            daoMemberLists: new Map(),\n            isLoading: false,\n            lastGlobalUpdate: Date.now(),\n          };\n\n          saveToStorage(newState);\n          return newState;\n        }\n      });\n    } catch (error) {\n      console.error('Failed to refresh user state:', error);\n      setUserState(prevState => prevState ? { ...prevState, isLoading: false } : null);\n    }\n  }, [account?.address, fetchWalletBalance, fetchDAOMembership, saveToStorage]);\n\n  // Update DAO membership data locally\n  const updateDAOMembership = useCallback((daoId: string, data: Partial<DAOMembershipData>) => {\n    setUserState(prevState => {\n      if (!prevState) return null;\n\n      const existingMembership = prevState.daoMemberships.get(daoId);\n      if (!existingMembership) return prevState;\n\n      const updatedMembership = {\n        ...existingMembership,\n        ...data,\n        lastUpdated: Date.now(),\n      };\n\n      const newMemberships = new Map(prevState.daoMemberships);\n      newMemberships.set(daoId, updatedMembership);\n\n      const newState = {\n        ...prevState,\n        daoMemberships: newMemberships,\n        lastGlobalUpdate: Date.now(),\n      };\n\n      saveToStorage(newState);\n      return newState;\n    });\n  }, [saveToStorage]);\n\n  // Refresh just the wallet balance\n  const refreshWalletBalance = useCallback(async () => {\n    if (!account?.address) return;\n\n    try {\n      const walletBalance = await fetchWalletBalance(account.address);\n      \n      setUserState(prevState => {\n        if (!prevState) return null;\n        \n        const updatedState = {\n          ...prevState,\n          totalBalance: walletBalance,\n          lastBalanceUpdate: Date.now(),\n        };\n        \n        saveToStorage(updatedState);\n        return updatedState;\n      });\n    } catch (error) {\n      console.error('Failed to refresh wallet balance:', error);\n    }\n  }, [account?.address, fetchWalletBalance, saveToStorage]);\n\n  // Update DAO member list\n  const updateDAOMemberList = useCallback((daoId: string, data: DAOMemberList) => {\n    setUserState(prevState => {\n      if (!prevState) return null;\n\n      const newMemberLists = new Map(prevState.daoMemberLists);\n      newMemberLists.set(daoId, { ...data, lastUpdated: Date.now() });\n\n      const newState = {\n        ...prevState,\n        daoMemberLists: newMemberLists,\n      };\n\n      saveToStorage(newState);\n      return newState;\n    });\n  }, [saveToStorage]);\n\n  // Get DAO member list\n  const getDAOMemberList = useCallback((daoId: string): DAOMemberList | null => {\n    return userState?.daoMemberLists.get(daoId) || null;\n  }, [userState]);\n\n  // Clear user state (on disconnect)\n  const clearUserState = useCallback(() => {\n    setUserState(null);\n    setIsInitialized(false);\n  }, []);\n\n  // Initialize state when wallet address becomes available\n  useEffect(() => {\n    if (!account?.address) {\n      setUserState(null);\n      setIsInitialized(false);\n      return;\n    }\n\n    const initializeState = async () => {\n      // Load from storage first\n      const storedState = loadFromStorage(account.address);\n      \n      if (storedState) {\n        // Check if cached data is still valid\n        const now = Date.now();\n        const isStale = now - storedState.lastGlobalUpdate > CACHE_DURATION;\n        \n        if (!isStale) {\n          setUserState(storedState);\n          setIsInitialized(true);\n          return;\n        }\n      }\n\n      // Initialize fresh state inline to avoid dependency issues\n      try {\n        const walletBalance = await fetchWalletBalance(account.address);\n\n        const newState: UserDAOState = {\n          walletAddress: account.address,\n          totalBalance: walletBalance,\n          lastBalanceUpdate: Date.now(),\n          daoMemberships: new Map(),\n          daoMemberLists: new Map(),\n          isLoading: false,\n          lastGlobalUpdate: Date.now(),\n        };\n\n        setUserState(newState);\n        saveToStorage(newState);\n        setIsInitialized(true);\n      } catch (error) {\n        console.error('Failed to initialize user state:', error);\n        setIsInitialized(true); // Still mark as initialized even if failed\n      }\n    };\n\n    initializeState();\n  }, [account?.address]);\n\n  // Auto-refresh stale wallet balance\n  useEffect(() => {\n    if (!userState || !account?.address) return;\n\n    const checkBalanceFreshness = () => {\n      const now = Date.now();\n      const balanceAge = now - (userState.lastBalanceUpdate || 0);\n      \n      // If balance is stale, refresh it\n      if (balanceAge > BALANCE_STALE_DURATION) {\n        console.log('Wallet balance is stale, refreshing...');\n        refreshWalletBalance();\n      }\n    };\n\n    // Check immediately\n    checkBalanceFreshness();\n\n    // Set up periodic checks\n    const interval = setInterval(checkBalanceFreshness, BALANCE_STALE_DURATION);\n    \n    return () => clearInterval(interval);\n  }, [userState?.lastBalanceUpdate, account?.address, refreshWalletBalance]);\n\n  const contextValue: DAOStateContextType = {\n    userState,\n    isInitialized,\n    refreshUserState,\n    refreshWalletBalance,\n    refreshDAOData,\n    updateDAOMembership,\n    updateDAOMemberList,\n    getDAOMemberList,\n    clearUserState,\n  };\n\n  return (\n    <DAOStateContext.Provider value={contextValue}>\n      {children}\n    </DAOStateContext.Provider>\n  );\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\contexts\\FilterContext.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'category' is defined but never used.","line":10,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"category"},"fix":{"range":[355,371],"text":""},"desc":"Remove unused variable 'category'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'query' is defined but never used.","line":12,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"query"},"fix":{"range":[455,468],"text":""},"desc":"Remove unused variable 'query'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'params' is defined but never used.","line":13,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"params"},"fix":{"range":[511,539],"text":""},"desc":"Remove unused variable 'params'."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext } from 'react';\r\nimport { DAO } from '../types/dao';\r\nimport { useFilter as useFilterHook, AdvancedFilterParams } from '../useServices/useFilter';\r\n\r\ninterface FilterContextType {\r\n    categories: string[];\r\n    isLoadingCats: boolean;\r\n    isFiltering: boolean;\r\n    filteredDAOs: DAO[];\r\n    filterByCategory: (category: string) => Promise<DAO[]>;\r\n    fetchFeaturedDAOs: () => Promise<void>;\r\n    searchDAOs: (query: string) => Promise<DAO[]>;\r\n    advancedFilter: (params: AdvancedFilterParams) => Promise<void>;\r\n    refreshCategories: () => Promise<void>;\r\n}\r\n\r\nconst FilterContext = createContext<FilterContextType | undefined>(undefined);\r\n\r\nexport const FilterProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const filterData = useFilterHook();\r\n\r\n    return (\r\n        <FilterContext.Provider value={filterData}>\r\n            {children}\r\n        </FilterContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useFilter = () => {\r\n    const context = useContext(FilterContext);\r\n    if (context === undefined) {\r\n        throw new Error('useFilter must be used within a FilterProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\hooks\\useActivities.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentPage'. Either include it or remove the dependency array.","line":145,"column":6,"nodeType":"ArrayExpression","endLine":145,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [itemsPerPage, fetchActivities, currentPage]","fix":{"range":[4786,4817],"text":"[itemsPerPage, fetchActivities, currentPage]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentPage'. Either include it or remove the dependency array.","line":250,"column":6,"nodeType":"ArrayExpression","endLine":250,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [itemsPerPage, fetchGlobalActivities, currentPage]","fix":{"range":[7957,7994],"text":"[itemsPerPage, fetchGlobalActivities, currentPage]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { useWallet } from '../contexts/CedraWalletProvider';\nimport { ActivityTracker, Activity, PaginatedActivities, PaginationOptions } from '../useServices/useActivityTracker';\nimport { ACTIVITY_CONFIG } from '../constants/activityConstants';\n\ninterface UseActivitiesOptions {\n  daoAddress?: string;\n  userAddress?: string;\n  autoRefresh?: boolean;\n  refreshInterval?: number;\n  limit?: number;\n  enablePagination?: boolean;\n  loadMoreMode?: boolean; // For infinite scroll or load more\n}\n\nexport const useActivities = (options: UseActivitiesOptions = {}) => {\n  const { account } = useWallet();\n  const {\n    daoAddress,\n    userAddress = account?.address,\n    autoRefresh = true,\n    refreshInterval = ACTIVITY_CONFIG.AUTO_REFRESH_INTERVAL,\n    limit = ACTIVITY_CONFIG.DEFAULT_LIMIT,\n    enablePagination = false,\n    loadMoreMode = false\n  } = options;\n\n  const [activities, setActivities] = useState<Activity[]>([]);\n  const [allActivities, setAllActivities] = useState<Activity[]>([]); // For load more mode\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [lastRefresh, setLastRefresh] = useState<number>(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(limit);\n  const [pagination, setPagination] = useState<PaginatedActivities['pagination'] | null>(null);\n\n  const fetchActivities = useCallback(async (page?: number, appendMode = false) => {\n    if (!daoAddress && !userAddress) {\n      setActivities([]);\n      setPagination(null);\n      return;\n    }\n\n    const targetPage = page ?? currentPage;\n    const paginationOptions: PaginationOptions = enablePagination \n      ? {\n          page: targetPage,\n          limit: itemsPerPage\n        }\n      : { limit: itemsPerPage };\n\n    if (!appendMode) {\n      setIsLoading(true);\n    }\n    setError(null);\n\n    try {\n      let result: PaginatedActivities;\n\n      if (daoAddress) {\n        console.log(`≡ƒöì Fetching activities for DAO: ${daoAddress} - Page: ${targetPage}`);\n        result = await ActivityTracker.getDAOActivities(daoAddress, paginationOptions);\n      } else if (userAddress) {\n        console.log(`≡ƒöì Fetching activities for user: ${userAddress} - Page: ${targetPage}`);\n        result = await ActivityTracker.getUserActivities(userAddress, paginationOptions);\n      } else {\n        throw new Error('No address specified');\n      }\n\n      if (loadMoreMode && appendMode) {\n        // Append new activities for infinite scroll/load more\n        setAllActivities(prev => [...prev, ...result.activities]);\n        setActivities(prev => [...prev, ...result.activities]);\n      } else {\n        // Replace activities for pagination\n        setActivities(result.activities);\n        setAllActivities(result.activities);\n      }\n\n      setPagination(result.pagination);\n      setLastRefresh(Date.now());\n      console.log(` Fetched ${result.activities.length} activities (Page ${targetPage})`);\n    } catch (err) {\n      console.error('Error fetching activities:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch activities');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [daoAddress, userAddress, currentPage, itemsPerPage, enablePagination, loadMoreMode]);\n\n  // Initial fetch\n  useEffect(() => {\n    fetchActivities();\n  }, [fetchActivities]);\n\n  // Auto-refresh setup\n  useEffect(() => {\n    if (!autoRefresh) return;\n\n    const interval = setInterval(() => {\n      fetchActivities();\n    }, refreshInterval);\n\n    return () => clearInterval(interval);\n  }, [autoRefresh, refreshInterval, fetchActivities]);\n\n  const refresh = useCallback(() => {\n    setCurrentPage(1);\n    setActivities([]);\n    setAllActivities([]);\n    fetchActivities(1);\n  }, [fetchActivities]);\n\n  const clearCache = useCallback(() => {\n    ActivityTracker.clearCache();\n    refresh();\n  }, [refresh]);\n\n  const goToPage = useCallback((page: number) => {\n    setCurrentPage(page);\n    fetchActivities(page);\n  }, [fetchActivities]);\n\n  const changeItemsPerPage = useCallback((newLimit: number) => {\n    setItemsPerPage(newLimit);\n    setCurrentPage(1);\n    setActivities([]);\n    setAllActivities([]);\n    // Fetch will be triggered by useEffect when itemsPerPage changes\n  }, []);\n\n  const loadMore = useCallback(() => {\n    if (pagination?.hasNextPage && !isLoading) {\n      const nextPage = currentPage + 1;\n      setCurrentPage(nextPage);\n      fetchActivities(nextPage, true); // true for append mode\n    }\n  }, [pagination?.hasNextPage, isLoading, currentPage, fetchActivities]);\n\n  // Trigger fetch when itemsPerPage changes\n  useEffect(() => {\n    if (currentPage === 1) {\n      fetchActivities(1);\n    }\n  }, [itemsPerPage, fetchActivities]);\n\n  return {\n    activities,\n    allActivities,\n    isLoading,\n    error,\n    lastRefresh,\n    pagination,\n    currentPage,\n    itemsPerPage,\n    refresh,\n    clearCache,\n    goToPage,\n    changeItemsPerPage,\n    loadMore\n  };\n};\n\nexport const useGlobalActivities = (options: {\n  limit?: number;\n  enablePagination?: boolean;\n  loadMoreMode?: boolean;\n} = {}) => {\n  const { limit = 100, enablePagination = false, loadMoreMode = false } = options;\n  \n  const [activities, setActivities] = useState<Activity[]>([]);\n  const [allActivities, setAllActivities] = useState<Activity[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(limit);\n  const [pagination, setPagination] = useState<PaginatedActivities['pagination'] | null>(null);\n\n  const fetchGlobalActivities = useCallback(async (page?: number, appendMode = false) => {\n    const targetPage = page ?? currentPage;\n    const paginationOptions: PaginationOptions = enablePagination \n      ? {\n          page: targetPage,\n          limit: itemsPerPage\n        }\n      : { limit: itemsPerPage };\n\n    if (!appendMode) {\n      setIsLoading(true);\n    }\n    setError(null);\n\n    try {\n      console.log(`≡ƒîì Fetching global activities - Page: ${targetPage}`);\n      const result = await ActivityTracker.getGlobalActivities(paginationOptions);\n      \n      if (loadMoreMode && appendMode) {\n        setAllActivities(prev => [...prev, ...result.activities]);\n        setActivities(prev => [...prev, ...result.activities]);\n      } else {\n        setActivities(result.activities);\n        setAllActivities(result.activities);\n      }\n\n      setPagination(result.pagination);\n      console.log(` Fetched ${result.activities.length} global activities (Page ${targetPage})`);\n    } catch (err) {\n      console.error('Error fetching global activities:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch global activities');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentPage, itemsPerPage, enablePagination, loadMoreMode]);\n\n  useEffect(() => {\n    fetchGlobalActivities();\n  }, [fetchGlobalActivities]);\n\n  const refresh = useCallback(() => {\n    setCurrentPage(1);\n    setActivities([]);\n    setAllActivities([]);\n    fetchGlobalActivities(1);\n  }, [fetchGlobalActivities]);\n\n  const goToPage = useCallback((page: number) => {\n    setCurrentPage(page);\n    fetchGlobalActivities(page);\n  }, [fetchGlobalActivities]);\n\n  const changeItemsPerPage = useCallback((newLimit: number) => {\n    setItemsPerPage(newLimit);\n    setCurrentPage(1);\n    setActivities([]);\n    setAllActivities([]);\n  }, []);\n\n  const loadMore = useCallback(() => {\n    if (pagination?.hasNextPage && !isLoading) {\n      const nextPage = currentPage + 1;\n      setCurrentPage(nextPage);\n      fetchGlobalActivities(nextPage, true);\n    }\n  }, [pagination?.hasNextPage, isLoading, currentPage, fetchGlobalActivities]);\n\n  useEffect(() => {\n    if (currentPage === 1) {\n      fetchGlobalActivities(1);\n    }\n  }, [itemsPerPage, fetchGlobalActivities]);\n\n  return {\n    activities,\n    allActivities,\n    isLoading,\n    error,\n    pagination,\n    currentPage,\n    itemsPerPage,\n    refresh,\n    goToPage,\n    changeItemsPerPage,\n    loadMore\n  };\n};\n\nexport const useUserActivities = (\n  userAddress?: string, \n  options: {\n    limit?: number;\n    enablePagination?: boolean;\n    loadMoreMode?: boolean;\n  } = {}\n) => {\n  const { account } = useWallet();\n  const { limit = 50, enablePagination = false, loadMoreMode = false } = options;\n  const address = userAddress || account?.address;\n\n  return useActivities({\n    userAddress: address,\n    limit,\n    enablePagination,\n    loadMoreMode,\n    autoRefresh: true,\n    refreshInterval: 30000\n  });\n};\n\nexport const useDAOActivities = (\n  daoAddress: string, \n  options: {\n    limit?: number;\n    enablePagination?: boolean;\n    loadMoreMode?: boolean;\n  } = {}\n) => {\n  const { limit = 50, enablePagination = false, loadMoreMode = false } = options;\n  \n  return useActivities({\n    daoAddress,\n    limit,\n    enablePagination,\n    loadMoreMode,\n    autoRefresh: true,\n    refreshInterval: 30000\n  });\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\hooks\\useDAOMembership.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'updates' is defined but never used.","line":13,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[425,460],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'userBalance' is assigned a value but never used.","line":28,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"userBalance"},"fix":{"range":[1058,1107],"text":""},"desc":"Remove unused variable 'userBalance'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userBalance' is assigned a value but never used.","line":28,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect, useState } from 'react';\nimport { useDAOState, DAOMembershipData } from '../contexts/DAOStateContext';\nimport { DAO } from '../types/dao';\n\nexport interface UseDAOMembershipReturn {\n  membershipData: DAOMembershipData | null;\n  isLoading: boolean;\n  isMember: boolean;\n  isStaker: boolean;\n  canJoinDAO: boolean;\n  needsMoreStake: number;\n  refresh: () => Promise<void>;\n  updateLocalState: (updates: Partial<DAOMembershipData>) => void;\n}\n\nexport function useDAOMembership(dao: DAO): UseDAOMembershipReturn {\n  const { userState, refreshDAOData, updateDAOMembership, isInitialized } = useDAOState();\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  // Get membership data for this DAO\n  const membershipData = userState?.daoMemberships.get(dao.id) || null;\n\n  // Derived state\n  const isMember = membershipData?.isMember || false;\n  const isStaker = membershipData?.isStaker || false;\n  const stakedAmount = membershipData?.stakedAmount || 0;\n  const minStakeRequired = membershipData?.minStakeRequired || 0;\n  const userBalance = userState?.totalBalance || 0;\n\n  // Check if user can join DAO (has enough balance + already staked enough)\n  const canJoinDAO = stakedAmount >= minStakeRequired;\n  \n  // Calculate how much more the user needs to stake\n  const needsMoreStake = Math.max(0, minStakeRequired - stakedAmount);\n\n  // Refresh this DAO's data\n  const refresh = useCallback(async () => {\n    if (!dao.id) return;\n    \n    setIsRefreshing(true);\n    try {\n      await refreshDAOData(dao.id, dao.name);\n    } finally {\n      setIsRefreshing(false);\n    }\n  }, [dao.id, dao.name, refreshDAOData]);\n\n  // Update local state (for optimistic updates)\n  const updateLocalState = useCallback((updates: Partial<DAOMembershipData>) => {\n    updateDAOMembership(dao.id, updates);\n  }, [dao.id, updateDAOMembership]);\n\n  // Auto-refresh if no data exists for this DAO and we're initialized\n  useEffect(() => {\n    if (isInitialized && !membershipData && !isRefreshing && dao.id) {\n      refresh();\n    }\n  }, [isInitialized, membershipData, isRefreshing, dao.id, refresh]);\n\n  return {\n    membershipData,\n    isLoading: isRefreshing || !isInitialized,\n    isMember,\n    isStaker,\n    canJoinDAO,\n    needsMoreStake,\n    refresh,\n    updateLocalState,\n  };\n}\n\n// Hook for getting user's overall DAO portfolio\nexport function useDAOPortfolio() {\n  const { userState, refreshWalletBalance } = useDAOState();\n\n  const totalDAOs = userState?.daoMemberships.size || 0;\n  const activeMemberships = Array.from(userState?.daoMemberships.values() || [])\n    .filter(membership => membership.isMember).length;\n  \n  const totalStaked = Array.from(userState?.daoMemberships.values() || [])\n    .reduce((sum, membership) => sum + membership.stakedAmount, 0);\n\n  const totalVotingPower = Array.from(userState?.daoMemberships.values() || [])\n    .reduce((sum, membership) => sum + membership.votingPower, 0);\n\n  return {\n    totalDAOs,\n    activeMemberships,\n    totalStaked,\n    totalVotingPower,\n    walletBalance: userState?.totalBalance || 0,\n    refresh: refreshWalletBalance,\n    memberships: Array.from(userState?.daoMemberships.values() || []),\n  };\n}\n\n// Hook for checking if cached data needs refresh\nexport function useDAODataFreshness(daoId: string) {\n  const { userState } = useDAOState();\n  const membershipData = userState?.daoMemberships.get(daoId);\n  \n  if (!membershipData) return { isStale: true, age: 0 };\n  \n  const age = Date.now() - membershipData.lastUpdated;\n  const isStale = age > 60000; // 1 minute\n  \n  return { isStale, age };\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\hooks\\useRealGrowthData.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2580,2583],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2580,2583],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2816,2819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2816,2819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4188,4191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4188,4191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":146,"column":13,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":146,"endColumn":66,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4827,5036],"text":"{ const amount = Number(event.data?.amount || 0) / 1e8; // Convert OCTAS to MOVE\n            monthlyData[monthKey].treasuryValue += amount;\n            monthlyData[monthKey].transactions += 1;\n            break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7257,7260],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7257,7260],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\n\nexport interface GrowthDataPoint {\n  date: string;\n  period: string; // \"Jan\", \"Feb\", etc. for display\n  totalDAOs: number;\n  newDAOs: number;\n  totalUsers: number;\n  totalVotes: number;\n  treasuryValue: number;\n  transactions: number;\n}\n\nexport interface RealGrowthData {\n  daoGrowth: GrowthDataPoint[];\n  userGrowth: GrowthDataPoint[];\n  votingActivity: GrowthDataPoint[];\n  treasuryGrowth: GrowthDataPoint[];\n  networkActivity: GrowthDataPoint[];\n  isLoading: boolean;\n  error: string | null;\n  lastUpdated: Date | null;\n}\n\n// We'll dynamically determine the start date from the first DAO creation event\n\nexport const useRealGrowthData = () => {\n  const [data, setData] = useState<RealGrowthData>({\n    daoGrowth: [],\n    userGrowth: [],\n    votingActivity: [],\n    treasuryGrowth: [],\n    networkActivity: [],\n    isLoading: true,\n    error: null,\n    lastUpdated: null\n  });\n\n  const fetchDAOCreationEvents = useCallback(async () => {\n    try {\n      // Fetch DAO creation events from the platform\n      const daoCreationEvents = await cedraClient.getModuleEventsByEventType({\n        eventType: `${MODULE_ADDRESS}::dao_core_file::DAOCreatedEvent` as `${string}::${string}::${string}`,\n        options: { limit: 1000 }\n      });\n\n      return daoCreationEvents;\n    } catch (error) {\n      console.error('Failed to fetch DAO creation events:', error);\n      return [];\n    }\n  }, []);\n\n  const fetchVotingEvents = useCallback(async () => {\n    try {\n      // Fetch voting events from proposals\n      const votingEvents = await cedraClient.getModuleEventsByEventType({\n        eventType: `${MODULE_ADDRESS}::proposal::VoteCastEvent` as `${string}::${string}::${string}`,\n        options: { limit: 1000 }\n      });\n\n      return votingEvents;\n    } catch (error) {\n      console.error('Failed to fetch voting events:', error);\n      return [];\n    }\n  }, []);\n\n  const fetchTreasuryEvents = useCallback(async () => {\n    try {\n      // Fetch treasury deposit events\n      const treasuryEvents = await cedraClient.getModuleEventsByEventType({\n        eventType: `${MODULE_ADDRESS}::treasury::TreasuryDepositEvent` as `${string}::${string}::${string}`,\n        options: { limit: 1000 }\n      });\n\n      return treasuryEvents;\n    } catch (error) {\n      console.error('Failed to fetch treasury events:', error);\n      return [];\n    }\n  }, []);\n\n  const aggregateDataByMonth = useCallback((events: any[], type: 'dao' | 'vote' | 'treasury') => {\n    const monthlyData: { [key: string]: GrowthDataPoint } = {};\n    \n    // Find the earliest event to determine start date\n    let earliestTimestamp = Infinity;\n    events.forEach((event: any) => {\n      const timestamp = Number(event.data?.timestamp || 0);\n      if (timestamp > 0 && timestamp < earliestTimestamp) {\n        earliestTimestamp = timestamp;\n      }\n    });\n\n    // If no valid events, start from 2 months ago (reasonable default)\n    const startDate = earliestTimestamp === Infinity \n      ? new Date(Date.now() - 60 * 24 * 60 * 60 * 1000) // 2 months ago\n      : new Date(earliestTimestamp * 1000);\n    \n    const endDate = new Date();\n    const current = new Date(startDate.getFullYear(), startDate.getMonth(), 1); // Start of month\n    \n    console.log(`[${type}] Date range: ${startDate.toISOString()} to ${endDate.toISOString()}`);\n    console.log(`[${type}] Events found: ${events.length}`);\n    \n    // Initialize all months from start to end\n    while (current <= endDate) {\n      const monthKey = `${current.getFullYear()}-${(current.getMonth() + 1).toString().padStart(2, '0')}`;\n      const monthLabel = current.toLocaleDateString('en-US', { month: 'short' });\n      \n      monthlyData[monthKey] = {\n        date: monthKey,\n        period: monthLabel,\n        totalDAOs: 0,\n        newDAOs: 0,\n        totalUsers: 0,\n        totalVotes: 0,\n        treasuryValue: 0,\n        transactions: 0\n      };\n      \n      current.setMonth(current.getMonth() + 1);\n    }\n\n    // Process events and aggregate by month\n    events.forEach((event: any) => {\n      const timestamp = Number(event.data?.timestamp || 0);\n      if (!timestamp) return;\n\n      const eventDate = new Date(timestamp * 1000); // Convert seconds to milliseconds\n      const monthKey = `${eventDate.getFullYear()}-${(eventDate.getMonth() + 1).toString().padStart(2, '0')}`;\n      \n      if (monthlyData[monthKey]) {\n        switch (type) {\n          case 'dao':\n            monthlyData[monthKey].newDAOs += 1;\n            break;\n          case 'vote':\n            monthlyData[monthKey].totalVotes += 1;\n            monthlyData[monthKey].transactions += 1;\n            break;\n          case 'treasury':\n            const amount = Number(event.data?.amount || 0) / 1e8; // Convert OCTAS to MOVE\n            monthlyData[monthKey].treasuryValue += amount;\n            monthlyData[monthKey].transactions += 1;\n            break;\n        }\n      }\n    });\n\n    // Calculate cumulative values\n    const sortedData = Object.values(monthlyData).sort((a, b) => a.date.localeCompare(b.date));\n    let cumulativeDAOs = 0;\n    let cumulativeTreasury = 0;\n\n    const result = sortedData.map(point => {\n      if (type === 'dao') {\n        cumulativeDAOs += point.newDAOs;\n        point.totalDAOs = cumulativeDAOs;\n      }\n      if (type === 'treasury') {\n        cumulativeTreasury += point.treasuryValue;\n        point.treasuryValue = cumulativeTreasury;\n      }\n      return point;\n    });\n    \n    console.log(`[${type}] Final data points: ${result.length} months`);\n    console.log(`[${type}] Sample data:`, result.slice(0, 3));\n    \n    return result;\n  }, []);\n\n  const fetchRealGrowthData = useCallback(async () => {\n    try {\n      setData(prev => ({ ...prev, isLoading: true, error: null }));\n\n      // Fetch all event data in parallel\n      const [daoEvents, votingEvents, treasuryEvents] = await Promise.all([\n        fetchDAOCreationEvents(),\n        fetchVotingEvents(),\n        fetchTreasuryEvents()\n      ]);\n\n      // Aggregate data by month\n      const daoGrowthData = aggregateDataByMonth(daoEvents, 'dao');\n      const votingData = aggregateDataByMonth(votingEvents, 'vote');\n      const treasuryData = aggregateDataByMonth(treasuryEvents, 'treasury');\n\n      // Create user growth data based on DAO creation and voting activity\n      const userGrowthData = daoGrowthData.map((point, index) => ({\n        ...point,\n        totalUsers: Math.max(point.totalDAOs * 3, votingData[index]?.totalVotes || 0) // Estimate 3 users per DAO minimum\n      }));\n\n      // Network activity combines voting and treasury transactions\n      const networkActivityData = daoGrowthData.map((point, index) => ({\n        ...point,\n        transactions: (votingData[index]?.transactions || 0) + (treasuryData[index]?.transactions || 0)\n      }));\n\n      setData({\n        daoGrowth: daoGrowthData,\n        userGrowth: userGrowthData,\n        votingActivity: votingData,\n        treasuryGrowth: treasuryData,\n        networkActivity: networkActivityData,\n        isLoading: false,\n        error: null,\n        lastUpdated: new Date()\n      });\n\n    } catch (error: any) {\n      console.error('Failed to fetch real growth data:', error);\n      setData(prev => ({\n        ...prev,\n        isLoading: false,\n        error: error.message || 'Failed to load growth data'\n      }));\n    }\n  }, [fetchDAOCreationEvents, fetchVotingEvents, fetchTreasuryEvents, aggregateDataByMonth]);\n\n  // Initial load and periodic refresh\n  useEffect(() => {\n    fetchRealGrowthData();\n    \n    // Refresh every 5 minutes\n    const interval = setInterval(fetchRealGrowthData, 5 * 60 * 1000);\n    \n    return () => clearInterval(interval);\n  }, [fetchRealGrowthData]);\n\n  return {\n    ...data,\n    refreshData: fetchRealGrowthData\n  };\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\hooks\\useSectionLoader.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":12,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[271,291],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\n\nexport interface SectionLoaderState {\n  isLoading: boolean;\n  error: string | null;\n  lastUpdated: Date | null;\n}\n\nexport interface SectionLoaderActions {\n  startLoading: () => void;\n  stopLoading: () => void;\n  setError: (error: string | null) => void;\n  clearError: () => void;\n  reset: () => void;\n}\n\nexport const useSectionLoader = (initialState?: Partial<SectionLoaderState>) => {\n  const [state, setState] = useState<SectionLoaderState>({\n    isLoading: false,\n    error: null,\n    lastUpdated: null,\n    ...initialState,\n  });\n\n  const startLoading = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      isLoading: true,\n      error: null,\n    }));\n  }, []);\n\n  const stopLoading = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      isLoading: false,\n      lastUpdated: new Date(),\n    }));\n  }, []);\n\n  const setError = useCallback((error: string | null) => {\n    setState(prev => ({\n      ...prev,\n      isLoading: false,\n      error,\n      lastUpdated: new Date(),\n    }));\n  }, []);\n\n  const clearError = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      error: null,\n    }));\n  }, []);\n\n  const reset = useCallback(() => {\n    setState({\n      isLoading: false,\n      error: null,\n      lastUpdated: null,\n    });\n  }, []);\n\n  const executeWithLoader = useCallback(async <T>(\n    asyncOperation: () => Promise<T>\n  ): Promise<T | null> => {\n    try {\n      startLoading();\n      const result = await asyncOperation();\n      stopLoading();\n      return result;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'An error occurred';\n      setError(errorMessage);\n      return null;\n    }\n  }, [startLoading, stopLoading, setError]);\n\n  return {\n    ...state,\n    startLoading,\n    stopLoading,\n    setError,\n    clearError,\n    reset,\n    executeWithLoader,\n  };\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\hooks\\useTreasury.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":31,"column":3,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":31,"endColumn":16,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[944,957],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1000,1003],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1000,1003],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1018,1021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1018,1021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":101,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":104,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1058,1061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1058,1061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3300,3303],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3300,3303],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":101,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3623,3624],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3749,3752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3749,3752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3779,3782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3779,3782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":113,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":113,"endColumn":20,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4211,4212],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":124,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":124,"endColumn":20,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4596,4597],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'cacheUserKey' and 'treasurySessionCache'. Either include them or remove the dependency array.","line":136,"column":6,"nodeType":"ArrayExpression","endLine":136,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [account.address, cacheUserKey, treasurySessionCache]","fix":{"range":[4979,4997],"text":"[account.address, cacheUserKey, treasurySessionCache]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'cacheUserKey' and 'treasurySessionCache'. Either include them or remove the dependency array.","line":156,"column":6,"nodeType":"ArrayExpression","endLine":156,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [account.address, cacheUserKey, daoId, treasurySessionCache]","fix":{"range":[5617,5642],"text":"[account.address, cacheUserKey, daoId, treasurySessionCache]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":190,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6677,6680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6677,6680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":212,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":212,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":212,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":212,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'cacheBaseKey' and 'treasurySessionCache'. Either include them or remove the dependency array.","line":226,"column":6,"nodeType":"ArrayExpression","endLine":226,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [cacheBaseKey, daoId, treasurySessionCache]","fix":{"range":[8131,8138],"text":"[cacheBaseKey, daoId, treasurySessionCache]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":241,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8844,8847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8844,8847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":249,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9195,9198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9195,9198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":262,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":262,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9609,9612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9609,9612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":263,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9669,9672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9669,9672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":263,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9683,9686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9683,9686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":283,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":283,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":283,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":283,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":283,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10965,10968],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10965,10968],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":290,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":290,"endColumn":22,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[11177,11190],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":291,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":291,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11242,11245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11242,11245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":316,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":316,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":316,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":316,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":316,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":316,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12226,12229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12226,12229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'cacheBaseKey', 'treasuryData.balance', and 'treasurySessionCache'. Either include them or remove the dependency array.","line":329,"column":6,"nodeType":"ArrayExpression","endLine":329,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [cacheBaseKey, daoId, treasuryData.balance, treasurySessionCache]","fix":{"range":[12638,12645],"text":"[cacheBaseKey, daoId, treasuryData.balance, treasurySessionCache]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":356,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":356,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":356,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":356,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":371,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":371,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14082,14085],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14082,14085],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":385,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14554,14557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14554,14557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":385,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14587,14590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14587,14590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":402,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":402,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15241,15244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15241,15244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":403,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":403,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15272,15275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15272,15275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":406,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":406,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15374,15377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15374,15377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":408,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":408,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15468,15471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15468,15471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":416,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":416,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15679,15682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15679,15682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'fetchTreasuryTransactions', 'treasuryData.allowsPublicDeposits', and 'treasuryData.treasuryObject'. Either include them or remove the dependency array.","line":438,"column":6,"nodeType":"ArrayExpression","endLine":438,"endColumn":98,"suggestions":[{"desc":"Update the dependencies array to be: [account, signAndSubmitTransaction, daoId, userBalance, treasuryData.treasuryObject, treasuryData.allowsPublicDeposits, fetchTreasuryData, fetchUserBalance, fetchTreasuryTransactions]","fix":{"range":[17499,17591],"text":"[account, signAndSubmitTransaction, daoId, userBalance, treasuryData.treasuryObject, treasuryData.allowsPublicDeposits, fetchTreasuryData, fetchUserBalance, fetchTreasuryTransactions]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":470,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":470,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18697,18700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18697,18700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":470,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":470,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18743,18746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18743,18746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":485,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":485,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19267,19270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19267,19270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":486,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":486,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19298,19301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19298,19301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":489,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":489,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19400,19403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19400,19403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":491,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":491,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19494,19497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19494,19497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":500,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":500,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19727,19730],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19727,19730],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'fetchTreasuryTransactions' and 'treasuryData.treasuryObject'. Either include them or remove the dependency array.","line":517,"column":6,"nodeType":"ArrayExpression","endLine":517,"endColumn":145,"suggestions":[{"desc":"Update the dependencies array to be: [account, signAndSubmitTransaction, daoId, isAdmin, treasuryData.balance, treasuryData.remainingDaily, treasuryData.treasuryObject, fetchTreasuryData, fetchUserBalance, fetchTreasuryTransactions]","fix":{"range":[20652,20791],"text":"[account, signAndSubmitTransaction, daoId, isAdmin, treasuryData.balance, treasuryData.remainingDaily, treasuryData.treasuryObject, fetchTreasuryData, fetchUserBalance, fetchTreasuryTransactions]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":579,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":579,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23122,23125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23122,23125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":583,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":583,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":583,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":583,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":594,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":594,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23617,23620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23617,23620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":594,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":594,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23650,23653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23650,23653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":602,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":602,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23933,23936],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23933,23936],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":603,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":603,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23962,23965],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23962,23965],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":605,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":605,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24056,24059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24056,24059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":614,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":614,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24273,24276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24273,24276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":644,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":644,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25627,25630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25627,25630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":644,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":644,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25673,25676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25673,25676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":652,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":652,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25993,25996],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25993,25996],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":653,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":653,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26022,26025],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26022,26025],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":655,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":655,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26116,26119],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26116,26119],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":662,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":662,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26230,26233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26230,26233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":64,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { useWallet } from '../contexts/CedraWalletProvider';\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { safeView } from '../utils/rpcUtils';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\n\ninterface TreasuryData {\n  balance: number;\n  dailyWithdrawalLimit: number;\n  dailyWithdrawn: number;\n  remainingDaily: number;\n  lastWithdrawalDay: number;\n  isLoading: boolean;\n  error: string | null;\n  treasuryObject?: string; // Store the treasury object address for object-based operations\n  allowsPublicDeposits?: boolean;\n}\n\ninterface TreasuryTransaction {\n  type: 'deposit' | 'withdrawal';\n  amount: number;\n  from?: string;\n  to?: string;\n  timestamp: string;\n  txHash: string;\n}\n\nexport const useTreasury = (daoId: string) => {\n  const { account, signAndSubmitTransaction } = useWallet();\n  // Session cache with TTL + SWR (similar to Members)\n  // @ts-ignore\n  const treasurySessionCache: Map<string, any> = (window as any).__treasuryHookCache || ((window as any).__treasuryHookCache = new Map());\n  // const TREASURY_TTL_MS = 5 * 60 * 1000; // 5 minutes fresh\n  const TREASURY_MAX_STALE_MS = 10 * 60 * 1000; // 10 minutes allowable stale\n  const cacheNow = Date.now();\n  const cacheBaseKey = `dao_${daoId}`;\n  const cacheUserKey = `${cacheBaseKey}_user_${account?.address || 'guest'}`;\n\n  const getCached = <T,>(key: string): T | null => {\n    const cached = treasurySessionCache.get(key);\n    if (!cached) return null;\n    const age = cacheNow - (cached.timestamp || 0);\n    if (age < TREASURY_MAX_STALE_MS) return cached.data as T;\n    return null;\n  };\n\n  const [treasuryData, setTreasuryData] = useState<TreasuryData>(() => {\n    const cached = getCached<TreasuryData>(`${cacheBaseKey}_treasuryData`);\n    if (cached) {\n      return { ...cached, isLoading: false, error: null } as TreasuryData;\n    }\n    return {\n      balance: 0,\n      dailyWithdrawalLimit: 0,\n      dailyWithdrawn: 0,\n      remainingDaily: 0,\n      lastWithdrawalDay: 0,\n      isLoading: true,\n      error: null\n    };\n  });\n\n  const [transactions, setTransactions] = useState<TreasuryTransaction[]>(() => {\n    const cached = getCached<TreasuryTransaction[]>(`${cacheBaseKey}_transactions`);\n    return cached || [];\n  });\n\n  const [userBalance, setUserBalance] = useState<number>(() => {\n    const cached = getCached<number>(`${cacheUserKey}_balance`);\n    return typeof cached === 'number' ? cached : 0;\n  });\n\n  const [isAdmin, setIsAdmin] = useState<boolean>(() => {\n    const cached = getCached<boolean>(`${cacheUserKey}_isAdmin`);\n    return typeof cached === 'boolean' ? cached : false;\n  });\n\n  // Convert OCTAS to CEDRA - using 1e8 (100,000,000) as per Cedra blockchain standard\n  const toCEDRA = (octas: number): number => octas / 1e8;\n  const fromCEDRA = (cedra: number): number => Math.floor(cedra * 1e8);\n\n  // Fetch user CEDRA balance - exact same approach as DAOStaking\n  const fetchUserBalance = useCallback(async () => {\n    if (!account?.address) {\n      setUserBalance(0);\n      return;\n    }\n\n    try {\n      const fetchWalletBalanceCEDRA = async (): Promise<number> => {\n        if (!account?.address) return 0;\n        // 1) Try direct CoinStore for CedraCoin (CEDRA)\n        try {\n          const res: any = await cedraClient.getAccountResource({\n            accountAddress: account.address,\n            resourceType: `0x1::coin::CoinStore<0x1::cedra_coin::CedraCoin>`,\n          });\n          const raw = Number(res?.data?.coin?.value ?? 0);\n          const mv = raw / 1e8;\n          if (mv > 0) return mv;\n        } catch { }\n        // 2) Try generic scan of resources for any CoinStore with non-zero value\n        try {\n          const resources: any[] = await (cedraClient as any).getAccountResources?.({ accountAddress: account.address });\n          if (Array.isArray(resources)) {\n            for (const r of resources) {\n              if (typeof r?.type === 'string' && r.type.startsWith('0x1::coin::CoinStore<') && r.data?.coin?.value) {\n                const raw = Number(r.data.coin.value || 0);\n                if (raw > 0) return raw / 1e8;\n              }\n            }\n          }\n        } catch { }\n        // 3) Last fallback: view function\n        try {\n          const balRes = await cedraClient.view({\n            payload: {\n              function: `0x1::coin::balance`,\n              typeArguments: [\"0x1::cedra_coin::CedraCoin\"],\n              functionArguments: [account.address],\n            },\n          });\n          return Number(balRes[0] || 0) / 1e8;\n        } catch { }\n        return 0;\n      };\n\n      const walletBalance = await fetchWalletBalanceCEDRA();\n      setUserBalance(walletBalance);\n      // cache user balance\n      treasurySessionCache.set(`${cacheUserKey}_balance`, { data: walletBalance, timestamp: Date.now() });\n    } catch (error) {\n      console.error('Failed to fetch user balance:', error);\n      setUserBalance(0);\n    }\n  }, [account?.address]);\n\n  // Check if user is admin\n  const checkAdminStatus = useCallback(async () => {\n    if (!account?.address || !daoId) return;\n\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::admin::is_admin`,\n          functionArguments: [daoId, account.address]\n        }\n      });\n      const admin = Boolean(result[0]);\n      setIsAdmin(admin);\n      treasurySessionCache.set(`${cacheUserKey}_isAdmin`, { data: admin, timestamp: Date.now() });\n    } catch (error) {\n      console.warn('Failed to check admin status:', error);\n      setIsAdmin(false);\n    }\n  }, [account?.address, daoId]);\n\n  // Fetch treasury transactions from activity tracker contract\n  const fetchTreasuryTransactions = useCallback(async () => {\n    try {\n      if (!daoId) {\n        setTransactions([]);\n        return;\n      }\n\n      // Get DAO activity IDs from activity tracker\n      const activityIdsRes = await safeView({\n        function: `${MODULE_ADDRESS}::activity_tracker::get_dao_activities`,\n        functionArguments: [daoId]\n      });\n\n      if (!activityIdsRes || !Array.isArray(activityIdsRes[0])) {\n        setTransactions([]);\n        return;\n      }\n\n      const activityIds = activityIdsRes[0] as number[];\n      const txs: TreasuryTransaction[] = [];\n\n      // Fetch each activity and filter for treasury-related ones\n      for (const id of activityIds) {\n        try {\n          const activityRes = await safeView({\n            function: `${MODULE_ADDRESS}::activity_tracker::get_activity_by_id`,\n            functionArguments: [id]\n          });\n\n          if (!activityRes) continue;\n\n          const data = activityRes[0] as any;\n          const activityType = Number(data?.activity_type || 0);\n\n          // Filter for treasury activities (9 = deposit, 10 = withdrawal)\n          if (activityType === 9 || activityType === 10) {\n            const amount = Number(data?.amount || 0);\n            const timestamp = Number(data?.timestamp || 0);\n            const user = String(data?.user_address || '');\n            const txHash = data?.transaction_hash ?\n              (Array.isArray(data.transaction_hash) ? '' : String(data.transaction_hash)) : '';\n\n            if (amount > 0) {\n              txs.push({\n                type: activityType === 9 ? 'deposit' : 'withdrawal',\n                amount: toCEDRA(amount),\n                from: activityType === 9 ? user : undefined,\n                to: activityType === 10 ? user : undefined,\n                timestamp: new Date(timestamp * 1000).toISOString(),\n                txHash: txHash,\n              });\n            }\n          }\n        } catch (err) {\n          // Skip failed activity fetches\n          continue;\n        }\n      }\n\n      // Sort by timestamp (newest first)\n      txs.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n      setTransactions(txs);\n      treasurySessionCache.set(`${cacheBaseKey}_transactions`, { data: txs, timestamp: Date.now() });\n    } catch (err) {\n      console.warn(' Failed to fetch treasury transactions:', err);\n      setTransactions([]);\n    }\n  }, [daoId]);\n\n  // Fetch treasury data from blockchain\n  const fetchTreasuryData = useCallback(async () => {\n    if (!daoId) return;\n\n    try {\n      setTreasuryData(prev => ({ ...prev, isLoading: true, error: null }));\n      // Fire object lookup and legacy balance in parallel for fastest first paint\n      const [treasuryObjectRes, legacyBalanceRes] = await Promise.allSettled([\n        safeView({ function: `${MODULE_ADDRESS}::dao_core_file::get_treasury_object`, functionArguments: [daoId] }, `treasury_obj_${daoId}`),\n        safeView({ function: `${MODULE_ADDRESS}::treasury::get_balance`, functionArguments: [daoId] }, `treasury_legacy_${daoId}`),\n      ]);\n\n      let balance = 0;\n      let treasuryObject: any = null;\n      let dailyWithdrawalLimit = 0;\n      let lastWithdrawalDay = 0;\n      let dailyWithdrawn = 0;\n      let allowsPublicDeposits = false;\n\n      // If legacy balance is available and > 0, paint it immediately for faster UI feedback\n      if (legacyBalanceRes.status === 'fulfilled') {\n        const quickBalanceRaw = (legacyBalanceRes as any).value?.[0];\n        const quickBalance = Number(quickBalanceRaw || 0) / 1e8;\n        if (quickBalance > 0) {\n          setTreasuryData(prev => ({\n            ...prev,\n            balance: quickBalance,\n            isLoading: false,\n            error: null,\n          }));\n        }\n      }\n\n      // Use treasury object if available\n      if (treasuryObjectRes.status === 'fulfilled' && (treasuryObjectRes as any).value) {\n        const rawObj = ((treasuryObjectRes as any).value as any)?.[0];\n        // Normalize to the underlying object address string (handles { inner, value, address } shapes)\n        const objectAddress = typeof rawObj === 'string'\n          ? rawObj\n          : (rawObj?.inner || rawObj?.value || rawObj?.address || rawObj);\n        treasuryObject = objectAddress;\n        try {\n          // Prefer full info when object is known - use the raw object directly\n          const infoRes = await safeView({ function: `${MODULE_ADDRESS}::treasury::get_treasury_info`, functionArguments: [objectAddress] }, `treasury_info_${daoId}`);\n          if (Array.isArray(infoRes) && infoRes.length >= 6) {\n            balance = Number(infoRes[0] || 0) / 1e8;\n            dailyWithdrawalLimit = Number(infoRes[1] || 0) / 1e8;\n            lastWithdrawalDay = Number(infoRes[2] || 0);\n            dailyWithdrawn = Number(infoRes[3] || 0) / 1e8;\n            allowsPublicDeposits = Boolean(infoRes[5]);\n          } else {\n            // Fallback to balance-only view if needed\n            const balanceResult = await safeView({ function: `${MODULE_ADDRESS}::treasury::get_balance_from_object`, functionArguments: [objectAddress] }, `treasury_obj_balance_${daoId}`);\n            balance = Number(balanceResult[0] || 0) / 1e8;\n          }\n        } catch (error: any) {\n          // Silent fallback to legacy\n        }\n      }\n\n      // Use legacy balance if object approach failed or unavailable\n      if (balance === 0 && legacyBalanceRes.status === 'fulfilled') {\n        // @ts-ignore\n        const legacy = Number((legacyBalanceRes as any).value?.[0] || 0) / 1e8;\n        balance = legacy;\n      }\n\n      // Fallbacks if object path unavailable\n      if (dailyWithdrawalLimit === 0) {\n        dailyWithdrawalLimit = 10; // default in CEDRA tokens: 10 CEDRA\n      }\n      const currentDay = Math.floor(Date.now() / 1000 / 86400);\n      const remainingDaily = dailyWithdrawalLimit - (lastWithdrawalDay === currentDay ? dailyWithdrawn : 0);\n\n      const newTreasuryData = {\n        balance: balance > 0 ? balance : (treasuryData.balance || 0),\n        dailyWithdrawalLimit,\n        dailyWithdrawn,\n        remainingDaily,\n        lastWithdrawalDay: currentDay,\n        isLoading: false,\n        error: null,\n        treasuryObject, // Store the treasury object for future use\n        allowsPublicDeposits\n      };\n      setTreasuryData(prev => ({ ...prev, ...newTreasuryData }));\n      treasurySessionCache.set(`${cacheBaseKey}_treasuryData`, { data: { ...newTreasuryData }, timestamp: Date.now() });\n\n    } catch (error: any) {\n      // Set reasonable defaults for missing treasury data\n      setTreasuryData({\n        balance: 0,\n        dailyWithdrawalLimit: 10,\n        dailyWithdrawn: 0,\n        remainingDaily: 10,\n        lastWithdrawalDay: Math.floor(Date.now() / 1000 / 86400),\n        isLoading: false,\n        error: null, // Don't show error, just display 0 balance\n        allowsPublicDeposits: true\n      });\n    }\n  }, [daoId]);\n\n  // Deposit tokens to treasury\n  const deposit = useCallback(async (amount: number): Promise<boolean> => {\n    if (!account || !signAndSubmitTransaction || !daoId) {\n      throw new Error('Wallet not connected or DAO ID missing');\n    }\n\n    if (amount <= 0) {\n      throw new Error('Amount must be greater than 0');\n    }\n\n    if (amount > userBalance) {\n      throw new Error(`Insufficient balance. You have ${userBalance.toFixed(3)} CEDRA available`);\n    }\n\n    try {\n      const amountOctas = Math.floor(amount * 1e8);\n\n      // Ensure user has CedraCoin store\n      // Some networks/wallets do not expose an entry function for coin registration.\n      // In such cases, receiving any amount of CEDRA auto-creates the store.\n      try {\n        await cedraClient.getAccountResource({\n          accountAddress: account.address,\n          resourceType: `0x1::coin::CoinStore<0x1::cedra_coin::CedraCoin>`,\n        });\n      } catch (e) {\n        console.log('CedraCoin store not found; skipping in-app registration.');\n      }\n\n      // Get treasury object\n      let treasuryObject = treasuryData.treasuryObject;\n\n      if (!treasuryObject) {\n        try {\n          const objectResult = await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::dao_core_file::get_treasury_object`,\n              functionArguments: [daoId]\n            }\n          });\n          treasuryObject = (objectResult as any)?.[0];\n          if (treasuryObject) {\n            setTreasuryData(prev => ({ ...prev, treasuryObject }));\n          }\n        } catch (error) {\n          console.error('Failed to fetch treasury object:', error);\n        }\n      }\n\n      // Use object-based deposit if treasury object is available\n      let payload;\n      if (treasuryObject) {\n        const objectAddress = typeof treasuryObject === 'string'\n          ? treasuryObject\n          : (treasuryObject as any).inner || (treasuryObject as any).value || treasuryObject;\n\n        payload = {\n          function: `${MODULE_ADDRESS}::treasury::deposit_to_object_typed`,\n          type_arguments: ['0x1::cedra_coin::CedraCoin'],\n          typeArguments: ['0x1::cedra_coin::CedraCoin'],\n          functionArguments: [objectAddress, amountOctas.toString()],\n          arguments: [objectAddress, amountOctas.toString()],\n        };\n      } else {\n        payload = {\n          function: `${MODULE_ADDRESS}::treasury::deposit`,\n          typeArguments: [],\n          functionArguments: [daoId, amountOctas.toString()],\n        };\n      }\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (!tx || !(tx as any).hash) {\n        throw new Error('Transaction cancelled by user');\n      }\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({\n          transactionHash: (tx as any).hash,\n          options: { checkSuccess: true }\n        });\n      }\n\n      await Promise.all([fetchTreasuryData(), fetchUserBalance(), fetchTreasuryTransactions()]);\n      return true;\n\n    } catch (error: any) {\n      console.error('Deposit failed:', error);\n\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Transaction cancelled by user');\n      } else if (error.message?.includes('not an entry function')) {\n        throw new Error('Wallet error: attempted to call a non-entry function. Please try again.');\n      } else if (error.message?.includes('insufficient') || error.message?.includes('0x6507')) {\n        throw new Error('Insufficient CEDRA balance for transaction and gas fees');\n      } else if (error.message?.includes('0x97') || error.message?.includes('not_member')) {\n        const publicDepositsStatus = treasuryData.allowsPublicDeposits ? 'enabled' : 'disabled';\n        throw new Error(`Deposit denied: You must be a DAO member or admin to deposit. Public deposits are currently ${publicDepositsStatus}. ${treasuryData.allowsPublicDeposits ? 'This may be a contract bug - public deposits should allow anyone to deposit.' : 'Ask a DAO admin to enable public deposits or join as a member first.'}`);\n      } else if (error.message?.includes('0xa') || error.message?.includes('already_exists')) {\n        throw new Error('Object or resource already exists. This may be due to an invalid treasury object format or a duplicate registration.');\n      } else if (error.message?.includes('0x8') || error.message?.includes('not_found')) {\n        throw new Error('Treasury not found. This DAO may use a newer treasury system that requires different deposit methods.');\n      } else if (error.message?.includes('0x1') || error.message?.includes('not_admin')) {\n        throw new Error('Permission denied. You may not have the required permissions to deposit to this treasury.');\n      } else {\n        throw new Error(error.message || 'Deposit transaction failed');\n      }\n    }\n  }, [account, signAndSubmitTransaction, daoId, userBalance, fetchTreasuryData, fetchUserBalance]);\n\n  // Withdraw tokens from treasury (admin only)\n  const withdraw = useCallback(async (amount: number): Promise<boolean> => {\n    if (!account || !signAndSubmitTransaction || !daoId) {\n      throw new Error('Wallet not connected or DAO ID missing');\n    }\n\n    if (!isAdmin) {\n      throw new Error('Only DAO admins can withdraw from treasury');\n    }\n\n    if (amount <= 0) {\n      throw new Error('Amount must be greater than 0');\n    }\n\n    if (amount > treasuryData.balance) {\n      throw new Error(`Insufficient treasury balance. Available: ${treasuryData.balance.toFixed(3)} CEDRA`);\n    }\n\n    if (amount > treasuryData.remainingDaily) {\n      throw new Error(`Exceeds daily withdrawal limit. Remaining today: ${treasuryData.remainingDaily.toFixed(3)} CEDRA`);\n    }\n\n    try {\n      const amountOctas = Math.floor(amount * 1e8);\n\n      // Use object-based withdraw function\n      let payload;\n      if (treasuryData.treasuryObject) {\n        const objectAddress = typeof treasuryData.treasuryObject === 'string'\n          ? treasuryData.treasuryObject\n          : (treasuryData.treasuryObject as any).inner || (treasuryData.treasuryObject as any).value || treasuryData.treasuryObject;\n\n        payload = {\n          function: `${MODULE_ADDRESS}::treasury::withdraw_from_object`,\n          typeArguments: [],\n          functionArguments: [daoId, objectAddress, amountOctas.toString()],\n        };\n      } else {\n        payload = {\n          function: `${MODULE_ADDRESS}::treasury::withdraw`,\n          typeArguments: [],\n          functionArguments: [daoId, amountOctas.toString()],\n        };\n      }\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (!tx || !(tx as any).hash) {\n        throw new Error('Transaction cancelled by user');\n      }\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({\n          transactionHash: (tx as any).hash,\n          options: { checkSuccess: true }\n        });\n      }\n\n      // Refresh data\n      await Promise.all([fetchTreasuryData(), fetchUserBalance(), fetchTreasuryTransactions()]);\n      return true;\n\n    } catch (error: any) {\n      console.error('Withdrawal failed:', error);\n\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Transaction cancelled by user');\n      } else if (error.message?.includes('not_admin') || error.message?.includes('0x1')) {\n        throw new Error('Only DAO admins can withdraw from treasury');\n      } else if (error.message?.includes('withdrawal_limit_exceeded')) {\n        throw new Error('Daily withdrawal limit exceeded');\n      } else if (error.message?.includes('insufficient_treasury')) {\n        throw new Error('Insufficient treasury balance');\n      } else if (error.message?.includes('0x8') || error.message?.includes('not_found')) {\n        throw new Error('Treasury not found. This DAO may use a newer treasury system that requires different withdrawal methods.');\n      } else {\n        throw new Error(error.message || 'Withdrawal transaction failed');\n      }\n    }\n  }, [account, signAndSubmitTransaction, daoId, isAdmin, treasuryData.balance, treasuryData.remainingDaily, fetchTreasuryData, fetchUserBalance]);\n\n  // Initialize data fetching with timeout protection\n  useEffect(() => {\n    if (daoId) {\n      // Always fetch treasury data - this includes balance and basic info\n      const basicTasks = [fetchTreasuryData(), fetchTreasuryTransactions()];\n\n      // Add wallet-specific tasks only if connected\n      const allTasks = account?.address\n        ? [...basicTasks, fetchUserBalance(), checkAdminStatus()]\n        : basicTasks;\n\n      // Add timeout to prevent hanging on slow network (increased to 15 seconds)\n      Promise.race([\n        Promise.all(allTasks),\n        new Promise((_, reject) => setTimeout(() => reject(new Error('Treasury data fetch timeout')), 15000))\n      ]).catch(() => {\n        // Silent - data will still be available even if some requests timeout\n      });\n    }\n  }, [daoId, account?.address, fetchTreasuryData, fetchUserBalance, checkAdminStatus, fetchTreasuryTransactions]);\n\n  // Refresh data every 60 seconds\n  useEffect(() => {\n    if (!daoId) return;\n\n    const interval = setInterval(() => {\n      // Always refresh treasury data and transactions\n      const basicTasks = [fetchTreasuryData(), fetchTreasuryTransactions()];\n\n      // Add wallet-specific refresh only if connected\n      const allTasks = account?.address\n        ? [...basicTasks, fetchUserBalance(), checkAdminStatus()]\n        : basicTasks;\n\n      Promise.all(allTasks);\n    }, 60000);\n\n    return () => clearInterval(interval);\n  }, [daoId, account?.address, fetchTreasuryData, fetchUserBalance, checkAdminStatus, fetchTreasuryTransactions]);\n\n  // Toggle public deposits (admin only)\n  const togglePublicDeposits = useCallback(async (allow: boolean): Promise<boolean> => {\n    if (!account || !signAndSubmitTransaction || !daoId) {\n      throw new Error('Wallet not connected or DAO ID missing');\n    }\n\n    if (!isAdmin) {\n      throw new Error('Only DAO admins can change public deposit settings');\n    }\n\n    try {\n      // Fetch treasury object if not available\n      let treasuryObject = treasuryData.treasuryObject;\n\n      if (!treasuryObject) {\n        try {\n          const objectResult = await safeView(\n            { function: `${MODULE_ADDRESS}::dao_core_file::get_treasury_object`, functionArguments: [daoId] },\n            `treasury_obj_refresh_${daoId}`\n          );\n          treasuryObject = (objectResult as any)?.[0];\n          if (treasuryObject) {\n            setTreasuryData(prev => ({ ...prev, treasuryObject }));\n          }\n        } catch (error) {\n          // Silent fail, will throw error below if still not found\n        }\n      }\n\n      if (!treasuryObject) {\n        throw new Error('Treasury object not found. The DAO may not have a treasury initialized yet.');\n      }\n\n      const objectAddress = typeof treasuryObject === 'string'\n        ? treasuryObject\n        : (treasuryObject as any).inner || (treasuryObject as any).value || treasuryObject;\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::treasury::set_public_deposits`,\n        typeArguments: [],\n        functionArguments: [daoId, objectAddress, allow],\n      };\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({\n          transactionHash: (tx as any).hash,\n          options: { checkSuccess: true }\n        });\n      }\n\n      // Refresh treasury data to get updated public deposits setting\n      await fetchTreasuryData();\n      return true;\n\n    } catch (error: any) {\n      console.error('Toggle public deposits failed:', error);\n\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Transaction cancelled by user');\n      } else if (error.message?.includes('not_admin') || error.message?.includes('0x1')) {\n        throw new Error('Only DAO admins can change public deposit settings');\n      } else if (error.message?.includes('0x8') || error.message?.includes('not_found')) {\n        throw new Error('Treasury not found. Cannot update public deposit settings.');\n      } else {\n        throw new Error(error.message || 'Failed to update public deposit settings');\n      }\n    }\n  }, [account, signAndSubmitTransaction, daoId, isAdmin, treasuryData.treasuryObject, fetchTreasuryData]);\n\n  // Vault-related functions\n  const depositToDAOVault = useCallback(async (vaultAddress: string, amount: number): Promise<boolean> => {\n    if (!account || !signAndSubmitTransaction || !treasuryData.treasuryObject) {\n      throw new Error('Wallet not connected or treasury not available');\n    }\n\n    if (amount <= 0) {\n      throw new Error('Amount must be greater than 0');\n    }\n\n    try {\n      const amountRaw = Math.floor(amount * 1e6);\n\n      const objectAddress = typeof treasuryData.treasuryObject === 'string'\n        ? treasuryData.treasuryObject\n        : (treasuryData.treasuryObject as any).inner || (treasuryData.treasuryObject as any).value || treasuryData.treasuryObject;\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::treasury::user_deposit_to_vault`,\n        typeArguments: [],\n        functionArguments: [objectAddress, vaultAddress, amountRaw.toString()],\n      };\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({\n          transactionHash: (tx as any).hash,\n          options: { checkSuccess: true }\n        });\n      }\n\n      return true;\n\n    } catch (error: any) {\n      console.error('Vault deposit failed:', error);\n\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Transaction cancelled by user');\n      } else if (error.message?.includes('not_member')) {\n        throw new Error('You must be a DAO member to deposit to vaults');\n      } else if (error.message?.includes('insufficient')) {\n        throw new Error('Insufficient token balance');\n      } else {\n        throw new Error(error.message || 'Vault deposit failed');\n      }\n    }\n  }, [account, signAndSubmitTransaction, treasuryData.treasuryObject]);\n\n  const getDAOVaults = useCallback(async (): Promise<string[]> => {\n    if (!treasuryData.treasuryObject) return [];\n\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::treasury::get_dao_vaults`,\n          functionArguments: [treasuryData.treasuryObject]\n        }\n      });\n      return (result[0] as string[]) || [];\n    } catch (error) {\n      console.warn('Failed to fetch DAO vaults:', error);\n      return [];\n    }\n  }, [treasuryData.treasuryObject]);\n\n  return {\n    treasuryData,\n    transactions,\n    userBalance,\n    isAdmin,\n    deposit,\n    withdraw,\n    togglePublicDeposits,\n    depositToDAOVault,\n    getDAOVaults,\n    refreshData: () => Promise.all([fetchTreasuryData(), fetchUserBalance(), checkAdminStatus(), fetchTreasuryTransactions()]),\n    toCEDRA,\n    fromCEDRA\n  };\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\hooks\\useVault.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'VaultBalance' is defined but never used.","line":20,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"VaultBalance"},"fix":{"range":[540,552],"text":""},"desc":"Remove unused variable 'VaultBalance'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VaultBalance' is defined but never used.","line":20,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'VaultTransaction' is defined but never used.","line":26,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"VaultTransaction"},"fix":{"range":[640,656],"text":""},"desc":"Remove unused variable 'VaultTransaction'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VaultTransaction' is defined but never used.","line":26,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'KNOWN_TOKENS'. Either include it or remove the dependency array.","line":130,"column":6,"nodeType":"ArrayExpression","endLine":130,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [KNOWN_TOKENS]","fix":{"range":[4590,4592],"text":"[KNOWN_TOKENS]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5153,5156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5153,5156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5186,5189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5186,5189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":158,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5476,5479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5476,5479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":213,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8705,8708],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8705,8708],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8745,8748],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8745,8748],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8781,8784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8781,8784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":215,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8894,8897],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8894,8897],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":215,"column":126,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":129,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8924,8927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8924,8927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9036,9039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9036,9039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":140,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":143,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9069,9072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9069,9072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":231,"column":23,"nodeType":"BlockStatement","messageId":"unexpected","endLine":231,"endColumn":25,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[9902,9902],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":238,"column":25,"nodeType":"BlockStatement","messageId":"unexpected","endLine":238,"endColumn":27,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[10333,10333],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":273,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":273,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11382,11385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11382,11385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has an unnecessary dependency: 'getTokenInfo'. Either exclude it or remove the dependency array.","line":285,"column":6,"nodeType":"ArrayExpression","endLine":285,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [daoId, treasuryObject]","fix":{"range":[11823,11860],"text":"[daoId, treasuryObject]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":301,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":301,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12452,12455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12452,12455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":301,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":301,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12485,12488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12485,12488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":313,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":313,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13026,13029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13026,13029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":314,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13055,13058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13055,13058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":316,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":316,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13149,13152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13149,13152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":325,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":325,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13321,13324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13321,13324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'daoId'. Either include it or remove the dependency array.","line":336,"column":6,"nodeType":"ArrayExpression","endLine":336,"endColumn":82,"suggestions":[{"desc":"Update the dependencies array to be: [account, signAndSubmitTransaction, treasuryObject, isAdmin, daoId, fetchDAOVaults]","fix":{"range":[13714,13790],"text":"[account, signAndSubmitTransaction, treasuryObject, isAdmin, daoId, fetchDAOVaults]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":367,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":367,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15055,15058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15055,15058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":368,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":368,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15084,15087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15084,15087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":370,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":370,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15178,15181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15178,15181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":385,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15612,15615],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15612,15615],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'daoId' and 'vaults'. Either include them or remove the dependency array.","line":396,"column":6,"nodeType":"ArrayExpression","endLine":396,"endColumn":57,"suggestions":[{"desc":"Update the dependencies array to be: [account, signAndSubmitTransaction, daoId, fetchDAOVaults, vaults]","fix":{"range":[15994,16045],"text":"[account, signAndSubmitTransaction, daoId, fetchDAOVaults, vaults]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":427,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":427,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17296,17299],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17296,17299],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":427,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":427,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17329,17332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17329,17332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":437,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":437,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17733,17736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17733,17736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":438,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":438,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17762,17765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17762,17765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":440,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":440,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17856,17859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17856,17859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":449,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":449,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18028,18031],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18028,18031],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'daoId' and 'vaults'. Either include them or remove the dependency array.","line":462,"column":6,"nodeType":"ArrayExpression","endLine":462,"endColumn":82,"suggestions":[{"desc":"Update the dependencies array to be: [account, signAndSubmitTransaction, treasuryObject, isAdmin, daoId, fetchDAOVaults, vaults]","fix":{"range":[18542,18618],"text":"[account, signAndSubmitTransaction, treasuryObject, isAdmin, daoId, fetchDAOVaults, vaults]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":38,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { useWallet } from '../contexts/CedraWalletProvider';\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { safeView } from '../utils/rpcUtils';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\n\ninterface VaultData {\n  address: string;\n  metadata: string;\n  totalAssets: number;\n  idleAssets: number;\n  strategy: string | null;\n  manager: string;\n  tokenSymbol?: string;\n  tokenName?: string;\n  decimals?: number;\n  iconUrl?: string;\n}\n\ninterface VaultBalance {\n  totalAssets: number;\n  idleAssets: number;\n  strategicAssets: number;\n}\n\ninterface VaultTransaction {\n  type: 'deposit' | 'withdrawal';\n  amount: number;\n  from?: string;\n  to?: string;\n  timestamp: string;\n  txHash: string;\n  tokenSymbol?: string;\n}\n\nexport const useVault = (daoId: string, treasuryObject?: string) => {\n  const { account, signAndSubmitTransaction } = useWallet();\n  const [vaults, setVaults] = useState<VaultData[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isAdmin, setIsAdmin] = useState<boolean>(false);\n\n  // Known FA token metadata addresses for your network\n  const KNOWN_TOKENS = {\n    // Add your network's FA token addresses here\n    // Example:\n    // '0x...': { symbol: 'USDC', name: 'USD Coin', decimals: 6 },\n  };\n\n  // Convert token amounts based on decimals\n  const toTokenAmount = (rawAmount: number, decimals: number = 6): number => rawAmount / Math.pow(10, decimals);\n  const fromTokenAmount = (amount: number, decimals: number = 6): number => Math.floor(amount * Math.pow(10, decimals));\n\n  // Check if user is admin\n  const checkAdminStatus = useCallback(async () => {\n    if (!account?.address || !daoId) return;\n\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::admin::is_admin`,\n          functionArguments: [daoId, account.address]\n        }\n      });\n      setIsAdmin(Boolean(result[0]));\n    } catch (error) {\n      console.warn('Failed to check admin status:', error);\n      setIsAdmin(false);\n    }\n  }, [account?.address, daoId]);\n\n  // Get token info from metadata address (fallback path)\n  const getTokenInfo = useCallback(async (metadataAddress: string) => {\n    const knownToken = KNOWN_TOKENS[metadataAddress as keyof typeof KNOWN_TOKENS];\n    if (knownToken) return knownToken;\n\n    try {\n      console.log('Fetching token metadata from blockchain for:', metadataAddress);\n\n      // Try to fetch symbol, name, decimals, and optional icon from blockchain\n      const [symbolRes, nameRes, decimalRes, iconUriRes, iconResAlt] = await Promise.allSettled([\n        cedraClient.view({\n          payload: {\n            function: `0x1::fungible_asset::symbol`,\n            functionArguments: [metadataAddress]\n          }\n        }),\n        cedraClient.view({\n          payload: {\n            function: `0x1::fungible_asset::name`,\n            functionArguments: [metadataAddress]\n          }\n        }),\n        cedraClient.view({\n          payload: {\n            function: `0x1::fungible_asset::decimals`,\n            functionArguments: [metadataAddress]\n          }\n        }),\n        // Preferred: icon_uri\n        cedraClient.view({\n          payload: {\n            function: `0x1::fungible_asset::icon_uri`,\n            functionArguments: [metadataAddress]\n          }\n        }),\n        // Fallback: icon (some implementations use this)\n        cedraClient.view({\n          payload: {\n            function: `0x1::fungible_asset::icon`,\n            functionArguments: [metadataAddress]\n          }\n        })\n      ]);\n\n      const symbol = symbolRes.status === 'fulfilled' ? (symbolRes.value[0] as string) : 'UNKNOWN';\n      const name = nameRes.status === 'fulfilled' ? (nameRes.value[0] as string) : symbol;\n      const decimals = decimalRes.status === 'fulfilled' ? Number(decimalRes.value[0]) : 6;\n      let iconUrl = iconUriRes.status === 'fulfilled' ? (iconUriRes.value?.[0] as string | undefined) : undefined;\n      if (!iconUrl && iconResAlt.status === 'fulfilled') {\n        iconUrl = (iconResAlt.value?.[0] as string | undefined);\n      }\n\n      console.log('Resolved token info:', { symbol, name, decimals, iconUrl });\n      return { symbol, name, decimals, iconUrl } as { symbol: string; name: string; decimals: number; iconUrl?: string };\n    } catch (error) {\n      console.warn('Failed to fetch token metadata:', error);\n      return { symbol: 'UNKNOWN', name: 'Unknown Token', decimals: 6 };\n    }\n  }, []);\n\n  // Fetch DAO vaults using treasury ABI\n  const fetchDAOVaults = useCallback(async () => {\n    if (!treasuryObject) {\n      setVaults([]);\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      // Get vault addresses from DAO registry\n      console.log('Fetching vaults with treasury object:', treasuryObject);\n\n      // Extract the treasury address like other working functions\n      const treasuryAddress = typeof treasuryObject === 'string'\n        ? treasuryObject\n        : (treasuryObject as any).inner || (treasuryObject as any).value || treasuryObject;\n\n      let vaultAddresses;\n      try {\n        vaultAddresses = await safeView({\n          function: `${MODULE_ADDRESS}::treasury::get_dao_vaults`,\n          functionArguments: [treasuryAddress]\n        }, `dao_vaults_${daoId}`);\n      } catch (registryError: any) {\n        // If DAOVaultRegistry doesn't exist yet, it means no vaults have been created\n        if (registryError.message?.includes('MISSING_DATA') &&\n            registryError.message?.includes('DAOVaultRegistry')) {\n          console.log('DAOVaultRegistry not found - no vaults created yet');\n          setVaults([]);\n          setIsLoading(false);\n          return;\n        }\n        // Re-throw other errors\n        throw registryError;\n      }\n\n      if (!Array.isArray(vaultAddresses) || vaultAddresses.length === 0) {\n        setVaults([]);\n        setIsLoading(false);\n        return;\n      }\n\n      // Process vault addresses - they might come as comma-separated string\n      let processedAddresses: string[] = [];\n      if (Array.isArray(vaultAddresses)) {\n        processedAddresses = vaultAddresses.flatMap(addr => {\n          const addressString = typeof addr === 'string' ? addr : String(addr);\n          // Split by comma in case multiple addresses are in one string\n          return addressString.split(',').map(a => a.trim()).filter(a => a.length > 0);\n        });\n      }\n\n      console.log('Processed vault addresses:', processedAddresses);\n\n      // Fetch vault details for each address via treasury ABI\n      const vaultDetails = await Promise.all(\n        processedAddresses.map(async (vaultAddr: string) => {\n          const addressString = vaultAddr;\n          try {\n            console.log('Fetching vault details (treasury ABI) for address:', addressString);\n\n            const [symbolRes, nameRes, decimalsRes, balanceRes, metadataRes, iconHelperRes, projectHelperRes] = await Promise.all([\n              cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::treasury::get_vault_asset_symbol`, functionArguments: [addressString] } }),\n              cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::treasury::get_vault_asset_name`, functionArguments: [addressString] } }),\n              cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::treasury::get_vault_asset_decimals`, functionArguments: [addressString] } }),\n              cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::treasury::get_vault_balance`, functionArguments: [addressString] } }),\n              cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::treasury::get_vault_metadata`, functionArguments: [addressString] } }),\n              // Optional icon URI helper in treasury module, if available\n              cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::treasury::get_vault_asset_icon_uri`, functionArguments: [addressString] } }).catch(() => undefined),\n              // Optional project URI helper in treasury module\n              cedraClient.view({ payload: { function: `${MODULE_ADDRESS}::treasury::get_vault_asset_project_uri`, functionArguments: [addressString] } }).catch(() => undefined),\n            ]);\n\n            const symbol = (symbolRes?.[0] as string) || 'UNKNOWN';\n            const name = (nameRes?.[0] as string) || symbol;\n            const decimals = Number(decimalsRes?.[0] ?? 6);\n            const balanceRaw = Number(balanceRes?.[0] ?? 0);\n            const metadataAddress = typeof metadataRes?.[0] === 'string'\n              ? (metadataRes as any)[0]\n              : (metadataRes as any)?.[0]?.inner || (metadataRes as any)?.[0]?.value;\n            let iconUrl: string | undefined = Array.isArray(iconHelperRes) ? (iconHelperRes as any)?.[0] : (iconHelperRes as any);\n            const projectUri: string | undefined = Array.isArray(projectHelperRes) ? (projectHelperRes as any)?.[0] : (projectHelperRes as any);\n            if (typeof iconUrl === 'string') iconUrl = iconUrl.trim();\n            if (iconUrl === '') iconUrl = undefined;\n\n            const totalAssets = toTokenAmount(balanceRaw, decimals);\n            const idleAssets = totalAssets; // No separate idle metric in treasury ABI\n            const strategy = null;\n            const manager = '';\n\n            // Fallback: if no icon from treasury helper, try standard FA::icon_uri directly with metadata address\n            if (!iconUrl && metadataAddress) {\n              try {\n                const faIcon = await cedraClient.view({ payload: { function: `0x1::fungible_asset::icon_uri`, functionArguments: [metadataAddress] } });\n                const resolved = (faIcon?.[0] as string) || '';\n                iconUrl = resolved.trim() || undefined;\n              } catch {}\n              // Try alternate function name if icon_uri missing\n              if (!iconUrl) {\n                try {\n                  const faIconAlt = await cedraClient.view({ payload: { function: `0x1::fungible_asset::icon`, functionArguments: [metadataAddress] } });\n                  const resolvedAlt = (faIconAlt?.[0] as string) || '';\n                  iconUrl = resolvedAlt.trim() || undefined;\n                } catch {}\n              }\n            }\n\n            // Last resort: if we have a project URI, attempt a common icon path\n            if (!iconUrl && projectUri && typeof projectUri === 'string') {\n              const trimmed = projectUri.trim();\n              if (trimmed.startsWith('http')) {\n                iconUrl = `${trimmed.replace(/\\/$/, '')}/icon.png`;\n              }\n            }\n\n            return {\n              address: addressString,\n              metadata: metadataAddress,\n              totalAssets,\n              idleAssets,\n              strategy,\n              manager,\n              tokenSymbol: symbol,\n              tokenName: name,\n              decimals,\n              iconUrl\n            } as VaultData;\n\n          } catch (vaultError) {\n            console.warn(`Failed to fetch vault details for ${addressString}:`, vaultError);\n            return null;\n          }\n        })\n      );\n\n      const validVaults = vaultDetails.filter(vault => vault !== null) as VaultData[];\n      setVaults(validVaults);\n\n    } catch (error: any) {\n      console.error('Failed to fetch DAO vaults:', error);\n      // Don't display circuit breaker errors to users, just log them\n      if (error.message?.includes('Circuit breaker is OPEN')) {\n        setError('Network temporarily unavailable. Please try again later.');\n      } else {\n        setError(error.message || 'Failed to fetch vault data');\n      }\n      setVaults([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [daoId, treasuryObject, getTokenInfo]);\n\n  // Create a new vault for the DAO (admin only)\n  const createVault = useCallback(async (metadataAddress: string): Promise<boolean> => {\n    if (!account || !signAndSubmitTransaction || !treasuryObject) {\n      throw new Error('Wallet not connected or treasury not available');\n    }\n\n    if (!isAdmin) {\n      throw new Error('Only DAO admins can create vaults');\n    }\n\n    try {\n      // Extract the treasury object address like other working treasury functions do\n      const treasuryAddress = typeof treasuryObject === 'string'\n        ? treasuryObject\n        : (treasuryObject as any).inner || (treasuryObject as any).value || treasuryObject;\n\n      console.log('Creating vault with treasury address:', treasuryAddress);\n      console.log('Creating vault with metadata address:', metadataAddress);\n\n      // Treasury ABI: create_dao_vault(&signer, address, Object<Treasury>, Object<Metadata>)\n      const payload = {\n        function: `${MODULE_ADDRESS}::treasury::create_dao_vault`,\n        typeArguments: [],\n        functionArguments: [daoId, treasuryAddress, metadataAddress],\n      };\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({\n          transactionHash: (tx as any).hash,\n          options: { checkSuccess: true }\n        });\n      }\n\n      // Refresh vault list\n      await fetchDAOVaults();\n      return true;\n\n    } catch (error: any) {\n      console.error('Create vault failed:', error);\n\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Transaction cancelled by user');\n      } else if (error.message?.includes('not_admin')) {\n        throw new Error('Only DAO admins can create vaults');\n      } else {\n        throw new Error(error.message || 'Failed to create vault');\n      }\n    }\n  }, [account, signAndSubmitTransaction, treasuryObject, isAdmin, fetchDAOVaults]);\n\n  // Deposit to vault (user function) via treasury ABI\n  const depositToVault = useCallback(async (vaultAddress: string, amount: number, decimals?: number): Promise<boolean> => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Wallet not connected');\n    }\n\n    if (amount <= 0) {\n      throw new Error('Amount must be greater than 0');\n    }\n\n    try {\n      // If decimals not provided, find the vault to get its decimals\n      let actualDecimals = decimals;\n      if (!actualDecimals) {\n        const vault = vaults.find(v => v.address === vaultAddress);\n        actualDecimals = vault?.decimals || 6;\n        console.log('Using vault decimals:', actualDecimals, 'for vault:', vaultAddress);\n      }\n\n      const amountRaw = fromTokenAmount(amount, actualDecimals);\n      console.log('Depositing amount:', amount, 'with decimals:', actualDecimals, 'raw amount:', amountRaw);\n\n      // Treasury ABI: user_deposit_to_vault(&signer, dao_address, vault_address, amount)\n      const payload = {\n        function: `${MODULE_ADDRESS}::treasury::user_deposit_to_vault`,\n        typeArguments: [],\n        functionArguments: [daoId, vaultAddress, amountRaw.toString()],\n      };\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({\n          transactionHash: (tx as any).hash,\n          options: { checkSuccess: true }\n        });\n      }\n\n      // Refresh vault data with a small delay to ensure blockchain state is updated\n      console.log('Deposit successful, refreshing vault data...');\n      setTimeout(async () => {\n        await fetchDAOVaults();\n      }, 2000); // 2 second delay\n\n      // Also trigger immediate refresh\n      await fetchDAOVaults();\n      return true;\n\n    } catch (error: any) {\n      console.error('Vault deposit failed:', error);\n\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Transaction cancelled by user');\n      } else if (error.message?.includes('insufficient')) {\n        throw new Error('Insufficient token balance');\n      } else {\n        throw new Error(error.message || 'Deposit failed');\n      }\n    }\n  }, [account, signAndSubmitTransaction, fetchDAOVaults]);\n\n  // Withdraw from vault (admin only) via treasury ABI\n  const withdrawFromVault = useCallback(async (vaultAddress: string, amount: number, decimals?: number): Promise<boolean> => {\n    if (!account || !signAndSubmitTransaction || !treasuryObject) {\n      throw new Error('Wallet not connected or treasury not available');\n    }\n\n    if (!isAdmin) {\n      throw new Error('Only DAO admins can withdraw from vaults');\n    }\n\n    if (amount <= 0) {\n      throw new Error('Amount must be greater than 0');\n    }\n\n    try {\n      // If decimals not provided, find the vault to get its decimals\n      let actualDecimals = decimals;\n      if (!actualDecimals) {\n        const vault = vaults.find(v => v.address === vaultAddress);\n        actualDecimals = vault?.decimals || 6;\n        console.log('Using vault decimals for withdrawal:', actualDecimals, 'for vault:', vaultAddress);\n      }\n\n      const amountRaw = fromTokenAmount(amount, actualDecimals);\n      console.log('Withdrawing amount:', amount, 'with decimals:', actualDecimals, 'raw amount:', amountRaw);\n\n      // Extract the treasury address like other working functions\n      const treasuryAddress = typeof treasuryObject === 'string'\n        ? treasuryObject\n        : (treasuryObject as any).inner || (treasuryObject as any).value || treasuryObject;\n\n      console.log('Withdrawing from vault with treasury address:', treasuryAddress);\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::treasury::withdraw_from_dao_vault`,\n        typeArguments: [],\n        functionArguments: [daoId, vaultAddress, amountRaw.toString(), account.address],\n      };\n\n      const tx = await signAndSubmitTransaction({ payload } as any);\n      if (tx && (tx as any).hash) {\n        await cedraClient.waitForTransaction({\n          transactionHash: (tx as any).hash,\n          options: { checkSuccess: true }\n        });\n      }\n\n      // Refresh vault data\n      await fetchDAOVaults();\n      return true;\n\n    } catch (error: any) {\n      console.error('Vault withdrawal failed:', error);\n\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Transaction cancelled by user');\n      } else if (error.message?.includes('not_admin')) {\n        throw new Error('Only DAO admins can withdraw from vaults');\n      } else if (error.message?.includes('insufficient')) {\n        throw new Error('Insufficient vault balance');\n      } else {\n        throw new Error(error.message || 'Withdrawal failed');\n      }\n    }\n  }, [account, signAndSubmitTransaction, treasuryObject, isAdmin, fetchDAOVaults]);\n\n  // Set vault strategy (admin only) - not supported in current treasury ABI\n  const setVaultStrategy = useCallback(async () => {\n    throw new Error('Strategy management is not supported by the current treasury ABI');\n  }, []);\n\n  // Initialize data fetching\n  useEffect(() => {\n    if (daoId && treasuryObject) {\n      const initTasks = [fetchDAOVaults()];\n\n      if (account?.address) {\n        initTasks.push(checkAdminStatus());\n      }\n\n      Promise.all(initTasks).catch((error) => {\n        console.warn('Vault initialization failed:', error);\n      });\n    }\n  }, [daoId, treasuryObject, account?.address, fetchDAOVaults, checkAdminStatus]);\n\n  // Refresh data every 60 seconds\n  useEffect(() => {\n    if (!daoId || !treasuryObject) return;\n\n    const interval = setInterval(() => {\n      const refreshTasks = [fetchDAOVaults()];\n\n      if (account?.address) {\n        refreshTasks.push(checkAdminStatus());\n      }\n\n      Promise.all(refreshTasks);\n    }, 60000);\n\n    return () => clearInterval(interval);\n  }, [daoId, treasuryObject, account?.address, fetchDAOVaults, checkAdminStatus]);\n\n  return {\n    vaults,\n    isLoading,\n    error,\n    isAdmin,\n    createVault,\n    depositToVault,\n    withdrawFromVault,\n    setVaultStrategy,\n    refreshData: () => Promise.all([fetchDAOVaults(), checkAdminStatus()]),\n    toTokenAmount,\n    fromTokenAmount,\n    KNOWN_TOKENS\n  };\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\hooks\\useWalletBalance.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'cedraClient' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"cedraClient"},"fix":{"range":[179,239],"text":""},"desc":"Remove unused variable 'cedraClient'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cedraClient' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { useWallet } from '../contexts/CedraWalletProvider';\nimport { BalanceService } from '../useServices/useBalance';\nimport { cedraClient } from '../cedra_service/cedra-client';\n\nexport const useWalletBalance = () => {\n  const { account } = useWallet();\n  const [balance, setBalance] = useState<number>(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchBalance = useCallback(async () => {\n    if (!account?.address) {\n      setBalance(0);\n      setError(null);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      console.log(`Fetching balance for: ${account.address}`);\n      const newBalance = await BalanceService.getWalletBalance(account.address);\n      console.log(`Balance fetched: ${newBalance} CEDRA`);\n      setBalance(newBalance);\n    } catch (err) {\n      console.error('Error fetching balance:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch balance');\n      setBalance(0);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [account?.address]);\n\n  // Auto-fetch on account change\n  useEffect(() => {\n    fetchBalance();\n  }, [fetchBalance]);\n\n  const refresh = useCallback(() => {\n    fetchBalance();\n  }, [fetchBalance]);\n\n  const formatBalance = useCallback((decimals: number = 2) => {\n    return BalanceService.formatBalance(balance, decimals);\n  }, [balance]);\n\n  const hasSufficientBalance = useCallback(async (\n    requiredAmount: number, \n    gasReserve: number = 0.02\n  ) => {\n    if (!account?.address) return { sufficient: false, available: 0, required: requiredAmount };\n    return BalanceService.hasSufficientBalance(account.address, requiredAmount, gasReserve);\n  }, [account?.address]);\n\n  return {\n    balance,\n    isLoading,\n    error,\n    refresh,\n    formatBalance,\n    hasSufficientBalance,\n    address: account?.address || null\n  };\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services\\apiRequestManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[214,217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[214,217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":9,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[232,242],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[239,242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[239,242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":10,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[264,274],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[271,274],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[271,274],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[361,364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[361,364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2951,2954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2951,2954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4266,4269],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4266,4269],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5334,5337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5334,5337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6145,6148],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6145,6148],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":241,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7472,7475],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7472,7475],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":254,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7761,7764],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7761,7764],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'resetCircuitBreaker' is defined but never used.","line":339,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":339,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"resetCircuitBreaker"},"fix":{"range":[9620,9712],"text":""},"desc":"Remove unused variable 'resetCircuitBreaker'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'resetCircuitBreaker' is defined but never used.","line":339,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":339,"endColumn":29},{"ruleId":"no-unused-vars","severity":1,"message":"'getAPIStatus' is defined but never used.","line":346,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":346,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"getAPIStatus"},"fix":{"range":[9768,9835],"text":""},"desc":"Remove unused variable 'getAPIStatus'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getAPIStatus' is defined but never used.","line":346,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":346,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Professional API Request Manager with Rate Limiting, Circuit Breaker, and Caching\n * Handles 429 Too Many Requests errors professionally\n */\n\ninterface QueuedRequest {\n  id: string;\n  execute: () => Promise<any>;\n  resolve: (value: any) => void;\n  reject: (error: any) => void;\n  retryCount: number;\n  priority: number;\n}\n\ninterface CacheEntry {\n  data: any;\n  timestamp: number;\n  ttl: number;\n}\n\nclass APIRequestManager {\n  private queue: QueuedRequest[] = [];\n  private isProcessing = false;\n  private cache = new Map<string, CacheEntry>();\n  private circuitBreakerState: 'CLOSED' | 'OPEN' | 'HALF_OPEN' = 'CLOSED';\n  private failureCount = 0;\n  private lastFailureTime = 0;\n  private requestCount = 0;\n  private windowStart = Date.now();\n  \n  // Configuration - More lenient settings for blockchain RPC calls\n  private readonly MAX_CONCURRENT_REQUESTS = 2; // Reduced to be more conservative\n  private readonly REQUESTS_PER_SECOND = 1; // Reduced to 1 request per second\n  private readonly CIRCUIT_BREAKER_THRESHOLD = 15; // Increased from 5 to 15 failures\n  private readonly CIRCUIT_BREAKER_TIMEOUT = 15000; // Reduced to 15 seconds for faster recovery\n  private readonly DEFAULT_CACHE_TTL = 30000; // Increased to 30 seconds for better caching\n  private readonly MAX_RETRIES = 5; // Increased retries\n  private readonly BASE_DELAY = 2000; // Increased base delay to 2 seconds\n\n  private activeRequests = 0;\n\n  /**\n   * Queue a request with rate limiting and circuit breaker protection\n   */\n  async queueRequest<T>(\n    requestFn: () => Promise<T>,\n    options: {\n      cacheKey?: string;\n      cacheTtl?: number;\n      priority?: number;\n      skipCache?: boolean;\n    } = {}\n  ): Promise<T> {\n    const { cacheKey, cacheTtl = this.DEFAULT_CACHE_TTL, priority = 0, skipCache = false } = options;\n\n    // Check cache first\n    if (cacheKey && !skipCache) {\n      const cached = this.getFromCache(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    // Check circuit breaker\n    if (this.circuitBreakerState === 'OPEN') {\n      const timeSinceLastFailure = Date.now() - this.lastFailureTime;\n      if (timeSinceLastFailure < this.CIRCUIT_BREAKER_TIMEOUT) {\n        throw new Error('Circuit breaker is OPEN - too many failures');\n      } else {\n        this.circuitBreakerState = 'HALF_OPEN';\n      }\n    }\n\n    return new Promise<T>((resolve, reject) => {\n      const requestId = `req_${Date.now()}_${Math.random()}`;\n      \n      const queuedRequest: QueuedRequest = {\n        id: requestId,\n        execute: async () => {\n          try {\n            const result = await requestFn();\n            \n            // Cache the result if cache key provided\n            if (cacheKey) {\n              this.setCache(cacheKey, result, cacheTtl);\n            }\n            \n            // Reset circuit breaker on success\n            this.resetCircuitBreaker();\n            \n            return result;\n          } catch (error: any) {\n            this.handleRequestFailure(error);\n            throw error;\n          }\n        },\n        resolve,\n        reject,\n        retryCount: 0,\n        priority\n      };\n\n      // Add to queue sorted by priority\n      this.queue.push(queuedRequest);\n      this.queue.sort((a, b) => b.priority - a.priority);\n\n      // Start processing if not already running\n      if (!this.isProcessing) {\n        this.processQueue();\n      }\n    });\n  }\n\n  private async processQueue(): Promise<void> {\n    if (this.isProcessing || this.queue.length === 0) return;\n    \n    this.isProcessing = true;\n\n    while (this.queue.length > 0) {\n      // Rate limiting check\n      if (!this.canMakeRequest()) {\n        await this.waitForRateLimit();\n        continue;\n      }\n\n      // Concurrent request limit\n      if (this.activeRequests >= this.MAX_CONCURRENT_REQUESTS) {\n        await new Promise(resolve => setTimeout(resolve, 100));\n        continue;\n      }\n\n      const request = this.queue.shift();\n      if (!request) continue;\n\n      this.executeRequest(request);\n    }\n\n    this.isProcessing = false;\n  }\n\n  private async executeRequest(request: QueuedRequest): Promise<void> {\n    this.activeRequests++;\n\n    try {\n      const result = await request.execute();\n      request.resolve(result);\n    } catch (error: any) {\n      if (this.shouldRetry(error, request)) {\n        request.retryCount++;\n        const delay = this.calculateBackoffDelay(request.retryCount);\n        \n        setTimeout(() => {\n          this.queue.unshift(request); // Add back to front of queue\n          if (!this.isProcessing) {\n            this.processQueue();\n          }\n        }, delay);\n      } else {\n        request.reject(error);\n      }\n    } finally {\n      this.activeRequests--;\n    }\n  }\n\n  private canMakeRequest(): boolean {\n    const now = Date.now();\n    const windowDuration = 1000; // 1 second window\n\n    // Reset window if needed\n    if (now - this.windowStart >= windowDuration) {\n      this.requestCount = 0;\n      this.windowStart = now;\n    }\n\n    return this.requestCount < this.REQUESTS_PER_SECOND;\n  }\n\n  private async waitForRateLimit(): Promise<void> {\n    const now = Date.now();\n    const timeToWait = 1000 - (now - this.windowStart);\n    if (timeToWait > 0) {\n      await new Promise(resolve => setTimeout(resolve, timeToWait));\n    }\n  }\n\n  private shouldRetry(error: any, request: QueuedRequest): boolean {\n    if (request.retryCount >= this.MAX_RETRIES) return false;\n\n    // Retry on rate limit errors\n    if (error.status === 429 || error.code === 'ERR_NETWORK' || \n        error.message?.includes('429') || error.message?.includes('Too Many Requests')) {\n      return true;\n    }\n\n    // Retry on CORS errors (might be temporary)\n    if (error.code === 'ERR_NETWORK' || error.message?.includes('CORS')) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private calculateBackoffDelay(retryCount: number): number {\n    // Exponential backoff with jitter\n    const baseDelay = this.BASE_DELAY * Math.pow(2, retryCount - 1);\n    const jitter = Math.random() * 1000;\n    return Math.min(baseDelay + jitter, 30000); // Max 30 seconds\n  }\n\n  private handleRequestFailure(error: any): void {\n    this.failureCount++;\n    this.lastFailureTime = Date.now();\n\n    // Only count certain errors as failures (not all errors should trigger circuit breaker)\n    const isCircuitBreakerError = error.status === 429 || \n                                 error.code === 'ERR_NETWORK' || \n                                 error.message?.includes('429') || \n                                 error.message?.includes('Too Many Requests') ||\n                                 error.message?.includes('timeout') ||\n                                 error.message?.includes('CORS');\n\n    if (isCircuitBreakerError && this.failureCount >= this.CIRCUIT_BREAKER_THRESHOLD) {\n      this.circuitBreakerState = 'OPEN';\n      console.warn(`≡ƒöÑ Circuit breaker opened after ${this.failureCount} network failures`);\n      console.warn(`≡ƒöº Use resetCircuitBreaker() to manually reset if needed`);\n    } else if (!isCircuitBreakerError) {\n      // Reset failure count for non-network errors\n      this.failureCount = Math.max(0, this.failureCount - 1);\n    }\n  }\n\n  private resetCircuitBreaker(): void {\n    if (this.circuitBreakerState === 'HALF_OPEN') {\n      this.circuitBreakerState = 'CLOSED';\n      console.log(' Circuit breaker closed - requests restored');\n    }\n    this.failureCount = 0;\n  }\n\n  private getFromCache(key: string): any | null {\n    const entry = this.cache.get(key);\n    if (!entry) return null;\n\n    const isExpired = Date.now() - entry.timestamp > entry.ttl;\n    if (isExpired) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return entry.data;\n  }\n\n  private setCache(key: string, data: any, ttl: number): void {\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      ttl\n    });\n\n    // Cleanup old entries periodically\n    if (this.cache.size > 100) {\n      this.cleanupCache();\n    }\n  }\n\n  private cleanupCache(): void {\n    const now = Date.now();\n    for (const [key, entry] of this.cache.entries()) {\n      if (now - entry.timestamp > entry.ttl) {\n        this.cache.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Clear cache for specific keys or all\n   */\n  clearCache(pattern?: string): void {\n    if (!pattern) {\n      this.cache.clear();\n      return;\n    }\n\n    for (const key of this.cache.keys()) {\n      if (key.includes(pattern)) {\n        this.cache.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Manually reset the circuit breaker\n   */\n  resetCircuitBreakerManually() {\n    this.circuitBreakerState = 'CLOSED';\n    this.failureCount = 0;\n    this.lastFailureTime = 0;\n    console.log('≡ƒöº Circuit breaker manually reset');\n  }\n\n  /**\n   * Get current status for debugging\n   */\n  getStatus() {\n    return {\n      queueLength: this.queue.length,\n      activeRequests: this.activeRequests,\n      circuitBreakerState: this.circuitBreakerState,\n      failureCount: this.failureCount,\n      cacheSize: this.cache.size,\n      requestCount: this.requestCount,\n      timeSinceLastFailure: Date.now() - this.lastFailureTime,\n    };\n  }\n}\n\n// Singleton instance\nexport const apiRequestManager = new APIRequestManager();\n\n/**\n * Wrapper function for making API calls through the request manager\n */\nexport async function managedApiCall<T>(\n  requestFn: () => Promise<T>,\n  options?: {\n    cacheKey?: string;\n    cacheTtl?: number;\n    priority?: number;\n    skipCache?: boolean;\n  }\n): Promise<T> {\n  return apiRequestManager.queueRequest(requestFn, options);\n}\n\n/**\n * Manually reset the circuit breaker (internal use only)\n */\nfunction resetCircuitBreaker() {\n  return apiRequestManager.resetCircuitBreakerManually();\n}\n\n/**\n * Get API manager status (internal use only)\n */\nfunction getAPIStatus() {\n  return apiRequestManager.getStatus();\n}\n\n// Note: Manual reset functions are only available internally, not exposed globally for production security","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services\\graphqlService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services\\pinataService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\activitytracker_abi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\dao_core.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\errors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\featured.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\filter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\input_validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\membership.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\platform_stats_abi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\proposal.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\safe_math.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\staking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\time_security.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\services_abi\\treasury.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\types\\dao.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useActivityTracker.ts","messages":[{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":194,"column":46,"nodeType":"BlockStatement","messageId":"unexpected","endLine":195,"endColumn":12,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[5171,5182],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":419,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":419,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12297,12300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12297,12300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":474,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":474,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14163,14166],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14163,14166],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":481,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":481,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14387,14390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14387,14390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":630,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":630,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19464,19467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19464,19467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":630,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":630,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19483,19486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19483,19486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":634,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":634,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19595,19598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19595,19598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":656,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":656,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20238,20241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20238,20241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":684,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":684,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20891,20894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20891,20894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":684,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":684,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20910,20913],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20910,20913],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":688,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":688,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21022,21025],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21022,21025],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":709,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":709,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21604,21607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21604,21607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":736,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":736,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22245,22248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22245,22248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":736,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":736,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22264,22267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22264,22267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":740,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":740,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22377,22380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22377,22380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":760,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":760,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22899,22902],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22899,22902],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":878,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":878,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26357,26360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26357,26360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":956,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":956,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29197,29200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29197,29200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1037,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1037,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31912,31915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31912,31915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1185,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1185,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37268,37271],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37268,37271],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":1309,"column":30,"nodeType":"BlockStatement","messageId":"unexpected","endLine":1310,"endColumn":14,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[41361,41374],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1315,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1315,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[41535,41538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[41535,41538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":1319,"column":30,"nodeType":"BlockStatement","messageId":"unexpected","endLine":1320,"endColumn":16,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[41767,41782],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1349,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1349,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[42635,42638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[42635,42638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Activity Tracking Service for Cedra Network\n *\n * Tracks and retrieves user and DAO activities\n * Uses Cedra SDK for blockchain interactions\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\nimport { BalanceService } from './useBalance';\nimport { ContractActivityService } from './useContractActivity';\n\nexport interface Activity {\n  id: string;\n  type: 'stake' | 'unstake' | 'join_dao' | 'vote' | 'proposal_created' | 'proposal_executed' | 'treasury_deposit' | 'treasury_withdrawal' | 'reward_claimed';\n  title: string;\n  description: string;\n  amount?: number;\n  user: string;\n  userDisplayName?: string;\n  dao: string;\n  daoName?: string;\n  timestamp: number;\n  transactionHash: string;\n  blockNumber?: number;\n  status: 'success' | 'failed' | 'pending';\n  metadata?: {\n    proposalId?: number;\n    voteChoice?: boolean;\n    fromAddress?: string;\n    toAddress?: string;\n    tokenType?: string;\n  };\n}\n\nexport interface PaginationOptions {\n  page?: number;\n  limit?: number;\n  offset?: number;\n  startVersion?: number;\n  cursor?: string;\n}\n\nexport interface PaginatedActivities {\n  activities: Activity[];\n  pagination: {\n    currentPage: number;\n    totalPages: number;\n    totalItems: number;\n    hasNextPage: boolean;\n    hasPreviousPage: boolean;\n    nextCursor?: string;\n    previousCursor?: string;\n    limit: number;\n  };\n}\n\nexport class ActivityTracker {\n  private static readonly ACTIVITY_CACHE_KEY = 'dao_activities_cache';\n  private static readonly CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\n\n  /**\n   * Get activities for a specific DAO with pagination\n   */\n  static async getDAOActivities(daoAddress: string, options: PaginationOptions = {}): Promise<PaginatedActivities> {\n    const {\n      page = 1,\n      limit = 50,\n      offset = (page - 1) * limit,\n      startVersion,\n      cursor\n    } = options;\n\n    \n    // Try contract-based activities first\n    try {\n      const contractResult = await ContractActivityService.getContractActivitiesPaginated(\n        { dao_address: daoAddress },\n        { page, limit }\n      );\n      \n      if (contractResult.activities.length > 0) {\n        return contractResult;\n      }\n    } catch (error) {\n      console.warn('Contract activity query failed, falling back to transaction parsing:', error);\n    }\n    \n    // Fallback to transaction parsing\n    const result = await this.fetchDAOActivitiesPaginated(daoAddress, {\n      page,\n      limit,\n      offset,\n      startVersion,\n      cursor\n    });\n    \n    return result;\n  }\n\n  /**\n   * Get activities for a specific user across all DAOs with pagination\n   */\n  static async getUserActivities(userAddress: string, options: PaginationOptions = {}): Promise<PaginatedActivities> {\n    const {\n      page = 1,\n      limit = 50,\n      offset = (page - 1) * limit,\n      startVersion,\n      cursor\n    } = options;\n\n    \n    const result = await this.fetchUserActivitiesPaginated(userAddress, {\n      page,\n      limit,\n      offset,\n      startVersion,\n      cursor\n    });\n    \n    return result;\n  }\n\n  /**\n   * Get recent activities across all DAOs (global feed) with pagination\n   */\n  static async getGlobalActivities(options: PaginationOptions = {}): Promise<PaginatedActivities> {\n    const {\n      page = 1,\n      limit = 100,\n      offset = (page - 1) * limit,\n      startVersion,\n      cursor\n    } = options;\n\n    \n    // Try contract-based activities first\n    try {\n      const contractResult = await ContractActivityService.getContractActivitiesPaginated(\n        {},\n        { page, limit }\n      );\n      \n      if (contractResult.activities.length > 0) {\n        return contractResult;\n      }\n    } catch (error) {\n      console.warn('Contract activity query failed, falling back to transaction parsing:', error);\n    }\n    \n    // Fallback to transaction parsing\n    const result = await this.fetchGlobalActivitiesPaginated({\n      page,\n      limit,\n      offset,\n      startVersion,\n      cursor\n    });\n    \n    return result;\n  }\n\n  /**\n   * Fetch activities for a specific DAO from blockchain with pagination\n   */\n  private static async fetchDAOActivitiesPaginated(\n    daoAddress: string, \n    options: PaginationOptions\n  ): Promise<PaginatedActivities> {\n    const { page = 1, limit = 50 } = options;\n    const activities: Activity[] = [];\n    \n    try {\n      \n      // Multi-strategy approach to find DAO activities\n      \n      // Strategy 1: Search network for transactions mentioning this DAO\n      const networkActivities = await this.searchNetworkForDAOActivities(daoAddress, limit);\n      activities.push(...networkActivities);\n      \n      // Strategy 2: Get recent transactions and filter for DAO relevance\n      const { transactions } = await this.getAllRecentTransactionsPaginated({\n        limit: limit * 3,\n        offset: 0\n      });\n      \n      \n      for (const tx of transactions) {\n        if (tx.type === 'user_transaction') {\n          const relevantActivities = await this.parseTransactionForDAOContext(tx, daoAddress);\n          if (relevantActivities.length > 0) {\n          }\n          activities.push(...relevantActivities);\n        }\n      }\n      \n      // Filter activities to ensure they belong to this DAO context\n      const contextFilteredActivities = activities.filter(activity => {\n        // Keep activities explicitly for this DAO\n        if (activity.dao === daoAddress) return true;\n        \n        // Reject activities explicitly for other DAOs\n        if (activity.dao && activity.dao !== daoAddress && activity.dao !== 'unknown') {\n          return false;\n        }\n        \n        // For unknown DAO activities, assign to current DAO\n        if (!activity.dao || activity.dao === 'unknown') {\n          activity.dao = daoAddress;\n          return true;\n        }\n        \n        return true;\n      });\n      \n      // Remove duplicates\n      const uniqueActivities = contextFilteredActivities.filter((activity, index, arr) => \n        arr.findIndex(a => \n          a.transactionHash === activity.transactionHash && \n          a.type === activity.type && \n          a.user === activity.user\n        ) === index\n      );\n\n      // Sort by timestamp descending\n      uniqueActivities.sort((a, b) => b.timestamp - a.timestamp);\n      \n      // Take only the requested limit\n      const paginatedActivities = uniqueActivities.slice(0, limit);\n      \n      \n      // Strategy 3: If no activities found, create demo/sample activities to show functionality\n      if (paginatedActivities.length === 0) {\n        const sampleActivities = await this.createSampleActivities(daoAddress, Math.min(limit, 5));\n        \n        return {\n          activities: sampleActivities,\n          pagination: {\n            currentPage: page,\n            totalPages: 1,\n            totalItems: sampleActivities.length,\n            hasNextPage: false,\n            hasPreviousPage: false,\n            limit\n          }\n        };\n      }\n      \n      return {\n        activities: paginatedActivities,\n        pagination: {\n          currentPage: page,\n          totalPages: Math.ceil(uniqueActivities.length / limit),\n          totalItems: uniqueActivities.length,\n          hasNextPage: uniqueActivities.length > limit,\n          hasPreviousPage: page > 1,\n          limit\n        }\n      };\n    } catch (error) {\n      console.error('Error fetching DAO activities:', error);\n      return {\n        activities: [],\n        pagination: {\n          currentPage: page,\n          totalPages: 0,\n          totalItems: 0,\n          hasNextPage: false,\n          hasPreviousPage: false,\n          limit\n        }\n      };\n    }\n  }\n\n  /**\n   * Fetch activities for a specific user with pagination\n   */\n  private static async fetchUserActivitiesPaginated(\n    userAddress: string, \n    options: PaginationOptions\n  ): Promise<PaginatedActivities> {\n    const { page = 1, limit = 50, offset = 0, startVersion } = options;\n    const activities: Activity[] = [];\n    \n    try {\n      // Get user's paginated transaction history\n      const { transactions, pagination } = await this.getUserTransactionsPaginated(userAddress, {\n        limit: limit * 3, // Get more transactions to find relevant activities\n        offset,\n        startVersion\n      });\n      \n      for (const tx of transactions) {\n        if (tx.type === 'user_transaction' && tx.events) {\n          const parsedActivities = await this.parseTransactionEvents(tx);\n          activities.push(...parsedActivities.filter(a => a.user === userAddress));\n        }\n      }\n\n      activities.sort((a, b) => b.timestamp - a.timestamp);\n      const paginatedActivities = activities.slice(0, limit);\n      \n      return {\n        activities: paginatedActivities,\n        pagination: {\n          currentPage: page,\n          totalPages: Math.ceil(activities.length / limit),\n          totalItems: activities.length,\n          hasNextPage: activities.length > limit,\n          hasPreviousPage: page > 1,\n          nextCursor: pagination.nextCursor,\n          previousCursor: pagination.previousCursor,\n          limit\n        }\n      };\n    } catch (error) {\n      console.error('Error fetching user activities:', error);\n      return {\n        activities: [],\n        pagination: {\n          currentPage: page,\n          totalPages: 0,\n          totalItems: 0,\n          hasNextPage: false,\n          hasPreviousPage: false,\n          limit\n        }\n      };\n    }\n  }\n\n  /**\n   * Fetch global activities across all DAOs with pagination\n   */\n  private static async fetchGlobalActivitiesPaginated(\n    options: PaginationOptions\n  ): Promise<PaginatedActivities> {\n    const { page = 1, limit = 100 } = options;\n    const activities: Activity[] = [];\n    \n    try {\n      \n      // First, get all existing DAOs\n      const daos = await this.getAllDAOs();\n      \n      if (daos.length === 0) {\n        return await this.fetchGeneralActivitiesPaginated(options);\n      }\n\n      // Get DAO members and activities from all DAOs\n      const allActivitiesPromises = daos.map(async (dao) => {\n        try {\n          \n          // Get DAO members\n          const members = await this.getDAOMembers(dao.id);\n          \n          // Get activities from DAO transactions\n          const daoActivities = await this.fetchDAOSpecificActivities(dao.id, {\n            limit: Math.ceil(limit / daos.length),\n            offset: 0\n          });\n          \n          // Get activities from all members\n          const memberActivities = await this.fetchMemberActivities(members, dao.id, {\n            limit: Math.ceil(limit / daos.length),\n            offset: 0\n          });\n          \n          return [...daoActivities, ...memberActivities];\n        } catch (error) {\n          console.warn(`Failed to fetch activities for DAO ${dao.id}:`, error);\n          return [];\n        }\n      });\n\n      const allActivitiesArrays = await Promise.allSettled(allActivitiesPromises);\n      \n      // Combine all activities\n      allActivitiesArrays.forEach(result => {\n        if (result.status === 'fulfilled') {\n          activities.push(...result.value);\n        }\n      });\n\n      // Remove duplicates based on transaction hash + activity type\n      const uniqueActivities = activities.filter((activity, index, arr) => \n        arr.findIndex(a => a.transactionHash === activity.transactionHash && a.type === activity.type) === index\n      );\n\n      uniqueActivities.sort((a, b) => b.timestamp - a.timestamp);\n      const paginatedActivities = uniqueActivities.slice(0, limit);\n      \n      \n      return {\n        activities: paginatedActivities,\n        pagination: {\n          currentPage: page,\n          totalPages: Math.ceil(uniqueActivities.length / limit),\n          totalItems: uniqueActivities.length,\n          hasNextPage: uniqueActivities.length > limit,\n          hasPreviousPage: page > 1,\n          limit\n        }\n      };\n    } catch (error) {\n      console.error('Error fetching global activities:', error);\n      // Fallback to general activity scan\n      return await this.fetchGeneralActivitiesPaginated(options);\n    }\n  }\n\n  /**\n   * Parse transaction for activities (enhanced version)\n   */\n  private static async parseTransactionForActivities(tx: any, filterDaoAddress?: string): Promise<Activity[]> {\n    const activities: Activity[] = [];\n    \n    try {\n      const timestamp = parseInt(tx.timestamp);\n      const hash = tx.hash;\n      const sender = tx.sender;\n\n      // Parse events first (existing logic)\n      for (const event of tx.events || []) {\n        if (!event.type.startsWith(MODULE_ADDRESS)) continue;\n\n        const activity = await this.parseEvent(event, {\n          timestamp,\n          hash,\n          sender,\n          filterDaoAddress\n        });\n\n        if (activity) {\n          activities.push(activity);\n        }\n      }\n\n      // Also parse function calls to infer activities\n      if (tx.payload && tx.payload.function) {\n        const functionActivity = await this.parseFunctionCall(tx, filterDaoAddress);\n        if (functionActivity) {\n          // Ensure DAO address is set correctly\n          if (filterDaoAddress && (functionActivity.dao === 'unknown' || !functionActivity.dao)) {\n            functionActivity.dao = filterDaoAddress;\n          }\n          activities.push(functionActivity);\n        }\n      }\n\n      // Parse generic transaction patterns for common DAO activities\n      const genericActivities = await this.parseGenericDAOActivities(tx, filterDaoAddress);\n      // Ensure DAO address is set correctly for generic activities\n      const correctedGenericActivities = genericActivities.map(activity => ({\n        ...activity,\n        dao: filterDaoAddress && (activity.dao === 'unknown' || !activity.dao) ? filterDaoAddress : activity.dao\n      }));\n      activities.push(...correctedGenericActivities);\n\n    } catch (error) {\n      console.error('Error parsing transaction for activities:', error);\n    }\n\n    return activities;\n  }\n\n  /**\n   * Parse transaction events into activity objects (legacy method)\n   */\n  private static async parseTransactionEvents(tx: any, filterDaoAddress?: string): Promise<Activity[]> {\n    return this.parseTransactionForActivities(tx, filterDaoAddress);\n  }\n\n  /**\n   * Parse individual event into activity\n   */\n  private static async parseEvent(event: any, context: {\n    timestamp: number;\n    hash: string;\n    sender: string;\n    filterDaoAddress?: string;\n  }): Promise<Activity | null> {\n    const { timestamp, hash, sender, filterDaoAddress } = context;\n    \n    try {\n      const eventType = event.type.split('::').pop();\n      const data = event.data;\n\n      // Skip if filtering by DAO and this event doesn't match\n      if (filterDaoAddress && data.dao_address && data.dao_address !== filterDaoAddress) {\n        return null;\n      }\n\n      switch (eventType) {\n        case 'StakeEvent':\n          return {\n            id: `${hash}_stake_${event.sequence_number}`,\n            type: 'stake',\n            title: 'Tokens Staked',\n            description: `Staked ${BalanceService.octasToCedra(data.amount).toFixed(2)} CEDRA`,\n            amount: BalanceService.octasToCedra(data.amount),\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          };\n\n        case 'UnstakeEvent':\n          return {\n            id: `${hash}_unstake_${event.sequence_number}`,\n            type: 'unstake',\n            title: 'Tokens Unstaked',\n            description: `Unstaked ${BalanceService.octasToCedra(data.amount).toFixed(2)} CEDRA`,\n            amount: BalanceService.octasToCedra(data.amount),\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          };\n\n        case 'MemberJoinedEvent':\n          return {\n            id: `${hash}_join_${event.sequence_number}`,\n            type: 'join_dao',\n            title: 'Joined DAO',\n            description: 'Became a DAO member',\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          };\n\n        case 'VoteEvent':\n          return {\n            id: `${hash}_vote_${event.sequence_number}`,\n            type: 'vote',\n            title: 'Voted on Proposal',\n            description: `Voted ${data.choice ? 'Yes' : 'No'} on proposal`,\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success',\n            metadata: {\n              proposalId: data.proposal_id,\n              voteChoice: data.choice\n            }\n          };\n\n        case 'ProposalCreatedEvent':\n          return {\n            id: `${hash}_proposal_${event.sequence_number}`,\n            type: 'proposal_created',\n            title: 'Proposal Created',\n            description: data.title || 'New proposal submitted',\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success',\n            metadata: {\n              proposalId: data.proposal_id\n            }\n          };\n\n        case 'TreasuryDepositEvent':\n          return {\n            id: `${hash}_deposit_${event.sequence_number}`,\n            type: 'treasury_deposit',\n            title: 'Treasury Deposit',\n            description: `Deposited ${BalanceService.octasToCedra(data.amount).toFixed(2)} CEDRA to treasury`,\n            amount: BalanceService.octasToCedra(data.amount),\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          };\n\n        case 'TreasuryWithdrawalEvent':\n          return {\n            id: `${hash}_withdrawal_${event.sequence_number}`,\n            type: 'treasury_withdrawal',\n            title: 'Treasury Withdrawal',\n            description: `Withdrew ${BalanceService.octasToCedra(data.amount).toFixed(2)} CEDRA from treasury`,\n            amount: BalanceService.octasToCedra(data.amount),\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          };\n\n        case 'RewardClaimedEvent':\n          return {\n            id: `${hash}_reward_${event.sequence_number}`,\n            type: 'reward_claimed',\n            title: 'Rewards Claimed',\n            description: `Claimed ${BalanceService.octasToCedra(data.amount).toFixed(2)} CEDRA in rewards`,\n            amount: BalanceService.octasToCedra(data.amount),\n            user: sender,\n            dao: data.dao_address || filterDaoAddress || '',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          };\n\n        default:\n          return null;\n      }\n    } catch (error) {\n      console.error('Error parsing event:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Get recent transactions for a DAO with pagination\n   */\n  private static async getRecentTransactionsPaginated(\n    address: string, \n    options: PaginationOptions\n  ): Promise<{ transactions: any[]; pagination: any }> {\n    const { limit = 50, offset = 0, startVersion } = options;\n    \n    try {\n      const queryOptions: any = {\n        limit,\n        orderBy: [{ transaction_version: 'desc' }]\n      };\n\n      if (offset > 0) {\n        queryOptions.offset = offset;\n      }\n\n      if (startVersion) {\n        queryOptions.start = startVersion;\n      }\n\n      const transactions = await cedraClient.getAccountTransactions({\n        accountAddress: address,\n        options: queryOptions\n      });\n\n      const transactionArray = Array.isArray(transactions) ? transactions : [];\n      \n      // Calculate next cursor based on last transaction version\n      const nextCursor = transactionArray.length > 0 \n        ? (transactionArray[transactionArray.length - 1] as any).version \n        : undefined;\n\n      return {\n        transactions: transactionArray,\n        pagination: {\n          nextCursor,\n          hasMore: transactionArray.length === limit\n        }\n      };\n    } catch (error) {\n      console.error('Error fetching DAO transactions:', error);\n      return {\n        transactions: [],\n        pagination: {\n          nextCursor: undefined,\n          hasMore: false\n        }\n      };\n    }\n  }\n\n  /**\n   * Get transactions for a specific user with pagination\n   */\n  private static async getUserTransactionsPaginated(\n    userAddress: string, \n    options: PaginationOptions\n  ): Promise<{ transactions: any[]; pagination: any }> {\n    const { limit = 50, offset = 0, startVersion } = options;\n    \n    try {\n      const queryOptions: any = {\n        limit,\n        orderBy: [{ transaction_version: 'desc' }]\n      };\n\n      if (offset > 0) {\n        queryOptions.offset = offset;\n      }\n\n      if (startVersion) {\n        queryOptions.start = startVersion;\n      }\n\n      const transactions = await cedraClient.getAccountTransactions({\n        accountAddress: userAddress,\n        options: queryOptions\n      });\n\n      const transactionArray = Array.isArray(transactions) ? transactions : [];\n      \n      const nextCursor = transactionArray.length > 0 \n        ? (transactionArray[transactionArray.length - 1] as any).version \n        : undefined;\n\n      return {\n        transactions: transactionArray,\n        pagination: {\n          nextCursor,\n          hasMore: transactionArray.length === limit\n        }\n      };\n    } catch (error) {\n      console.error('Error fetching user transactions:', error);\n      return {\n        transactions: [],\n        pagination: {\n          nextCursor: undefined,\n          hasMore: false\n        }\n      };\n    }\n  }\n\n  /**\n   * Get recent transactions from the network with broader search\n   */\n  private static async getAllRecentTransactionsPaginated(\n    options: PaginationOptions\n  ): Promise<{ transactions: any[]; pagination: any }> {\n    const { limit = 100, offset = 0, startVersion } = options;\n    \n    try {\n      const queryOptions: any = {\n        limit,\n        orderBy: [{ transaction_version: 'desc' }]\n      };\n\n      if (offset > 0) {\n        queryOptions.offset = offset;\n      }\n\n      if (startVersion) {\n        queryOptions.start = startVersion;\n      }\n\n      const response = await cedraClient.getTransactions({\n        options: queryOptions\n      });\n\n      const allTransactions = Array.isArray(response) ? response : [];\n      \n      const nextCursor = allTransactions.length > 0 \n        ? (allTransactions[allTransactions.length - 1] as any).version \n        : undefined;\n\n      return {\n        transactions: allTransactions,\n        pagination: {\n          nextCursor,\n          hasMore: allTransactions.length === limit\n        }\n      };\n    } catch (error) {\n      console.error('Error fetching recent transactions:', error);\n      return {\n        transactions: [],\n        pagination: {\n          nextCursor: undefined,\n          hasMore: false\n        }\n      };\n    }\n  }\n\n\n  private static setCachedActivities(key: string, activities: Activity[]): void {\n    try {\n      const cacheData = {\n        timestamp: Date.now(),\n        activities\n      };\n      localStorage.setItem(key, JSON.stringify(cacheData));\n    } catch (error) {\n      console.warn('Failed to cache activities:', error);\n    }\n  }\n\n  /**\n   * Clear all activity caches\n   */\n  static clearCache(): void {\n    try {\n      const keys = Object.keys(localStorage).filter(key => \n        key.startsWith(this.ACTIVITY_CACHE_KEY)\n      );\n      keys.forEach(key => localStorage.removeItem(key));\n    } catch (error) {\n      console.warn('Failed to clear activity cache:', error);\n    }\n  }\n\n  /**\n   * Get activity display information\n   */\n  static getActivityDisplay(activity: Activity) {\n    const icons = {\n      stake: '≡ƒöÆ',\n      unstake: '≡ƒöô',\n      join_dao: '≡ƒæÑ',\n      vote: '≡ƒù│∩╕Å',\n      proposal_created: '≡ƒô¥',\n      proposal_executed: '',\n      treasury_deposit: '≡ƒÆ░',\n      treasury_withdrawal: '≡ƒÆ╕',\n      reward_claimed: '≡ƒÅå'\n    };\n\n    const colors = {\n      stake: 'bg-green-500/20 text-green-300 border-green-500/30',\n      unstake: 'bg-red-500/20 text-red-300 border-red-500/30',\n      join_dao: 'bg-purple-500/20 text-purple-300 border-purple-500/30',\n      vote: 'bg-blue-500/20 text-blue-300 border-blue-500/30',\n      proposal_created: 'bg-yellow-500/20 text-yellow-300 border-yellow-500/30',\n      proposal_executed: 'bg-green-500/20 text-green-300 border-green-500/30',\n      treasury_deposit: 'bg-blue-500/20 text-blue-300 border-blue-500/30',\n      treasury_withdrawal: 'bg-red-500/20 text-red-300 border-red-500/30',\n      reward_claimed: 'bg-purple-500/20 text-purple-300 border-purple-500/30'\n    };\n\n    return {\n      icon: icons[activity.type] || '≡ƒôä',\n      color: colors[activity.type] || 'bg-gray-500/20 text-gray-300 border-gray-500/30',\n      displayType: activity.type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n    };\n  }\n\n  /**\n   * Format activity time ago\n   */\n  static formatTimeAgo(timestamp: number): string {\n    const now = Date.now();\n    \n    // Convert timestamp to milliseconds based on its format\n    let timestampMs: number;\n    if (timestamp > 1e12) {\n      // Microseconds (Aptos format)\n      timestampMs = timestamp / 1000;\n    } else if (timestamp > 1e10) {\n      // Milliseconds\n      timestampMs = timestamp;\n    } else {\n      // Seconds\n      timestampMs = timestamp * 1000;\n    }\n    \n    const diffMs = now - timestampMs;\n    const diffMinutes = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMs < 60000) return 'Just now';\n    if (diffMinutes < 60) return `${diffMinutes}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return new Date(timestampMs).toLocaleDateString();\n  }\n\n  /**\n   * Parse function calls to infer activities\n   */\n  private static async parseFunctionCall(tx: any, filterDaoAddress?: string): Promise<Activity | null> {\n    try {\n      const timestamp = parseInt(tx.timestamp);\n      const hash = tx.hash;\n      const sender = tx.sender;\n      const functionName = tx.payload.function;\n\n      // Skip if not a DAO-related function\n      if (!functionName.includes('stake') && \n          !functionName.includes('vote') && \n          !functionName.includes('join') &&\n          !functionName.includes('proposal') &&\n          !functionName.includes('treasury') &&\n          !functionName.includes('reward')) {\n        return null;\n      }\n\n      // Infer activity type from function name\n      let activityType: Activity['type'];\n      let title: string;\n      let description: string;\n\n      if (functionName.includes('stake') && !functionName.includes('unstake')) {\n        activityType = 'stake';\n        title = 'Tokens Staked';\n        description = 'Staked tokens in DAO';\n      } else if (functionName.includes('unstake')) {\n        activityType = 'unstake';\n        title = 'Tokens Unstaked';\n        description = 'Unstaked tokens from DAO';\n      } else if (functionName.includes('vote')) {\n        activityType = 'vote';\n        title = 'Voted on Proposal';\n        description = 'Cast vote on governance proposal';\n      } else if (functionName.includes('join')) {\n        activityType = 'join_dao';\n        title = 'Joined DAO';\n        description = 'Became a DAO member';\n      } else if (functionName.includes('proposal') && functionName.includes('create')) {\n        activityType = 'proposal_created';\n        title = 'Proposal Created';\n        description = 'Created new governance proposal';\n      } else if (functionName.includes('treasury') && functionName.includes('deposit')) {\n        activityType = 'treasury_deposit';\n        title = 'Treasury Deposit';\n        description = 'Deposited funds to treasury';\n      } else if (functionName.includes('treasury') && functionName.includes('withdraw')) {\n        activityType = 'treasury_withdrawal';\n        title = 'Treasury Withdrawal';\n        description = 'Withdrew funds from treasury';\n      } else if (functionName.includes('reward')) {\n        activityType = 'reward_claimed';\n        title = 'Rewards Claimed';\n        description = 'Claimed DAO rewards';\n      } else {\n        return null;\n      }\n\n      return {\n        id: `${hash}_function_${activityType}`,\n        type: activityType,\n        title,\n        description,\n        user: sender,\n        dao: filterDaoAddress || 'unknown',\n        timestamp,\n        transactionHash: hash,\n        status: tx.success ? 'success' : 'failed'\n      };\n    } catch (error) {\n      console.error('Error parsing function call:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Parse generic DAO activity patterns\n   */\n  private static async parseGenericDAOActivities(tx: any, filterDaoAddress?: string): Promise<Activity[]> {\n    const activities: Activity[] = [];\n    \n    try {\n      const timestamp = parseInt(tx.timestamp);\n      const hash = tx.hash;\n      const sender = tx.sender;\n\n      // Look for common DAO transaction patterns in events\n      for (const event of tx.events || []) {\n        const eventType = event.type;\n        \n        // Look for transfer events that might indicate staking or treasury activities\n        if (eventType.includes('CoinStore') && eventType.includes('WithdrawEvent')) {\n          activities.push({\n            id: `${hash}_transfer_out_${event.sequence_number}`,\n            type: 'treasury_withdrawal',\n            title: 'Token Transfer Out',\n            description: 'Tokens transferred from account',\n            user: sender,\n            dao: filterDaoAddress || 'unknown',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          });\n        } else if (eventType.includes('CoinStore') && eventType.includes('DepositEvent')) {\n          activities.push({\n            id: `${hash}_transfer_in_${event.sequence_number}`,\n            type: 'treasury_deposit',\n            title: 'Token Transfer In',\n            description: 'Tokens transferred to account',\n            user: sender,\n            dao: filterDaoAddress || 'unknown',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          });\n        }\n      }\n\n      // Look for governance-related transactions\n      if (tx.payload && tx.payload.function) {\n        const func = tx.payload.function.toLowerCase();\n        if (func.includes('governance') || func.includes('aptos_governance')) {\n          activities.push({\n            id: `${hash}_governance`,\n            type: 'vote',\n            title: 'Governance Activity',\n            description: 'Participated in network governance',\n            user: sender,\n            dao: filterDaoAddress || 'network',\n            timestamp,\n            transactionHash: hash,\n            status: 'success'\n          });\n        }\n      }\n\n    } catch (error) {\n      console.error('Error parsing generic DAO activities:', error);\n    }\n\n    return activities;\n  }\n\n  /**\n   * Get all DAOs from the network\n   */\n  private static async getAllDAOs(): Promise<Array<{id: string, name: string}>> {\n    try {\n      \n      // Get DAO creation events\n      const events = await cedraClient.getModuleEventsByEventType({\n        eventType: `${MODULE_ADDRESS}::dao_core_file::DAOCreated`,\n        options: { limit: 100 }\n      }).catch(() => []);\n\n      const daos = [];\n      \n      for (const event of events) {\n        try {\n          const eventData = event.data as any;\n          if (eventData?.dao_address) {\n            // Get DAO name\n            const daoInfo = await cedraClient.view({\n              payload: {\n                function: `${MODULE_ADDRESS}::dao_core_file::get_dao_info_with_subname`,\n                functionArguments: [eventData.dao_address],\n              },\n            }).catch(() => null);\n\n            if (daoInfo) {\n              const [name] = daoInfo;\n              daos.push({\n                id: eventData.dao_address,\n                name: name as string || 'Unknown DAO'\n              });\n            }\n          }\n        } catch (error) {\n          console.warn('Failed to process DAO event:', error);\n        }\n      }\n\n      return daos;\n    } catch (error) {\n      console.error('Error fetching DAOs:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Get members of a specific DAO\n   */\n  private static async getDAOMembers(daoAddress: string): Promise<string[]> {\n    try {\n      // Get total member count first\n      const totalMembersRes = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::membership::total_members`,\n          functionArguments: [daoAddress]\n        }\n      }).catch(() => [0]);\n\n      const totalMembers = Number(totalMembersRes[0] || 0);\n      \n      if (totalMembers === 0) {\n        return [];\n      }\n\n      // Get member addresses (assuming there's a function to get members by index)\n      const members: string[] = [];\n      const batchSize = 10;\n      \n      for (let i = 0; i < Math.min(totalMembers, 50); i += batchSize) { // Limit to 50 members for performance\n        const batch = [];\n        for (let j = i; j < Math.min(i + batchSize, totalMembers, 50); j++) {\n          batch.push(\n            cedraClient.view({\n              payload: {\n                function: `${MODULE_ADDRESS}::membership::get_member_by_index`,\n                functionArguments: [daoAddress, j]\n              }\n            }).catch(() => null)\n          );\n        }\n\n        const batchResults = await Promise.allSettled(batch);\n        batchResults.forEach(result => {\n          if (result.status === 'fulfilled' && result.value) {\n            const memberAddress = result.value[0] as string;\n            if (memberAddress && !members.includes(memberAddress)) {\n              members.push(memberAddress);\n            }\n          }\n        });\n      }\n\n      return members;\n    } catch (error) {\n      console.warn(`Failed to get members for DAO ${daoAddress}:`, error);\n      return [];\n    }\n  }\n\n  /**\n   * Fetch activities specific to a DAO\n   */\n  private static async fetchDAOSpecificActivities(daoAddress: string, options: PaginationOptions): Promise<Activity[]> {\n    try {\n      const { transactions } = await this.getRecentTransactionsPaginated(daoAddress, {\n        limit: options.limit || 20,\n        offset: options.offset || 0\n      });\n\n      const activities: Activity[] = [];\n      \n      for (const tx of transactions) {\n        if (tx.type === 'user_transaction') {\n          const parsedActivities = await this.parseTransactionForActivities(tx, daoAddress);\n          activities.push(...parsedActivities);\n        }\n      }\n\n      return activities;\n    } catch (error) {\n      console.warn(`Failed to fetch DAO specific activities for ${daoAddress}:`, error);\n      return [];\n    }\n  }\n\n  /**\n   * Fetch activities from all members of a DAO\n   */\n  private static async fetchMemberActivities(members: string[], daoAddress: string, options: PaginationOptions): Promise<Activity[]> {\n    try {\n      const activities: Activity[] = [];\n      const memberBatchSize = 5; // Process members in batches to avoid overwhelming the RPC\n      \n      // Limit members to avoid too many requests\n      const limitedMembers = members.slice(0, 20);\n      \n      for (let i = 0; i < limitedMembers.length; i += memberBatchSize) {\n        const memberBatch = limitedMembers.slice(i, i + memberBatchSize);\n        \n        const memberActivitiesPromises = memberBatch.map(async (memberAddress) => {\n          try {\n            const { transactions } = await this.getUserTransactionsPaginated(memberAddress, {\n              limit: Math.ceil((options.limit || 10) / limitedMembers.length),\n              offset: 0\n            });\n\n            const memberActivities: Activity[] = [];\n            \n            for (const tx of transactions) {\n              if (tx.type === 'user_transaction') {\n                const parsedActivities = await this.parseTransactionForActivities(tx, daoAddress);\n                \n                // Filter to only include activities specifically related to this DAO\n                const daoSpecificActivities = parsedActivities.filter(activity => {\n                  // STRICT: Only include if it's explicitly for this DAO\n                  if (activity.dao === daoAddress) return true;\n                  \n                  // For activities without DAO address, check if transaction directly involves this DAO\n                  if (activity.dao === 'unknown' || activity.dao === 'network') {\n                    // Check if the transaction function explicitly involves this DAO\n                    if (tx.payload?.function?.includes(daoAddress)) return true;\n                    \n                    // Check if any event data contains this DAO address\n                    if (tx.events?.some((event: any) => {\n                      const eventData = event.data || {};\n                      return eventData.dao_address === daoAddress ||\n                             JSON.stringify(eventData).includes(daoAddress);\n                    })) return true;\n                  }\n                  \n                  // REJECT all other activities - they belong to other DAOs\n                  return false;\n                });\n                \n                // Set the DAO address for activities that don't have it\n                const updatedActivities = daoSpecificActivities.map(activity => ({\n                  ...activity,\n                  dao: activity.dao === 'unknown' || activity.dao === 'network' ? daoAddress : activity.dao\n                }));\n                \n                memberActivities.push(...updatedActivities);\n              }\n            }\n\n            return memberActivities;\n          } catch (error) {\n            console.warn(`Failed to fetch activities for member ${memberAddress}:`, error);\n            return [];\n          }\n        });\n\n        const memberActivitiesResults = await Promise.allSettled(memberActivitiesPromises);\n        memberActivitiesResults.forEach(result => {\n          if (result.status === 'fulfilled') {\n            activities.push(...result.value);\n          }\n        });\n      }\n\n      return activities;\n    } catch (error) {\n      console.warn('Failed to fetch member activities:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Fallback method for general activity scanning\n   */\n  private static async fetchGeneralActivitiesPaginated(options: PaginationOptions): Promise<PaginatedActivities> {\n    const { page = 1, limit = 100, offset = 0, startVersion } = options;\n    const activities: Activity[] = [];\n    \n    try {\n      // Get recent transactions from the network with broader search\n      const { transactions, pagination } = await this.getAllRecentTransactionsPaginated({\n        limit: limit * 5,\n        offset,\n        startVersion\n      });\n      \n      \n      for (const tx of transactions) {\n        if (tx.type === 'user_transaction') {\n          const parsedActivities = await this.parseTransactionForActivities(tx);\n          activities.push(...parsedActivities);\n        }\n      }\n\n      activities.sort((a, b) => b.timestamp - a.timestamp);\n      const paginatedActivities = activities.slice(0, limit);\n      \n      return {\n        activities: paginatedActivities,\n        pagination: {\n          currentPage: page,\n          totalPages: Math.ceil(activities.length / limit),\n          totalItems: activities.length,\n          hasNextPage: activities.length > limit,\n          hasPreviousPage: page > 1,\n          nextCursor: pagination?.nextCursor,\n          previousCursor: pagination?.previousCursor,\n          limit\n        }\n      };\n    } catch (error) {\n      console.error('Error in general activity scan:', error);\n      return {\n        activities: [],\n        pagination: {\n          currentPage: page,\n          totalPages: 0,\n          totalItems: 0,\n          hasNextPage: false,\n          hasPreviousPage: false,\n          limit\n        }\n      };\n    }\n  }\n\n  /**\n   * Search network for transactions that mention this DAO\n   */\n  private static async searchNetworkForDAOActivities(daoAddress: string, limit: number): Promise<Activity[]> {\n    const activities: Activity[] = [];\n    \n    try {\n      \n      // Search recent transactions for any mention of this DAO\n      const { transactions } = await this.getAllRecentTransactionsPaginated({\n        limit: limit * 3,\n        offset: 0\n      });\n\n\n      let foundCount = 0;\n      for (const tx of transactions) {\n        if (tx.type === 'user_transaction' && foundCount < limit) {\n          \n          // Check if this transaction mentions our DAO\n          let mentionsDAO = false;\n          \n          // Check function arguments\n          if (tx.payload?.functionArguments) {\n            const argsString = JSON.stringify(tx.payload.functionArguments);\n            mentionsDAO = argsString.includes(daoAddress);\n            if (mentionsDAO) {\n            }\n          }\n          \n          // Check events for DAO reference\n          if (!mentionsDAO && tx.events) {\n            mentionsDAO = tx.events.some((event: any) => {\n              const eventData = event.data || {};\n              const hasDAORef = eventData.dao_address === daoAddress || \n                     JSON.stringify(eventData).includes(daoAddress);\n              if (hasDAORef) {\n              }\n              return hasDAORef;\n            });\n          }\n\n          if (mentionsDAO) {\n            const parsedActivities = await this.parseTransactionEvents(tx, daoAddress);\n            // Only keep activities for this DAO or unknown ones\n            const relevantActivities = parsedActivities.filter(activity => \n              !activity.dao || activity.dao === 'unknown' || activity.dao === daoAddress\n            );\n            \n            activities.push(...relevantActivities);\n            foundCount += relevantActivities.length;\n          }\n        }\n      }\n\n\n    } catch (error) {\n      console.error('Error searching network for DAO activities:', error);\n    }\n\n    return activities;\n  }\n\n  /**\n   * Parse transaction for DAO context (less strict than event-only parsing)\n   */\n  private static async parseTransactionForDAOContext(tx: any, contextDAO: string): Promise<Activity[]> {\n    const activities: Activity[] = [];\n    \n    try {\n      // Parse using existing methods but filter for relevance\n      const allActivities = await this.parseTransactionForActivities(tx);\n      \n      // Filter for activities relevant to this DAO context\n      const relevantActivities = allActivities.filter(activity => {\n        // Skip activities that are explicitly for other DAOs\n        if (activity.dao && activity.dao !== contextDAO && activity.dao !== 'unknown') {\n          return false;\n        }\n        \n        return true;\n      });\n\n      activities.push(...relevantActivities);\n\n    } catch (error) {\n      console.error('Error parsing transaction for DAO context:', error);\n    }\n\n    return activities;\n  }\n\n  /**\n   * Get activity URL for explorer\n   */\n  static getActivityExplorerUrl(activity: Activity): string {\n    return `https://cedrascan.com/txn/${activity.transactionHash}`;\n  }\n\n  /**\n   * Create sample activities for testing when no real activities are found\n   */\n  private static async createSampleActivities(daoAddress: string, count: number): Promise<Activity[]> {\n    const now = Date.now();\n    const activities: Activity[] = [];\n    \n    const sampleUsers = [\n      '0x1234567890abcdef1234567890abcdef12345678',\n      '0xabcdef1234567890abcdef1234567890abcdef12',\n      '0x9876543210fedcba9876543210fedcba98765432'\n    ];\n    \n    const activityTemplates = [\n      {\n        type: 'join_dao' as const,\n        title: 'Joined DAO',\n        description: 'New member joined the DAO',\n        amount: undefined\n      },\n      {\n        type: 'stake' as const,\n        title: 'Tokens Staked',\n        description: 'Staked tokens in DAO',\n        amount: 100 + Math.random() * 900\n      },\n      {\n        type: 'vote' as const,\n        title: 'Voted on Proposal',\n        description: 'Cast vote on governance proposal #1',\n        amount: undefined\n      },\n      {\n        type: 'proposal_created' as const,\n        title: 'Proposal Created',\n        description: 'Created new governance proposal',\n        amount: undefined\n      },\n      {\n        type: 'treasury_deposit' as const,\n        title: 'Treasury Deposit',\n        description: 'Deposited funds to treasury',\n        amount: 500 + Math.random() * 1500\n      }\n    ];\n    \n    for (let i = 0; i < count; i++) {\n      const template = activityTemplates[i % activityTemplates.length];\n      const user = sampleUsers[i % sampleUsers.length];\n      const hoursAgo = i * 2 + Math.random() * 4;\n      const timestamp = now - (hoursAgo * 60 * 60 * 1000);\n      \n      activities.push({\n        id: `sample_${daoAddress}_${i}_${Date.now()}`,\n        type: template.type,\n        title: template.title,\n        description: template.description,\n        amount: template.amount,\n        user,\n        dao: daoAddress,\n        timestamp,\n        transactionHash: `0x${'0'.repeat(64)}${i}`,\n        status: 'success',\n        metadata: {}\n      });\n    }\n    \n    return activities;\n  }\n\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useBalance.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2923,2926],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2923,2926],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4182,4185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4182,4185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4214,4217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4214,4217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":142,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4315,4318],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4315,4318],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4383,4386],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4383,4386],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4517,4520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4517,4520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4549,4552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4549,4552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":152,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4693,4696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4693,4696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4759,4762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4759,4762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5273,5276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5273,5276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":175,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5342,5345],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5342,5345],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":191,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5678,5681],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5678,5681],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Balance Service for Cedra Network\n *\n * Handles wallet balance queries using Cedra SDK\n * Supports multiple fallback methods for reliability\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { cedraClient } from '../cedra_service/cedra-client';\n\nexport class BalanceService {\n  // Cedra uses CedraCoin as the native coin\n  private static readonly CEDRA_COIN_STORE_TYPE = '0x1::coin::CoinStore<0x1::cedra_coin::CedraCoin>';\n  private static readonly CEDRA_COIN_TYPE = '0x1::cedra_coin::CedraCoin';\n  private static readonly OCTAS_TO_CEDRA = 100000000; // 1e8 - Cedra has 8 decimals (Octas)\n\n  /**\n   * Get wallet balance using multiple fallback methods\n   *\n   * Uses Cedra SDK to query CedraCoin balance\n   * Implements multiple fallback strategies for reliability\n   */\n  static async getWalletBalance(address: string): Promise<number> {\n    if (!address) {\n      console.warn('No address provided for balance check');\n      return 0;\n    }\n\n    try {\n      // Method 1: Try direct account resource query (most reliable)\n      const balance = await this.getBalanceFromAccountResource(address);\n      if (balance !== null) {\n        console.log(` Balance from account resource: ${balance} CEDRA`);\n        return balance;\n      }\n    } catch (error) {\n      console.log('Method 1 failed, trying method 2...', error);\n    }\n\n    try {\n      // Method 2: Try view function call\n      const balance = await this.getBalanceFromViewFunction(address);\n      if (balance !== null) {\n        console.log(` Balance from view function: ${balance} CEDRA`);\n        return balance;\n      }\n    } catch (error) {\n      console.log('Method 2 failed, trying method 3...', error);\n    }\n\n    try {\n      // Method 3: Try account resources list search\n      const balance = await this.getBalanceFromAccountResources(address);\n      if (balance !== null) {\n        console.log(` Balance from account resources: ${balance} CEDRA`);\n        return balance;\n      }\n    } catch (error) {\n      console.log('Method 3 failed, trying method 4...', error);\n    }\n\n    try {\n      // Method 4: Try account info with coins\n      const balance = await this.getBalanceFromAccountInfo(address);\n      if (balance !== null) {\n        console.log(` Balance from account info: ${balance} CEDRA`);\n        return balance;\n      }\n    } catch (error) {\n      console.log(' All balance fetching methods failed', error);\n    }\n\n    console.warn(` Unable to fetch balance for address ${address}`);\n    return 0;\n  }\n\n  /**\n   * Method 1: Get balance from account resource\n   *\n   * Queries CedraCoin CoinStore resource directly\n   */\n  private static async getBalanceFromAccountResource(address: string): Promise<number | null> {\n    try {\n      const resource = await cedraClient.getAccountResource({\n        accountAddress: address,\n        resourceType: this.CEDRA_COIN_STORE_TYPE,\n      });\n\n      const value = (resource.data as any)?.coin?.value;\n      if (value !== undefined && value !== null) {\n        return Number(value) / this.OCTAS_TO_CEDRA;\n      }\n      return null;\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Method 2: Get balance using view function\n   *\n   * Uses Cedra SDK view function to query balance\n   */\n  private static async getBalanceFromViewFunction(address: string): Promise<number | null> {\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: '0x1::coin::balance',\n          typeArguments: [this.CEDRA_COIN_TYPE],\n          functionArguments: [address],\n        },\n      });\n\n      if (result && result[0] !== undefined) {\n        return Number(result[0]) / this.OCTAS_TO_CEDRA;\n      }\n      return null;\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Method 3: Get balance from account resources list\n   *\n   * Searches all account resources for CedraCoin store\n   */\n  private static async getBalanceFromAccountResources(address: string): Promise<number | null> {\n    try {\n      const resources = await cedraClient.getAccountResources({\n        accountAddress: address,\n      });\n\n      if (!Array.isArray(resources)) return null;\n\n      // Look for CedraCoin store\n      const cedraCoinStore: any = resources.find((resource: any) =>\n        resource?.type === this.CEDRA_COIN_STORE_TYPE\n      );\n\n      if ((cedraCoinStore as any)?.data?.coin?.value) {\n        return Number((cedraCoinStore as any).data.coin.value) / this.OCTAS_TO_CEDRA;\n      }\n\n      // Fallback: Look for any coin store with value\n      const anyCoinStore: any = resources.find((resource: any) =>\n        resource?.type?.startsWith('0x1::coin::CoinStore<') &&\n        resource?.data?.coin?.value\n      );\n\n      if ((anyCoinStore as any)?.data?.coin?.value) {\n        return Number((anyCoinStore as any).data.coin.value) / this.OCTAS_TO_CEDRA;\n      }\n\n      return null;\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Method 4: Get balance from account info\n   *\n   * Uses Cedra SDK getAccountInfo for balance\n   */\n  private static async getBalanceFromAccountInfo(address: string): Promise<number | null> {\n    try {\n      const accountInfo = await cedraClient.getAccountInfo({\n        accountAddress: address,\n      });\n\n      // Check if account info has balance information\n      if ((accountInfo as any)?.balance !== undefined) {\n        return Number((accountInfo as any).balance) / this.OCTAS_TO_CEDRA;\n      }\n\n      return null;\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Register CedraCoin for an account if not already registered\n   *\n   * Uses Cedra SDK to check and register CedraCoin\n   */\n  static async ensureCedraCoinRegistered(\n    address: string,\n    signAndSubmitTransaction: any\n  ): Promise<boolean> {\n    try {\n      // Check if CedraCoin is already registered\n      await cedraClient.getAccountResource({\n        accountAddress: address,\n        resourceType: this.CEDRA_COIN_STORE_TYPE,\n      });\n      return true; // Already registered\n    } catch {\n      // Not registered, need to register\n      try {\n        const registerPayload = {\n          function: '0x1::coin::register',\n          typeArguments: [this.CEDRA_COIN_TYPE],\n          functionArguments: [],\n        };\n\n        const tx = await signAndSubmitTransaction({ payload: registerPayload });\n        if (tx?.hash) {\n          await cedraClient.waitForTransaction({\n            transactionHash: tx.hash,\n            options: { checkSuccess: true }\n          });\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('Failed to register CedraCoin:', error);\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Check if account has sufficient balance for transaction\n   */\n  static async hasSufficientBalance(\n    address: string, \n    requiredAmount: number, \n    gasReserve: number = 0.02\n  ): Promise<{ sufficient: boolean; available: number; required: number }> {\n    const balance = await this.getWalletBalance(address);\n    const available = Math.max(0, balance - gasReserve);\n    const required = requiredAmount;\n    \n    return {\n      sufficient: available >= required,\n      available,\n      required\n    };\n  }\n\n  /**\n   * Format balance for display\n   */\n  static formatBalance(balance: number, decimals: number = 2): string {\n    return balance.toFixed(decimals);\n  }\n\n  /**\n   * Convert CEDRA to Octas (smallest unit)\n   */\n  static cedraToOctas(cedraAmount: number): string {\n    return Math.floor(cedraAmount * this.OCTAS_TO_CEDRA).toString();\n  }\n\n  /**\n   * Convert Octas to CEDRA\n   */\n  static octasToCedra(octasAmount: string | number): number {\n    return Number(octasAmount) / this.OCTAS_TO_CEDRA;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useContractActivity.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1444,1447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1444,1447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-useless-catch","severity":1,"message":"Unnecessary try/catch wrapper.","line":55,"column":7,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":73,"endColumn":8},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2455,2458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2455,2458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2500,2503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2500,2503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3394,3397],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3394,3397],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'activities' is defined but never used.","line":277,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"activities"},"fix":{"range":[8760,8790],"text":""},"desc":"Remove unused variable 'activities'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Contract Activity Service\n *\n * Handles fetching activity events from Cedra blockchain\n * Uses Cedra SDK for event queries\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { getActivityEventType } from '../services_abi/activitytracker_abi';\nimport { Activity, PaginationOptions, PaginatedActivities } from './useActivityTracker';\n\nexport interface ContractActivity {\n  activity_id: string;\n  dao_address: string;\n  activity_type: number;\n  user_address: string;\n  title: string;\n  description: string;\n  amount: string;\n  metadata: string;\n  timestamp: string;\n  transaction_hash: string;\n  block_number: string;\n  version: string;\n  sequence_number: string;\n}\n\nexport interface ContractActivityQuery {\n  dao_address?: string;\n  user_address?: string;\n  activity_type?: number;\n  start_time?: number;\n  end_time?: number;\n  limit?: number;\n  offset?: number;\n}\n\nexport class ContractActivityService {\n  /**\n   * Get activities from contract events\n   */\n  static async getContractActivities(\n    query: ContractActivityQuery = {}\n  ): Promise<ContractActivity[]> {\n    try {\n      console.log('≡ƒöì Fetching contract activities with query:', query);\n\n      // Use helper function to get event type\n      const eventType = getActivityEventType();\n\n      // Prefer account-centric event query for modules that emit events from DAO addresses\n      let events: any[] = [];\n      try {\n        // If a DAO is specified, read events from that account's module event handle\n        if (query.dao_address) {\n          events = await cedraClient.getAccountEventsByEventType({\n            accountAddress: query.dao_address,\n            eventType: eventType as `${string}::${string}::${string}`,\n            options: { limit: query.limit || 100, offset: query.offset || 0 },\n          });\n        } else {\n          // Fallback to module-level event query\n          events = await cedraClient.getModuleEventsByEventType({\n            eventType: eventType as `${string}::${string}::${string}`,\n            options: { limit: query.limit || 100, offset: query.offset || 0 },\n          });\n        }\n      } catch (e) {\n        // If account-level query failed, rethrow to be handled by caller\n        throw e;\n      }\n\n      console.log(` Found ${events.length} contract events`);\n\n      // Filter events based on query parameters\n      const filteredEvents = events.filter((event: any) => {\n        const data = event.data as any;\n        \n        // Filter by DAO address\n        if (query.dao_address && data.dao_address !== query.dao_address) {\n          return false;\n        }\n\n        // Filter by user address\n        if (query.user_address && data.user_address !== query.user_address) {\n          return false;\n        }\n\n        // Filter by activity type\n        if (query.activity_type !== undefined && data.activity_type !== query.activity_type) {\n          return false;\n        }\n\n        // Filter by time range\n        const timestamp = parseInt(data.timestamp);\n        if (query.start_time && timestamp < query.start_time) {\n          return false;\n        }\n        if (query.end_time && timestamp > query.end_time) {\n          return false;\n        }\n\n        return true;\n      });\n\n      // Convert to ContractActivity format\n      const activities: ContractActivity[] = filteredEvents.map((event: any) => ({\n        activity_id: event.data.activity_id,\n        dao_address: event.data.dao_address,\n        activity_type: event.data.activity_type,\n        user_address: event.data.user_address,\n        title: event.data.title,\n        description: event.data.description,\n        amount: event.data.amount,\n        metadata: event.data.metadata,\n        timestamp: event.data.timestamp,\n        transaction_hash: event.data.transaction_hash || event.guid?.creation_number || '',\n        block_number: event.data.block_number,\n        version: event.version || event.transaction_version || '',\n        sequence_number: event.sequence_number || event.sequence_number || '',\n      }));\n\n      // Sort by timestamp descending (most recent first)\n      activities.sort((a, b) => parseInt(b.timestamp) - parseInt(a.timestamp));\n\n      console.log(` Processed ${activities.length} contract activities`);\n      return activities;\n    } catch (error) {\n      console.error('Error fetching contract activities:', error);\n      console.log(' Contract-based activities not available, will fallback to transaction parsing');\n      \n      // Check if it's a deployment issue\n      if ((error as Error).message?.includes('not found') || (error as Error).message?.includes('does not exist')) {\n        console.warn(' Activity tracker contract may not be deployed or initialized');\n      }\n      \n      throw error;\n    }\n  }\n\n  /**\n   * Get activities for a specific DAO\n   */\n  static async getDAOContractActivities(\n    daoAddress: string,\n    options: PaginationOptions = {}\n  ): Promise<ContractActivity[]> {\n    return this.getContractActivities({\n      dao_address: daoAddress,\n      limit: options.limit || 50,\n      offset: options.offset || 0,\n    });\n  }\n\n  /**\n   * Get activities for a specific user\n   */\n  static async getUserContractActivities(\n    userAddress: string,\n    options: PaginationOptions = {}\n  ): Promise<ContractActivity[]> {\n    return this.getContractActivities({\n      user_address: userAddress,\n      limit: options.limit || 50,\n      offset: options.offset || 0,\n    });\n  }\n\n  /**\n   * Get recent activities across all DAOs\n   */\n  static async getGlobalContractActivities(\n    options: PaginationOptions = {}\n  ): Promise<ContractActivity[]> {\n    return this.getContractActivities({\n      limit: options.limit || 100,\n      offset: options.offset || 0,\n    });\n  }\n\n  /**\n   * Convert contract activity to frontend Activity format\n   */\n  static convertToActivity(contractActivity: ContractActivity): Activity {\n    const activityTypeMap: { [key: number]: Activity['type'] } = {\n      1: 'proposal_created', // DAO_CREATED\n      2: 'join_dao', // MEMBER_JOINED\n      3: 'proposal_executed', // MEMBER_LEFT\n      4: 'proposal_created', // PROPOSAL_CREATED\n      5: 'vote', // PROPOSAL_VOTED\n      6: 'proposal_executed', // PROPOSAL_EXECUTED\n      7: 'stake', // STAKE\n      8: 'unstake', // UNSTAKE\n      9: 'treasury_deposit', // TREASURY_DEPOSIT\n      10: 'treasury_withdrawal', // TREASURY_WITHDRAWAL\n      11: 'reward_claimed', // REWARD_CLAIMED\n      12: 'proposal_created', // LAUNCHPAD_CREATED\n      13: 'treasury_deposit', // LAUNCHPAD_INVESTMENT\n    };\n\n    return {\n      id: contractActivity.activity_id,\n      type: activityTypeMap[contractActivity.activity_type] || 'proposal_created',\n      title: contractActivity.title,\n      description: contractActivity.description,\n      amount: parseInt(contractActivity.amount) / 100000000, // Convert from octas\n      user: contractActivity.user_address,\n      dao: contractActivity.dao_address,\n      timestamp: parseInt(contractActivity.timestamp) * 1000, // Convert to milliseconds\n      transactionHash: contractActivity.transaction_hash,\n      blockNumber: parseInt(contractActivity.block_number),\n      status: 'success',\n      metadata: {},\n    };\n  }\n\n  /**\n   * Get activities with pagination support\n   */\n  static async getContractActivitiesPaginated(\n    query: ContractActivityQuery = {},\n    options: PaginationOptions = {}\n  ): Promise<PaginatedActivities> {\n    const { page = 1, limit = 50 } = options;\n    const offset = (page - 1) * limit;\n\n    const activities = await this.getContractActivities({\n      ...query,\n      limit,\n      offset,\n    });\n\n    // Convert to frontend Activity format\n    const convertedActivities = activities.map(activity => \n      this.convertToActivity(activity)\n    );\n\n    return {\n      activities: convertedActivities,\n      pagination: {\n        currentPage: page,\n        totalPages: Math.ceil(activities.length / limit),\n        totalItems: activities.length,\n        hasNextPage: activities.length === limit,\n        hasPreviousPage: page > 1,\n        nextCursor: activities.length === limit ? (page + 1).toString() : undefined,\n        previousCursor: page > 1 ? (page - 1).toString() : undefined,\n        limit,\n      },\n    };\n  }\n\n  /**\n   * Get real-time activity updates by polling recent events\n   */\n  static async getRecentActivities(\n    sinceTimestamp?: number,\n    limit: number = 20\n  ): Promise<ContractActivity[]> {\n    const query: ContractActivityQuery = {\n      limit,\n    };\n\n    if (sinceTimestamp) {\n      query.start_time = sinceTimestamp;\n    }\n\n    return this.getContractActivities(query);\n  }\n\n  /**\n   * Subscribe to new activities (polling-based)\n   */\n  static subscribeToActivities(\n    callback: (activities: ContractActivity[]) => void,\n    interval: number = 10000 // 10 seconds\n  ): () => void {\n    let lastTimestamp = Math.floor(Date.now() / 1000);\n    let isSubscribed = true;\n\n    const poll = async () => {\n      if (!isSubscribed) return;\n\n      try {\n        const newActivities = await this.getRecentActivities(lastTimestamp);\n        if (newActivities.length > 0) {\n          callback(newActivities);\n          lastTimestamp = Math.floor(Date.now() / 1000);\n        }\n      } catch (error) {\n        console.error('Error polling for new activities:', error);\n      }\n\n      if (isSubscribed) {\n        setTimeout(poll, interval);\n      }\n    };\n\n    poll();\n\n    // Return unsubscribe function\n    return () => {\n      isSubscribed = false;\n    };\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useDAOCore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7226,7229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7226,7229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":239,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7958,7961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7958,7961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":239,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7985,7988],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7985,7988],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'waitError' is defined but never used.","line":252,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":252,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'waitError' is defined but never used.","line":252,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":252,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'verifyError' is defined but never used.","line":264,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'verifyError' is defined but never used.","line":264,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":264,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":270,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9021,9024],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9021,9024],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":341,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11576,11579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11576,11579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":343,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":343,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11611,11614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11611,11614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":343,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":343,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11632,11635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11632,11635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'waitError' is defined but never used.","line":353,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":353,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'waitError' is defined but never used.","line":353,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":353,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":360,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":360,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12132,12135],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12132,12135],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":399,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13169,13172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13169,13172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":449,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":449,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14420,14423],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14420,14423],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDAOInfo'. Either include it or remove the dependency array.","line":555,"column":6,"nodeType":"ArrayExpression","endLine":555,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [daoAddress, fetchDAOInfo]","fix":{"range":[17369,17381],"text":"[daoAddress, fetchDAOInfo]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProposals'. Either include it or remove the dependency array.","line":640,"column":6,"nodeType":"ArrayExpression","endLine":640,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [councilAddress, fetchProposals]","fix":{"range":[19701,19717],"text":"[councilAddress, fetchProposals]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":674,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":674,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20568,20571],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20568,20571],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":712,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":712,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21629,21632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21629,21632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkRegistry'. Either include it or remove the dependency array.","line":760,"column":6,"nodeType":"ArrayExpression","endLine":760,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [checkRegistry, councilAddress]","fix":{"range":[22875,22891],"text":"[checkRegistry, councilAddress]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * DAO Core Service for Cedra Network\n *\n * Handles DAO creation, proposals, and voting using Cedra SDK\n * Wallet-based transaction signing and submission\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { useState, useEffect } from 'react'\nimport { useWallet } from '../contexts/CedraWalletProvider'\nimport { cedraClient } from '../cedra_service/cedra-client'\nimport { MODULE_ADDRESS } from '../cedra_service/constants'\nimport { DAO_FUNCTIONS, DAO_RESOURCES } from '../services_abi/dao_core'\n\nexport interface CreateDAOParams {\n  name: string\n  subname: string\n  description: string\n  logo: Uint8Array\n  background: Uint8Array\n  minStakeToJoin: number\n  xLink: string\n  discordLink: string\n  telegramLink: string\n  website: string\n  category: string\n}\n\nexport interface CreateDAOWithUrlsParams {\n  name: string\n  subname: string\n  description: string\n  logoUrl: string\n  backgroundUrl: string\n  minStakeToJoin: number\n  xLink: string\n  discordLink: string\n  telegramLink: string\n  website: string\n  category: string\n}\n\nexport interface DAOInfo {\n  name: string\n  subname: string\n  description: string\n  logo: Uint8Array\n  background: Uint8Array\n  createdAt: number\n}\n\nexport interface DAOCreationProposal {\n  id: number\n  proposer: string\n  targetDaoAddress: string\n  name: string\n  subname: string\n  description: string\n  createdAt: number\n  votingDeadline: number\n  yesVotes: number\n  noVotes: number\n  executed: boolean\n  approved: boolean\n}\n\nexport function useCreateDAO() {\n  const { account, signAndSubmitTransaction } = useWallet()\n  const [isPending, setIsPending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const createDAO = async (params: CreateDAOParams) => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Wallet not connected')\n    }\n\n    setIsPending(true)\n    setError(null)\n\n    try {\n      console.log('≡ƒôï Creating DAO on Cedra Network')\n      console.log('≡ƒæñ Account:', account.address)\n\n      // Validate parameters against contract requirements\n\n      // Name validation (3-100 characters)\n      if (!params.name || params.name.trim().length < 3) {\n        throw new Error('DAO name must be at least 3 characters long')\n      }\n      if (params.name.length > 100) {\n        throw new Error('DAO name must be less than 100 characters')\n      }\n\n      // Subname validation\n      if (!params.subname || params.subname.trim().length < 3) {\n        throw new Error('DAO subname must be at least 3 characters long')\n      }\n      if (params.subname.length > 100) {\n        throw new Error('DAO subname must be less than 100 characters')\n      }\n\n      // Description validation (10-2000 characters)\n      if (!params.description || params.description.trim().length < 10) {\n        throw new Error('DAO description must be at least 10 characters long')\n      }\n      if (params.description.length > 2000) {\n        throw new Error('DAO description must be less than 2000 characters')\n      }\n\n      // Logo size validation (contract allows up to 1MB)\n      const maxLogoSize = 1_048_576 // 1MB\n      if (params.logo.length > maxLogoSize) {\n        throw new Error(`Logo must be Γëñ ${Math.round(maxLogoSize / 1024)}KB (contract limit). Current: ${Math.round(params.logo.length / 1024)}KB`)\n      }\n\n      // Background size validation (contract allows up to 5MB)\n      const maxBgSize = 5_242_880 // 5MB\n      if (params.background.length > maxBgSize) {\n        throw new Error(`Background must be Γëñ ${Math.round(maxBgSize / 1024)}KB (contract limit). Current: ${Math.round(params.background.length / 1024)}KB`)\n      }\n\n      // Min stake validation (6,000,000-10,000,000,000 octas = 6-10,000 CEDRA)\n      if (params.minStakeToJoin < 6000000) {\n        throw new Error('Minimum stake must be at least 6 CEDRA tokens')\n      }\n      if (params.minStakeToJoin > 10000000000) {\n        throw new Error('Minimum stake must be less than 10,000 CEDRA tokens')\n      }\n\n      // Prepare transaction payload using ABI helpers\n      const logoBytes = Array.from(params.logo);\n      const backgroundBytes = Array.from(params.background);\n\n      // Prepare payload in exact format wallet expects\n      const payload = {\n        function: DAO_FUNCTIONS.CREATE_DAO as `${string}::${string}::${string}`,\n        typeArguments: [] as string[],\n        functionArguments: [\n          params.name,\n          params.subname,\n          params.description,\n          logoBytes,\n          backgroundBytes,\n          params.minStakeToJoin,\n          1, // staking_type: 1 for Native CEDRA\n          \"0x1\", // fa_metadata_address: default for Native\n          params.xLink || \"\",\n          params.discordLink || \"\",\n          params.telegramLink || \"\",\n          params.website || \"\",\n          params.category || \"\"\n        ],\n      }\n\n      console.log('≡ƒôï Transaction payload:')\n      console.log('  - Function:', DAO_FUNCTIONS.CREATE_DAO)\n      console.log('  - Name:', params.name, `(${params.name.length} chars)`)\n      console.log('  - Subname:', params.subname, `(${params.subname.length} chars)`)\n      console.log('  - Description:', `${params.description.length} chars`)\n      console.log('  - Logo:', `${params.logo.length} bytes`)\n      console.log('  - Background:', `${params.background.length} bytes`)\n      console.log('  - Min stake:', params.minStakeToJoin, 'octas (CEDRA)')\n\n      // Verify contract exists before submitting\n      console.log('≡ƒöì Verifying contract exists on Cedra testnet...')\n      try {\n        const module = await cedraClient.getAccountModule({\n          accountAddress: MODULE_ADDRESS,\n          moduleName: 'dao_core_file'\n        });\n        console.log(' Contract verified on-chain:', module ? 'exists' : 'not found')\n      } catch (verifyError) {\n        console.error(' WARNING: Contract may not be deployed:', verifyError)\n        throw new Error('DAO contract not found on Cedra testnet. Please ensure the contract is deployed.')\n      }\n\n      // Calculate gas based on data size\n      const logoSize = params.logo.length\n      const backgroundSize = params.background.length\n      const totalImageSize = logoSize + backgroundSize\n\n      const baseGas = 80000\n      const gasPerByte = 2\n      const estimatedGas = baseGas + (totalImageSize * gasPerByte)\n      const maxGasAmount = Math.min(Math.max(estimatedGas, 150000), 500_000)\n\n      console.log('Γ¢╜ Gas estimation:', {\n        logoSize: `${logoSize} bytes`,\n        backgroundSize: `${backgroundSize} bytes`,\n        totalImageSize: `${totalImageSize} bytes`,\n        estimatedGas,\n        maxGasAmount,\n      })\n\n      // Submit via wallet (wallet will build, sign, and submit)\n      console.log('≡ƒÜÇ Submitting DAO creation via Cedra wallet...')\n\n      let resultTx;\n      let retryCount = 0;\n      const maxRetries = 3;\n\n      while (retryCount <= maxRetries) {\n        try {\n          console.log('≡ƒôñ Sending transaction to wallet');\n\n          // Wallet expects: { payload, gasUnitPrice?, maxGasAmount? }\n          const walletInput = {\n            payload,\n            maxGasAmount,\n            gasUnitPrice: 100\n          };\n\n          resultTx = await signAndSubmitTransaction(walletInput);\n          break;\n        } catch (retryError: any) {\n          retryCount++;\n          if (retryCount > maxRetries) {\n            throw retryError;\n          }\n\n          const isRetryableError = retryError.message?.includes('network') ||\n            retryError.message?.includes('timeout') ||\n            retryError.message?.includes('429') ||\n            retryError.message?.includes('503');\n\n          if (!isRetryableError) {\n            throw retryError;\n          }\n\n          console.log(` Network error on attempt ${retryCount}, retrying...`);\n          await new Promise(resolve => setTimeout(resolve, 1000 * retryCount));\n        }\n      }\n\n      // Extract transaction hash\n      const txHash = typeof resultTx === 'string'\n        ? resultTx\n        : ((resultTx as any)?.hash || (resultTx as any)?.transactionHash || null);\n\n      if (txHash) {\n        try {\n          console.log('ΓÅ│ Waiting for transaction confirmation...')\n          await cedraClient.waitForTransaction({\n            transactionHash: txHash as string,\n            options: {\n              checkSuccess: true,\n              timeoutSecs: 45\n            }\n          });\n          console.log(` DAO created successfully! Transaction: ${txHash}`)\n        } catch (waitError) {\n          console.warn(' Transaction confirmation timeout. DAO creation likely succeeded.')\n        }\n      }\n\n      // Verify DAO creation using ABI resource type\n      try {\n        await cedraClient.getAccountResource({\n          accountAddress: account.address,\n          resourceType: DAO_RESOURCES.DAO_INFO as `${string}::${string}::${string}`\n        })\n        console.log('DAO resource verified on-chain')\n      } catch (verifyError) {\n        console.warn(' DAO verification pending (indexer delay)')\n      }\n\n      setIsPending(false)\n      return resultTx\n    } catch (err: any) {\n      console.error('Error in createDAO:', err)\n\n      // Enhanced error handling\n      let errorMessage = 'Failed to create DAO'\n\n      if (err.message?.includes('User rejected') || err.message?.includes('rejected')) {\n        errorMessage = 'Transaction was rejected by the wallet. Please approve the transaction to create the DAO.'\n      } else if (err.message?.includes('insufficient') || err.message?.includes('balance')) {\n        errorMessage = 'Insufficient balance. DAO creation requires a 100 CEDRA deployment fee plus gas. Please check your wallet balance.'\n      } else if (err.message?.includes('gas')) {\n        errorMessage = 'Gas estimation failed. This might be a temporary network issue. Please try again.'\n      } else if (err.message?.includes('network') || err.message?.includes('connection')) {\n        errorMessage = 'Network connection issue. Please check your internet connection and try again.'\n      } else if (err.message) {\n        errorMessage = err.message\n      }\n\n      setError(errorMessage)\n      setIsPending(false)\n      throw new Error(errorMessage)\n    }\n  }\n\n  const createDAOWithUrls = async (params: CreateDAOWithUrlsParams) => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Wallet not connected')\n    }\n\n    setIsPending(true)\n    setError(null)\n\n    try {\n      console.log('Creating DAO with URLs on Cedra Network')\n\n      // Validate parameters\n      if (!params.name || params.name.trim().length < 3) {\n        throw new Error('DAO name must be at least 3 characters long')\n      }\n      if (!params.logoUrl || !params.backgroundUrl) {\n        throw new Error('Logo and background URLs are required')\n      }\n\n      const payload = {\n        function: DAO_FUNCTIONS.CREATE_DAO_WITH_URLS as `${string}::${string}::${string}`,\n        typeArguments: [],\n        functionArguments: [\n          params.name,\n          params.subname,\n          params.description,\n          params.logoUrl,\n          params.backgroundUrl,\n          params.minStakeToJoin,\n          1, // staking_type: 1 for Native CEDRA\n          \"0x1\", // fa_metadata_address: default for Native\n          params.xLink || \"\",\n          params.discordLink || \"\",\n          params.telegramLink || \"\",\n          params.website || \"\",\n          params.category || \"\"\n        ],\n      }\n\n      console.log('Submitting DAO creation with URLs...')\n\n      const tx = await signAndSubmitTransaction({\n        payload,\n        options: {\n          maxGasAmount: 200_000,\n          gasUnitPrice: 100\n        }\n      } as any);\n\n      const txHash = (tx as any)?.hash || (tx as any)?.transactionHash;\n\n      if (txHash) {\n        try {\n          console.log('Waiting for confirmation...')\n          await cedraClient.waitForTransaction({\n            transactionHash: txHash,\n            options: { checkSuccess: true, timeoutSecs: 30 }\n          });\n          console.log(`DAO created with URLs! Transaction: ${txHash}`)\n        } catch (waitError) {\n          console.warn(' Confirmation timeout')\n        }\n      }\n\n      setIsPending(false)\n      return tx\n    } catch (err: any) {\n      console.error('Error creating DAO with URLs:', err)\n\n      let errorMessage = 'Failed to create DAO with URLs'\n\n      if (err.message?.includes('User rejected')) {\n        errorMessage = 'Transaction was rejected by the wallet.'\n      } else if (err.message) {\n        errorMessage = err.message\n      }\n\n      setError(errorMessage)\n      setIsPending(false)\n      throw new Error(errorMessage)\n    }\n  }\n\n  const testMinimalTransaction = async () => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Wallet not connected')\n    }\n\n    console.log('Testing minimal DAO creation transaction...')\n\n    const payload = {\n      function: DAO_FUNCTIONS.CREATE_DAO as `${string}::${string}::${string}`,\n      typeArguments: [],\n      functionArguments: [\n        \"Test DAO\",\n        \"test-dao\",\n        \"A test DAO for debugging\",\n        [1, 2, 3],\n        [4, 5, 6],\n        6000000,\n        \"\", \"\", \"\", \"\", \"\"\n      ],\n    }\n\n    try {\n      const result = await signAndSubmitTransaction({ payload } as any)\n      return result\n    } catch (testError) {\n      console.error('Minimal transaction failed:', testError)\n      throw testError\n    }\n  }\n\n  return {\n    createDAO,\n    createDAOWithUrls,\n    testMinimalTransaction,\n    isPending,\n    error,\n  }\n}\n\nexport function useProposeDAOCreation() {\n  const { account, signAndSubmitTransaction } = useWallet()\n  const [isPending, setIsPending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const proposeDAOCreation = async (\n    councilAddress: string,\n    targetDAOAddress: string,\n    params: CreateDAOParams\n  ) => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Wallet not connected')\n    }\n\n    setIsPending(true)\n    setError(null)\n\n    try {\n      const payload = {\n        function: `${MODULE_ADDRESS}::dao_core_file::propose_dao_creation`,\n        typeArguments: [],\n        functionArguments: [\n          councilAddress,\n          targetDAOAddress,\n          params.name,\n          params.subname,\n          params.description,\n          Array.from(params.logo),\n          Array.from(params.background),\n          params.minStakeToJoin.toString()\n        ],\n      }\n\n      const result = await signAndSubmitTransaction({ payload } as any)\n      setIsPending(false)\n      return result\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to propose DAO creation'\n      setError(errorMessage)\n      setIsPending(false)\n      throw new Error(errorMessage)\n    }\n  }\n\n  return {\n    proposeDAOCreation,\n    isPending,\n    error,\n  }\n}\n\n// Utility function to convert Uint8Array to data URL\nconst uint8ArrayToDataUrl = (uint8Array: Uint8Array, mimeType: string = 'image/jpeg'): string => {\n  try {\n    if (!uint8Array || uint8Array.length === 0) {\n      return '';\n    }\n\n    const binary = Array.from(uint8Array)\n      .map(byte => String.fromCharCode(byte))\n      .join('');\n\n    const base64 = btoa(binary);\n\n    return `data:${mimeType};base64,${base64}`;\n  } catch (error) {\n    console.error('Error converting Uint8Array to data URL:', error);\n    return '';\n  }\n};\n\n// Enhanced interface that includes data URLs for display\nexport interface DAOInfoWithImages extends DAOInfo {\n  logoDataUrl?: string;\n  backgroundDataUrl?: string;\n}\n\nexport function useGetDAOInfo(daoAddress: string | null) {\n  const [data, setData] = useState<DAOInfoWithImages | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const fetchDAOInfo = async () => {\n    if (!daoAddress) return\n\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::dao_core_file::get_dao_info_with_subname`,\n          functionArguments: [daoAddress],\n        },\n      })\n\n      const [name, subname, description, logoIsUrl, logoUrl, logoData, bgIsUrl, bgUrl, bgData, createdAt] = result\n\n      let logoUint8: Uint8Array;\n      let logoDataUrl: string;\n      if (logoIsUrl) {\n        logoDataUrl = logoUrl as string;\n        logoUint8 = new Uint8Array();\n      } else {\n        logoUint8 = new Uint8Array(logoData as number[]);\n        logoDataUrl = uint8ArrayToDataUrl(logoUint8);\n      }\n\n      let backgroundUint8: Uint8Array;\n      let backgroundDataUrl: string;\n      if (bgIsUrl) {\n        backgroundDataUrl = bgUrl as string;\n        backgroundUint8 = new Uint8Array();\n      } else {\n        backgroundUint8 = new Uint8Array(bgData as number[]);\n        backgroundDataUrl = uint8ArrayToDataUrl(backgroundUint8);\n      }\n\n      setData({\n        name: name as string,\n        subname: (subname as string) || '',\n        description: description as string,\n        logo: logoUint8,\n        background: backgroundUint8,\n        logoDataUrl,\n        backgroundDataUrl,\n        createdAt: Number(createdAt),\n      })\n    } catch (err) {\n      console.error('Failed to fetch DAO info:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to fetch DAO info'\n      setError(errorMessage)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchDAOInfo()\n  }, [daoAddress])\n\n  return {\n    data,\n    isLoading,\n    error,\n    refetch: fetchDAOInfo,\n  }\n}\n\nexport function useGetDAOCreationProposals(councilAddress: string | null) {\n  const [data, setData] = useState<DAOCreationProposal[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const fetchProposals = async () => {\n    if (!councilAddress) return\n\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      const countResult = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::dao_core_file::get_dao_creation_proposal_count`,\n          functionArguments: [councilAddress],\n        },\n      })\n\n      const proposalCount = Number(countResult[0])\n      const proposals: DAOCreationProposal[] = []\n\n      for (let i = 0; i < proposalCount; i++) {\n        try {\n          const proposalResult = await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::dao_core_file::get_dao_creation_proposal`,\n              functionArguments: [councilAddress, i],\n            },\n          })\n\n          const [\n            id,\n            proposer,\n            targetDaoAddress,\n            name,\n            subname,\n            createdAt,\n            votingDeadline,\n            yesVotes,\n            noVotes,\n            executed,\n            approved\n          ] = proposalResult\n\n          proposals.push({\n            id: Number(id),\n            proposer: proposer as string,\n            targetDaoAddress: targetDaoAddress as string,\n            name: name as string,\n            subname: subname as string,\n            description: '',\n            createdAt: Number(createdAt),\n            votingDeadline: Number(votingDeadline),\n            yesVotes: Number(yesVotes),\n            noVotes: Number(noVotes),\n            executed: Boolean(executed),\n            approved: Boolean(approved),\n          })\n        } catch (proposalError) {\n          console.warn(`Failed to fetch proposal ${i}:`, proposalError)\n        }\n      }\n\n      setData(proposals)\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to fetch DAO creation proposals'\n      setError(errorMessage)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchProposals()\n  }, [councilAddress])\n\n  return {\n    data,\n    isLoading,\n    error,\n    refetch: fetchProposals,\n  }\n}\n\nexport function useVoteOnDAOCreation() {\n  const { account, signAndSubmitTransaction } = useWallet()\n  const [isPending, setIsPending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const voteOnDAOCreation = async (\n    councilAddress: string,\n    proposalId: number,\n    approve: boolean\n  ) => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Wallet not connected')\n    }\n\n    setIsPending(true)\n    setError(null)\n\n    try {\n      const payload = {\n        function: `${MODULE_ADDRESS}::dao_core_file::vote_on_dao_creation`,\n        typeArguments: [],\n        functionArguments: [councilAddress, proposalId.toString(), approve],\n      }\n\n      const result = await signAndSubmitTransaction({ payload } as any)\n      setIsPending(false)\n      return result\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to vote on DAO creation'\n      setError(errorMessage)\n      setIsPending(false)\n      throw new Error(errorMessage)\n    }\n  }\n\n  return {\n    voteOnDAOCreation,\n    isPending,\n    error,\n  }\n}\n\nexport function useExecuteDAOCreation() {\n  const { account, signAndSubmitTransaction } = useWallet()\n  const [isPending, setIsPending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const executeDAOCreation = async (councilAddress: string, proposalId: number) => {\n    if (!account || !signAndSubmitTransaction) {\n      throw new Error('Wallet not connected')\n    }\n\n    setIsPending(true)\n    setError(null)\n\n    try {\n      const payload = {\n        function: `${MODULE_ADDRESS}::dao_core_file::execute_dao_creation`,\n        typeArguments: [],\n        functionArguments: [councilAddress, proposalId.toString()],\n      }\n\n      const result = await signAndSubmitTransaction({ payload } as any)\n      setIsPending(false)\n      return result\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to execute DAO creation'\n      setError(errorMessage)\n      setIsPending(false)\n      throw new Error(errorMessage)\n    }\n  }\n\n  return {\n    executeDAOCreation,\n    isPending,\n    error,\n  }\n}\n\nexport function useCheckDAOCreationRegistry(councilAddress: string | null) {\n  const [isInitialized, setIsInitialized] = useState<boolean | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const checkRegistry = async () => {\n    if (!councilAddress) return\n\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::dao_core_file::is_dao_creation_registry_initialized`,\n          functionArguments: [councilAddress],\n        },\n      })\n\n      setIsInitialized(Boolean(result[0]))\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to check DAO creation registry'\n      setError(errorMessage)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    checkRegistry()\n  }, [councilAddress])\n\n  return {\n    isInitialized,\n    isLoading,\n    error,\n    refetch: checkRegistry,\n  }\n}\n\nexport function useCheckSubnameAvailability() {\n  const [isPending, setIsPending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const checkSubname = async (subname: string): Promise<{ isAvailable: boolean, owner?: string }> => {\n    if (!subname) {\n      throw new Error('Subname is required')\n    }\n\n    setIsPending(true)\n    setError(null)\n\n    try {\n      const takenResult = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::dao_core_file::is_subname_taken`,\n          functionArguments: [subname],\n        },\n      })\n\n      const isTaken = Boolean(takenResult[0])\n\n      if (isTaken) {\n        try {\n          const ownerResult = await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::dao_core_file::get_subname_owner`,\n              functionArguments: [subname],\n            },\n          })\n\n          return {\n            isAvailable: false,\n            owner: ownerResult[0] as string\n          }\n        } catch (ownerError) {\n          console.warn('Failed to get subname owner:', ownerError)\n          return {\n            isAvailable: false\n          }\n        }\n      }\n\n      return {\n        isAvailable: true\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to check subname availability'\n      setError(errorMessage)\n      throw new Error(errorMessage)\n    } finally {\n      setIsPending(false)\n    }\n  }\n\n  return {\n    checkSubname,\n    isPending,\n    error,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useFetchDAOs.ts","messages":[{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":29,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":29,"endColumn":16,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1048,1049],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2025,2028],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2025,2028],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":139,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":139,"endColumn":16,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[5113,5114],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":198,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7253,7256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7253,7256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":204,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7524,7527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7524,7527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":215,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8169,8172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8169,8172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":230,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8737,8740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8737,8740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":233,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":233,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8916,8919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8916,8919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'FRESH_TTL_MS', 'STALE_TTL_MS', and 'processDAOsInBatches'. Either include them or remove the dependency array.","line":299,"column":6,"nodeType":"ArrayExpression","endLine":299,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [FRESH_TTL_MS, STALE_TTL_MS, processDAOsInBatches]","fix":{"range":[11211,11213],"text":"[FRESH_TTL_MS, STALE_TTL_MS, processDAOsInBatches]"}}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":348,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":348,"endColumn":20,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[13255,13256],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":385,"column":42,"nodeType":"BlockStatement","messageId":"unexpected","endLine":386,"endColumn":10,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[14861,14870],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":388,"column":14,"nodeType":"BlockStatement","messageId":"unexpected","endLine":389,"endColumn":8,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[14925,14932],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":436,"column":14,"nodeType":"BlockStatement","messageId":"unexpected","endLine":437,"endColumn":8,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[17112,17119],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":604,"column":5,"severity":1,"nodeType":null,"fix":{"range":[23031,23086],"text":" "}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":739,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":739,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28269,28272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28269,28272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchStats'. Either include it or remove the dependency array.","line":805,"column":6,"nodeType":"ArrayExpression","endLine":805,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [fetchStats, fetchedDAOs.length]","fix":{"range":[30305,30325],"text":"[fetchStats, fetchedDAOs.length]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\n * DAO Fetching Service for Cedra Network\n *\n * Fetches and manages DAO data from on-chain\n * Uses Cedra SDK for blockchain interactions\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { cedraClient } from '../cedra_service/cedra-client'\nimport { MODULE_ADDRESS } from '../cedra_service/constants'\nimport { DAO } from '../types/dao'\nimport { fetchDAOCreationEvents } from '../services/graphqlService'\nimport { DAO_FUNCTIONS } from '../services_abi/dao_core'\n\n// Utility function to add delays for rate limiting\nconst delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms))\n\nexport function useFetchCreatedDAOs() {\n  // Load cache immediately on mount for instant display\n  const cachedData = (() => {\n    try {\n      const cached = typeof window !== 'undefined' ? window.localStorage.getItem('daos_cache_v4_stable_count') : null;\n      if (cached) {\n        const parsed = JSON.parse(cached);\n        return parsed?.daos || [];\n      }\n    } catch { }\n    return [];\n  })();\n\n  const [daos, setDAOs] = useState<DAO[]>(cachedData)\n  const [isLoading, setIsLoading] = useState(cachedData.length === 0) // Only show loading if no cache\n  const [error, setError] = useState<string | null>(null)\n\n  // Enhanced caching with stale-while-revalidate - updated cache key for new deployment\n  const CACHE_KEY = 'daos_cache_v4_stable_count'\n  const FRESH_TTL_MS = 60 * 1000 // 60s fresh window - increased for better performance\n  const STALE_TTL_MS = 5 * 60 * 1000 // 5 minutes stale-while-revalidate - increased\n\n  // Contract verification helper with retry logic\n  const verifyContractDeployment = async (): Promise<boolean> => {\n    try {\n      // Try with a simple view call first (less likely to be rate limited)\n      await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::dao_core_file::get_total_dao_count`,\n          functionArguments: []\n        }\n      });\n      return true;\n    } catch (error: any) {\n      if (error?.message?.includes('CORS') || error?.message?.includes('429') || error?.message?.includes('Too Many Requests')) {\n        return true; // Assume deployed when network issues occur\n      }\n      return false;\n    }\n  };\n\n  // Helpers for image decoding\n  const hexToBytes = (hexLike: string): Uint8Array => {\n    try {\n      const hex = hexLike.startsWith('0x') ? hexLike.slice(2) : hexLike\n      if (hex.length === 0) return new Uint8Array([])\n      const out = new Uint8Array(Math.floor(hex.length / 2))\n      for (let i = 0; i < out.length; i++) {\n        out[i] = parseInt(hex.substr(i * 2, 2), 16)\n      }\n      return out\n    } catch {\n      return new Uint8Array([])\n    }\n  }\n\n  // Enhanced image optimization and preloading functions\n  const optimizeImageUrl = (url: string): string => {\n    if (!url) return ''\n\n\n    try {\n      // For Twitter images, use minimal optimization for maximum clarity\n      if (url.includes('pbs.twimg.com')) {\n        let optimizedUrl = url\n\n        // Profile images: use original size for maximum clarity\n        if (url.includes('profile_images')) {\n          optimizedUrl = url.replace('_400x400', '_400x400') // Keep original size (400x400)\n        }\n\n        // Banner images: use original size for maximum clarity\n        if (url.includes('profile_banners')) {\n          optimizedUrl = url.replace('/1500x500', '/1500x500') // Keep original size for clarity\n        }\n\n        return optimizedUrl\n      }\n\n      // For other URLs, use minimal optimization for clarity\n      const urlObj = new URL(url)\n      urlObj.searchParams.set('w', '800') // Much larger max width for clarity\n      urlObj.searchParams.set('q', '95')  // Very high quality for clear images\n      const optimized = urlObj.toString()\n      return optimized\n    } catch (error) {\n      console.warn('URL optimization failed:', error)\n      return url // Return original if URL parsing fails\n    }\n  }\n\n  // Image cache to avoid reprocessing\n  const imageCache = new Map<string, string>();\n\n  // Define fetchDAOs function with useCallback so it can be used in the event listener\n  const fetchDAOs = useCallback(async (forceRefresh = false) => {\n    // Enhanced caching with stale-while-revalidate pattern\n    let usedStaleCache = false\n\n    try {\n      const cachedRaw = typeof window !== 'undefined' ? window.localStorage.getItem(CACHE_KEY) : null\n      if (cachedRaw && !forceRefresh) {\n        const cached = JSON.parse(cachedRaw) as { daos: DAO[]; updatedAt: number; count: number }\n        if (cached?.daos?.length && cached?.count) {\n          const age = Date.now() - (cached.updatedAt || 0)\n\n          if (age < FRESH_TTL_MS) {\n            // Fresh cache - use immediately and don't fetch\n            setDAOs(cached.daos)\n            setIsLoading(false)\n            return cached.daos\n          } else if (age < STALE_TTL_MS) {\n            // Stale but valid - show immediately and fetch in background\n            setDAOs(cached.daos)\n            setIsLoading(false)\n            usedStaleCache = true\n          }\n        }\n      }\n    } catch { }\n\n    // Only show loading if we don't have stale cache\n    if (!usedStaleCache) {\n      setIsLoading(true)\n    }\n    setError(null)\n\n    try {\n\n      // First verify contract deployment (but proceed even if network issues)\n      const isContractDeployed = await verifyContractDeployment();\n      if (!isContractDeployed) {\n        // Don't return empty - try to use cached data or continue with other methods\n      }\n\n\n      let foundDAOs: DAO[] = []\n      let registryAddresses: string[] = []\n      let eventAddresses: string[] = []\n\n      // Step 1: Check if registry is initialized and try to use it\n      try {\n        console.log('≡ƒöì Checking DAO registry status...')\n        const registryInitialized = await cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::dao_core_file::is_registry_initialized` as `${string}::${string}::${string}`,\n            functionArguments: [],\n          },\n        }).catch(() => [false])\n\n        const isRegistryReady = Boolean(registryInitialized[0])\n        console.log(`≡ƒôè Registry status: ${isRegistryReady ? 'Initialized' : 'Not initialized'}`)\n\n        if (isRegistryReady) {\n          try {\n            const totalDAOs = await cedraClient.view({\n              payload: {\n                function: DAO_FUNCTIONS.GET_TOTAL_DAO_COUNT as `${string}::${string}::${string}`,\n                functionArguments: [],\n              },\n            })\n\n            const totalCount = Number(totalDAOs[0] || 0)\n            console.log(`≡ƒôè Registry reports ${totalCount} DAOs`)\n\n            if (totalCount > 0) {\n              const allAddresses = await cedraClient.view({\n                payload: {\n                  function: DAO_FUNCTIONS.GET_ALL_DAO_ADDRESSES as `${string}::${string}::${string}`,\n                  functionArguments: [],\n                },\n              })\n\n              if (Array.isArray(allAddresses[0]) && allAddresses[0].length > 0) {\n                registryAddresses = allAddresses[0] as string[]\n                console.log(`Γ£à Found ${registryAddresses.length} DAOs from registry`)\n              }\n            }\n          } catch (registryError: any) {\n            console.warn('ΓÜá∩╕Å Failed to fetch from registry:', registryError?.message || registryError)\n          }\n        } else {\n          console.warn('ΓÜá∩╕Å Registry not initialized - will use event-based discovery')\n        }\n      } catch (registryCheckError: any) {\n        console.warn('ΓÜá∩╕Å Registry check failed:', registryCheckError?.message || registryCheckError)\n      }\n\n      // Step 2: Always try event-based discovery (as fallback or to find missing DAOs)\n      try {\n        console.log('≡ƒöì Fetching DAOs from event indexer (all event types)...')\n        // fetchDAOCreationEvents will fetch all DAO creation event types if no specific type provided\n        // This includes: DAOCreated, CouncilDAOCreated, and DAORegistered\n        eventAddresses = await fetchDAOCreationEvents(MODULE_ADDRESS)\n        console.log(`Γ£à Found ${eventAddresses.length} DAOs from events`)\n      } catch (eventError: any) {\n        console.warn('ΓÜá∩╕Å Event-based discovery failed:', eventError?.message || eventError)\n      }\n\n      // Step 2.5: Try filter module discovery\n      let filterAddresses: string[] = []\n      try {\n        const filterResults = await cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::filter::get_newest_daos` as `${string}::${string}::${string}`,\n            functionArguments: [\"100\"],\n          },\n        }).catch(() => [[]])\n\n        if (Array.isArray(filterResults[0])) {\n          filterAddresses = (filterResults[0] as any[]).map(f => f.address?.toLowerCase()).filter(Boolean)\n          console.log(`Γ£à Found ${filterAddresses.length} DAOs from filter module`)\n        }\n      } catch (filterError: any) {\n        console.warn('ΓÜá∩╕Å Filter-based discovery failed:', filterError?.message || filterError)\n      }\n\n      // Step 3: Combine addresses from all sources (remove duplicates)\n      const allAddressesSet = new Set<string>()\n\n      // Add registry addresses first (they're more reliable)\n      registryAddresses.forEach(addr => {\n        if (addr) allAddressesSet.add(addr.toLowerCase())\n      })\n\n      // Add event addresses\n      eventAddresses.forEach(addr => {\n        if (addr) allAddressesSet.add(addr.toLowerCase())\n      })\n\n      // Add filter addresses\n      filterAddresses.forEach(addr => {\n        if (addr) allAddressesSet.add(addr.toLowerCase())\n      })\n\n      const uniqueAddresses = Array.from(allAddressesSet)\n      console.log(`≡ƒôè Total unique DAOs found: ${uniqueAddresses.length} (${registryAddresses.length} from registry, ${eventAddresses.length} from events)`)\n\n      // Step 4: Process all unique DAO addresses\n      if (uniqueAddresses.length > 0) {\n        foundDAOs = await processDAOsInBatches(uniqueAddresses)\n        console.log(`Γ£à Successfully processed ${foundDAOs.length} DAOs`)\n      } else {\n        console.warn('ΓÜá∩╕Å No DAOs found from either registry or events')\n      }\n\n      // Step 5: Always set the found DAOs (even if empty)\n      setDAOs(foundDAOs)\n\n      // Cache the final results for consistency\n      try {\n        const cacheData = {\n          daos: foundDAOs,\n          updatedAt: Date.now(),\n          version: 4,\n          count: foundDAOs.length,\n          sources: {\n            registry: registryAddresses.length,\n            events: eventAddresses.length,\n            unique: uniqueAddresses.length\n          }\n        }\n\n        if (typeof window !== 'undefined') {\n          window.localStorage.setItem(CACHE_KEY, JSON.stringify(cacheData))\n          window.localStorage.setItem(`${CACHE_KEY}_backup`, JSON.stringify(cacheData))\n        }\n\n        console.log(`≡ƒÆ╛ Cached ${foundDAOs.length} DAOs`)\n      } catch (error) {\n        console.warn('Failed to cache DAOs:', error)\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to fetch DAOs via SDK'\n      setError(errorMessage)\n      console.error('Error fetching DAOs:', err)\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  // Optimistic add: allow other parts of app to inject a just-created DAO for instant UI update\n  // Usage: window.dispatchEvent(new CustomEvent('dao:created', { detail: dao }))\n  useEffect(() => {\n    const handler = (e: Event) => {\n      const detail = (e as CustomEvent).detail as Partial<DAO> | undefined\n      if (!detail || !detail.id) {\n        // If no detail provided, just trigger a refresh\n        console.log('≡ƒöä DAO created event received - triggering refresh...')\n        fetchDAOs(true).catch(err => console.warn('Failed to refresh after DAO creation:', err))\n        return\n      }\n\n      console.log('≡ƒöä DAO created event received with details - adding optimistically and refreshing...', detail)\n\n      setDAOs(prev => {\n        if (prev.some(d => d.id === detail.id)) {\n          // DAO already exists, just trigger refresh\n          setTimeout(() => { fetchDAOs(true).catch(() => { }) }, 1000)\n          return prev\n        }\n\n        const optimistic: DAO = {\n          id: detail.id as string,\n          name: detail.name || 'New DAO',\n          description: detail.description || '',\n          image: detail.image || '',\n          background: detail.background || '',\n          subname: detail.subname,\n          chain: detail.subname ?? 'Cedra',\n          tokenName: detail.tokenName ?? 'DAO',\n          tokenSymbol: detail.tokenSymbol ?? 'DAO',\n          tvl: '0',\n          proposals: 0,\n          members: 0,\n          established: new Date().toLocaleString(),\n          category: 'featured',\n          isFollowing: false,\n        }\n        // Put at the top for immediate visibility\n        const next = [optimistic, ...prev]\n        // cache immediately\n        try {\n          const cacheData = { daos: next, updatedAt: Date.now(), version: 4, count: next.length }\n          if (typeof window !== 'undefined') {\n            window.localStorage.setItem(CACHE_KEY, JSON.stringify(cacheData))\n            window.localStorage.setItem(`${CACHE_KEY}_backup`, JSON.stringify(cacheData))\n          }\n        } catch { }\n        // Trigger immediate refresh to get real data from blockchain\n        // Wait for blockchain indexer to process the transaction\n        // GraphQL indexer typically takes 30-60 seconds\n        setTimeout(() => {\n          console.log('≡ƒöä Refreshing DAO list after creation (30s delay)...')\n          fetchDAOs(true).catch(err => console.warn('Failed to refresh after DAO creation:', err))\n        }, 30000) // 30 second delay to allow GraphQL indexer to process\n\n        // Additional refresh after 60 seconds as backup\n        setTimeout(() => {\n          console.log('≡ƒöä Second refresh attempt (60s delay)...')\n          fetchDAOs(true).catch(err => console.warn('Failed to refresh after DAO creation:', err))\n        }, 60000)\n        return next\n      })\n    }\n    window.addEventListener('dao:created', handler as EventListener)\n    return () => window.removeEventListener('dao:created', handler as EventListener)\n  }, [fetchDAOs])\n\n  const toImageUrl = (maybeBytes: unknown): string => {\n    try {\n      // Create cache key from the data\n      const cacheKey = Array.isArray(maybeBytes) ?\n        `bytes_${maybeBytes.length}_${maybeBytes.slice(0, 10).join('')}` :\n        `str_${String(maybeBytes).substring(0, 50)}`;\n\n      // Check cache first\n      if (imageCache.has(cacheKey)) {\n        return imageCache.get(cacheKey)!;\n      }\n\n      let bytes: Uint8Array | null = null\n      if (Array.isArray(maybeBytes)) {\n        bytes = new Uint8Array(maybeBytes as number[])\n      } else if (typeof maybeBytes === 'string' && maybeBytes.length > 0) {\n        if (maybeBytes.startsWith('0x')) {\n        }\n        bytes = hexToBytes(maybeBytes)\n      } else {\n      }\n\n      if (bytes && bytes.length > 0) {\n\n        try {\n          // Detect image format from magic bytes\n          let mimeType = 'image/jpeg'; // default\n          if (bytes.length >= 4) {\n            const header = Array.from(bytes.slice(0, 4));\n            if (header[0] === 0xFF && header[1] === 0xD8) {\n              mimeType = 'image/jpeg';\n            } else if (header[0] === 0x89 && header[1] === 0x50 && header[2] === 0x4E && header[3] === 0x47) {\n              mimeType = 'image/png';\n            } else if (header[0] === 0x47 && header[1] === 0x49 && header[2] === 0x46) {\n              mimeType = 'image/gif';\n            } else if (header[0] === 0x52 && header[1] === 0x49 && header[2] === 0x46 && header[3] === 0x46) {\n              mimeType = 'image/webp';\n            }\n          }\n\n          // Use more efficient conversion for large images\n          let dataUrl: string;\n          if (bytes.length > 100000) { // > 100KB - use chunked processing\n            const chunkSize = 8192;\n            let binary = '';\n            for (let i = 0; i < bytes.length; i += chunkSize) {\n              const chunk = bytes.slice(i, i + chunkSize);\n              binary += String.fromCharCode.apply(null, Array.from(chunk));\n            }\n            const base64 = btoa(binary);\n            dataUrl = `data:${mimeType};base64,${base64}`;\n          } else {\n            // Standard conversion for smaller images\n            const binary = String.fromCharCode.apply(null, Array.from(bytes));\n            const base64 = btoa(binary);\n            dataUrl = `data:${mimeType};base64,${base64}`;\n          }\n\n          // Cache the result\n          imageCache.set(cacheKey, dataUrl);\n          return dataUrl;\n        } catch (conversionError) {\n          console.error('Image conversion failed:', conversionError);\n          const fallback = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzM3NDE1MSIvPgo8L3N2Zz4K';\n          imageCache.set(cacheKey, fallback);\n          return fallback;\n        }\n      } else {\n      }\n\n      // Cache empty result too\n      imageCache.set(cacheKey, '');\n      return ''\n    } catch (error) {\n      console.error('Error converting bytes to image URL:', error);\n      return ''\n    }\n  }\n\n  // Batch processing configuration - Optimized for faster loading\n  const BATCH_SIZE = 3 // Process 3 DAOs at a time for faster loading\n  const BATCH_DELAY = 1000 // 1s delay between batches - reduced for speed\n  const REQUEST_DELAY = 200 // 200ms delay between individual requests - reduced for speed\n\n  // Helper function to process a single DAO address\n  const processSingleDAO = async (address: string): Promise<DAO | null> => {\n    try {\n      // Add small delay before each DAO processing to avoid overwhelming the RPC\n      await delay(REQUEST_DELAY)\n\n      const daoInfo = await cedraClient.view({\n        payload: {\n          function: DAO_FUNCTIONS.GET_DAO_INFO as `${string}::${string}::${string}`,\n          functionArguments: [address],\n        },\n      })\n\n      // Handle different DAO info formats - according to ABI: (name, subname, description, logo_is_url, logo_url, logo_data, bg_is_url, bg_url, bg_data, created_at)\n      let name, subname, description, logoIsUrl, logoUrl, logoData, bgIsUrl, bgUrl, bgData, createdAt;\n      if (daoInfo.length >= 10) {\n        // New format with subname: (name, subname, description, logoIsUrl, logoUrl, logoData, bgIsUrl, bgUrl, bgData, createdAt)\n        [name, subname, description, logoIsUrl, logoUrl, logoData, bgIsUrl, bgUrl, bgData, createdAt] = daoInfo;\n      } else if (daoInfo.length >= 9) {\n        // Format without subname: (name, description, logoIsUrl, logoUrl, logoData, bgIsUrl, bgUrl, bgData, createdAt)\n        [name, description, logoIsUrl, logoUrl, logoData, bgIsUrl, bgUrl, bgData, createdAt] = daoInfo;\n        subname = undefined;\n      } else {\n        // Legacy format: (name, description, logo, background, createdAt)\n        [name, description, logoData, bgData, createdAt] = daoInfo;\n        logoIsUrl = false;\n        bgIsUrl = false;\n        logoUrl = '';\n        bgUrl = '';\n        subname = undefined;\n      }\n\n      // Handle images using the working pattern with optimization\n      let logoUrl_final: string;\n      if (logoIsUrl) {\n        logoUrl_final = optimizeImageUrl(logoUrl as string);\n      } else {\n        logoUrl_final = toImageUrl(logoData);\n      }\n\n      let backgroundUrl_final: string;\n      if (bgIsUrl) {\n        backgroundUrl_final = optimizeImageUrl(bgUrl as string);\n      } else {\n        backgroundUrl_final = toImageUrl(bgData);\n      }\n\n      // Fetch real DAO statistics with a small delay\n      await delay(REQUEST_DELAY)\n      const stats = await fetchDAOStats(address)\n\n      const subnameStr = typeof subname === 'string' ? (subname as string) : undefined;\n      const dao: DAO = {\n        id: address,\n        name: name as string,\n        description: description as string,\n        image: logoUrl_final,\n        background: backgroundUrl_final,\n        subname: subnameStr,\n        chain: subnameStr || 'Cedra',\n        tokenName: subnameStr || 'DAO',\n        tokenSymbol: subnameStr || 'DAO',\n        tvl: '0',\n        proposals: stats.proposals,\n        members: stats.members,\n        established: new Date(parseInt(createdAt as string) * 1000).toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        }) + ' at ' + new Date(parseInt(createdAt as string) * 1000).toLocaleTimeString('en-US', {\n          hour: '2-digit',\n          minute: '2-digit'\n        }),\n        category: 'featured' as const,\n        isFollowing: false\n      }\n\n      return dao\n    } catch (error) {\n      console.warn('Failed to process DAO address:', address, error)\n      return null\n    }\n  }\n\n  // Helper function to process DAOs in batches\n  const processDAOsInBatches = async (addresses: string[]): Promise<DAO[]> => {\n    const foundDAOs: DAO[] = []\n\n\n    for (let i = 0; i < addresses.length; i += BATCH_SIZE) {\n      const batch = addresses.slice(i, i + BATCH_SIZE)\n\n      // Process batch concurrently\n      const batchPromises = batch.map(address => processSingleDAO(address))\n      const batchResults = await Promise.allSettled(batchPromises)\n\n      // Add successful results to foundDAOs\n      batchResults.forEach((result) => {\n        if (result.status === 'fulfilled' && result.value !== null) {\n          foundDAOs.push(result.value)\n        }\n      })\n\n      // Wait between batches (except for the last batch)\n      if (i + BATCH_SIZE < addresses.length) {\n        await delay(BATCH_DELAY)\n      }\n    }\n\n    return foundDAOs\n  }\n\n  // Helper function to fetch real DAO statistics (members and proposals)\n  const fetchDAOStats = async (daoAddress: string): Promise<{ members: number; proposals: number }> => {\n    try {\n\n      // Small delay to reduce RPC pressure when called in batches\n      await delay(100)\n\n      const [membersRes, proposalsRes] = await Promise.allSettled([\n        cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::membership::total_members`,\n            functionArguments: [daoAddress]\n          }\n        }),\n        cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::proposal::get_proposals_count`,\n            functionArguments: [daoAddress]\n          }\n        })\n      ])\n\n      const memberCount = membersRes.status === 'fulfilled' && Array.isArray(membersRes.value)\n        ? Number(membersRes.value[0] || 0)\n        : 0\n      const proposalCount = proposalsRes.status === 'fulfilled' && Array.isArray(proposalsRes.value)\n        ? Number(proposalsRes.value[0] || 0)\n        : 0\n\n\n      return { members: memberCount, proposals: proposalCount }\n    } catch (error) {\n      console.warn(`Failed to fetch stats for DAO ${daoAddress}:`, error)\n      return { members: 0, proposals: 0 }\n    }\n  }\n\n  useEffect(() => {\n    fetchDAOs()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [fetchDAOs])\n\n  return {\n    daos,\n    isLoading,\n    error,\n    refetch: () => fetchDAOs(true), // Force refresh when manually triggered\n  }\n}\n\n// Hook to get DAO count for stats\nexport function useDAOStats() {\n  const [stats, setStats] = useState({\n    totalDAOs: 0,\n    totalMembers: 0,\n    totalProposals: 0,\n    activeProposals: 0,\n    totalVotes: 0\n  })\n  const [isLoading, setIsLoading] = useState(false)\n\n  // Use the main DAO fetcher to get the same DAOs\n  const { daos: fetchedDAOs } = useFetchCreatedDAOs()\n\n  const fetchStats = async () => {\n    setIsLoading(true)\n    try {\n\n      // Debug: If no DAOs found, try to check if the problem is with DAO discovery\n      if (fetchedDAOs.length === 0) {\n        console.warn(' No DAOs found by main fetcher. This could mean:')\n        console.warn('   1. No DAOs have been created yet')\n        console.warn('   2. Event indexing is not working')\n        console.warn('   3. There is an issue with the MODULE_ADDRESS or event types')\n\n        // Try to test if view functions work by testing against MODULE_ADDRESS itself\n        try {\n          await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::membership::total_members` as `${string}::${string}::${string}`,\n              functionArguments: [MODULE_ADDRESS]\n            }\n          })\n        } catch (e) {\n          console.warn(' View function test failed:', e)\n          console.warn('   This suggests either:')\n          console.warn('   ΓÇó No DAO exists at MODULE_ADDRESS (expected)')\n          console.warn('   ΓÇó Contract is not deployed properly')\n          console.warn('   ΓÇó Network/RPC issues')\n        }\n      }\n\n      // Use the DAOs that were already fetched by the main DAO fetcher\n      const daoAddresses = fetchedDAOs.map(dao => dao.id)\n\n      // Calculate real stats using blockchain view functions\n      const totalDAOs = daoAddresses.length\n      let totalMembers = 0\n      let totalProposals = 0\n      let activeProposals = 0\n      let totalVotes = 0\n\n      // Fetch data for each DAO in parallel batches\n      const daoBatchSize = 3\n      const daoBatches = []\n      for (let i = 0; i < daoAddresses.length; i += daoBatchSize) {\n        daoBatches.push(daoAddresses.slice(i, i + daoBatchSize))\n      }\n\n      // Get active status value once (it's constant)\n      const activeStatusRes = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::proposal::get_status_active`,\n          functionArguments: []\n        }\n      }).catch(() => [1])\n      const activeStatusValue = Number(activeStatusRes[0] || 1)\n\n      for (const batch of daoBatches) {\n        const batchPromises = batch.map(async (daoAddr) => {\n          try {\n            // Parallel fetch basic DAO stats\n            const [membersRes, proposalCountRes] = await Promise.allSettled([\n              cedraClient.view({\n                payload: {\n                  function: `${MODULE_ADDRESS}::membership::total_members`,\n                  functionArguments: [daoAddr]\n                }\n              }),\n              cedraClient.view({\n                payload: {\n                  function: `${MODULE_ADDRESS}::proposal::get_proposals_count`,\n                  functionArguments: [daoAddr]\n                }\n              })\n            ])\n\n            const memberCount = membersRes.status === 'fulfilled' ? Number(membersRes.value[0] || 0) : 0\n            const proposalCount = proposalCountRes.status === 'fulfilled' ? Number(proposalCountRes.value[0] || 0) : 0\n\n            let activeCount = 0\n            let voteCount = 0\n\n            // Fetch proposal data in smaller batches if there are many proposals\n            if (proposalCount > 0) {\n              const proposalBatchSize = 5\n              const proposalBatches = []\n              for (let i = 0; i < proposalCount; i += proposalBatchSize) {\n                proposalBatches.push(Array.from({ length: Math.min(proposalBatchSize, proposalCount - i) }, (_, idx) => i + idx))\n              }\n\n              for (const propBatch of proposalBatches) {\n                const propPromises = propBatch.map(async (i) => {\n                  try {\n                    const [statusRes, proposalRes] = await Promise.allSettled([\n                      cedraClient.view({\n                        payload: {\n                          function: `${MODULE_ADDRESS}::proposal::get_proposal_status`,\n                          functionArguments: [daoAddr, i]\n                        }\n                      }),\n                      cedraClient.view({\n                        payload: {\n                          function: `${MODULE_ADDRESS}::proposal::get_proposal`,\n                          functionArguments: [daoAddr, i]\n                        }\n                      })\n                    ])\n\n                    const status = statusRes.status === 'fulfilled' ? Number(statusRes.value[0] || 0) : 0\n                    const isActive = status === activeStatusValue ? 1 : 0\n\n                    let votes = 0\n                    if (proposalRes.status === 'fulfilled' && proposalRes.value?.[0]) {\n                      const proposalData = proposalRes.value[0] as any\n                      votes = Number(proposalData.yes_votes || 0) + Number(proposalData.no_votes || 0) + Number(proposalData.abstain_votes || 0)\n                    }\n\n                    return { isActive, votes }\n                  } catch {\n                    return { isActive: 0, votes: 0 }\n                  }\n                })\n\n                const propResults = await Promise.allSettled(propPromises)\n                propResults.forEach(result => {\n                  if (result.status === 'fulfilled') {\n                    activeCount += result.value.isActive\n                    voteCount += result.value.votes\n                  }\n                })\n              }\n            }\n\n            return { memberCount, proposalCount, activeCount, voteCount }\n          } catch (error) {\n            console.warn(`Failed to fetch stats for DAO ${daoAddr}:`, error)\n            return { memberCount: 0, proposalCount: 0, activeCount: 0, voteCount: 0 }\n          }\n        })\n\n        const batchResults = await Promise.allSettled(batchPromises)\n        batchResults.forEach(result => {\n          if (result.status === 'fulfilled') {\n            totalMembers += result.value.memberCount\n            totalProposals += result.value.proposalCount\n            activeProposals += result.value.activeCount\n            totalVotes += result.value.voteCount\n          }\n        })\n      }\n\n      setStats({\n        totalDAOs,\n        totalMembers,\n        totalProposals,\n        activeProposals,\n        totalVotes\n      })\n    } catch (error) {\n      console.error('Error fetching DAO stats:', error)\n      // Fallback to basic counting\n      setStats({\n        totalDAOs: 0,\n        totalMembers: 0,\n        totalProposals: 0,\n        activeProposals: 0,\n        totalVotes: 0\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    // Only fetch stats if we have DAOs available\n    if (fetchedDAOs.length > 0) {\n      fetchStats()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [fetchedDAOs.length]) // Re-run when DAO count changes\n\n  return {\n    stats,\n    isLoading,\n    refetch: fetchStats\n  }\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useFilter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2650,2653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2650,2653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3733,3736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3733,3736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4754,4757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4754,4757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'mapSearchResultToDAO'. Either include it or remove the dependency array.","line":137,"column":8,"nodeType":"ArrayExpression","endLine":137,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [mapSearchResultToDAO]","fix":{"range":[5073,5075],"text":"[mapSearchResultToDAO]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":149,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5503,5506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5503,5506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'mapSearchResultToDAO'. Either include it or remove the dependency array.","line":156,"column":8,"nodeType":"ArrayExpression","endLine":156,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [mapSearchResultToDAO]","fix":{"range":[5739,5741],"text":"[mapSearchResultToDAO]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":173,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6313,6316],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6313,6316],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'mapSearchResultToDAO'. Either include it or remove the dependency array.","line":183,"column":8,"nodeType":"ArrayExpression","endLine":183,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [mapSearchResultToDAO]","fix":{"range":[6629,6631],"text":"[mapSearchResultToDAO]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7429,7432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7429,7432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'mapSearchResultToDAO'. Either include it or remove the dependency array.","line":209,"column":8,"nodeType":"ArrayExpression","endLine":209,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [mapSearchResultToDAO]","fix":{"range":[7666,7668],"text":"[mapSearchResultToDAO]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\r\nimport { cedraClient } from '../cedra_service/cedra-client';\r\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\r\nimport { DAO } from '../types/dao';\r\n\r\nconst FILTER_MODULE = `${MODULE_ADDRESS}::filter`;\r\n\r\nexport interface AdvancedFilterParams {\r\n    query: string;\r\n    category: string;\r\n    sortBy: number; // 0=relevance, 1=newest, 2=oldest, 3=name\r\n    minTimestamp: number;\r\n    maxTimestamp: number;\r\n}\r\n\r\nexport interface DAOSearchResult {\r\n    address: string;\r\n    name: string;\r\n    description: string;\r\n    category: string;\r\n    logo: {\r\n        is_url: boolean;\r\n        url: string;\r\n        data: string; // vector<u8> as hex string or similar\r\n    };\r\n    created_at: string;\r\n    relevance_score: string;\r\n}\r\n\r\nexport function useFilter() {\r\n    const [categories, setCategories] = useState<string[]>(['All']);\r\n    const [isLoadingCats, setIsLoadingCats] = useState(false);\r\n    const [isFiltering, setIsFiltering] = useState(false);\r\n    const [filteredDAOs, setFilteredDAOs] = useState<DAO[]>([]);\r\n\r\n    const fetchCategories = useCallback(async () => {\r\n        setIsLoadingCats(true);\r\n        try {\r\n            const result = await cedraClient.view({\r\n                payload: {\r\n                    function: `${FILTER_MODULE}::get_all_categories` as `${string}::${string}::${string}`,\r\n                    functionArguments: [],\r\n                },\r\n            });\r\n            if (Array.isArray(result[0])) {\r\n                // Ensure 'All' is always there or added\r\n                const cats = result[0] as string[];\r\n                setCategories(['All', ...cats.filter(c => c !== 'All' && c.trim() !== '')]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch categories:', error);\r\n            // Fallback to defaults if contract fails\r\n            setCategories(['All', 'DeFi', 'Gaming', 'Infrastructure', 'Social', 'NFTs']);\r\n        } finally {\r\n            setIsLoadingCats(false);\r\n        }\r\n    }, []);\r\n\r\n    // Image processing helpers (Restored from useFetchDAOs logic)\r\n    const hexToBytes = (hexLike: string): Uint8Array => {\r\n        try {\r\n            const hex = hexLike.startsWith('0x') ? hexLike.slice(2) : hexLike\r\n            if (hex.length === 0) return new Uint8Array([])\r\n            const out = new Uint8Array(Math.floor(hex.length / 2))\r\n            for (let i = 0; i < out.length; i++) {\r\n                out[i] = parseInt(hex.substr(i * 2, 2), 16)\r\n            }\r\n            return out\r\n        } catch { return new Uint8Array([]) }\r\n    };\r\n\r\n    const toImageUrl = (maybeBytes: any): string => {\r\n        if (!maybeBytes || maybeBytes.length === 0) return '';\r\n        try {\r\n            let bytes: Uint8Array;\r\n            if (Array.isArray(maybeBytes)) {\r\n                bytes = new Uint8Array(maybeBytes);\r\n            } else if (typeof maybeBytes === 'string') {\r\n                bytes = hexToBytes(maybeBytes);\r\n            } else { return ''; }\r\n\r\n            if (bytes.length === 0) return '';\r\n\r\n            let mimeType = 'image/jpeg';\r\n            if (bytes.length >= 4) {\r\n                const header = Array.from(bytes.slice(0, 4));\r\n                if (header[0] === 0xFF && header[1] === 0xD8) mimeType = 'image/jpeg';\r\n                else if (header[0] === 0x89 && header[1] === 0x50) mimeType = 'image/png';\r\n                else if (header[0] === 0x47 && header[1] === 0x46) mimeType = 'image/gif';\r\n            }\r\n\r\n            const binary = String.fromCharCode.apply(null, Array.from(bytes));\r\n            return `data:${mimeType};base64,${btoa(binary)}`;\r\n        } catch { return ''; }\r\n    };\r\n\r\n    const mapSearchResultToDAO = (res: any): DAO => ({\r\n        id: res.address,\r\n        name: res.name,\r\n        description: res.description,\r\n        category: res.category,\r\n        image: res.logo.is_url ? res.logo.url : toImageUrl(res.logo.data),\r\n        background: '',\r\n        chain: 'Cedra',\r\n        tvl: '0',\r\n        proposals: 0,\r\n        members: 0,\r\n        established: new Date(parseInt(res.created_at) * 1000).toLocaleDateString(),\r\n        isFollowing: false\r\n    });\r\n\r\n    const filterByCategory = useCallback(async (category: string): Promise<DAO[]> => {\r\n        if (category === 'All') {\r\n            setFilteredDAOs([]);\r\n            return [];\r\n        }\r\n\r\n        setIsFiltering(true);\r\n        try {\r\n            const result = await cedraClient.view({\r\n                payload: {\r\n                    function: `${FILTER_MODULE}::filter_by_category` as `${string}::${string}::${string}`,\r\n                    functionArguments: [category, \"50\"],\r\n                },\r\n            });\r\n\r\n            const results = result[0] as any[];\r\n            const mapped = results.map(mapSearchResultToDAO);\r\n            setFilteredDAOs(mapped);\r\n            return mapped;\r\n        } catch (error) {\r\n            console.error('Filtering failed:', error);\r\n            return [];\r\n        } finally {\r\n            setIsFiltering(false);\r\n        }\r\n    }, []);\r\n\r\n    const fetchFeaturedDAOs = useCallback(async () => {\r\n        setIsFiltering(true);\r\n        try {\r\n            const result = await cedraClient.view({\r\n                payload: {\r\n                    function: `${FILTER_MODULE}::get_featured_dao_results` as `${string}::${string}::${string}`,\r\n                    functionArguments: [],\r\n                },\r\n            });\r\n\r\n            const results = result[0] as any[];\r\n            setFilteredDAOs(results.map(mapSearchResultToDAO));\r\n        } catch (error) {\r\n            console.error('Featured fetch failed:', error);\r\n        } finally {\r\n            setIsFiltering(false);\r\n        }\r\n    }, []);\r\n\r\n    const searchDAOs = useCallback(async (query: string, limit: string = \"50\"): Promise<DAO[]> => {\r\n        if (!query.trim()) {\r\n            setFilteredDAOs([]);\r\n            return [];\r\n        }\r\n\r\n        setIsFiltering(true);\r\n        try {\r\n            const result = await cedraClient.view({\r\n                payload: {\r\n                    function: `${FILTER_MODULE}::search_daos` as `${string}::${string}::${string}`,\r\n                    functionArguments: [query, limit],\r\n                },\r\n            });\r\n\r\n            const results = result[0] as any[];\r\n            const mapped = results.map(mapSearchResultToDAO);\r\n            setFilteredDAOs(mapped);\r\n            return mapped;\r\n        } catch (error) {\r\n            console.error('Search failed:', error);\r\n            return [];\r\n        } finally {\r\n            setIsFiltering(false);\r\n        }\r\n    }, []);\r\n\r\n    const advancedFilter = useCallback(async (params: AdvancedFilterParams, limit: string = \"50\") => {\r\n        setIsFiltering(true);\r\n        try {\r\n            const result = await cedraClient.view({\r\n                payload: {\r\n                    function: `${FILTER_MODULE}::advanced_filter` as `${string}::${string}::${string}`,\r\n                    functionArguments: [\r\n                        params.query,\r\n                        params.category === 'All' ? '' : params.category,\r\n                        params.minTimestamp.toString(),\r\n                        params.maxTimestamp.toString(),\r\n                        params.sortBy.toString(),\r\n                        limit\r\n                    ],\r\n                },\r\n            });\r\n\r\n            const results = result[0] as any[];\r\n            setFilteredDAOs(results.map(mapSearchResultToDAO));\r\n        } catch (error) {\r\n            console.error('Advanced filter failed:', error);\r\n        } finally {\r\n            setIsFiltering(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchCategories();\r\n    }, [fetchCategories]);\r\n\r\n    return {\r\n        categories,\r\n        isLoadingCats,\r\n        isFiltering,\r\n        filteredDAOs,\r\n        filterByCategory,\r\n        fetchFeaturedDAOs,\r\n        searchDAOs,\r\n        advancedFilter,\r\n        refreshCategories: fetchCategories\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useOptimizedActivityTracker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":218,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8238,8241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8238,8241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":219,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8267,8270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8267,8270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8331,8334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8331,8334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":411,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":411,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14544,14547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14544,14547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":457,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":457,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16273,16276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16273,16276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'options'. Either include it or remove the dependency array.","line":576,"column":6,"nodeType":"ArrayExpression","endLine":576,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [daoAddress, options]","fix":{"range":[20018,20055],"text":"[daoAddress, options]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":576,"column":19,"nodeType":"CallExpression","endLine":576,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'options'. Either include it or remove the dependency array.","line":622,"column":6,"nodeType":"ArrayExpression","endLine":622,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [options]","fix":{"range":[21228,21253],"text":"[options]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":622,"column":7,"nodeType":"CallExpression","endLine":622,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Optimized Activity Tracker Hook\n *\n * Uses Cedra SDK to fetch activities from on-chain smart contract\n * Implements caching and batch fetching for performance\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\nimport { getViewFunction, getResourceType, getActivityEventType } from '../services_abi/activitytracker_abi';\nimport { ACTIVITY_TYPES, getActivityInfo, getActivityStyles } from '../constants/activityConstants';\n\nexport interface Activity {\n  id: string;\n  type: 'dao_created' | 'member_joined' | 'member_left' | 'proposal_created' | 'proposal_voted' | 'proposal_executed' | 'stake' | 'unstake' | 'treasury_deposit' | 'treasury_withdrawal' | 'reward_claimed' | 'launchpad_created' | 'launchpad_investment';\n  title: string;\n  description: string;\n  amount?: number;\n  user: string;\n  userDisplayName?: string;\n  dao: string;\n  daoName?: string;\n  timestamp: number;\n  transactionHash: string;\n  blockNumber?: number;\n  status: 'success' | 'failed' | 'pending';\n  metadata?: {\n    proposalId?: number;\n    voteChoice?: boolean;\n    fromAddress?: string;\n    toAddress?: string;\n    tokenType?: string;\n  };\n}\n\nexport interface PaginationOptions {\n  page?: number;\n  limit?: number;\n  offset?: number;\n}\n\nexport interface PaginatedActivities {\n  activities: Activity[];\n  pagination: {\n    currentPage: number;\n    totalPages: number;\n    totalItems: number;\n    hasNextPage: boolean;\n    hasPreviousPage: boolean;\n    limit: number;\n  };\n}\n\n\nexport class OptimizedActivityTracker {\n  // Lightweight caches to reduce RPC round trips\n  private static initializedCache: { value: boolean | null; timestamp: number } = { value: null, timestamp: 0 };\n  private static readonly INIT_TTL_MS = 5 * 60 * 1000; // 5 minutes\n\n  // Cache DAO activity ID lists per DAO\n  private static daoActivitiesIdsCache: Map<string, { ids: number[]; timestamp: number }> = new Map();\n  private static readonly IDS_TTL_MS = 60 * 1000; // 60 seconds\n\n  // Cache activity details by ID\n  private static activityDetailCache: Map<number, { activity: Activity; timestamp: number }> = new Map();\n  private static readonly DETAIL_TTL_MS = 5 * 60 * 1000; // 5 minutes\n  /**\n   * Check if activity tracker is initialized\n   */\n  static async isInitialized(): Promise<boolean> {\n    // Use cached result if fresh\n    const now = Date.now();\n    if (this.initializedCache.value !== null && (now - this.initializedCache.timestamp) < this.INIT_TTL_MS) {\n      return Boolean(this.initializedCache.value);\n    }\n\n    try {\n      // Check if GlobalActivityTracker exists at module address using helper function\n      const resource = await cedraClient.getAccountResource({\n        accountAddress: MODULE_ADDRESS,\n        resourceType: getResourceType('GlobalActivityTracker') as `${string}::${string}::${string}`\n      });\n      const ok = !!resource;\n      this.initializedCache = { value: ok, timestamp: now };\n      return ok;\n    } catch {\n      // If resource doesn't exist, try to check via total activities view function\n      try {\n        await cedraClient.view({\n          payload: {\n            function: getViewFunction('get_total_activities') as `${string}::${string}::${string}`,\n            functionArguments: []\n          }\n        });\n        this.initializedCache = { value: true, timestamp: now };\n        return true;\n      } catch {\n        console.warn('Activity tracker not initialized - no activities available');\n        this.initializedCache = { value: false, timestamp: now };\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Get activities for a specific DAO using contract ABI\n   */\n  static async getDAOActivities(daoAddress: string, options: PaginationOptions = {}): Promise<PaginatedActivities> {\n    const { page = 1, limit = 20 } = options;\n    \n    try {\n      console.log(`Fetching DAO activities using contract ABI for: ${daoAddress}`);\n      \n      // Check if activity tracker is initialized first\n      const isInitialized = await this.isInitialized();\n      console.log('Activity tracker initialized:', isInitialized);\n      \n      if (!isInitialized) {\n        console.log('Activity tracker not initialized');\n        return this.getEmptyResult(page, limit);\n      }\n      \n      // Primary method: Use contract view function to get activity IDs\n      try {\n        // Try cache first for IDs\n        const now = Date.now();\n        let activityIds: number[] | undefined;\n        const cachedIds = this.daoActivitiesIdsCache.get(daoAddress);\n        if (cachedIds && (now - cachedIds.timestamp) < this.IDS_TTL_MS) {\n          activityIds = cachedIds.ids;\n        } else {\n          // Use view function to get DAO activities\n          const activityIdsResult = await cedraClient.view({\n            payload: {\n              function: getViewFunction('get_dao_activities') as `${string}::${string}::${string}`,\n              functionArguments: [daoAddress]\n            }\n          });\n          activityIds = activityIdsResult[0] as number[];\n          this.daoActivitiesIdsCache.set(daoAddress, { ids: activityIds, timestamp: now });\n        }\n\n        console.log(`Found ${activityIds.length} activity IDs for DAO ${daoAddress}`);\n\n        if (activityIds.length === 0) {\n          console.log('No activities found for this DAO');\n          return this.getEmptyResult(page, limit);\n        }\n\n        // Sort IDs in descending order (most recent first)\n        const sortedIds = [...activityIds].sort((a, b) => b - a);\n\n        // Apply pagination to activity IDs\n        const startIndex = (page - 1) * limit;\n        const endIndex = Math.min(startIndex + limit, sortedIds.length);\n        const paginatedIds = sortedIds.slice(startIndex, endIndex);\n\n        console.log(`Fetching activities ${startIndex}-${endIndex} of ${sortedIds.length}`);\n\n        // Fetch activity records by IDs with cache and larger batch size\n        const activities: Activity[] = [];\n        const missingIds: number[] = [];\n        // First, pull from detail cache\n        for (const id of paginatedIds) {\n          const cached = this.activityDetailCache.get(id);\n          if (cached && (Date.now() - cached.timestamp) < this.DETAIL_TTL_MS) {\n            activities.push(cached.activity);\n          } else {\n            missingIds.push(id);\n          }\n        }\n\n        // Fetch only missing ids in parallel batches\n        const batchSize = 20; // increase concurrency to speed up\n        for (let i = 0; i < missingIds.length; i += batchSize) {\n          const batch = missingIds.slice(i, i + batchSize);\n          const batchPromises = batch.map(id => this.getActivityById(id));\n          const batchResults = await Promise.allSettled(batchPromises);\n          batchResults.forEach((result, idx) => {\n            if (result.status === 'fulfilled' && result.value) {\n              activities.push(result.value);\n              const id = batch[idx];\n              this.activityDetailCache.set(id, { activity: result.value, timestamp: Date.now() });\n            }\n          });\n        }\n\n        // Sort by timestamp descending (double-check sorting)\n        activities.sort((a, b) => b.timestamp - a.timestamp);\n\n        console.log(`Successfully fetched ${activities.length} activities for DAO ${daoAddress}`);\n\n        return {\n          activities,\n          pagination: {\n            currentPage: page,\n            totalPages: Math.ceil(sortedIds.length / limit),\n            totalItems: sortedIds.length,\n            hasNextPage: endIndex < sortedIds.length,\n            hasPreviousPage: page > 1,\n            limit\n          }\n        };\n\n      } catch (viewError) {\n        console.warn('Contract view function failed, falling back to events:', viewError);\n\n        // Fallback: Use events if view function fails\n        const eventType = getActivityEventType();\n        const events = await cedraClient.getModuleEventsByEventType({\n          eventType: eventType as `${string}::${string}::${string}`,\n          options: { limit: limit * 2 } // Get more to filter by DAO\n        });\n\n        const activities: Activity[] = (events as any[])\n          .filter((e: any) => e?.data?.dao_address === daoAddress)\n          .map((e: any) => this.eventToActivity(e))\n          .sort((a, b) => b.timestamp - a.timestamp)\n          .slice(0, limit); // Apply limit after filtering\n\n        console.log(`Fallback: fetched ${activities.length} activities via events for DAO ${daoAddress}`);\n\n        return {\n          activities,\n          pagination: {\n            currentPage: page,\n            totalPages: 1,\n            totalItems: activities.length,\n            hasNextPage: activities.length === limit,\n            hasPreviousPage: page > 1,\n            limit\n          }\n        };\n      }\n\n    } catch (error) {\n      console.error(`Error fetching DAO activities for ${daoAddress}:`, error);\n      return this.getEmptyResult(page, limit);\n    }\n  }\n\n  /**\n   * Get activities for a specific user using contract ABI\n   */\n  static async getUserActivities(userAddress: string, options: PaginationOptions = {}): Promise<PaginatedActivities> {\n    const { page = 1, limit = 20 } = options;\n    \n    try {\n      console.log(`Fetching user activities using contract ABI for: ${userAddress}`);\n      \n      const initialized = await this.isInitialized();\n      if (!initialized) {\n        return this.getEmptyResult(page, limit);\n      }\n\n      // Get activity IDs for this user using view function\n      const activityIds = await cedraClient.view({\n        payload: {\n          function: getViewFunction('get_user_activities') as `${string}::${string}::${string}`,\n          functionArguments: [userAddress]\n        }\n      });\n\n      const ids = activityIds[0] as number[];\n      console.log(`Found ${ids.length} activity IDs for user ${userAddress}`);\n\n      if (ids.length === 0) {\n        return this.getEmptyResult(page, limit);\n      }\n\n      // Paginate and fetch activities\n      const startIndex = (page - 1) * limit;\n      const endIndex = Math.min(startIndex + limit, ids.length);\n      const paginatedIds = ids.slice(startIndex, endIndex);\n\n      const activities: Activity[] = [];\n      \n      const batchSize = 5;\n      for (let i = 0; i < paginatedIds.length; i += batchSize) {\n        const batch = paginatedIds.slice(i, i + batchSize);\n        const batchPromises = batch.map(id => this.getActivityById(id));\n        \n        const batchResults = await Promise.allSettled(batchPromises);\n        batchResults.forEach(result => {\n          if (result.status === 'fulfilled' && result.value) {\n            activities.push(result.value);\n          }\n        });\n      }\n\n      activities.sort((a, b) => b.timestamp - a.timestamp);\n\n      return {\n        activities,\n        pagination: {\n          currentPage: page,\n          totalPages: Math.ceil(ids.length / limit),\n          totalItems: ids.length,\n          hasNextPage: endIndex < ids.length,\n          hasPreviousPage: page > 1,\n          limit\n        }\n      };\n\n    } catch (error) {\n      console.error(`Error fetching user activities for ${userAddress}:`, error);\n      return this.getEmptyResult(page, limit);\n    }\n  }\n\n  /**\n   * Get global activities (recent activities across all DAOs)\n   */\n  static async getGlobalActivities(options: PaginationOptions = {}): Promise<PaginatedActivities> {\n    const { page = 1, limit = 50 } = options;\n    \n    try {\n      console.log(`Fetching global activities using contract ABI`);\n      \n      const initialized = await this.isInitialized();\n      if (!initialized) {\n        return this.getEmptyResult(page, limit);\n      }\n\n      // Get total activities count using view function\n      const totalActivitiesResult = await cedraClient.view({\n        payload: {\n          function: getViewFunction('get_total_activities') as `${string}::${string}::${string}`,\n          functionArguments: []\n        }\n      });\n\n      const totalActivities = Number(totalActivitiesResult[0]);\n      console.log(`Total activities in system: ${totalActivities}`);\n\n      if (totalActivities === 0) {\n        return this.getEmptyResult(page, limit);\n      }\n\n      // Calculate pagination for recent activities (reverse order)\n      const startIndex = Math.max(0, totalActivities - (page * limit));\n      const endIndex = Math.max(0, totalActivities - ((page - 1) * limit));\n      \n      console.log(`Fetching recent activities from ${startIndex} to ${endIndex}`);\n\n      const activities: Activity[] = [];\n      \n      // Fetch activities in reverse order (most recent first)\n      const activityIds: number[] = [];\n      for (let i = endIndex - 1; i >= startIndex; i--) {\n        activityIds.push(i);\n      }\n\n      // Fetch activities in batches\n      const batchSize = 10;\n      for (let i = 0; i < activityIds.length; i += batchSize) {\n        const batch = activityIds.slice(i, i + batchSize);\n        const batchPromises = batch.map(id => this.getActivityById(id));\n        \n        const batchResults = await Promise.allSettled(batchPromises);\n        batchResults.forEach(result => {\n          if (result.status === 'fulfilled' && result.value) {\n            activities.push(result.value);\n          }\n        });\n      }\n\n      // Sort by timestamp descending\n      activities.sort((a, b) => b.timestamp - a.timestamp);\n\n      return {\n        activities,\n        pagination: {\n          currentPage: page,\n          totalPages: Math.ceil(totalActivities / limit),\n          totalItems: totalActivities,\n          hasNextPage: startIndex > 0,\n          hasPreviousPage: page > 1,\n          limit\n        }\n      };\n\n    } catch (error) {\n      console.error(`Error fetching global activities:`, error);\n      return this.getEmptyResult(page, limit);\n    }\n  }\n\n  /**\n   * Get activity by ID using contract ABI\n   */\n  private static async getActivityById(activityId: number): Promise<Activity | null> {\n    // Check cache first\n    const cached = this.activityDetailCache.get(activityId);\n    if (cached && (Date.now() - cached.timestamp) < this.DETAIL_TTL_MS) {\n      return cached.activity;\n    }\n\n    try {\n      // Fetch activity by ID using view function\n      const activityRecord = await cedraClient.view({\n        payload: {\n          function: getViewFunction('get_activity_by_id') as `${string}::${string}::${string}`,\n          functionArguments: [activityId]\n        }\n      });\n\n      const record = activityRecord[0] as any;\n      \n      // Parse ActivityRecord struct fields according to ABI structure\n      const activityType = Number(record.activity_type);\n      const typeInfo = getActivityInfo(activityType);\n      \n      if (!typeInfo) {\n        console.warn(`Unknown activity type: ${activityType}`);\n        return null;\n      }\n\n      // Convert transaction hash from vector<u8> to hex string\n      const transactionHash = Array.isArray(record.transaction_hash) \n        ? this.vectorToHex(record.transaction_hash)\n        : record.transaction_hash || '';\n\n      // Convert amount from octas to MOVE tokens if present\n      const amount = record.amount ? Number(record.amount) / 100000000 : undefined; // Using 1e8 conversion\n\n      // Convert timestamp (contract stores in seconds, UI expects milliseconds for some displays)\n      const timestamp = Number(record.timestamp) * 1000;\n\n      const activity: Activity = {\n        id: String(record.id),\n        type: typeInfo.type as Activity['type'],\n        title: record.title || typeInfo.title, // Use contract title if available\n        description: record.description || typeInfo.title,\n        amount,\n        user: record.user_address as string,\n        dao: record.dao_address as string,\n        timestamp,\n        transactionHash,\n        blockNumber: Number(record.block_number),\n        status: 'success' // Assume success if it's recorded\n      };\n      // Save to cache\n      this.activityDetailCache.set(activityId, { activity, timestamp: Date.now() });\n      return activity;\n\n    } catch (error) {\n      console.warn(`Failed to fetch activity ${activityId}:`, error);\n      return null;\n    }\n  }\n\n  // Convert ActivityEvent into Activity\n  private static eventToActivity(ev: any): Activity {\n    const d = ev?.data || {};\n    const t = Number(d.activity_type || 0);\n    const typeInfo = getActivityInfo(t);\n    const txHash = Array.isArray(d.transaction_hash) ? this.vectorToHex(d.transaction_hash) : (d.transaction_hash || ev?.version || '');\n    \n    // Convert amount from octas to MOVE tokens (using 1e8 conversion factor)\n    const amount = d.amount ? Number(d.amount) / 100000000 : undefined;\n    \n    // Timestamp handling - events store in seconds, convert to milliseconds\n    const timestamp = Number(d.timestamp || 0) * 1000;\n    \n    return {\n      id: String(d.activity_id || ev?.sequence_number || ev?.version || Date.now()),\n      type: typeInfo.type as Activity['type'],\n      title: d.title || typeInfo.title, // Use event title if available\n      description: (d.description as string) || typeInfo.title,\n      amount,\n      user: (d.user_address as string) || '',\n      dao: (d.dao_address as string) || '',\n      timestamp,\n      transactionHash: txHash,\n      blockNumber: Number(d.block_number || 0),\n      status: 'success',\n    };\n  }\n\n  /**\n   * Convert vector<u8> to hex string\n   */\n  private static vectorToHex(vector: number[]): string {\n    if (!Array.isArray(vector)) return '';\n    return '0x' + vector.map(byte => byte.toString(16).padStart(2, '0')).join('');\n  }\n\n  /**\n   * Get empty result for error cases\n   */\n  private static getEmptyResult(page: number, limit: number): PaginatedActivities {\n    return {\n      activities: [],\n      pagination: {\n        currentPage: page,\n        totalPages: 0,\n        totalItems: 0,\n        hasNextPage: false,\n        hasPreviousPage: false,\n        limit\n      }\n    };\n  }\n\n  /**\n   * Get activity display information\n   */\n  static getActivityDisplay(activity: Activity) {\n    const activityType = Object.values(ACTIVITY_TYPES).find(t => t.type === activity.type);\n    \n    // Use centralized activity styles\n\n    return {\n      icon: activityType?.icon || '',\n      color: getActivityStyles(activity.type),\n      displayType: activity.type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n    };\n  }\n\n  /**\n   * Format time ago\n   */\n  static formatTimeAgo(timestamp: number): string {\n    const now = Date.now();\n    const diffMs = now - timestamp;\n    const diffMinutes = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMs < 60000) return 'Just now';\n    if (diffMinutes < 60) return `${diffMinutes}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return new Date(timestamp).toLocaleDateString();\n  }\n}\n\n/**\n * React hook for DAO activities using optimized contract calls\n */\nexport const useDAOActivities = (daoAddress: string, options: PaginationOptions = {}) => {\n  const [result, setResult] = useState<PaginatedActivities>({\n    activities: [],\n    pagination: {\n      currentPage: 1,\n      totalPages: 0,\n      totalItems: 0,\n      hasNextPage: false,\n      hasPreviousPage: false,\n      limit: options.limit || 20\n    }\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchActivities = useCallback(async () => {\n    if (!daoAddress) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const activities = await OptimizedActivityTracker.getDAOActivities(daoAddress, options);\n      setResult(activities);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to fetch activities';\n      setError(errorMessage);\n      console.error('Error in useDAOActivities:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [daoAddress, JSON.stringify(options)]);\n\n  useEffect(() => {\n    fetchActivities();\n  }, [fetchActivities]);\n\n  return {\n    ...result,\n    isLoading,\n    error,\n    refetch: fetchActivities\n  };\n};\n\n/**\n * React hook for global activities using optimized contract calls\n */\nexport const useGlobalActivities = (options: PaginationOptions = {}) => {\n  const [result, setResult] = useState<PaginatedActivities>({\n    activities: [],\n    pagination: {\n      currentPage: 1,\n      totalPages: 0,\n      totalItems: 0,\n      hasNextPage: false,\n      hasPreviousPage: false,\n      limit: options.limit || 50\n    }\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchActivities = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const activities = await OptimizedActivityTracker.getGlobalActivities(options);\n      setResult(activities);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to fetch activities';\n      setError(errorMessage);\n      console.error('Error in useGlobalActivities:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [JSON.stringify(options)]);\n\n  useEffect(() => {\n    fetchActivities();\n  }, [fetchActivities]);\n\n  return {\n    ...result,\n    isLoading,\n    error,\n    refetch: fetchActivities\n  };\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\usePlatformStats.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1314,1317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1314,1317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_totalProposals' is assigned a value but never used.","line":85,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"_totalProposals"},"fix":{"range":[2465,2480],"text":""},"desc":"Remove unused variable '_totalProposals'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_totalProposals' is assigned a value but never used.","line":85,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3447,3450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3447,3450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4740,4743],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4740,4743],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6536,6539],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6536,6539],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6555,6558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6555,6558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":241,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7338,7341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7338,7341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'registryError' is defined but never used.","line":249,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":249,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'registryError' is defined but never used.","line":249,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":249,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":249,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7602,7605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7602,7605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":277,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8524,8527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8524,8527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'countError' is defined but never used.","line":285,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":285,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'countError' is defined but never used.","line":285,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":285,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":285,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8783,8786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8783,8786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":313,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":313,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9738,9741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9738,9741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_totalProposals' is assigned a value but never used.","line":332,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":332,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"_totalProposals"},"fix":{"range":[10432,10447],"text":""},"desc":"Remove unused variable '_totalProposals'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_totalProposals' is assigned a value but never used.","line":332,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":332,"endColumn":44},{"ruleId":"prefer-const","severity":1,"message":"'totalVotes' is never reassigned. Use 'const' instead.","line":362,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":362,"endColumn":23,"fix":{"range":[11345,11364],"text":"const totalVotes = 0;"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":526,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16036,16039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16036,16039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":526,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16055,16058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16055,16058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\n * Platform Statistics Service for Cedra Network\n *\n * Retrieves platform-wide statistics and metrics\n * Uses Cedra SDK for blockchain interactions\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { MODULE_ADDRESS } from '../cedra_service/constants';\nimport { fetchDAOCreationEvents } from '../services/graphqlService';\n\nexport interface PlatformStats {\n  totalDAOs: number;\n  activeProposals: number;\n  totalVotes: number;\n  totalMembers: number;\n  lastUpdated: number;\n}\n\nexport interface PlatformOverview {\n  totalDAOs: number;\n  activeProposals: number;\n  totalVotes: number;\n  totalMembers: number;\n  lastUpdated: number;\n}\n\nexport interface RealtimePlatformStats {\n  totalDAOs: number;\n  activeProposals: number;\n  totalVotes: number;\n  totalMembers: number;\n}\n\nexport interface DAOStats {\n  dao_address: string;\n  active_proposals: number;\n  total_proposals: number;\n  total_members: number;\n  total_votes: number;\n}\n\nexport class PlatformStatsService {\n  /**\n   * Initialize the platform statistics system (should be called once)\n   * This needs to be called by the platform admin before other functions work\n   */\n  static async initializePlatform(adminSigner: any): Promise<boolean> {\n    try {\n      console.log('≡ƒöº Initializing platform statistics system...');\n\n      const payload = {\n        function: `${MODULE_ADDRESS}::platform_stats::initialize_platform`,\n        typeArguments: [],\n        functionArguments: []\n      };\n\n      const result = await adminSigner.signAndSubmitTransaction({ payload });\n      console.log(' Platform statistics initialized:', result);\n      return true;\n    } catch (error) {\n      console.error('Failed to initialize platform:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get platform overview statistics using the updated contract\n   * Returns: [total_daos, total_proposals, active_proposals, total_votes_cast, total_community_members]\n   */\n  static async getPlatformOverview(): Promise<PlatformOverview> {\n    try {\n      console.log('≡ƒöì Fetching platform overview from latest contract...');\n\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::platform_stats::get_platform_overview`,\n          functionArguments: [] // No arguments needed for the latest contract\n        }\n      });\n\n      const [totalDAOs, _totalProposals, activeProposals, totalVotes, totalMembers] = result.map(val => Number(val));\n\n      return {\n        totalDAOs,\n        activeProposals,\n        totalVotes,\n        totalMembers,\n        lastUpdated: Date.now() // Generate timestamp on frontend\n      };\n    } catch (error) {\n      console.error('Error fetching platform overview:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get platform statistics using the new struct-based function\n   * Returns PlatformStatsData struct with all statistics\n   */\n  static async getPlatformStats(): Promise<RealtimePlatformStats> {\n    try {\n      console.log('≡ƒöì Fetching platform stats from new contract function...');\n\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::platform_stats::get_platform_stats`,\n          functionArguments: [] // No arguments needed\n        }\n      });\n\n      // Result is a PlatformStatsData struct\n      const statsData = result[0] as any;\n\n      return {\n        totalDAOs: Number(statsData.total_daos),\n        activeProposals: Number(statsData.active_proposals),\n        totalVotes: Number(statsData.total_votes_cast),\n        totalMembers: Number(statsData.total_community_members)\n      };\n    } catch (error) {\n      console.error('Error fetching platform stats:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get total number of registered DAOs\n   */\n  static async getTotalDAOs(): Promise<number> {\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::platform_stats::get_total_daos`,\n          functionArguments: [] // No arguments needed for the updated contract\n        }\n      });\n\n      return Number(result[0]);\n    } catch (error) {\n      console.error('Error fetching total DAOs:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get list of all registered DAO addresses\n   */\n  static async getRegisteredDAOs(): Promise<string[]> {\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::platform_stats::get_all_dao_addresses`,\n          functionArguments: [] // No arguments needed for the updated contract\n        }\n      });\n\n      return result[0] as string[];\n    } catch (error: any) {\n      // Handle platform not initialized gracefully\n      if (error.message?.includes('ABORTED') && error.message?.includes('platform_stats')) {\n        console.warn(' Platform statistics not initialized - returning empty list');\n        return [];\n      }\n      console.error('Error fetching registered DAOs:', error);\n      return []; // Return empty array instead of throwing\n    }\n  }\n\n  /**\n   * Get detailed stats for a specific DAO\n   * Returns: [total_proposals, active_proposals, total_members, total_voting_power, total_votes]\n   */\n  static async getDAODetailedStats(daoAddress: string): Promise<{\n    activeProposals: number;\n    totalProposals: number;\n    totalMembers: number;\n    totalVotes: number;\n    totalVotingPower: number;\n  }> {\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::platform_stats::get_dao_detailed_stats`,\n          functionArguments: [daoAddress]\n        }\n      });\n\n      const [totalProposals, activeProposals, totalMembers, totalVotingPower, totalVotes] = result.map(val => Number(val));\n\n      return {\n        activeProposals,\n        totalProposals,\n        totalMembers,\n        totalVotes,\n        totalVotingPower\n      };\n    } catch (error) {\n      console.error('Error fetching DAO detailed stats:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get stats for multiple DAOs\n   */\n  static async getMultipleDAOStats(daoAddresses: string[]): Promise<DAOStats[]> {\n    try {\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::platform_stats::get_multiple_dao_stats`,\n          functionArguments: [daoAddresses]\n        }\n      });\n\n      // The result should be an array of DAOStats structs\n      return (result[0] as any[]).map((stats: any) => ({\n        dao_address: stats.anchor_addrx, // Updated field name in contract\n        active_proposals: Number(stats.active_proposals),\n        total_proposals: Number(stats.total_proposals),\n        total_members: Number(stats.total_members),\n        total_votes: Number(stats.total_votes)\n      }));\n    } catch (error) {\n      console.error('Error fetching multiple DAO stats:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get platform stats with optimized DAO discovery (same pattern as useFetchDAOs)\n   */\n  static async getPlatformStatsWithFallback(): Promise<PlatformStats> {\n    try {\n      console.log('≡ƒöì Fetching platform stats with optimized discovery...');\n\n      // First check if registry is initialized with error handling\n      let registryInitialized: any;\n      try {\n        registryInitialized = await cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::dao_core_file::is_registry_initialized`,\n            functionArguments: []\n          }\n        });\n      } catch (registryError: any) {\n        console.log(' Contract not deployed yet - using fallback stats');\n        // Fallback to event-based discovery when contract is not available\n        const daoAddresses = await this.getDAOAddressesFromEvents();\n        return {\n          totalDAOs: daoAddresses.length,\n          activeProposals: 0,\n          totalVotes: 0,\n          totalMembers: 0,\n          lastUpdated: Date.now()\n        };\n      }\n\n      if (!registryInitialized[0]) {\n        console.log(' DAO registry not initialized - using event-based discovery');\n        const daoAddresses = await this.getDAOAddressesFromEvents();\n        const totalDAOs = daoAddresses.length;\n\n        return {\n          totalDAOs,\n          activeProposals: 0,\n          totalVotes: 0,\n          totalMembers: 0,\n          lastUpdated: Date.now()\n        };\n      }\n\n      // Check if registry has DAOs with error handling\n      let totalDAOsFromRegistry: any;\n      try {\n        totalDAOsFromRegistry = await cedraClient.view({\n          payload: {\n            function: `${MODULE_ADDRESS}::dao_core_file::get_total_dao_count`,\n            functionArguments: []\n          }\n        });\n      } catch (countError: any) {\n        console.log(' Registry functions not available - using event discovery');\n        // Fallback to event-based discovery\n        const daoAddresses = await this.getDAOAddressesFromEvents();\n        return {\n          totalDAOs: daoAddresses.length,\n          activeProposals: 0,\n          totalVotes: 0,\n          totalMembers: 0,\n          lastUpdated: Date.now()\n        };\n      }\n\n      const registryDAOCount = Number(totalDAOsFromRegistry[0]);\n      console.log(' DAOs in registry:', registryDAOCount);\n\n      if (registryDAOCount > 0) {\n        // Registry has DAOs, use contract stats functions\n        console.log(' Using registry-based platform stats...');\n\n        try {\n          const result = await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::platform_stats::get_platform_stats`,\n              functionArguments: []\n            }\n          });\n\n          const statsData = result[0] as any;\n\n          return {\n            totalDAOs: Number(statsData.total_daos),\n            activeProposals: Number(statsData.active_proposals),\n            totalVotes: Number(statsData.total_votes_cast),\n            totalMembers: Number(statsData.total_community_members),\n            lastUpdated: Date.now()\n          };\n        } catch (contractError) {\n          console.warn('Contract stats failed, trying tuple function:', contractError);\n\n          const result = await cedraClient.view({\n            payload: {\n              function: `${MODULE_ADDRESS}::platform_stats::get_platform_overview`,\n              functionArguments: []\n            }\n          });\n\n          const [totalDAOs, _totalProposals, activeProposals, totalVotes, totalMembers] = result.map(val => Number(val));\n\n          return {\n            totalDAOs,\n            activeProposals,\n            totalVotes,\n            totalMembers,\n            lastUpdated: Date.now()\n          };\n        }\n      } else {\n        // Registry is empty, use event-based discovery (same as useFetchDAOs pattern)\n        console.log('Registry empty, using event-based DAO discovery...');\n\n        const daoAddresses = await this.getDAOAddressesFromEvents();\n        const totalDAOs = daoAddresses.length;\n\n        if (totalDAOs === 0) {\n          return {\n            totalDAOs: 0,\n            activeProposals: 0,\n            totalVotes: 0,\n            totalMembers: 0,\n            lastUpdated: Date.now()\n          };\n        }\n\n        // Aggregate stats from discovered DAOs\n        let totalMembers = 0;\n        let activeProposals = 0;\n        let totalVotes = 0;\n\n        console.log(` Aggregating stats from ${totalDAOs} discovered DAOs...`);\n\n        for (const daoAddress of daoAddresses) {\n          try {\n            // Check if DAO exists and get member count\n            const memberCount = await cedraClient.view({\n              payload: {\n                function: `${MODULE_ADDRESS}::membership::total_members`,\n                functionArguments: [daoAddress]\n              }\n            });\n            totalMembers += Number(memberCount[0]);\n\n            // Get proposal count if proposals exist\n            try {\n              const proposalCount = await cedraClient.view({\n                payload: {\n                  function: `${MODULE_ADDRESS}::proposal::get_proposals_count`,\n                  functionArguments: [daoAddress]\n                }\n              });\n              // For now, assume 10% of proposals are active (we can improve this later)\n              const daoProposals = Number(proposalCount[0]);\n              activeProposals += Math.ceil(daoProposals * 0.1);\n            } catch {\n              // Proposals not initialized for this DAO\n            }\n          } catch (error) {\n            console.warn(`Failed to get stats for DAO ${daoAddress}:`, error);\n          }\n        }\n\n        return {\n          totalDAOs,\n          activeProposals,\n          totalVotes, // We'll implement vote counting later\n          totalMembers,\n          lastUpdated: Date.now()\n        };\n      }\n    } catch (error) {\n      console.error('All platform stats methods failed:', error);\n\n      // Return zeros but indicate system is available\n      return {\n        totalDAOs: 0,\n        activeProposals: 0,\n        totalVotes: 0,\n        totalMembers: 0,\n        lastUpdated: Date.now()\n      };\n    }\n  }\n\n  /**\n   * Get DAO addresses from events using Cedra GraphQL indexer\n   * @see https://docs.cedra.network/indexer\n   */\n  static async getDAOAddressesFromEvents(): Promise<string[]> {\n    try {\n      console.log(' Discovering DAOs via Cedra GraphQL indexer...');\n\n      // Use Cedra GraphQL indexer to fetch DAO creation events\n      const daoAddresses = await fetchDAOCreationEvents(\n        MODULE_ADDRESS,\n        'dao_core_file::DAOCreated'\n      );\n\n      if (daoAddresses && daoAddresses.length > 0) {\n        console.log(' Found DAOs via indexer:', daoAddresses.length);\n        return daoAddresses;\n      }\n\n      // Fallback to empty array if no events found\n      console.log(' No DAOs found in indexer');\n      return [];\n\n    } catch (error) {\n      console.error('Event-based DAO discovery failed:', error);\n      return [];\n    }\n  }\n}\n\n/**\n * React hook for platform statistics\n */\nexport const usePlatformStats = (refreshInterval: number = 30000) => {\n  const [stats, setStats] = useState<PlatformStats>({\n    totalDAOs: 0,\n    activeProposals: 0,\n    totalVotes: 0,\n    totalMembers: 0,\n    lastUpdated: 0\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchStats = useCallback(async () => {\n    try {\n      setError(null);\n      const platformStats = await PlatformStatsService.getPlatformStatsWithFallback();\n      setStats(platformStats);\n    } catch (err) {\n      console.error('Error fetching platform stats:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch platform stats');\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Initial fetch\n  useEffect(() => {\n    fetchStats();\n  }, [fetchStats]);\n\n  // Auto refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchStats, refreshInterval);\n    return () => clearInterval(interval);\n  }, [fetchStats, refreshInterval]);\n\n  const refresh = useCallback(() => {\n    setIsLoading(true);\n    fetchStats();\n  }, [fetchStats]);\n\n  return {\n    stats,\n    isLoading,\n    error,\n    refresh,\n    lastUpdated: new Date(stats.lastUpdated)\n  };\n};\n\n/**\n * React hook for individual DAO statistics from platform contract\n */\n/**\n * Get all DAO statistics from the platform\n */\nexport const useAllDAOStats = () => {\n  const [stats, setStats] = useState<DAOStats[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchAllDAOStats = useCallback(async () => {\n    try {\n      setError(null);\n      setIsLoading(true);\n\n      const result = await cedraClient.view({\n        payload: {\n          function: `${MODULE_ADDRESS}::platform_stats::get_all_dao_stats`,\n          functionArguments: []\n        }\n      });\n\n      // Result is an array of DAOStats structs\n      const daoStatsArray = (result[0] as any[]).map((stats: any) => ({\n        dao_address: stats.anchor_addrx,\n        active_proposals: Number(stats.active_proposals),\n        total_proposals: Number(stats.total_proposals),\n        total_members: Number(stats.total_members),\n        total_votes: Number(stats.total_votes)\n      }));\n\n      setStats(daoStatsArray);\n    } catch (err) {\n      console.error('Error fetching all DAO stats:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch all DAO stats');\n      setStats([]); // Return empty array on error\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchAllDAOStats();\n  }, [fetchAllDAOStats]);\n\n  const refresh = useCallback(() => {\n    setIsLoading(true);\n    fetchAllDAOStats();\n  }, [fetchAllDAOStats]);\n\n  return {\n    stats,\n    isLoading,\n    error,\n    refresh\n  };\n};\n\nexport const useIndividualDAOStats = (daoAddress: string) => {\n  const [stats, setStats] = useState<{\n    activeProposals: number;\n    totalProposals: number;\n    totalMembers: number;\n    totalVotes: number;\n    totalVotingPower: number;\n  } | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchDAOStats = useCallback(async () => {\n    if (!daoAddress) return;\n\n    try {\n      setError(null);\n      setIsLoading(true);\n      const daoStats = await PlatformStatsService.getDAODetailedStats(daoAddress);\n      setStats(daoStats);\n    } catch (err) {\n      console.error('Error fetching DAO stats:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch DAO stats');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [daoAddress]);\n\n  useEffect(() => {\n    fetchDAOStats();\n  }, [fetchDAOStats]);\n\n  const refresh = useCallback(() => {\n    fetchDAOStats();\n  }, [fetchDAOStats]);\n\n  return {\n    stats,\n    isLoading,\n    error,\n    refresh\n  };\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useProfile.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_avatarUrl' is assigned a value but never used.","line":36,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"_avatarUrl"},"fix":{"range":[856,881],"text":""},"desc":"Remove unused variable '_avatarUrl'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_avatarUrl' is assigned a value but never used.","line":36,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":64},{"ruleId":"no-unused-vars","severity":1,"message":"'_avatarUrl' is assigned a value but never used.","line":48,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"_avatarUrl"},"fix":{"range":[1186,1211],"text":""},"desc":"Remove unused variable '_avatarUrl'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_avatarUrl' is assigned a value but never used.","line":48,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":64},{"ruleId":"no-unused-vars","severity":1,"message":"'_displayName' is defined but never used.","line":53,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"_displayName"},"fix":{"range":[1328,1348],"text":""},"desc":"Remove unused variable '_displayName'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_displayName' is defined but never used.","line":53,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":48},{"ruleId":"no-unused-vars","severity":1,"message":"'_avatarUrl' is defined but never used.","line":58,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"_avatarUrl"},"fix":{"range":[1463,1481],"text":""},"desc":"Remove unused variable '_avatarUrl'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_avatarUrl' is defined but never used.","line":58,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'_userAddress' is defined but never used.","line":137,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"_userAddress"},"fix":{"range":[3582,3609],"text":""},"desc":"Remove unused variable '_userAddress'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_userAddress' is defined but never used.","line":137,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":46},{"ruleId":"no-unused-vars","severity":1,"message":"'_userAddress' is defined but never used.","line":149,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":149,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"_userAddress"},"fix":{"range":[3927,3954],"text":""},"desc":"Remove unused variable '_userAddress'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_userAddress' is defined but never used.","line":149,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * User Profile Service - STUB VERSION\n * \n * Profile contract has been removed. These are stub functions that return\n * fallback data (truncated addresses) for components that still reference profiles.\n */\n\nimport { useState } from 'react'\nimport { truncateAddress } from '../utils/addressUtils'\n\n// Profile types\nexport interface UserProfile {\n  displayName: string\n  avatarUrl: string\n  walletAddress: string\n  createdAt: number\n  updatedAt: number\n}\n\nexport interface BasicProfile {\n  displayName: string\n  avatarUrl: string\n}\n\nexport interface ProfileWithExists {\n  displayName: string\n  avatarUrl: string\n  exists: boolean\n}\n\n// Stub hooks - Profile contract was removed\nexport function useCreateProfile() {\n  const [isPending] = useState(false)\n  const [error] = useState<string | null>(null)\n\n  const createProfile = async (_displayName: string, _avatarUrl: string = '') => {\n    console.warn('Profile contract has been removed')\n    return null\n  }\n\n  return { createProfile, isPending, error }\n}\n\nexport function useUpdateProfile() {\n  const [isPending] = useState(false)\n  const [error] = useState<string | null>(null)\n\n  const updateProfile = async (_displayName: string, _avatarUrl: string = '') => {\n    console.warn('Profile contract has been removed')\n    return null\n  }\n\n  const updateDisplayName = async (_displayName: string) => {\n    console.warn('Profile contract has been removed')\n    return null\n  }\n\n  const updateAvatarUrl = async (_avatarUrl: string) => {\n    console.warn('Profile contract has been removed')\n    return null\n  }\n\n  return { updateProfile, updateDisplayName, updateAvatarUrl, isPending, error }\n}\n\n// Returns truncated address as fallback\nexport function useGetProfile(userAddress: string | null) {\n  const [data] = useState<UserProfile | null>(\n    userAddress ? {\n      displayName: truncateAddress(userAddress),\n      avatarUrl: '',\n      walletAddress: userAddress,\n      createdAt: 0,\n      updatedAt: 0,\n    } : null\n  )\n  const [isLoading] = useState(false)\n  const [error] = useState<string | null>(null)\n\n  const refetch = async () => {\n    console.warn('Profile contract has been removed')\n  }\n\n  return { data, isLoading, error, refetch }\n}\n\nexport function useGetBasicProfile(userAddress: string | null) {\n  const [data] = useState<BasicProfile | null>(\n    userAddress ? {\n      displayName: truncateAddress(userAddress),\n      avatarUrl: '',\n    } : null\n  )\n  const [isLoading] = useState(false)\n  const [error] = useState<string | null>(null)\n\n  const refetch = async () => {\n    console.warn('Profile contract has been removed')\n  }\n\n  return { data, isLoading, error, refetch }\n}\n\nexport function useGetMultipleProfiles() {\n  const [isLoading] = useState(false)\n  const [error] = useState<string | null>(null)\n\n  const getMultipleDisplayNames = async (addresses: string[]): Promise<string[]> => {\n    return addresses.map(addr => truncateAddress(addr))\n  }\n\n  const getMultipleAvatarUrls = async (addresses: string[]): Promise<string[]> => {\n    return addresses.map(() => '')\n  }\n\n  const getMultipleBasicProfiles = async (addresses: string[]): Promise<BasicProfile[]> => {\n    return addresses.map(addr => ({\n      displayName: truncateAddress(addr),\n      avatarUrl: '',\n    }))\n  }\n\n  const checkMultipleProfilesExist = async (addresses: string[]): Promise<boolean[]> => {\n    return addresses.map(() => false)\n  }\n\n  return {\n    getMultipleDisplayNames,\n    getMultipleAvatarUrls,\n    getMultipleBasicProfiles,\n    checkMultipleProfilesExist,\n    isLoading,\n    error,\n  }\n}\n\nexport function useProfileExists(_userAddress: string | null) {\n  const [exists] = useState<boolean | null>(false)\n  const [isLoading] = useState(false)\n  const [error] = useState<string | null>(null)\n\n  const refetch = async () => {\n    console.warn('Profile contract has been removed')\n  }\n\n  return { exists, isLoading, error, refetch }\n}\n\nexport function useValidateProfile(_userAddress: string | null) {\n  const [isValid] = useState<boolean | null>(false)\n  const [isLoading] = useState(false)\n  const [error] = useState<string | null>(null)\n\n  const refetch = async () => {\n    console.warn('Profile contract has been removed')\n  }\n\n  return { isValid, isLoading, error, refetch }\n}\n\n// Utility functions\nexport const getDisplayNameOrAddress = (profile: BasicProfile | null, address: string): string => {\n  return profile?.displayName && profile.displayName.trim()\n    ? profile.displayName\n    : truncateAddress(address)\n}\n\nexport const getAvatarUrlOrDefault = (profile: BasicProfile | null, defaultAvatar: string = ''): string => {\n  return profile?.avatarUrl && profile.avatarUrl.trim()\n    ? profile.avatarUrl\n    : defaultAvatar\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useTradePortKeys.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1080,1083],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1080,1083],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":69,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1534,1537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1534,1537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Service for Cedra Network\n *\n * Handles TradePort integration and key management\n * Uses Cedra SDK for blockchain interactions\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { useState, useEffect } from \"react\";\n\nconst TRADEPORT_KEYS_COLLECTION_ID = \"\";\nconst INDEXER_URL = \"https://graphql.cedra.dev/v1/graphql\";\n\nconst query = `\n  query GetTradePortKeys($address: String, $collectionId: String) {\n    current_token_ownerships_v2(\n      where: {\n        owner_address: { _eq: $address }\n        amount: { _gt: \"0\" }\n        current_token_data: {\n          current_collection: {\n            collection_id: { _eq: $collectionId }\n          }\n        }\n      }\n    ) {\n      current_token_data {\n        collection_id\n        token_name\n        token_data_id\n        token_uri\n        current_collection {\n          collection_id\n          collection_name\n          description\n          creator_address\n          uri\n        }\n      }\n      owner_address\n      amount\n    }\n  }\n`;\n\nasync function graphqlRequest(url: string, query: string, variables: any) {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query,\n      variables,\n    }),\n  });\n\n  const json = await response.json();\n\n  if (json.errors) {\n    throw new Error(json.errors[0].message);\n  }\n\n  return json.data;\n}\n\nexport function useTradePortKeys(address?: string | null) {\n  const [data, setData] = useState<{ hasNFT: boolean; nfts: any[]; count: number } | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (!address) {\n      setData({ hasNFT: false, nfts: [], count: 0 });\n      setIsLoading(false);\n      return;\n    }\n\n    let cancelled = false;\n\n    const fetchNFTs = async () => {\n      try {\n        setIsLoading(true);\n\n        const res = await graphqlRequest(INDEXER_URL, query, {\n          address,\n          collectionId: TRADEPORT_KEYS_COLLECTION_ID,\n        });\n\n        const ownerships = res.current_token_ownerships_v2;\n\n        if (!cancelled) {\n          setData({\n            hasNFT: ownerships && ownerships.length > 0,\n            nfts: ownerships || [],\n            count: ownerships?.length || 0,\n          });\n          setIsLoading(false);\n        }\n      } catch (error) {\n        console.error(\"Error fetching Smurf NFTs:\", error);\n        if (!cancelled) {\n          setData({ hasNFT: false, nfts: [], count: 0 });\n          setIsLoading(false);\n        }\n      }\n    };\n\n    fetchNFTs();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [address]);\n\n  return {\n    data: data || { hasNFT: false, nfts: [], count: 0 },\n    isLoading\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\useUserDAOs.ts","messages":[{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":122,"column":33,"nodeType":"BlockStatement","messageId":"unexpected","endLine":123,"endColumn":10,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3488,3497],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":206,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6879,6882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6879,6882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":245,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8152,8155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8152,8155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * User DAO Membership Service for Cedra Network\n *\n * Manages user's DAO memberships and participation\n * Uses Cedra SDK for blockchain interactions\n *\n * @see https://docs.cedra.network/sdks/typescript-sdk\n */\n\nimport { useState, useEffect } from 'react';\nimport { useWallet } from '../contexts/CedraWalletProvider';\nimport { ABI } from '../services_abi/dao_core';\n\ninterface DAOInfo {\n  address: string;\n  name: string;\n  subname?: string;\n  description: string;\n  created_at: number;\n  members?: number;\n  proposals?: number;\n  logo?: {\n    is_url: boolean;\n    url: string;\n    data: number[];\n  };\n  background?: {\n    is_url: boolean;\n    url: string;\n    data: number[];\n  };\n}\n\ninterface UseUserDAOsReturn {\n  userDAOs: {\n    created: DAOInfo[];\n    joined: DAOInfo[];\n    all: DAOInfo[];\n  };\n  isLoading: boolean;\n  error: string | null;\n}\n\nexport function useUserDAOs(): UseUserDAOsReturn {\n  const { account } = useWallet();\n  const [userDAOs, setUserDAOs] = useState<{\n    created: DAOInfo[];\n    joined: DAOInfo[];\n    all: DAOInfo[];\n  }>({\n    created: [],\n    joined: [],\n    all: []\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!account?.address) {\n      setUserDAOs({ created: [], joined: [], all: [] });\n      return;\n    }\n\n    const fetchUserDAOs = async () => {\n      setIsLoading(true);\n      setError(null);\n      \n      try {\n        \n        // Use the Cedra testnet endpoint directly\n        const endpoint = 'https://testnet.cedra.dev/v1';\n        \n        // Fetch user's DAOs\n        const userDAOsResponse = await fetch(`${endpoint}/view`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            function: `${ABI.address}::${ABI.name}::get_user_daos`,\n            type_arguments: [],\n            arguments: [account.address]\n          })\n        });\n        \n        if (!userDAOsResponse.ok) {\n          const errorText = await userDAOsResponse.text();\n          console.error('get_user_daos failed:', errorText);\n          throw new Error(`Failed to fetch user DAOs: ${errorText}`);\n        }\n        \n        const userDAOsResult = await userDAOsResponse.json();\n        \n        // Fetch all DAOs\n        const allDAOsResponse = await fetch(`${endpoint}/view`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            function: `${ABI.address}::${ABI.name}::get_all_daos`,\n            type_arguments: [],\n            arguments: []\n          })\n        });\n        \n        if (!allDAOsResponse.ok) {\n          const errorText = await allDAOsResponse.text();\n          console.error(' get_all_daos failed:', errorText);\n          throw new Error(`Failed to fetch all DAOs: ${errorText}`);\n        }\n        \n        const allDAOsResult = await allDAOsResponse.json();\n        \n        // Process the data - handle nested array structure\n        const [createdAddresses, joinedAddresses] = userDAOsResult as [string[], string[]];\n        // The allDAOsResult is wrapped in an array, so extract the first element\n        const allDAOs = Array.isArray(allDAOsResult) && allDAOsResult.length > 0 ? allDAOsResult[0] : [];\n        \n        \n        // Debug: Check the structure of the first DAO to understand logo format\n        if (allDAOs.length > 0) {\n        }\n        \n        // Map addresses to DAO objects and fetch detailed info including logos\n        const fetchDAODetails = async (address: string): Promise<DAOInfo | undefined> => {\n          try {\n            const response = await fetch(`${endpoint}/view`, {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                function: `${ABI.address}::${ABI.name}::get_dao_info_with_subname`,\n                type_arguments: [],\n                arguments: [address]\n              })\n            });\n            \n            if (response.ok) {\n              const [name, subname, description, logo_is_url, logo_url, logo_data, bg_is_url, bg_url, bg_data, created_at] = await response.json();\n\n              // Fetch member count and proposal count\n              let memberCount = 0;\n              let proposalCount = 0;\n\n              try {\n                const memberResponse = await fetch(`${endpoint}/view`, {\n                  method: 'POST',\n                  headers: { 'Content-Type': 'application/json' },\n                  body: JSON.stringify({\n                    function: `${ABI.address}::membership::total_members`,\n                    type_arguments: [],\n                    arguments: [address]\n                  })\n                });\n                if (memberResponse.ok) {\n                  const memberData = await memberResponse.json();\n                  memberCount = Number(memberData[0] || 0);\n                }\n              } catch (err) {\n                console.warn(`Failed to fetch member count for DAO ${address}:`, err);\n              }\n\n              try {\n                const proposalResponse = await fetch(`${endpoint}/view`, {\n                  method: 'POST',\n                  headers: { 'Content-Type': 'application/json' },\n                  body: JSON.stringify({\n                    function: `${ABI.address}::proposal::get_proposals_count`,\n                    type_arguments: [],\n                    arguments: [address]\n                  })\n                });\n                if (proposalResponse.ok) {\n                  const proposalData = await proposalResponse.json();\n                  proposalCount = Number(proposalData[0] || 0);\n                }\n              } catch (err) {\n                console.warn(`Failed to fetch proposal count for DAO ${address}:`, err);\n              }\n\n              return {\n                address,\n                name: name || '',\n                subname: subname || undefined,\n                description: description || '',\n                created_at: created_at || 0,\n                members: memberCount,\n                proposals: proposalCount,\n                logo: {\n                  is_url: logo_is_url || false,\n                  url: logo_url || '',\n                  data: Array.isArray(logo_data) ? logo_data : []\n                },\n                background: {\n                  is_url: bg_is_url || false,\n                  url: bg_url || '',\n                  data: Array.isArray(bg_data) ? bg_data : []\n                }\n              };\n            }\n          } catch (err) {\n            console.error(`Failed to fetch details for DAO ${address}:`, err);\n          }\n          \n          // Fallback to summary data if detailed fetch fails\n          const summaryDAO = allDAOs.find((dao: any) => dao.address === address);\n          if (summaryDAO) {\n            return {\n              address: summaryDAO.address || address,\n              name: summaryDAO.name || '',\n              description: summaryDAO.description || '',\n              created_at: summaryDAO.created_at || 0\n            };\n          }\n          \n          return undefined;\n        };\n\n        const createdDAOsRaw = await Promise.all(\n          createdAddresses.map(address => fetchDAODetails(address))\n        );\n\n        const joinedDAOsRaw = await Promise.all(\n          joinedAddresses.map(address => fetchDAODetails(address))\n        );\n        \n        // Filter out undefined results\n        const createdDAOs = createdDAOsRaw.filter((dao): dao is DAOInfo => dao !== undefined);\n        const joinedDAOs = joinedDAOsRaw.filter((dao): dao is DAOInfo => dao !== undefined);\n        \n        // Remove duplicates\n        const allUserDAOs = [...createdDAOs];\n        joinedDAOs.forEach(dao => {\n          if (!createdDAOs.find(created => created.address === dao.address)) {\n            allUserDAOs.push(dao);\n          }\n        });\n\n        setUserDAOs({\n          created: createdDAOs,\n          joined: joinedDAOs,\n          all: allUserDAOs\n        });\n        \n      } catch (err: any) {\n        console.error(' Error fetching user DAOs:', err);\n        setError(err.message || 'Failed to fetch DAOs');\n        setUserDAOs({ created: [], joined: [], all: [] });\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchUserDAOs();\n  }, [account?.address]);\n\n  return { userDAOs, isLoading, error };\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\useServices\\userStatus.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'powerStr' is assigned a value but never used.","line":58,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"powerStr"},"fix":{"range":[1541,1575],"text":""},"desc":"Remove unused variable 'powerStr'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'powerStr' is assigned a value but never used.","line":58,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// User Status Service - Helper functions for displaying user roles and permissions\n\nexport interface UserStatus {\n  statusString: string;\n  isAdmin: boolean;\n  isCouncil: boolean;\n  isMember: boolean;\n  canCreateProposals: boolean;\n  canVote: boolean;\n  canFinalize: boolean;\n  votingPower: string;\n}\n\nexport interface VotingEligibility {\n  isMember: boolean;\n  votingPower: string;\n  hasStake: boolean;\n  userRole: number;\n}\n\n// Role constants (matching Move contract)\nexport const USER_ROLES = {\n  NOT_MEMBER: 0,\n  MEMBER: 1,\n  COUNCIL: 2,\n  ADMIN: 3\n} as const;\n\n// Status display helpers\nexport const STATUS_DISPLAYS = {\n  'Super Admin': { color: 'red', icon: '≡ƒææ' },\n  'Admin': { color: 'orange', icon: '≡ƒ¢í∩╕Å' },\n  'Council Member': { color: 'blue', icon: '≡ƒÅ¢∩╕Å' },\n  'Member': { color: 'green', icon: '≡ƒæñ' },\n  'Not a member': { color: 'gray', icon: '' }\n} as const;\n\nexport function getRoleDisplayName(roleNumber: number): string {\n  switch (roleNumber) {\n    case USER_ROLES.ADMIN:\n      return 'Admin';\n    case USER_ROLES.COUNCIL:\n      return 'Council Member';\n    case USER_ROLES.MEMBER:\n      return 'Member';\n    default:\n      return 'Not a member';\n  }\n}\n\nexport function getStatusDisplay(statusString: string) {\n  return STATUS_DISPLAYS[statusString as keyof typeof STATUS_DISPLAYS] || STATUS_DISPLAYS['Not a member'];\n}\n\n// Helper to format voting power\nexport function formatVotingPower(votingPower: bigint | string | number): string {\n  const power = typeof votingPower === 'bigint' ? votingPower : BigInt(votingPower);\n  const powerStr = power.toString();\n  \n  if (power === 0n) {\n    return '0';\n  }\n  \n  // Convert from octas to tokens (divide by 10^8)\n  const tokens = Number(power) / 100000000;\n  \n  if (tokens >= 1000000) {\n    return `${(tokens / 1000000).toFixed(1)}M`;\n  } else if (tokens >= 1000) {\n    return `${(tokens / 1000).toFixed(1)}K`;\n  } else if (tokens >= 1) {\n    return tokens.toFixed(2);\n  } else {\n    return tokens.toFixed(4);\n  }\n}\n\n// RECOMMENDED FRONTEND USAGE:\n/*\n// 1. SIMPLE STATUS CHECK (recommended for proposal creation button)\nconst statusCode = await client.view({\n  function: `${MODULE_ADDRESS}::proposal::get_user_status_code`,\n  arguments: [daoAddress, userAddress]\n});\n// Returns: 0=Not member, 1=Member, 2=Council, 3=Admin\n\n// 2. DIRECT CHECKS (most reliable)\nconst isAdmin = await client.view({\n  function: `${MODULE_ADDRESS}::proposal::is_user_admin`,\n  arguments: [daoAddress, userAddress]\n});\n\nconst isMember = await client.view({\n  function: `${MODULE_ADDRESS}::proposal::is_user_member`, \n  arguments: [daoAddress, userAddress]\n});\n\nconst canCreateProposals = await client.view({\n  function: `${MODULE_ADDRESS}::proposal::can_user_create_proposals`,\n  arguments: [daoAddress, userAddress]\n});\n\n// 3. FRONTEND LOGIC FOR PROPOSAL CREATION BUTTON\nfunction getProposalButtonText(statusCode, canCreate) {\n  if (statusCode === 3) return \"Create Proposal (Admin)\";\n  if (statusCode === 2) return \"Create Proposal (Council)\";\n  if (statusCode === 1 && canCreate) return \"Create Proposal (Member)\";\n  if (statusCode === 1) return \"Need Higher Stake\";\n  return \"Need to Join DAO\";\n}\n\n// 4. STATUS DISPLAY\nconst statusText = getRoleDisplayName(statusCode[0]);\nconst statusDisplay = getStatusDisplay(statusText);\nconsole.log(`${statusDisplay.icon} ${statusText}`);\n*/","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\utils\\addressUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\utils\\metaTags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\utils\\rpcUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[326,329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[326,329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[673,676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[673,676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[706,709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[706,709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[973,976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[973,976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1320,1323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1320,1323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1353,1356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1353,1356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1748,1751],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1748,1751],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1781,1784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1781,1784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2212,2215],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2212,2215],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2264,2267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2264,2267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2677,2680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2677,2680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'_maxRetries' is assigned a value but never used.","line":72,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":75,"suggestions":[{"messageId":"removeVar","data":{"varName":"_maxRetries"},"fix":{"range":[2681,2698],"text":""},"desc":"Remove unused variable '_maxRetries'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_maxRetries' is assigned a value but never used.","line":72,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":75},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2709,2712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2709,2712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Professional RPC utilities with advanced request management\nimport { cedraClient } from '../cedra_service/cedra-client';\nimport { managedApiCall } from '../services/apiRequestManager';\n\n// Helper to check if error is a treasury resource missing error (expected for some DAOs)\nconst isTreasuryResourceMissingError = (error: any): boolean => {\n  const errorMsg = error?.message || JSON.stringify(error);\n  return (\n    errorMsg.includes('MISSING_DATA') &&\n    errorMsg.includes('treasury') &&\n    errorMsg.includes('Failed to borrow global resource')\n  );\n};\n\n// Wrapper for view function calls with professional request management\nexport const safeView = async (payload: any, cacheKey?: string): Promise<any> => {\n  try {\n    return await managedApiCall(\n      () => cedraClient.view({ payload }),\n      {\n        cacheKey: cacheKey ? `view_${cacheKey}` : undefined,\n        cacheTtl: 1000, // Cache for 1 second only\n        priority: 1\n      }\n    );\n  } catch (error: any) {\n    // Suppress treasury resource missing errors (expected for some DAOs)\n    if (isTreasuryResourceMissingError(error)) {\n      // Return empty result instead of throwing\n      return [];\n    }\n    throw error;\n  }\n};\n\n// Wrapper for resource calls with professional request management\nexport const safeGetAccountResource = async (params: any, cacheKey?: string): Promise<any> => {\n  return managedApiCall(\n    () => cedraClient.getAccountResource(params),\n    {\n      cacheKey: cacheKey ? `resource_${cacheKey}` : undefined,\n      cacheTtl: 2000, // Cache for 2 seconds\n      priority: 2 // Higher priority for resource calls\n    }\n  );\n};\n\n// Wrapper for event calls with professional request management\nexport const safeGetModuleEventsByEventType = async (params: any, cacheKey?: string): Promise<any> => {\n  return managedApiCall(\n    () => cedraClient.getModuleEventsByEventType(params),\n    {\n      cacheKey: cacheKey ? `events_${cacheKey}` : undefined,\n      cacheTtl: 3000, // Cache for 3 seconds (events change frequently)\n      priority: 0 // Lower priority for events\n    }\n  );\n};\n\n// Wrapper for multiple calls with controlled concurrency - now handled by request manager\nexport const batchSafeView = async (payloads: any[], options?: { cachePrefix?: string }): Promise<any[]> => {\n  const promises = payloads.map((payload, index) => \n    safeView(payload, options?.cachePrefix ? `${options.cachePrefix}_${index}` : undefined)\n  );\n  \n  // Request manager handles concurrency and rate limiting automatically\n  const results = await Promise.allSettled(promises);\n  return results;\n};\n\n// Legacy function kept for compatibility\nexport const retryWithBackoff = async (fn: () => Promise<any>, _maxRetries = 3): Promise<any> => {\n  console.warn('retryWithBackoff is deprecated, use safeView/safeGetAccountResource instead');\n  return managedApiCall(fn);\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\utils\\walletAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[957,960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[957,960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1331,1334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1331,1334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useWallet } from '../contexts/CedraWalletProvider';\n\nexport type WalletContextState = ReturnType<typeof useWallet>;\n\n/**\n * Converts Cedra WalletContextState to WalletStandard format expected by Mosaic\n * This is a simplified adapter that only provides the essential wallet interface\n */\nexport const createWalletAdapter = (walletContext: WalletContextState) => {\n  if (!walletContext.account || !walletContext.connected) {\n    return undefined;\n  }\n\n  // Create a minimal wallet adapter that matches what Mosaic expects\n  return {\n    account: {\n      address: walletContext.account.address,\n      // Convert to Uint8Array for compatibility\n      publicKey: walletContext.account.publicKey instanceof Uint8Array\n        ? walletContext.account.publicKey\n        : new Uint8Array(walletContext.account.publicKey)\n    },\n    // Provide a wrapper for signAndSubmitTransaction that handles type differences\n    signAndSubmitTransaction: async (input: any) => {\n      try {\n        // The Cedra wallet should handle the transaction signing\n        return await walletContext.signAndSubmitTransaction(input);\n      } catch (error) {\n        console.error('Transaction signing failed:', error);\n        throw error;\n      }\n    },\n    connected: walletContext.connected,\n    name: walletContext.wallet?.name || 'Unknown'\n  } as any; // Type assertion to bypass strict type checking for now\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\vercel.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josep\\Desktop\\CEDRAMOVEMENT APPLICATION\\New folder\\CedraDAO\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
